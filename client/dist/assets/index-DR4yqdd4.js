var uI=Object.defineProperty;var hI=(e,t,r)=>t in e?uI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _x=(e,t,r)=>hI(e,typeof t!="symbol"?t+"":t,r);function nw(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(n,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=r(a);fetch(a.href,l)}})();function ys(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fI(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var kx={exports:{}},Md={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2;function mI(){if(d2)return Md;d2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:e,type:n,key:c,ref:a!==void 0?a:null,props:l}}return Md.Fragment=t,Md.jsx=r,Md.jsxs=r,Md}var u2;function pI(){return u2||(u2=1,kx.exports=mI()),kx.exports}var s=pI(),Nx={exports:{}},it={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2;function gI(){if(h2)return it;h2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function b(U){return U===null||typeof U!="object"?null:(U=x&&U[x]||U["@@iterator"],typeof U=="function"?U:null)}var j={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,_={};function N(U,V,te){this.props=U,this.context=V,this.refs=_,this.updater=te||j}N.prototype.isReactComponent={},N.prototype.setState=function(U,V){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,V,"setState")},N.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function C(){}C.prototype=N.prototype;function E(U,V,te){this.props=U,this.context=V,this.refs=_,this.updater=te||j}var A=E.prototype=new C;A.constructor=E,w(A,N.prototype),A.isPureReactComponent=!0;var S=Array.isArray;function T(){}var D={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function I(U,V,te){var he=te.ref;return{$$typeof:e,type:U,key:V,ref:he!==void 0?he:null,props:te}}function $(U,V){return I(U.type,V,U.props)}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function R(U){var V={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(te){return V[te]})}var q=/\/+/g;function H(U,V){return typeof U=="object"&&U!==null&&U.key!=null?R(""+U.key):V.toString(36)}function W(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(T,T):(U.status="pending",U.then(function(V){U.status==="pending"&&(U.status="fulfilled",U.value=V)},function(V){U.status==="pending"&&(U.status="rejected",U.reason=V)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function L(U,V,te,he,ye){var Ne=typeof U;(Ne==="undefined"||Ne==="boolean")&&(U=null);var ve=!1;if(U===null)ve=!0;else switch(Ne){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(U.$$typeof){case e:case t:ve=!0;break;case m:return ve=U._init,L(ve(U._payload),V,te,he,ye)}}if(ve)return ye=ye(U),ve=he===""?"."+H(U,0):he,S(ye)?(te="",ve!=null&&(te=ve.replace(q,"$&/")+"/"),L(ye,V,te,"",function(_e){return _e})):ye!=null&&(M(ye)&&(ye=$(ye,te+(ye.key==null||U&&U.key===ye.key?"":(""+ye.key).replace(q,"$&/")+"/")+ve)),V.push(ye)),1;ve=0;var je=he===""?".":he+":";if(S(U))for(var Q=0;Q<U.length;Q++)he=U[Q],Ne=je+H(he,Q),ve+=L(he,V,te,Ne,ye);else if(Q=b(U),typeof Q=="function")for(U=Q.call(U),Q=0;!(he=U.next()).done;)he=he.value,Ne=je+H(he,Q++),ve+=L(he,V,te,Ne,ye);else if(Ne==="object"){if(typeof U.then=="function")return L(W(U),V,te,he,ye);throw V=String(U),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ve}function B(U,V,te){if(U==null)return U;var he=[],ye=0;return L(U,he,"","",function(Ne){return V.call(te,Ne,ye++)}),he}function G(U){if(U._status===-1){var V=U._result;V=V(),V.then(function(te){(U._status===0||U._status===-1)&&(U._status=1,U._result=te)},function(te){(U._status===0||U._status===-1)&&(U._status=2,U._result=te)}),U._status===-1&&(U._status=0,U._result=V)}if(U._status===1)return U._result.default;throw U._result}var ce=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},ge={map:B,forEach:function(U,V,te){B(U,function(){V.apply(this,arguments)},te)},count:function(U){var V=0;return B(U,function(){V++}),V},toArray:function(U){return B(U,function(V){return V})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return it.Activity=g,it.Children=ge,it.Component=N,it.Fragment=r,it.Profiler=a,it.PureComponent=E,it.StrictMode=n,it.Suspense=h,it.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,it.__COMPILER_RUNTIME={__proto__:null,c:function(U){return D.H.useMemoCache(U)}},it.cache=function(U){return function(){return U.apply(null,arguments)}},it.cacheSignal=function(){return null},it.cloneElement=function(U,V,te){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var he=w({},U.props),ye=U.key;if(V!=null)for(Ne in V.key!==void 0&&(ye=""+V.key),V)!P.call(V,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&V.ref===void 0||(he[Ne]=V[Ne]);var Ne=arguments.length-2;if(Ne===1)he.children=te;else if(1<Ne){for(var ve=Array(Ne),je=0;je<Ne;je++)ve[je]=arguments[je+2];he.children=ve}return I(U.type,ye,he)},it.createContext=function(U){return U={$$typeof:c,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:l,_context:U},U},it.createElement=function(U,V,te){var he,ye={},Ne=null;if(V!=null)for(he in V.key!==void 0&&(Ne=""+V.key),V)P.call(V,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(ye[he]=V[he]);var ve=arguments.length-2;if(ve===1)ye.children=te;else if(1<ve){for(var je=Array(ve),Q=0;Q<ve;Q++)je[Q]=arguments[Q+2];ye.children=je}if(U&&U.defaultProps)for(he in ve=U.defaultProps,ve)ye[he]===void 0&&(ye[he]=ve[he]);return I(U,Ne,ye)},it.createRef=function(){return{current:null}},it.forwardRef=function(U){return{$$typeof:d,render:U}},it.isValidElement=M,it.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:G}},it.memo=function(U,V){return{$$typeof:f,type:U,compare:V===void 0?null:V}},it.startTransition=function(U){var V=D.T,te={};D.T=te;try{var he=U(),ye=D.S;ye!==null&&ye(te,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(T,ce)}catch(Ne){ce(Ne)}finally{V!==null&&te.types!==null&&(V.types=te.types),D.T=V}},it.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},it.use=function(U){return D.H.use(U)},it.useActionState=function(U,V,te){return D.H.useActionState(U,V,te)},it.useCallback=function(U,V){return D.H.useCallback(U,V)},it.useContext=function(U){return D.H.useContext(U)},it.useDebugValue=function(){},it.useDeferredValue=function(U,V){return D.H.useDeferredValue(U,V)},it.useEffect=function(U,V){return D.H.useEffect(U,V)},it.useEffectEvent=function(U){return D.H.useEffectEvent(U)},it.useId=function(){return D.H.useId()},it.useImperativeHandle=function(U,V,te){return D.H.useImperativeHandle(U,V,te)},it.useInsertionEffect=function(U,V){return D.H.useInsertionEffect(U,V)},it.useLayoutEffect=function(U,V){return D.H.useLayoutEffect(U,V)},it.useMemo=function(U,V){return D.H.useMemo(U,V)},it.useOptimistic=function(U,V){return D.H.useOptimistic(U,V)},it.useReducer=function(U,V,te){return D.H.useReducer(U,V,te)},it.useRef=function(U){return D.H.useRef(U)},it.useState=function(U){return D.H.useState(U)},it.useSyncExternalStore=function(U,V,te){return D.H.useSyncExternalStore(U,V,te)},it.useTransition=function(){return D.H.useTransition()},it.version="19.2.3",it}var f2;function Oc(){return f2||(f2=1,Nx.exports=gI()),Nx.exports}var v=Oc();const Ur=ys(v),xI=nw({__proto__:null,default:Ur},[v]);var Sx={exports:{}},Rd={},Cx={exports:{}},Ex={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m2;function bI(){return m2||(m2=1,(function(e){function t(L,B){var G=L.length;L.push(B);e:for(;0<G;){var ce=G-1>>>1,ge=L[ce];if(0<a(ge,B))L[ce]=B,L[G]=ge,G=ce;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var B=L[0],G=L.pop();if(G!==B){L[0]=G;e:for(var ce=0,ge=L.length,U=ge>>>1;ce<U;){var V=2*(ce+1)-1,te=L[V],he=V+1,ye=L[he];if(0>a(te,G))he<ge&&0>a(ye,te)?(L[ce]=ye,L[he]=G,ce=he):(L[ce]=te,L[V]=G,ce=V);else if(he<ge&&0>a(ye,G))L[ce]=ye,L[he]=G,ce=he;else break e}}return B}function a(L,B){var G=L.sortIndex-B.sortIndex;return G!==0?G:L.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var h=[],f=[],m=1,g=null,x=3,b=!1,j=!1,w=!1,_=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function A(L){for(var B=r(f);B!==null;){if(B.callback===null)n(f);else if(B.startTime<=L)n(f),B.sortIndex=B.expirationTime,t(h,B);else break;B=r(f)}}function S(L){if(w=!1,A(L),!j)if(r(h)!==null)j=!0,T||(T=!0,R());else{var B=r(f);B!==null&&W(S,B.startTime-L)}}var T=!1,D=-1,P=5,I=-1;function $(){return _?!0:!(e.unstable_now()-I<P)}function M(){if(_=!1,T){var L=e.unstable_now();I=L;var B=!0;try{e:{j=!1,w&&(w=!1,C(D),D=-1),b=!0;var G=x;try{t:{for(A(L),g=r(h);g!==null&&!(g.expirationTime>L&&$());){var ce=g.callback;if(typeof ce=="function"){g.callback=null,x=g.priorityLevel;var ge=ce(g.expirationTime<=L);if(L=e.unstable_now(),typeof ge=="function"){g.callback=ge,A(L),B=!0;break t}g===r(h)&&n(h),A(L)}else n(h);g=r(h)}if(g!==null)B=!0;else{var U=r(f);U!==null&&W(S,U.startTime-L),B=!1}}break e}finally{g=null,x=G,b=!1}B=void 0}}finally{B?R():T=!1}}}var R;if(typeof E=="function")R=function(){E(M)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=M,R=function(){H.postMessage(null)}}else R=function(){N(M,0)};function W(L,B){D=N(function(){L(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(L){switch(x){case 1:case 2:case 3:var B=3;break;default:B=x}var G=x;x=B;try{return L()}finally{x=G}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=x;x=L;try{return B()}finally{x=G}},e.unstable_scheduleCallback=function(L,B,G){var ce=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ce+G:ce):G=ce,L){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=G+ge,L={id:m++,callback:B,priorityLevel:L,startTime:G,expirationTime:ge,sortIndex:-1},G>ce?(L.sortIndex=G,t(f,L),r(h)===null&&L===r(f)&&(w?(C(D),D=-1):w=!0,W(S,G-ce))):(L.sortIndex=ge,t(h,L),j||b||(j=!0,T||(T=!0,R()))),L},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(L){var B=x;return function(){var G=x;x=B;try{return L.apply(this,arguments)}finally{x=G}}}})(Ex)),Ex}var p2;function vI(){return p2||(p2=1,Cx.exports=bI()),Cx.exports}var Ax={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function yI(){if(g2)return _n;g2=1;var e=Oc();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(h,f,m){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:h,containerInfo:f,implementation:m}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,_n.createPortal=function(h,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(h,f,null,m)},_n.flushSync=function(h){var f=c.T,m=n.p;try{if(c.T=null,n.p=2,h)return h()}finally{c.T=f,n.p=m,n.d.f()}},_n.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},_n.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},_n.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var m=f.as,g=d(m,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,b=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:b}):m==="script"&&n.d.X(h,{crossOrigin:g,integrity:x,fetchPriority:b,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},_n.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=d(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},_n.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,g=d(m,f.crossOrigin);n.d.L(h,m,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},_n.preloadModule=function(h,f){if(typeof h=="string")if(f){var m=d(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},_n.requestFormReset=function(h){n.d.r(h)},_n.unstable_batchedUpdates=function(h,f){return h(f)},_n.useFormState=function(h,f,m){return c.H.useFormState(h,f,m)},_n.useFormStatus=function(){return c.H.useHostTransitionStatus()},_n.version="19.2.3",_n}var x2;function g3(){if(x2)return Ax.exports;x2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ax.exports=yI(),Ax.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function wI(){if(b2)return Rd;b2=1;var e=vI(),t=Oc(),r=g3();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(l(i)!==i)throw Error(n(188))}function f(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,p=o;;){var y=u.return;if(y===null)break;var k=y.alternate;if(k===null){if(p=y.return,p!==null){u=p;continue}break}if(y.child===k.child){for(k=y.child;k;){if(k===u)return h(y),i;if(k===p)return h(y),o;k=k.sibling}throw Error(n(188))}if(u.return!==p.return)u=y,p=k;else{for(var O=!1,z=y.child;z;){if(z===u){O=!0,u=y,p=k;break}if(z===p){O=!0,p=y,u=k;break}z=z.sibling}if(!O){for(z=k.child;z;){if(z===u){O=!0,u=k,p=y;break}if(z===p){O=!0,p=k,u=y;break}z=z.sibling}if(!O)throw Error(n(189))}}if(u.alternate!==p)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function R(i){return i===null||typeof i!="object"?null:(i=M&&i[M]||i["@@iterator"],typeof i=="function"?i:null)}var q=Symbol.for("react.client.reference");function H(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===q?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case N:return"Profiler";case _:return"StrictMode";case S:return"Suspense";case T:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case j:return"Portal";case E:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case A:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return o=i.displayName||null,o!==null?o:H(i.type)||"Memo";case P:o=i._payload,i=i._init;try{return H(i(o))}catch{}}return null}var W=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},ce=[],ge=-1;function U(i){return{current:i}}function V(i){0>ge||(i.current=ce[ge],ce[ge]=null,ge--)}function te(i,o){ge++,ce[ge]=i.current,i.current=o}var he=U(null),ye=U(null),Ne=U(null),ve=U(null);function je(i,o){switch(te(Ne,o),te(ye,i),te(he,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?DN(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=DN(o),i=MN(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}V(he),te(he,i)}function Q(){V(he),V(ye),V(Ne)}function _e(i){i.memoizedState!==null&&te(ve,i);var o=he.current,u=MN(o,i.type);o!==u&&(te(ye,i),te(he,u))}function de(i){ye.current===i&&(V(he),V(ye)),ve.current===i&&(V(ve),Td._currentValue=G)}var Y,we;function Oe(i){if(Y===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Y=o&&o[1]||"",we=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Y+i+we}var lt=!1;function ut(i,o){if(!i||lt)return"";lt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var pe=function(){throw Error()};if(Object.defineProperty(pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pe,[])}catch(ae){var ne=ae}Reflect.construct(i,[],pe)}else{try{pe.call()}catch(ae){ne=ae}i.call(pe.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(pe=i())&&typeof pe.catch=="function"&&pe.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var k=p.DetermineComponentFrameRoot(),O=k[0],z=k[1];if(O&&z){var F=O.split(`
`),re=z.split(`
`);for(y=p=0;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;for(;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;if(p===F.length||y===re.length)for(p=F.length-1,y=re.length-1;1<=p&&0<=y&&F[p]!==re[y];)y--;for(;1<=p&&0<=y;p--,y--)if(F[p]!==re[y]){if(p!==1||y!==1)do if(p--,y--,0>y||F[p]!==re[y]){var ue=`
`+F[p].replace(" at new "," at ");return i.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",i.displayName)),ue}while(1<=p&&0<=y);break}}}finally{lt=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?Oe(u):""}function Ct(i,o){switch(i.tag){case 26:case 27:case 5:return Oe(i.type);case 16:return Oe("Lazy");case 13:return i.child!==o&&o!==null?Oe("Suspense Fallback"):Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return ut(i.type,!1);case 11:return ut(i.type.render,!1);case 1:return ut(i.type,!0);case 31:return Oe("Activity");default:return""}}function rr(i){try{var o="",u=null;do o+=Ct(i,u),u=i,i=i.return;while(i);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var _r=Object.prototype.hasOwnProperty,It=e.unstable_scheduleCallback,oe=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Qe=e.unstable_requestPaint,tt=e.unstable_now,xe=e.unstable_getCurrentPriorityLevel,Be=e.unstable_ImmediatePriority,pt=e.unstable_UserBlockingPriority,se=e.unstable_NormalPriority,Te=e.unstable_LowPriority,Ge=e.unstable_IdlePriority,ht=e.log,xt=e.unstable_setDisableYieldValue,$t=null,wt=null;function ft(i){if(typeof ht=="function"&&xt(i),wt&&typeof wt.setStrictMode=="function")try{wt.setStrictMode($t,i)}catch{}}var gt=Math.clz32?Math.clz32:jn,En=Math.log,Ln=Math.LN2;function jn(i){return i>>>=0,i===0?32:31-(En(i)/Ln|0)|0}var Ae=256,Ee=262144,He=4194304;function Z(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ue(i,o,u){var p=i.pendingLanes;if(p===0)return 0;var y=0,k=i.suspendedLanes,O=i.pingedLanes;i=i.warmLanes;var z=p&134217727;return z!==0?(p=z&~k,p!==0?y=Z(p):(O&=z,O!==0?y=Z(O):u||(u=z&~i,u!==0&&(y=Z(u))))):(z=p&~k,z!==0?y=Z(z):O!==0?y=Z(O):u||(u=p&~i,u!==0&&(y=Z(u)))),y===0?0:o!==0&&o!==y&&(o&k)===0&&(k=y&-y,u=o&-o,k>=u||k===32&&(u&4194048)!==0)?o:y}function Le(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function bt(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nt(){var i=He;return He<<=1,(He&62914560)===0&&(He=4194304),i}function Dt(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Ut(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function nr(i,o,u,p,y,k){var O=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var z=i.entanglements,F=i.expirationTimes,re=i.hiddenUpdates;for(u=O&~u;0<u;){var ue=31-gt(u),pe=1<<ue;z[ue]=0,F[ue]=-1;var ne=re[ue];if(ne!==null)for(re[ue]=null,ue=0;ue<ne.length;ue++){var ae=ne[ue];ae!==null&&(ae.lane&=-536870913)}u&=~pe}p!==0&&Zn(i,p,0),k!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=k&~(O&~o))}function Zn(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var p=31-gt(o);i.entangledLanes|=o,i.entanglements[p]=i.entanglements[p]|1073741824|u&261930}function Or(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var p=31-gt(u),y=1<<p;y&o|i[p]&o&&(i[p]|=o),u&=~y}}function on(i,o){var u=o&-o;return u=(u&42)!==0?1:sr(u),(u&(i.suspendedLanes|o))!==0?0:u}function sr(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ze(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function cr(){var i=B.p;return i!==0?i:(i=window.event,i===void 0?32:n2(i.type))}function Pr(i,o){var u=B.p;try{return B.p=i,o()}finally{B.p=u}}var X=Math.random().toString(36).slice(2),Se="__reactFiber$"+X,Pe="__reactProps$"+X,Ye="__reactContainer$"+X,at="__reactEvents$"+X,St="__reactListeners$"+X,Na="__reactHandles$"+X,ol="__reactResources$"+X,js="__reactMarker$"+X;function zn(i){delete i[Se],delete i[Pe],delete i[at],delete i[St],delete i[Na]}function ji(i){var o=i[Se];if(o)return o;for(var u=i.parentNode;u;){if(o=u[Ye]||u[Se]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=BN(i);i!==null;){if(u=i[Se])return u;i=BN(i)}return o}i=u,u=i.parentNode}return null}function ca(i){if(i=i[Se]||i[Ye]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function _i(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function Sa(i){var o=i[ol];return o||(o=i[ol]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function kr(i){i[js]=!0}var st=new Set,oo={};function es(i,o){Ca(i,o),Ca(i+"Capture",o)}function Ca(i,o){for(oo[i]=o,i=0;i<o.length;i++)st.add(o[i])}var rR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_j={},kj={};function nR(i){return _r.call(kj,i)?!0:_r.call(_j,i)?!1:rR.test(i)?kj[i]=!0:(_j[i]=!0,!1)}function eh(i,o,u){if(nR(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function th(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Ea(i,o,u,p){if(p===null)i.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+p)}}function _s(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Nj(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function sR(i,o,u){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,k=p.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(O){u=""+O,k.call(this,O)}}),Object.defineProperty(i,o,{enumerable:p.enumerable}),{getValue:function(){return u},setValue:function(O){u=""+O},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function gp(i){if(!i._valueTracker){var o=Nj(i)?"checked":"value";i._valueTracker=sR(i,o,""+i[o])}}function Sj(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),p="";return i&&(p=Nj(i)?i.checked?"true":"false":i.value),i=p,i!==u?(o.setValue(i),!0):!1}function rh(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var aR=/[\n"\\]/g;function ks(i){return i.replace(aR,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function xp(i,o,u,p,y,k,O,z){i.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?i.type=O:i.removeAttribute("type"),o!=null?O==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+_s(o)):i.value!==""+_s(o)&&(i.value=""+_s(o)):O!=="submit"&&O!=="reset"||i.removeAttribute("value"),o!=null?bp(i,O,_s(o)):u!=null?bp(i,O,_s(u)):p!=null&&i.removeAttribute("value"),y==null&&k!=null&&(i.defaultChecked=!!k),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?i.name=""+_s(z):i.removeAttribute("name")}function Cj(i,o,u,p,y,k,O,z){if(k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(i.type=k),o!=null||u!=null){if(!(k!=="submit"&&k!=="reset"||o!=null)){gp(i);return}u=u!=null?""+_s(u):"",o=o!=null?""+_s(o):u,z||o===i.value||(i.value=o),i.defaultValue=o}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=z?i.checked:!!p,i.defaultChecked=!!p,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(i.name=O),gp(i)}function bp(i,o,u){o==="number"&&rh(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function co(i,o,u,p){if(i=i.options,o){o={};for(var y=0;y<u.length;y++)o["$"+u[y]]=!0;for(u=0;u<i.length;u++)y=o.hasOwnProperty("$"+i[u].value),i[u].selected!==y&&(i[u].selected=y),y&&p&&(i[u].defaultSelected=!0)}else{for(u=""+_s(u),o=null,y=0;y<i.length;y++){if(i[y].value===u){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function Ej(i,o,u){if(o!=null&&(o=""+_s(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+_s(u):""}function Aj(i,o,u,p){if(o==null){if(p!=null){if(u!=null)throw Error(n(92));if(W(p)){if(1<p.length)throw Error(n(93));p=p[0]}u=p}u==null&&(u=""),o=u}u=_s(o),i.defaultValue=u,p=i.textContent,p===u&&p!==""&&p!==null&&(i.value=p),gp(i)}function uo(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var iR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tj(i,o,u){var p=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?p?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":p?i.setProperty(o,u):typeof u!="number"||u===0||iR.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function Oj(i,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,u!=null){for(var p in u)!u.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var y in o)p=o[y],o.hasOwnProperty(y)&&u[y]!==p&&Tj(i,y,p)}else for(var k in o)o.hasOwnProperty(k)&&Tj(i,k,o[k])}function vp(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nh(i){return oR.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Aa(){}var yp=null;function wp(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ho=null,fo=null;function Pj(i){var o=ca(i);if(o&&(i=o.stateNode)){var u=i[Pe]||null;e:switch(i=o.stateNode,o.type){case"input":if(xp(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ks(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var p=u[o];if(p!==i&&p.form===i.form){var y=p[Pe]||null;if(!y)throw Error(n(90));xp(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<u.length;o++)p=u[o],p.form===i.form&&Sj(p)}break e;case"textarea":Ej(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&co(i,!!u.multiple,o,!1)}}}var jp=!1;function Dj(i,o,u){if(jp)return i(o,u);jp=!0;try{var p=i(o);return p}finally{if(jp=!1,(ho!==null||fo!==null)&&(Hh(),ho&&(o=ho,i=fo,fo=ho=null,Pj(o),i)))for(o=0;o<i.length;o++)Pj(i[o])}}function Gc(i,o){var u=i.stateNode;if(u===null)return null;var p=u[Pe]||null;if(p===null)return null;u=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_p=!1;if(Ta)try{var Kc={};Object.defineProperty(Kc,"passive",{get:function(){_p=!0}}),window.addEventListener("test",Kc,Kc),window.removeEventListener("test",Kc,Kc)}catch{_p=!1}var ki=null,kp=null,sh=null;function Mj(){if(sh)return sh;var i,o=kp,u=o.length,p,y="value"in ki?ki.value:ki.textContent,k=y.length;for(i=0;i<u&&o[i]===y[i];i++);var O=u-i;for(p=1;p<=O&&o[u-p]===y[k-p];p++);return sh=y.slice(i,1<p?1-p:void 0)}function ah(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function ih(){return!0}function Rj(){return!1}function Un(i){function o(u,p,y,k,O){this._reactName=u,this._targetInst=y,this.type=p,this.nativeEvent=k,this.target=O,this.currentTarget=null;for(var z in i)i.hasOwnProperty(z)&&(u=i[z],this[z]=u?u(k):k[z]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?ih:Rj,this.isPropagationStopped=Rj,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ih)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ih)},persist:function(){},isPersistent:ih}),o}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lh=Un(cl),Yc=g({},cl,{view:0,detail:0}),cR=Un(Yc),Np,Sp,Xc,oh=g({},Yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ep,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xc&&(Xc&&i.type==="mousemove"?(Np=i.screenX-Xc.screenX,Sp=i.screenY-Xc.screenY):Sp=Np=0,Xc=i),Np)},movementY:function(i){return"movementY"in i?i.movementY:Sp}}),Ij=Un(oh),dR=g({},oh,{dataTransfer:0}),uR=Un(dR),hR=g({},Yc,{relatedTarget:0}),Cp=Un(hR),fR=g({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),mR=Un(fR),pR=g({},cl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gR=Un(pR),xR=g({},cl,{data:0}),$j=Un(xR),bR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wR(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=yR[i])?!!o[i]:!1}function Ep(){return wR}var jR=g({},Yc,{key:function(i){if(i.key){var o=bR[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ah(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vR[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ep,charCode:function(i){return i.type==="keypress"?ah(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ah(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_R=Un(jR),kR=g({},oh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lj=Un(kR),NR=g({},Yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ep}),SR=Un(NR),CR=g({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),ER=Un(CR),AR=g({},oh,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),TR=Un(AR),OR=g({},cl,{newState:0,oldState:0}),PR=Un(OR),DR=[9,13,27,32],Ap=Ta&&"CompositionEvent"in window,Jc=null;Ta&&"documentMode"in document&&(Jc=document.documentMode);var MR=Ta&&"TextEvent"in window&&!Jc,zj=Ta&&(!Ap||Jc&&8<Jc&&11>=Jc),Uj=" ",Bj=!1;function qj(i,o){switch(i){case"keyup":return DR.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fj(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var mo=!1;function RR(i,o){switch(i){case"compositionend":return Fj(o);case"keypress":return o.which!==32?null:(Bj=!0,Uj);case"textInput":return i=o.data,i===Uj&&Bj?null:i;default:return null}}function IR(i,o){if(mo)return i==="compositionend"||!Ap&&qj(i,o)?(i=Mj(),sh=kp=ki=null,mo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return zj&&o.locale!=="ko"?null:o.data;default:return null}}var $R={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hj(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!$R[i.type]:o==="textarea"}function Vj(i,o,u,p){ho?fo?fo.push(p):fo=[p]:ho=p,o=Jh(o,"onChange"),0<o.length&&(u=new lh("onChange","change",null,u,p),i.push({event:u,listeners:o}))}var Qc=null,Zc=null;function LR(i){CN(i,0)}function ch(i){var o=_i(i);if(Sj(o))return i}function Wj(i,o){if(i==="change")return o}var Gj=!1;if(Ta){var Tp;if(Ta){var Op="oninput"in document;if(!Op){var Kj=document.createElement("div");Kj.setAttribute("oninput","return;"),Op=typeof Kj.oninput=="function"}Tp=Op}else Tp=!1;Gj=Tp&&(!document.documentMode||9<document.documentMode)}function Yj(){Qc&&(Qc.detachEvent("onpropertychange",Xj),Zc=Qc=null)}function Xj(i){if(i.propertyName==="value"&&ch(Zc)){var o=[];Vj(o,Zc,i,wp(i)),Dj(LR,o)}}function zR(i,o,u){i==="focusin"?(Yj(),Qc=o,Zc=u,Qc.attachEvent("onpropertychange",Xj)):i==="focusout"&&Yj()}function UR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ch(Zc)}function BR(i,o){if(i==="click")return ch(o)}function qR(i,o){if(i==="input"||i==="change")return ch(o)}function FR(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var ts=typeof Object.is=="function"?Object.is:FR;function ed(i,o){if(ts(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),p=Object.keys(o);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var y=u[p];if(!_r.call(o,y)||!ts(i[y],o[y]))return!1}return!0}function Jj(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Qj(i,o){var u=Jj(i);i=0;for(var p;u;){if(u.nodeType===3){if(p=i+u.textContent.length,i<=o&&p>=o)return{node:u,offset:o-i};i=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Jj(u)}}function Zj(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Zj(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function e_(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=rh(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=rh(i.document)}return o}function Pp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var HR=Ta&&"documentMode"in document&&11>=document.documentMode,po=null,Dp=null,td=null,Mp=!1;function t_(i,o,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Mp||po==null||po!==rh(p)||(p=po,"selectionStart"in p&&Pp(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),td&&ed(td,p)||(td=p,p=Jh(Dp,"onSelect"),0<p.length&&(o=new lh("onSelect","select",null,o,u),i.push({event:o,listeners:p}),o.target=po)))}function dl(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var go={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionrun:dl("Transition","TransitionRun"),transitionstart:dl("Transition","TransitionStart"),transitioncancel:dl("Transition","TransitionCancel"),transitionend:dl("Transition","TransitionEnd")},Rp={},r_={};Ta&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function ul(i){if(Rp[i])return Rp[i];if(!go[i])return i;var o=go[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in r_)return Rp[i]=o[u];return i}var n_=ul("animationend"),s_=ul("animationiteration"),a_=ul("animationstart"),VR=ul("transitionrun"),WR=ul("transitionstart"),GR=ul("transitioncancel"),i_=ul("transitionend"),l_=new Map,Ip="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ip.push("scrollEnd");function Fs(i,o){l_.set(i,o),es(o,[i])}var dh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ns=[],xo=0,$p=0;function uh(){for(var i=xo,o=$p=xo=0;o<i;){var u=Ns[o];Ns[o++]=null;var p=Ns[o];Ns[o++]=null;var y=Ns[o];Ns[o++]=null;var k=Ns[o];if(Ns[o++]=null,p!==null&&y!==null){var O=p.pending;O===null?y.next=y:(y.next=O.next,O.next=y),p.pending=y}k!==0&&o_(u,y,k)}}function hh(i,o,u,p){Ns[xo++]=i,Ns[xo++]=o,Ns[xo++]=u,Ns[xo++]=p,$p|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function Lp(i,o,u,p){return hh(i,o,u,p),fh(i)}function hl(i,o){return hh(i,null,null,o),fh(i)}function o_(i,o,u){i.lanes|=u;var p=i.alternate;p!==null&&(p.lanes|=u);for(var y=!1,k=i.return;k!==null;)k.childLanes|=u,p=k.alternate,p!==null&&(p.childLanes|=u),k.tag===22&&(i=k.stateNode,i===null||i._visibility&1||(y=!0)),i=k,k=k.return;return i.tag===3?(k=i.stateNode,y&&o!==null&&(y=31-gt(u),i=k.hiddenUpdates,p=i[y],p===null?i[y]=[o]:p.push(o),o.lane=u|536870912),k):null}function fh(i){if(50<_d)throw _d=0,Gg=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var bo={};function KR(i,o,u,p){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rs(i,o,u,p){return new KR(i,o,u,p)}function zp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Oa(i,o){var u=i.alternate;return u===null?(u=rs(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function c_(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function mh(i,o,u,p,y,k){var O=0;if(p=i,typeof i=="function")zp(i)&&(O=1);else if(typeof i=="string")O=Z8(i,u,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case I:return i=rs(31,u,o,y),i.elementType=I,i.lanes=k,i;case w:return fl(u.children,y,k,o);case _:O=8,y|=24;break;case N:return i=rs(12,u,o,y|2),i.elementType=N,i.lanes=k,i;case S:return i=rs(13,u,o,y),i.elementType=S,i.lanes=k,i;case T:return i=rs(19,u,o,y),i.elementType=T,i.lanes=k,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:O=10;break e;case C:O=9;break e;case A:O=11;break e;case D:O=14;break e;case P:O=16,p=null;break e}O=29,u=Error(n(130,i===null?"null":typeof i,"")),p=null}return o=rs(O,u,o,y),o.elementType=i,o.type=p,o.lanes=k,o}function fl(i,o,u,p){return i=rs(7,i,p,o),i.lanes=u,i}function Up(i,o,u){return i=rs(6,i,null,o),i.lanes=u,i}function d_(i){var o=rs(18,null,null,0);return o.stateNode=i,o}function Bp(i,o,u){return o=rs(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var u_=new WeakMap;function Ss(i,o){if(typeof i=="object"&&i!==null){var u=u_.get(i);return u!==void 0?u:(o={value:i,source:o,stack:rr(o)},u_.set(i,o),o)}return{value:i,source:o,stack:rr(o)}}var vo=[],yo=0,ph=null,rd=0,Cs=[],Es=0,Ni=null,da=1,ua="";function Pa(i,o){vo[yo++]=rd,vo[yo++]=ph,ph=i,rd=o}function h_(i,o,u){Cs[Es++]=da,Cs[Es++]=ua,Cs[Es++]=Ni,Ni=i;var p=da;i=ua;var y=32-gt(p)-1;p&=~(1<<y),u+=1;var k=32-gt(o)+y;if(30<k){var O=y-y%5;k=(p&(1<<O)-1).toString(32),p>>=O,y-=O,da=1<<32-gt(o)+y|u<<y|p,ua=k+i}else da=1<<k|u<<y|p,ua=i}function qp(i){i.return!==null&&(Pa(i,1),h_(i,1,0))}function Fp(i){for(;i===ph;)ph=vo[--yo],vo[yo]=null,rd=vo[--yo],vo[yo]=null;for(;i===Ni;)Ni=Cs[--Es],Cs[Es]=null,ua=Cs[--Es],Cs[Es]=null,da=Cs[--Es],Cs[Es]=null}function f_(i,o){Cs[Es++]=da,Cs[Es++]=ua,Cs[Es++]=Ni,da=o.id,ua=o.overflow,Ni=i}var cn=null,ar=null,Nt=!1,Si=null,As=!1,Hp=Error(n(519));function Ci(i){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nd(Ss(o,i)),Hp}function m_(i){var o=i.stateNode,u=i.type,p=i.memoizedProps;switch(o[Se]=i,o[Pe]=p,u){case"dialog":yt("cancel",o),yt("close",o);break;case"iframe":case"object":case"embed":yt("load",o);break;case"video":case"audio":for(u=0;u<Nd.length;u++)yt(Nd[u],o);break;case"source":yt("error",o);break;case"img":case"image":case"link":yt("error",o),yt("load",o);break;case"details":yt("toggle",o);break;case"input":yt("invalid",o),Cj(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":yt("invalid",o);break;case"textarea":yt("invalid",o),Aj(o,p.value,p.defaultValue,p.children)}u=p.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||p.suppressHydrationWarning===!0||ON(o.textContent,u)?(p.popover!=null&&(yt("beforetoggle",o),yt("toggle",o)),p.onScroll!=null&&yt("scroll",o),p.onScrollEnd!=null&&yt("scrollend",o),p.onClick!=null&&(o.onclick=Aa),o=!0):o=!1,o||Ci(i,!0)}function p_(i){for(cn=i.return;cn;)switch(cn.tag){case 5:case 31:case 13:As=!1;return;case 27:case 3:As=!0;return;default:cn=cn.return}}function wo(i){if(i!==cn)return!1;if(!Nt)return p_(i),Nt=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||ox(i.type,i.memoizedProps)),u=!u),u&&ar&&Ci(i),p_(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ar=UN(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));ar=UN(i)}else o===27?(o=ar,Bi(i.type)?(i=fx,fx=null,ar=i):ar=o):ar=cn?Os(i.stateNode.nextSibling):null;return!0}function ml(){ar=cn=null,Nt=!1}function Vp(){var i=Si;return i!==null&&(Hn===null?Hn=i:Hn.push.apply(Hn,i),Si=null),i}function nd(i){Si===null?Si=[i]:Si.push(i)}var Wp=U(null),pl=null,Da=null;function Ei(i,o,u){te(Wp,o._currentValue),o._currentValue=u}function Ma(i){i._currentValue=Wp.current,V(Wp)}function Gp(i,o,u){for(;i!==null;){var p=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),i===u)break;i=i.return}}function Kp(i,o,u,p){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var k=y.dependencies;if(k!==null){var O=y.child;k=k.firstContext;e:for(;k!==null;){var z=k;k=y;for(var F=0;F<o.length;F++)if(z.context===o[F]){k.lanes|=u,z=k.alternate,z!==null&&(z.lanes|=u),Gp(k.return,u,i),p||(O=null);break e}k=z.next}}else if(y.tag===18){if(O=y.return,O===null)throw Error(n(341));O.lanes|=u,k=O.alternate,k!==null&&(k.lanes|=u),Gp(O,u,i),O=null}else O=y.child;if(O!==null)O.return=y;else for(O=y;O!==null;){if(O===i){O=null;break}if(y=O.sibling,y!==null){y.return=O.return,O=y;break}O=O.return}y=O}}function jo(i,o,u,p){i=null;for(var y=o,k=!1;y!==null;){if(!k){if((y.flags&524288)!==0)k=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var O=y.alternate;if(O===null)throw Error(n(387));if(O=O.memoizedProps,O!==null){var z=y.type;ts(y.pendingProps.value,O.value)||(i!==null?i.push(z):i=[z])}}else if(y===ve.current){if(O=y.alternate,O===null)throw Error(n(387));O.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(Td):i=[Td])}y=y.return}i!==null&&Kp(o,i,u,p),o.flags|=262144}function gh(i){for(i=i.firstContext;i!==null;){if(!ts(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function gl(i){pl=i,Da=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dn(i){return g_(pl,i)}function xh(i,o){return pl===null&&gl(i),g_(i,o)}function g_(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Da===null){if(i===null)throw Error(n(308));Da=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Da=Da.next=o;return u}var YR=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,p){i.push(p)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},XR=e.unstable_scheduleCallback,JR=e.unstable_NormalPriority,Dr={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yp(){return{controller:new YR,data:new Map,refCount:0}}function sd(i){i.refCount--,i.refCount===0&&XR(JR,function(){i.controller.abort()})}var ad=null,Xp=0,_o=0,ko=null;function QR(i,o){if(ad===null){var u=ad=[];Xp=0,_o=Zg(),ko={status:"pending",value:void 0,then:function(p){u.push(p)}}}return Xp++,o.then(x_,x_),o}function x_(){if(--Xp===0&&ad!==null){ko!==null&&(ko.status="fulfilled");var i=ad;ad=null,_o=0,ko=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function ZR(i,o){var u=[],p={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return i.then(function(){p.status="fulfilled",p.value=o;for(var y=0;y<u.length;y++)(0,u[y])(o)},function(y){for(p.status="rejected",p.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),p}var b_=L.S;L.S=function(i,o){tN=tt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&QR(i,o),b_!==null&&b_(i,o)};var xl=U(null);function Jp(){var i=xl.current;return i!==null?i:Jt.pooledCache}function bh(i,o){o===null?te(xl,xl.current):te(xl,o.pool)}function v_(){var i=Jp();return i===null?null:{parent:Dr._currentValue,pool:i}}var No=Error(n(460)),Qp=Error(n(474)),vh=Error(n(542)),yh={then:function(){}};function y_(i){return i=i.status,i==="fulfilled"||i==="rejected"}function w_(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then(Aa,Aa),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,__(i),i;default:if(typeof o.status=="string")o.then(Aa,Aa);else{if(i=Jt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(p){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=p}},function(p){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,__(i),i}throw vl=o,No}}function bl(i){try{var o=i._init;return o(i._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(vl=u,No):u}}var vl=null;function j_(){if(vl===null)throw Error(n(459));var i=vl;return vl=null,i}function __(i){if(i===No||i===vh)throw Error(n(483))}var So=null,id=0;function wh(i){var o=id;return id+=1,So===null&&(So=[]),w_(So,i,o)}function ld(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function jh(i,o){throw o.$$typeof===x?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function k_(i){function o(J,K){if(i){var ee=J.deletions;ee===null?(J.deletions=[K],J.flags|=16):ee.push(K)}}function u(J,K){if(!i)return null;for(;K!==null;)o(J,K),K=K.sibling;return null}function p(J){for(var K=new Map;J!==null;)J.key!==null?K.set(J.key,J):K.set(J.index,J),J=J.sibling;return K}function y(J,K){return J=Oa(J,K),J.index=0,J.sibling=null,J}function k(J,K,ee){return J.index=ee,i?(ee=J.alternate,ee!==null?(ee=ee.index,ee<K?(J.flags|=67108866,K):ee):(J.flags|=67108866,K)):(J.flags|=1048576,K)}function O(J){return i&&J.alternate===null&&(J.flags|=67108866),J}function z(J,K,ee,fe){return K===null||K.tag!==6?(K=Up(ee,J.mode,fe),K.return=J,K):(K=y(K,ee),K.return=J,K)}function F(J,K,ee,fe){var We=ee.type;return We===w?ue(J,K,ee.props.children,fe,ee.key):K!==null&&(K.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===P&&bl(We)===K.type)?(K=y(K,ee.props),ld(K,ee),K.return=J,K):(K=mh(ee.type,ee.key,ee.props,null,J.mode,fe),ld(K,ee),K.return=J,K)}function re(J,K,ee,fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=Bp(ee,J.mode,fe),K.return=J,K):(K=y(K,ee.children||[]),K.return=J,K)}function ue(J,K,ee,fe,We){return K===null||K.tag!==7?(K=fl(ee,J.mode,fe,We),K.return=J,K):(K=y(K,ee),K.return=J,K)}function pe(J,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Up(""+K,J.mode,ee),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case b:return ee=mh(K.type,K.key,K.props,null,J.mode,ee),ld(ee,K),ee.return=J,ee;case j:return K=Bp(K,J.mode,ee),K.return=J,K;case P:return K=bl(K),pe(J,K,ee)}if(W(K)||R(K))return K=fl(K,J.mode,ee,null),K.return=J,K;if(typeof K.then=="function")return pe(J,wh(K),ee);if(K.$$typeof===E)return pe(J,xh(J,K),ee);jh(J,K)}return null}function ne(J,K,ee,fe){var We=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return We!==null?null:z(J,K,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return ee.key===We?F(J,K,ee,fe):null;case j:return ee.key===We?re(J,K,ee,fe):null;case P:return ee=bl(ee),ne(J,K,ee,fe)}if(W(ee)||R(ee))return We!==null?null:ue(J,K,ee,fe,null);if(typeof ee.then=="function")return ne(J,K,wh(ee),fe);if(ee.$$typeof===E)return ne(J,K,xh(J,ee),fe);jh(J,ee)}return null}function ae(J,K,ee,fe,We){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return J=J.get(ee)||null,z(K,J,""+fe,We);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return J=J.get(fe.key===null?ee:fe.key)||null,F(K,J,fe,We);case j:return J=J.get(fe.key===null?ee:fe.key)||null,re(K,J,fe,We);case P:return fe=bl(fe),ae(J,K,ee,fe,We)}if(W(fe)||R(fe))return J=J.get(ee)||null,ue(K,J,fe,We,null);if(typeof fe.then=="function")return ae(J,K,ee,wh(fe),We);if(fe.$$typeof===E)return ae(J,K,ee,xh(K,fe),We);jh(K,fe)}return null}function ze(J,K,ee,fe){for(var We=null,Tt=null,qe=K,ct=K=0,_t=null;qe!==null&&ct<ee.length;ct++){qe.index>ct?(_t=qe,qe=null):_t=qe.sibling;var Ot=ne(J,qe,ee[ct],fe);if(Ot===null){qe===null&&(qe=_t);break}i&&qe&&Ot.alternate===null&&o(J,qe),K=k(Ot,K,ct),Tt===null?We=Ot:Tt.sibling=Ot,Tt=Ot,qe=_t}if(ct===ee.length)return u(J,qe),Nt&&Pa(J,ct),We;if(qe===null){for(;ct<ee.length;ct++)qe=pe(J,ee[ct],fe),qe!==null&&(K=k(qe,K,ct),Tt===null?We=qe:Tt.sibling=qe,Tt=qe);return Nt&&Pa(J,ct),We}for(qe=p(qe);ct<ee.length;ct++)_t=ae(qe,J,ct,ee[ct],fe),_t!==null&&(i&&_t.alternate!==null&&qe.delete(_t.key===null?ct:_t.key),K=k(_t,K,ct),Tt===null?We=_t:Tt.sibling=_t,Tt=_t);return i&&qe.forEach(function(Wi){return o(J,Wi)}),Nt&&Pa(J,ct),We}function Xe(J,K,ee,fe){if(ee==null)throw Error(n(151));for(var We=null,Tt=null,qe=K,ct=K=0,_t=null,Ot=ee.next();qe!==null&&!Ot.done;ct++,Ot=ee.next()){qe.index>ct?(_t=qe,qe=null):_t=qe.sibling;var Wi=ne(J,qe,Ot.value,fe);if(Wi===null){qe===null&&(qe=_t);break}i&&qe&&Wi.alternate===null&&o(J,qe),K=k(Wi,K,ct),Tt===null?We=Wi:Tt.sibling=Wi,Tt=Wi,qe=_t}if(Ot.done)return u(J,qe),Nt&&Pa(J,ct),We;if(qe===null){for(;!Ot.done;ct++,Ot=ee.next())Ot=pe(J,Ot.value,fe),Ot!==null&&(K=k(Ot,K,ct),Tt===null?We=Ot:Tt.sibling=Ot,Tt=Ot);return Nt&&Pa(J,ct),We}for(qe=p(qe);!Ot.done;ct++,Ot=ee.next())Ot=ae(qe,J,ct,Ot.value,fe),Ot!==null&&(i&&Ot.alternate!==null&&qe.delete(Ot.key===null?ct:Ot.key),K=k(Ot,K,ct),Tt===null?We=Ot:Tt.sibling=Ot,Tt=Ot);return i&&qe.forEach(function(dI){return o(J,dI)}),Nt&&Pa(J,ct),We}function Kt(J,K,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===w&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:e:{for(var We=ee.key;K!==null;){if(K.key===We){if(We=ee.type,We===w){if(K.tag===7){u(J,K.sibling),fe=y(K,ee.props.children),fe.return=J,J=fe;break e}}else if(K.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===P&&bl(We)===K.type){u(J,K.sibling),fe=y(K,ee.props),ld(fe,ee),fe.return=J,J=fe;break e}u(J,K);break}else o(J,K);K=K.sibling}ee.type===w?(fe=fl(ee.props.children,J.mode,fe,ee.key),fe.return=J,J=fe):(fe=mh(ee.type,ee.key,ee.props,null,J.mode,fe),ld(fe,ee),fe.return=J,J=fe)}return O(J);case j:e:{for(We=ee.key;K!==null;){if(K.key===We)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){u(J,K.sibling),fe=y(K,ee.children||[]),fe.return=J,J=fe;break e}else{u(J,K);break}else o(J,K);K=K.sibling}fe=Bp(ee,J.mode,fe),fe.return=J,J=fe}return O(J);case P:return ee=bl(ee),Kt(J,K,ee,fe)}if(W(ee))return ze(J,K,ee,fe);if(R(ee)){if(We=R(ee),typeof We!="function")throw Error(n(150));return ee=We.call(ee),Xe(J,K,ee,fe)}if(typeof ee.then=="function")return Kt(J,K,wh(ee),fe);if(ee.$$typeof===E)return Kt(J,K,xh(J,ee),fe);jh(J,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,K!==null&&K.tag===6?(u(J,K.sibling),fe=y(K,ee),fe.return=J,J=fe):(u(J,K),fe=Up(ee,J.mode,fe),fe.return=J,J=fe),O(J)):u(J,K)}return function(J,K,ee,fe){try{id=0;var We=Kt(J,K,ee,fe);return So=null,We}catch(qe){if(qe===No||qe===vh)throw qe;var Tt=rs(29,qe,null,J.mode);return Tt.lanes=fe,Tt.return=J,Tt}finally{}}}var yl=k_(!0),N_=k_(!1),Ai=!1;function Zp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ti(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Oi(i,o,u){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,(Mt&2)!==0){var y=p.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),p.pending=o,o=fh(i),o_(i,null,u),o}return hh(i,p,o,u),fh(i)}function od(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Or(i,u)}}function tg(i,o){var u=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var y=null,k=null;if(u=u.firstBaseUpdate,u!==null){do{var O={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};k===null?y=k=O:k=k.next=O,u=u.next}while(u!==null);k===null?y=k=o:k=k.next=o}else y=k=o;u={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:k,shared:p.shared,callbacks:p.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var rg=!1;function cd(){if(rg){var i=ko;if(i!==null)throw i}}function dd(i,o,u,p){rg=!1;var y=i.updateQueue;Ai=!1;var k=y.firstBaseUpdate,O=y.lastBaseUpdate,z=y.shared.pending;if(z!==null){y.shared.pending=null;var F=z,re=F.next;F.next=null,O===null?k=re:O.next=re,O=F;var ue=i.alternate;ue!==null&&(ue=ue.updateQueue,z=ue.lastBaseUpdate,z!==O&&(z===null?ue.firstBaseUpdate=re:z.next=re,ue.lastBaseUpdate=F))}if(k!==null){var pe=y.baseState;O=0,ue=re=F=null,z=k;do{var ne=z.lane&-536870913,ae=ne!==z.lane;if(ae?(jt&ne)===ne:(p&ne)===ne){ne!==0&&ne===_o&&(rg=!0),ue!==null&&(ue=ue.next={lane:0,tag:z.tag,payload:z.payload,callback:null,next:null});e:{var ze=i,Xe=z;ne=o;var Kt=u;switch(Xe.tag){case 1:if(ze=Xe.payload,typeof ze=="function"){pe=ze.call(Kt,pe,ne);break e}pe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Xe.payload,ne=typeof ze=="function"?ze.call(Kt,pe,ne):ze,ne==null)break e;pe=g({},pe,ne);break e;case 2:Ai=!0}}ne=z.callback,ne!==null&&(i.flags|=64,ae&&(i.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ue===null?(re=ue=ae,F=pe):ue=ue.next=ae,O|=ne;if(z=z.next,z===null){if(z=y.shared.pending,z===null)break;ae=z,z=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);ue===null&&(F=pe),y.baseState=F,y.firstBaseUpdate=re,y.lastBaseUpdate=ue,k===null&&(y.shared.lanes=0),Ii|=O,i.lanes=O,i.memoizedState=pe}}function S_(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function C_(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)S_(u[i],o)}var Co=U(null),_h=U(0);function E_(i,o){i=Fa,te(_h,i),te(Co,o),Fa=i|o.baseLanes}function ng(){te(_h,Fa),te(Co,Co.current)}function sg(){Fa=_h.current,V(Co),V(_h)}var ns=U(null),Ts=null;function Pi(i){var o=i.alternate;te(Nr,Nr.current&1),te(ns,i),Ts===null&&(o===null||Co.current!==null||o.memoizedState!==null)&&(Ts=i)}function ag(i){te(Nr,Nr.current),te(ns,i),Ts===null&&(Ts=i)}function A_(i){i.tag===22?(te(Nr,Nr.current),te(ns,i),Ts===null&&(Ts=i)):Di()}function Di(){te(Nr,Nr.current),te(ns,ns.current)}function ss(i){V(ns),Ts===i&&(Ts=null),V(Nr)}var Nr=U(0);function kh(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||ux(u)||hx(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ra=0,ot=null,Wt=null,Mr=null,Nh=!1,Eo=!1,wl=!1,Sh=0,ud=0,Ao=null,e8=0;function vr(){throw Error(n(321))}function ig(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!ts(i[u],o[u]))return!1;return!0}function lg(i,o,u,p,y,k){return Ra=k,ot=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=i===null||i.memoizedState===null?hk:jg,wl=!1,k=u(p,y),wl=!1,Eo&&(k=O_(o,u,p,y)),T_(i),k}function T_(i){L.H=md;var o=Wt!==null&&Wt.next!==null;if(Ra=0,Mr=Wt=ot=null,Nh=!1,ud=0,Ao=null,o)throw Error(n(300));i===null||Rr||(i=i.dependencies,i!==null&&gh(i)&&(Rr=!0))}function O_(i,o,u,p){ot=i;var y=0;do{if(Eo&&(Ao=null),ud=0,Eo=!1,25<=y)throw Error(n(301));if(y+=1,Mr=Wt=null,i.updateQueue!=null){var k=i.updateQueue;k.lastEffect=null,k.events=null,k.stores=null,k.memoCache!=null&&(k.memoCache.index=0)}L.H=fk,k=o(u,p)}while(Eo);return k}function t8(){var i=L.H,o=i.useState()[0];return o=typeof o.then=="function"?hd(o):o,i=i.useState()[0],(Wt!==null?Wt.memoizedState:null)!==i&&(ot.flags|=1024),o}function og(){var i=Sh!==0;return Sh=0,i}function cg(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function dg(i){if(Nh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Nh=!1}Ra=0,Mr=Wt=ot=null,Eo=!1,ud=Sh=0,Ao=null}function An(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?ot.memoizedState=Mr=i:Mr=Mr.next=i,Mr}function Sr(){if(Wt===null){var i=ot.alternate;i=i!==null?i.memoizedState:null}else i=Wt.next;var o=Mr===null?ot.memoizedState:Mr.next;if(o!==null)Mr=o,Wt=i;else{if(i===null)throw ot.alternate===null?Error(n(467)):Error(n(310));Wt=i,i={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Mr===null?ot.memoizedState=Mr=i:Mr=Mr.next=i}return Mr}function Ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hd(i){var o=ud;return ud+=1,Ao===null&&(Ao=[]),i=w_(Ao,i,o),o=ot,(Mr===null?o.memoizedState:Mr.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?hk:jg),i}function Eh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return hd(i);if(i.$$typeof===E)return dn(i)}throw Error(n(438,String(i)))}function ug(i){var o=null,u=ot.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var p=ot.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Ch(),ot.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),p=0;p<i;p++)u[p]=$;return o.index++,u}function Ia(i,o){return typeof o=="function"?o(i):o}function Ah(i){var o=Sr();return hg(o,Wt,i)}function hg(i,o,u){var p=i.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=u;var y=i.baseQueue,k=p.pending;if(k!==null){if(y!==null){var O=y.next;y.next=k.next,k.next=O}o.baseQueue=y=k,p.pending=null}if(k=i.baseState,y===null)i.memoizedState=k;else{o=y.next;var z=O=null,F=null,re=o,ue=!1;do{var pe=re.lane&-536870913;if(pe!==re.lane?(jt&pe)===pe:(Ra&pe)===pe){var ne=re.revertLane;if(ne===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),pe===_o&&(ue=!0);else if((Ra&ne)===ne){re=re.next,ne===_o&&(ue=!0);continue}else pe={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(z=F=pe,O=k):F=F.next=pe,ot.lanes|=ne,Ii|=ne;pe=re.action,wl&&u(k,pe),k=re.hasEagerState?re.eagerState:u(k,pe)}else ne={lane:pe,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(z=F=ne,O=k):F=F.next=ne,ot.lanes|=pe,Ii|=pe;re=re.next}while(re!==null&&re!==o);if(F===null?O=k:F.next=z,!ts(k,i.memoizedState)&&(Rr=!0,ue&&(u=ko,u!==null)))throw u;i.memoizedState=k,i.baseState=O,i.baseQueue=F,p.lastRenderedState=k}return y===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function fg(i){var o=Sr(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var p=u.dispatch,y=u.pending,k=o.memoizedState;if(y!==null){u.pending=null;var O=y=y.next;do k=i(k,O.action),O=O.next;while(O!==y);ts(k,o.memoizedState)||(Rr=!0),o.memoizedState=k,o.baseQueue===null&&(o.baseState=k),u.lastRenderedState=k}return[k,p]}function P_(i,o,u){var p=ot,y=Sr(),k=Nt;if(k){if(u===void 0)throw Error(n(407));u=u()}else u=o();var O=!ts((Wt||y).memoizedState,u);if(O&&(y.memoizedState=u,Rr=!0),y=y.queue,gg(R_.bind(null,p,y,i),[i]),y.getSnapshot!==o||O||Mr!==null&&Mr.memoizedState.tag&1){if(p.flags|=2048,To(9,{destroy:void 0},M_.bind(null,p,y,u,o),null),Jt===null)throw Error(n(349));k||(Ra&127)!==0||D_(p,o,u)}return u}function D_(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=ot.updateQueue,o===null?(o=Ch(),ot.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function M_(i,o,u,p){o.value=u,o.getSnapshot=p,I_(o)&&$_(i)}function R_(i,o,u){return u(function(){I_(o)&&$_(i)})}function I_(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!ts(i,u)}catch{return!0}}function $_(i){var o=hl(i,2);o!==null&&Vn(o,i,2)}function mg(i){var o=An();if(typeof i=="function"){var u=i;if(i=u(),wl){ft(!0);try{u()}finally{ft(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:i},o}function L_(i,o,u,p){return i.baseState=u,hg(i,Wt,typeof p=="function"?p:Ia)}function r8(i,o,u,p,y){if(Ph(i))throw Error(n(485));if(i=o.action,i!==null){var k={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){k.listeners.push(O)}};L.T!==null?u(!0):k.isTransition=!1,p(k),u=o.pending,u===null?(k.next=o.pending=k,z_(o,k)):(k.next=u.next,o.pending=u.next=k)}}function z_(i,o){var u=o.action,p=o.payload,y=i.state;if(o.isTransition){var k=L.T,O={};L.T=O;try{var z=u(y,p),F=L.S;F!==null&&F(O,z),U_(i,o,z)}catch(re){pg(i,o,re)}finally{k!==null&&O.types!==null&&(k.types=O.types),L.T=k}}else try{k=u(y,p),U_(i,o,k)}catch(re){pg(i,o,re)}}function U_(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(p){B_(i,o,p)},function(p){return pg(i,o,p)}):B_(i,o,u)}function B_(i,o,u){o.status="fulfilled",o.value=u,q_(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,z_(i,u)))}function pg(i,o,u){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=u,q_(o),o=o.next;while(o!==p)}i.action=null}function q_(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function F_(i,o){return o}function H_(i,o){if(Nt){var u=Jt.formState;if(u!==null){e:{var p=ot;if(Nt){if(ar){t:{for(var y=ar,k=As;y.nodeType!==8;){if(!k){y=null;break t}if(y=Os(y.nextSibling),y===null){y=null;break t}}k=y.data,y=k==="F!"||k==="F"?y:null}if(y){ar=Os(y.nextSibling),p=y.data==="F!";break e}}Ci(p)}p=!1}p&&(o=u[0])}}return u=An(),u.memoizedState=u.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:F_,lastRenderedState:o},u.queue=p,u=ck.bind(null,ot,p),p.dispatch=u,p=mg(!1),k=wg.bind(null,ot,!1,p.queue),p=An(),y={state:o,dispatch:null,action:i,pending:null},p.queue=y,u=r8.bind(null,ot,y,k,u),y.dispatch=u,p.memoizedState=i,[o,u,!1]}function V_(i){var o=Sr();return W_(o,Wt,i)}function W_(i,o,u){if(o=hg(i,o,F_)[0],i=Ah(Ia)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=hd(o)}catch(O){throw O===No?vh:O}else p=o;o=Sr();var y=o.queue,k=y.dispatch;return u!==o.memoizedState&&(ot.flags|=2048,To(9,{destroy:void 0},n8.bind(null,y,u),null)),[p,k,i]}function n8(i,o){i.action=o}function G_(i){var o=Sr(),u=Wt;if(u!==null)return W_(o,u,i);Sr(),o=o.memoizedState,u=Sr();var p=u.queue.dispatch;return u.memoizedState=i,[o,p,!1]}function To(i,o,u,p){return i={tag:i,create:u,deps:p,inst:o,next:null},o=ot.updateQueue,o===null&&(o=Ch(),ot.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(p=u.next,u.next=i,i.next=p,o.lastEffect=i),i}function K_(){return Sr().memoizedState}function Th(i,o,u,p){var y=An();ot.flags|=i,y.memoizedState=To(1|o,{destroy:void 0},u,p===void 0?null:p)}function Oh(i,o,u,p){var y=Sr();p=p===void 0?null:p;var k=y.memoizedState.inst;Wt!==null&&p!==null&&ig(p,Wt.memoizedState.deps)?y.memoizedState=To(o,k,u,p):(ot.flags|=i,y.memoizedState=To(1|o,k,u,p))}function Y_(i,o){Th(8390656,8,i,o)}function gg(i,o){Oh(2048,8,i,o)}function s8(i){ot.flags|=4;var o=ot.updateQueue;if(o===null)o=Ch(),ot.updateQueue=o,o.events=[i];else{var u=o.events;u===null?o.events=[i]:u.push(i)}}function X_(i){var o=Sr().memoizedState;return s8({ref:o,nextImpl:i}),function(){if((Mt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function J_(i,o){return Oh(4,2,i,o)}function Q_(i,o){return Oh(4,4,i,o)}function Z_(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function ek(i,o,u){u=u!=null?u.concat([i]):null,Oh(4,4,Z_.bind(null,o,i),u)}function xg(){}function tk(i,o){var u=Sr();o=o===void 0?null:o;var p=u.memoizedState;return o!==null&&ig(o,p[1])?p[0]:(u.memoizedState=[i,o],i)}function rk(i,o){var u=Sr();o=o===void 0?null:o;var p=u.memoizedState;if(o!==null&&ig(o,p[1]))return p[0];if(p=i(),wl){ft(!0);try{i()}finally{ft(!1)}}return u.memoizedState=[p,o],p}function bg(i,o,u){return u===void 0||(Ra&1073741824)!==0&&(jt&261930)===0?i.memoizedState=o:(i.memoizedState=u,i=nN(),ot.lanes|=i,Ii|=i,u)}function nk(i,o,u,p){return ts(u,o)?u:Co.current!==null?(i=bg(i,u,p),ts(i,o)||(Rr=!0),i):(Ra&42)===0||(Ra&1073741824)!==0&&(jt&261930)===0?(Rr=!0,i.memoizedState=u):(i=nN(),ot.lanes|=i,Ii|=i,o)}function sk(i,o,u,p,y){var k=B.p;B.p=k!==0&&8>k?k:8;var O=L.T,z={};L.T=z,wg(i,!1,o,u);try{var F=y(),re=L.S;if(re!==null&&re(z,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ue=ZR(F,p);fd(i,o,ue,ls(i))}else fd(i,o,p,ls(i))}catch(pe){fd(i,o,{then:function(){},status:"rejected",reason:pe},ls())}finally{B.p=k,O!==null&&z.types!==null&&(O.types=z.types),L.T=O}}function a8(){}function vg(i,o,u,p){if(i.tag!==5)throw Error(n(476));var y=ak(i).queue;sk(i,y,o,G,u===null?a8:function(){return ik(i),u(p)})}function ak(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:G},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function ik(i){var o=ak(i);o.next===null&&(o=i.alternate.memoizedState),fd(i,o.next.queue,{},ls())}function yg(){return dn(Td)}function lk(){return Sr().memoizedState}function ok(){return Sr().memoizedState}function i8(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=ls();i=Ti(u);var p=Oi(o,i,u);p!==null&&(Vn(p,o,u),od(p,o,u)),o={cache:Yp()},i.payload=o;return}o=o.return}}function l8(i,o,u){var p=ls();u={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Ph(i)?dk(o,u):(u=Lp(i,o,u,p),u!==null&&(Vn(u,i,p),uk(u,o,p)))}function ck(i,o,u){var p=ls();fd(i,o,u,p)}function fd(i,o,u,p){var y={lane:p,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Ph(i))dk(o,y);else{var k=i.alternate;if(i.lanes===0&&(k===null||k.lanes===0)&&(k=o.lastRenderedReducer,k!==null))try{var O=o.lastRenderedState,z=k(O,u);if(y.hasEagerState=!0,y.eagerState=z,ts(z,O))return hh(i,o,y,0),Jt===null&&uh(),!1}catch{}finally{}if(u=Lp(i,o,y,p),u!==null)return Vn(u,i,p),uk(u,o,p),!0}return!1}function wg(i,o,u,p){if(p={lane:2,revertLane:Zg(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ph(i)){if(o)throw Error(n(479))}else o=Lp(i,u,p,2),o!==null&&Vn(o,i,2)}function Ph(i){var o=i.alternate;return i===ot||o!==null&&o===ot}function dk(i,o){Eo=Nh=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function uk(i,o,u){if((u&4194048)!==0){var p=o.lanes;p&=i.pendingLanes,u|=p,o.lanes=u,Or(i,u)}}var md={readContext:dn,use:Eh,useCallback:vr,useContext:vr,useEffect:vr,useImperativeHandle:vr,useLayoutEffect:vr,useInsertionEffect:vr,useMemo:vr,useReducer:vr,useRef:vr,useState:vr,useDebugValue:vr,useDeferredValue:vr,useTransition:vr,useSyncExternalStore:vr,useId:vr,useHostTransitionStatus:vr,useFormState:vr,useActionState:vr,useOptimistic:vr,useMemoCache:vr,useCacheRefresh:vr};md.useEffectEvent=vr;var hk={readContext:dn,use:Eh,useCallback:function(i,o){return An().memoizedState=[i,o===void 0?null:o],i},useContext:dn,useEffect:Y_,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,Th(4194308,4,Z_.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Th(4194308,4,i,o)},useInsertionEffect:function(i,o){Th(4,2,i,o)},useMemo:function(i,o){var u=An();o=o===void 0?null:o;var p=i();if(wl){ft(!0);try{i()}finally{ft(!1)}}return u.memoizedState=[p,o],p},useReducer:function(i,o,u){var p=An();if(u!==void 0){var y=u(o);if(wl){ft(!0);try{u(o)}finally{ft(!1)}}}else y=o;return p.memoizedState=p.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},p.queue=i,i=i.dispatch=l8.bind(null,ot,i),[p.memoizedState,i]},useRef:function(i){var o=An();return i={current:i},o.memoizedState=i},useState:function(i){i=mg(i);var o=i.queue,u=ck.bind(null,ot,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:xg,useDeferredValue:function(i,o){var u=An();return bg(u,i,o)},useTransition:function(){var i=mg(!1);return i=sk.bind(null,ot,i.queue,!0,!1),An().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var p=ot,y=An();if(Nt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Jt===null)throw Error(n(349));(jt&127)!==0||D_(p,o,u)}y.memoizedState=u;var k={value:u,getSnapshot:o};return y.queue=k,Y_(R_.bind(null,p,k,i),[i]),p.flags|=2048,To(9,{destroy:void 0},M_.bind(null,p,k,u,o),null),u},useId:function(){var i=An(),o=Jt.identifierPrefix;if(Nt){var u=ua,p=da;u=(p&~(1<<32-gt(p)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Sh++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=e8++,o="_"+o+"r_"+u.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:yg,useFormState:H_,useActionState:H_,useOptimistic:function(i){var o=An();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=wg.bind(null,ot,!0,u),u.dispatch=o,[i,o]},useMemoCache:ug,useCacheRefresh:function(){return An().memoizedState=i8.bind(null,ot)},useEffectEvent:function(i){var o=An(),u={impl:i};return o.memoizedState=u,function(){if((Mt&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}},jg={readContext:dn,use:Eh,useCallback:tk,useContext:dn,useEffect:gg,useImperativeHandle:ek,useInsertionEffect:J_,useLayoutEffect:Q_,useMemo:rk,useReducer:Ah,useRef:K_,useState:function(){return Ah(Ia)},useDebugValue:xg,useDeferredValue:function(i,o){var u=Sr();return nk(u,Wt.memoizedState,i,o)},useTransition:function(){var i=Ah(Ia)[0],o=Sr().memoizedState;return[typeof i=="boolean"?i:hd(i),o]},useSyncExternalStore:P_,useId:lk,useHostTransitionStatus:yg,useFormState:V_,useActionState:V_,useOptimistic:function(i,o){var u=Sr();return L_(u,Wt,i,o)},useMemoCache:ug,useCacheRefresh:ok};jg.useEffectEvent=X_;var fk={readContext:dn,use:Eh,useCallback:tk,useContext:dn,useEffect:gg,useImperativeHandle:ek,useInsertionEffect:J_,useLayoutEffect:Q_,useMemo:rk,useReducer:fg,useRef:K_,useState:function(){return fg(Ia)},useDebugValue:xg,useDeferredValue:function(i,o){var u=Sr();return Wt===null?bg(u,i,o):nk(u,Wt.memoizedState,i,o)},useTransition:function(){var i=fg(Ia)[0],o=Sr().memoizedState;return[typeof i=="boolean"?i:hd(i),o]},useSyncExternalStore:P_,useId:lk,useHostTransitionStatus:yg,useFormState:G_,useActionState:G_,useOptimistic:function(i,o){var u=Sr();return Wt!==null?L_(u,Wt,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:ug,useCacheRefresh:ok};fk.useEffectEvent=X_;function _g(i,o,u,p){o=i.memoizedState,u=u(p,o),u=u==null?o:g({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var kg={enqueueSetState:function(i,o,u){i=i._reactInternals;var p=ls(),y=Ti(p);y.payload=o,u!=null&&(y.callback=u),o=Oi(i,y,p),o!==null&&(Vn(o,i,p),od(o,i,p))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var p=ls(),y=Ti(p);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Oi(i,y,p),o!==null&&(Vn(o,i,p),od(o,i,p))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=ls(),p=Ti(u);p.tag=2,o!=null&&(p.callback=o),o=Oi(i,p,u),o!==null&&(Vn(o,i,u),od(o,i,u))}};function mk(i,o,u,p,y,k,O){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,k,O):o.prototype&&o.prototype.isPureReactComponent?!ed(u,p)||!ed(y,k):!0}function pk(i,o,u,p){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,p),o.state!==i&&kg.enqueueReplaceState(o,o.state,null)}function jl(i,o){var u=o;if("ref"in o){u={};for(var p in o)p!=="ref"&&(u[p]=o[p])}if(i=i.defaultProps){u===o&&(u=g({},u));for(var y in i)u[y]===void 0&&(u[y]=i[y])}return u}function gk(i){dh(i)}function xk(i){console.error(i)}function bk(i){dh(i)}function Dh(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function vk(i,o,u){try{var p=i.onCaughtError;p(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Ng(i,o,u){return u=Ti(u),u.tag=3,u.payload={element:null},u.callback=function(){Dh(i,o)},u}function yk(i){return i=Ti(i),i.tag=3,i}function wk(i,o,u,p){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var k=p.value;i.payload=function(){return y(k)},i.callback=function(){vk(o,u,p)}}var O=u.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(i.callback=function(){vk(o,u,p),typeof y!="function"&&($i===null?$i=new Set([this]):$i.add(this));var z=p.stack;this.componentDidCatch(p.value,{componentStack:z!==null?z:""})})}function o8(i,o,u,p,y){if(u.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=u.alternate,o!==null&&jo(o,u,y,!0),u=ns.current,u!==null){switch(u.tag){case 31:case 13:return Ts===null?Vh():u.alternate===null&&yr===0&&(yr=3),u.flags&=-257,u.flags|=65536,u.lanes=y,p===yh?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([p]):o.add(p),Xg(i,p,y)),!1;case 22:return u.flags|=65536,p===yh?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([p]):u.add(p)),Xg(i,p,y)),!1}throw Error(n(435,u.tag))}return Xg(i,p,y),Vh(),!1}if(Nt)return o=ns.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,p!==Hp&&(i=Error(n(422),{cause:p}),nd(Ss(i,u)))):(p!==Hp&&(o=Error(n(423),{cause:p}),nd(Ss(o,u))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,p=Ss(p,u),y=Ng(i.stateNode,p,y),tg(i,y),yr!==4&&(yr=2)),!1;var k=Error(n(520),{cause:p});if(k=Ss(k,u),jd===null?jd=[k]:jd.push(k),yr!==4&&(yr=2),o===null)return!0;p=Ss(p,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=y&-y,u.lanes|=i,i=Ng(u.stateNode,p,i),tg(u,i),!1;case 1:if(o=u.type,k=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&($i===null||!$i.has(k))))return u.flags|=65536,y&=-y,u.lanes|=y,y=yk(y),wk(y,i,u,p),tg(u,y),!1}u=u.return}while(u!==null);return!1}var Sg=Error(n(461)),Rr=!1;function un(i,o,u,p){o.child=i===null?N_(o,null,u,p):yl(o,i.child,u,p)}function jk(i,o,u,p,y){u=u.render;var k=o.ref;if("ref"in p){var O={};for(var z in p)z!=="ref"&&(O[z]=p[z])}else O=p;return gl(o),p=lg(i,o,u,O,k,y),z=og(),i!==null&&!Rr?(cg(i,o,y),$a(i,o,y)):(Nt&&z&&qp(o),o.flags|=1,un(i,o,p,y),o.child)}function _k(i,o,u,p,y){if(i===null){var k=u.type;return typeof k=="function"&&!zp(k)&&k.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=k,kk(i,o,k,p,y)):(i=mh(u.type,null,p,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(k=i.child,!Mg(i,y)){var O=k.memoizedProps;if(u=u.compare,u=u!==null?u:ed,u(O,p)&&i.ref===o.ref)return $a(i,o,y)}return o.flags|=1,i=Oa(k,p),i.ref=o.ref,i.return=o,o.child=i}function kk(i,o,u,p,y){if(i!==null){var k=i.memoizedProps;if(ed(k,p)&&i.ref===o.ref)if(Rr=!1,o.pendingProps=p=k,Mg(i,y))(i.flags&131072)!==0&&(Rr=!0);else return o.lanes=i.lanes,$a(i,o,y)}return Cg(i,o,u,p,y)}function Nk(i,o,u,p){var y=p.children,k=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(k=k!==null?k.baseLanes|u:u,i!==null){for(p=o.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~k}else p=0,o.child=null;return Sk(i,o,k,u,p)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&bh(o,k!==null?k.cachePool:null),k!==null?E_(o,k):ng(),A_(o);else return p=o.lanes=536870912,Sk(i,o,k!==null?k.baseLanes|u:u,u,p)}else k!==null?(bh(o,k.cachePool),E_(o,k),Di(),o.memoizedState=null):(i!==null&&bh(o,null),ng(),Di());return un(i,o,y,u),o.child}function pd(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Sk(i,o,u,p,y){var k=Jp();return k=k===null?null:{parent:Dr._currentValue,pool:k},o.memoizedState={baseLanes:u,cachePool:k},i!==null&&bh(o,null),ng(),A_(o),i!==null&&jo(i,o,p,!0),o.childLanes=y,null}function Mh(i,o){return o=Ih({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Ck(i,o,u){return yl(o,i.child,null,u),i=Mh(o,o.pendingProps),i.flags|=2,ss(o),o.memoizedState=null,i}function c8(i,o,u){var p=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(Nt){if(p.mode==="hidden")return i=Mh(o,p),o.lanes=536870912,pd(null,i);if(ag(o),(i=ar)?(i=zN(i,As),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ni!==null?{id:da,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},u=d_(i),u.return=o,o.child=u,cn=o,ar=null)):i=null,i===null)throw Ci(o);return o.lanes=536870912,null}return Mh(o,p)}var k=i.memoizedState;if(k!==null){var O=k.dehydrated;if(ag(o),y)if(o.flags&256)o.flags&=-257,o=Ck(i,o,u);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(n(558));else if(Rr||jo(i,o,u,!1),y=(u&i.childLanes)!==0,Rr||y){if(p=Jt,p!==null&&(O=on(p,u),O!==0&&O!==k.retryLane))throw k.retryLane=O,hl(i,O),Vn(p,i,O),Sg;Vh(),o=Ck(i,o,u)}else i=k.treeContext,ar=Os(O.nextSibling),cn=o,Nt=!0,Si=null,As=!1,i!==null&&f_(o,i),o=Mh(o,p),o.flags|=4096;return o}return i=Oa(i.child,{mode:p.mode,children:p.children}),i.ref=o.ref,o.child=i,i.return=o,i}function Rh(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function Cg(i,o,u,p,y){return gl(o),u=lg(i,o,u,p,void 0,y),p=og(),i!==null&&!Rr?(cg(i,o,y),$a(i,o,y)):(Nt&&p&&qp(o),o.flags|=1,un(i,o,u,y),o.child)}function Ek(i,o,u,p,y,k){return gl(o),o.updateQueue=null,u=O_(o,p,u,y),T_(i),p=og(),i!==null&&!Rr?(cg(i,o,k),$a(i,o,k)):(Nt&&p&&qp(o),o.flags|=1,un(i,o,u,k),o.child)}function Ak(i,o,u,p,y){if(gl(o),o.stateNode===null){var k=bo,O=u.contextType;typeof O=="object"&&O!==null&&(k=dn(O)),k=new u(p,k),o.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,k.updater=kg,o.stateNode=k,k._reactInternals=o,k=o.stateNode,k.props=p,k.state=o.memoizedState,k.refs={},Zp(o),O=u.contextType,k.context=typeof O=="object"&&O!==null?dn(O):bo,k.state=o.memoizedState,O=u.getDerivedStateFromProps,typeof O=="function"&&(_g(o,u,O,p),k.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(O=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),O!==k.state&&kg.enqueueReplaceState(k,k.state,null),dd(o,p,k,y),cd(),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(i===null){k=o.stateNode;var z=o.memoizedProps,F=jl(u,z);k.props=F;var re=k.context,ue=u.contextType;O=bo,typeof ue=="object"&&ue!==null&&(O=dn(ue));var pe=u.getDerivedStateFromProps;ue=typeof pe=="function"||typeof k.getSnapshotBeforeUpdate=="function",z=o.pendingProps!==z,ue||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(z||re!==O)&&pk(o,k,p,O),Ai=!1;var ne=o.memoizedState;k.state=ne,dd(o,p,k,y),cd(),re=o.memoizedState,z||ne!==re||Ai?(typeof pe=="function"&&(_g(o,u,pe,p),re=o.memoizedState),(F=Ai||mk(o,u,F,p,ne,re,O))?(ue||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=re),k.props=p,k.state=re,k.context=O,p=F):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{k=o.stateNode,eg(i,o),O=o.memoizedProps,ue=jl(u,O),k.props=ue,pe=o.pendingProps,ne=k.context,re=u.contextType,F=bo,typeof re=="object"&&re!==null&&(F=dn(re)),z=u.getDerivedStateFromProps,(re=typeof z=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(O!==pe||ne!==F)&&pk(o,k,p,F),Ai=!1,ne=o.memoizedState,k.state=ne,dd(o,p,k,y),cd();var ae=o.memoizedState;O!==pe||ne!==ae||Ai||i!==null&&i.dependencies!==null&&gh(i.dependencies)?(typeof z=="function"&&(_g(o,u,z,p),ae=o.memoizedState),(ue=Ai||mk(o,u,ue,p,ne,ae,F)||i!==null&&i.dependencies!==null&&gh(i.dependencies))?(re||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(p,ae,F),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(p,ae,F)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=ae),k.props=p,k.state=ae,k.context=F,p=ue):(typeof k.componentDidUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&ne===i.memoizedState||(o.flags|=1024),p=!1)}return k=p,Rh(i,o),p=(o.flags&128)!==0,k||p?(k=o.stateNode,u=p&&typeof u.getDerivedStateFromError!="function"?null:k.render(),o.flags|=1,i!==null&&p?(o.child=yl(o,i.child,null,y),o.child=yl(o,null,u,y)):un(i,o,u,y),o.memoizedState=k.state,i=o.child):i=$a(i,o,y),i}function Tk(i,o,u,p){return ml(),o.flags|=256,un(i,o,u,p),o.child}var Eg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ag(i){return{baseLanes:i,cachePool:v_()}}function Tg(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=is),i}function Ok(i,o,u){var p=o.pendingProps,y=!1,k=(o.flags&128)!==0,O;if((O=k)||(O=i!==null&&i.memoizedState===null?!1:(Nr.current&2)!==0),O&&(y=!0,o.flags&=-129),O=(o.flags&32)!==0,o.flags&=-33,i===null){if(Nt){if(y?Pi(o):Di(),(i=ar)?(i=zN(i,As),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:Ni!==null?{id:da,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},u=d_(i),u.return=o,o.child=u,cn=o,ar=null)):i=null,i===null)throw Ci(o);return hx(i)?o.lanes=32:o.lanes=536870912,null}var z=p.children;return p=p.fallback,y?(Di(),y=o.mode,z=Ih({mode:"hidden",children:z},y),p=fl(p,y,u,null),z.return=o,p.return=o,z.sibling=p,o.child=z,p=o.child,p.memoizedState=Ag(u),p.childLanes=Tg(i,O,u),o.memoizedState=Eg,pd(null,p)):(Pi(o),Og(o,z))}var F=i.memoizedState;if(F!==null&&(z=F.dehydrated,z!==null)){if(k)o.flags&256?(Pi(o),o.flags&=-257,o=Pg(i,o,u)):o.memoizedState!==null?(Di(),o.child=i.child,o.flags|=128,o=null):(Di(),z=p.fallback,y=o.mode,p=Ih({mode:"visible",children:p.children},y),z=fl(z,y,u,null),z.flags|=2,p.return=o,z.return=o,p.sibling=z,o.child=p,yl(o,i.child,null,u),p=o.child,p.memoizedState=Ag(u),p.childLanes=Tg(i,O,u),o.memoizedState=Eg,o=pd(null,p));else if(Pi(o),hx(z)){if(O=z.nextSibling&&z.nextSibling.dataset,O)var re=O.dgst;O=re,p=Error(n(419)),p.stack="",p.digest=O,nd({value:p,source:null,stack:null}),o=Pg(i,o,u)}else if(Rr||jo(i,o,u,!1),O=(u&i.childLanes)!==0,Rr||O){if(O=Jt,O!==null&&(p=on(O,u),p!==0&&p!==F.retryLane))throw F.retryLane=p,hl(i,p),Vn(O,i,p),Sg;ux(z)||Vh(),o=Pg(i,o,u)}else ux(z)?(o.flags|=192,o.child=i.child,o=null):(i=F.treeContext,ar=Os(z.nextSibling),cn=o,Nt=!0,Si=null,As=!1,i!==null&&f_(o,i),o=Og(o,p.children),o.flags|=4096);return o}return y?(Di(),z=p.fallback,y=o.mode,F=i.child,re=F.sibling,p=Oa(F,{mode:"hidden",children:p.children}),p.subtreeFlags=F.subtreeFlags&65011712,re!==null?z=Oa(re,z):(z=fl(z,y,u,null),z.flags|=2),z.return=o,p.return=o,p.sibling=z,o.child=p,pd(null,p),p=o.child,z=i.child.memoizedState,z===null?z=Ag(u):(y=z.cachePool,y!==null?(F=Dr._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=v_(),z={baseLanes:z.baseLanes|u,cachePool:y}),p.memoizedState=z,p.childLanes=Tg(i,O,u),o.memoizedState=Eg,pd(i.child,p)):(Pi(o),u=i.child,i=u.sibling,u=Oa(u,{mode:"visible",children:p.children}),u.return=o,u.sibling=null,i!==null&&(O=o.deletions,O===null?(o.deletions=[i],o.flags|=16):O.push(i)),o.child=u,o.memoizedState=null,u)}function Og(i,o){return o=Ih({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Ih(i,o){return i=rs(22,i,null,o),i.lanes=0,i}function Pg(i,o,u){return yl(o,i.child,null,u),i=Og(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Pk(i,o,u){i.lanes|=o;var p=i.alternate;p!==null&&(p.lanes|=o),Gp(i.return,o,u)}function Dg(i,o,u,p,y,k){var O=i.memoizedState;O===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:y,treeForkCount:k}:(O.isBackwards=o,O.rendering=null,O.renderingStartTime=0,O.last=p,O.tail=u,O.tailMode=y,O.treeForkCount=k)}function Dk(i,o,u){var p=o.pendingProps,y=p.revealOrder,k=p.tail;p=p.children;var O=Nr.current,z=(O&2)!==0;if(z?(O=O&1|2,o.flags|=128):O&=1,te(Nr,O),un(i,o,p,u),p=Nt?rd:0,!z&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Pk(i,u,o);else if(i.tag===19)Pk(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(u=o.child,y=null;u!==null;)i=u.alternate,i!==null&&kh(i)===null&&(y=u),u=u.sibling;u=y,u===null?(y=o.child,o.child=null):(y=u.sibling,u.sibling=null),Dg(o,!1,y,u,k,p);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&kh(i)===null){o.child=y;break}i=y.sibling,y.sibling=u,u=y,y=i}Dg(o,!0,u,null,k,p);break;case"together":Dg(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function $a(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ii|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(jo(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=Oa(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Oa(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function Mg(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&gh(i)))}function d8(i,o,u){switch(o.tag){case 3:je(o,o.stateNode.containerInfo),Ei(o,Dr,i.memoizedState.cache),ml();break;case 27:case 5:_e(o);break;case 4:je(o,o.stateNode.containerInfo);break;case 10:Ei(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,ag(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(Pi(o),o.flags|=128,null):(u&o.child.childLanes)!==0?Ok(i,o,u):(Pi(o),i=$a(i,o,u),i!==null?i.sibling:null);Pi(o);break;case 19:var y=(i.flags&128)!==0;if(p=(u&o.childLanes)!==0,p||(jo(i,o,u,!1),p=(u&o.childLanes)!==0),y){if(p)return Dk(i,o,u);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),te(Nr,Nr.current),p)break;return null;case 22:return o.lanes=0,Nk(i,o,u,o.pendingProps);case 24:Ei(o,Dr,i.memoizedState.cache)}return $a(i,o,u)}function Mk(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)Rr=!0;else{if(!Mg(i,u)&&(o.flags&128)===0)return Rr=!1,d8(i,o,u);Rr=(i.flags&131072)!==0}else Rr=!1,Nt&&(o.flags&1048576)!==0&&h_(o,rd,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(i=bl(o.elementType),o.type=i,typeof i=="function")zp(i)?(p=jl(i,p),o.tag=1,o=Ak(null,o,i,p,u)):(o.tag=0,o=Cg(null,o,i,p,u));else{if(i!=null){var y=i.$$typeof;if(y===A){o.tag=11,o=jk(null,o,i,p,u);break e}else if(y===D){o.tag=14,o=_k(null,o,i,p,u);break e}}throw o=H(i)||i,Error(n(306,o,""))}}return o;case 0:return Cg(i,o,o.type,o.pendingProps,u);case 1:return p=o.type,y=jl(p,o.pendingProps),Ak(i,o,p,y,u);case 3:e:{if(je(o,o.stateNode.containerInfo),i===null)throw Error(n(387));p=o.pendingProps;var k=o.memoizedState;y=k.element,eg(i,o),dd(o,p,null,u);var O=o.memoizedState;if(p=O.cache,Ei(o,Dr,p),p!==k.cache&&Kp(o,[Dr],u,!0),cd(),p=O.element,k.isDehydrated)if(k={element:p,isDehydrated:!1,cache:O.cache},o.updateQueue.baseState=k,o.memoizedState=k,o.flags&256){o=Tk(i,o,p,u);break e}else if(p!==y){y=Ss(Error(n(424)),o),nd(y),o=Tk(i,o,p,u);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ar=Os(i.firstChild),cn=o,Nt=!0,Si=null,As=!0,u=N_(o,null,p,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ml(),p===y){o=$a(i,o,u);break e}un(i,o,p,u)}o=o.child}return o;case 26:return Rh(i,o),i===null?(u=VN(o.type,null,o.pendingProps,null))?o.memoizedState=u:Nt||(u=o.type,i=o.pendingProps,p=Qh(Ne.current).createElement(u),p[Se]=o,p[Pe]=i,hn(p,u,i),kr(p),o.stateNode=p):o.memoizedState=VN(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return _e(o),i===null&&Nt&&(p=o.stateNode=qN(o.type,o.pendingProps,Ne.current),cn=o,As=!0,y=ar,Bi(o.type)?(fx=y,ar=Os(p.firstChild)):ar=y),un(i,o,o.pendingProps.children,u),Rh(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Nt&&((y=p=ar)&&(p=U8(p,o.type,o.pendingProps,As),p!==null?(o.stateNode=p,cn=o,ar=Os(p.firstChild),As=!1,y=!0):y=!1),y||Ci(o)),_e(o),y=o.type,k=o.pendingProps,O=i!==null?i.memoizedProps:null,p=k.children,ox(y,k)?p=null:O!==null&&ox(y,O)&&(o.flags|=32),o.memoizedState!==null&&(y=lg(i,o,t8,null,null,u),Td._currentValue=y),Rh(i,o),un(i,o,p,u),o.child;case 6:return i===null&&Nt&&((i=u=ar)&&(u=B8(u,o.pendingProps,As),u!==null?(o.stateNode=u,cn=o,ar=null,i=!0):i=!1),i||Ci(o)),null;case 13:return Ok(i,o,u);case 4:return je(o,o.stateNode.containerInfo),p=o.pendingProps,i===null?o.child=yl(o,null,p,u):un(i,o,p,u),o.child;case 11:return jk(i,o,o.type,o.pendingProps,u);case 7:return un(i,o,o.pendingProps,u),o.child;case 8:return un(i,o,o.pendingProps.children,u),o.child;case 12:return un(i,o,o.pendingProps.children,u),o.child;case 10:return p=o.pendingProps,Ei(o,o.type,p.value),un(i,o,p.children,u),o.child;case 9:return y=o.type._context,p=o.pendingProps.children,gl(o),y=dn(y),p=p(y),o.flags|=1,un(i,o,p,u),o.child;case 14:return _k(i,o,o.type,o.pendingProps,u);case 15:return kk(i,o,o.type,o.pendingProps,u);case 19:return Dk(i,o,u);case 31:return c8(i,o,u);case 22:return Nk(i,o,u,o.pendingProps);case 24:return gl(o),p=dn(Dr),i===null?(y=Jp(),y===null&&(y=Jt,k=Yp(),y.pooledCache=k,k.refCount++,k!==null&&(y.pooledCacheLanes|=u),y=k),o.memoizedState={parent:p,cache:y},Zp(o),Ei(o,Dr,y)):((i.lanes&u)!==0&&(eg(i,o),dd(o,null,null,u),cd()),y=i.memoizedState,k=o.memoizedState,y.parent!==p?(y={parent:p,cache:p},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Ei(o,Dr,p)):(p=k.cache,Ei(o,Dr,p),p!==y.cache&&Kp(o,[Dr],u,!0))),un(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function La(i){i.flags|=4}function Rg(i,o,u,p,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(lN())i.flags|=8192;else throw vl=yh,Qp}else i.flags&=-16777217}function Rk(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!XN(o))if(lN())i.flags|=8192;else throw vl=yh,Qp}function $h(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?nt():536870912,i.lanes|=o,Mo|=o)}function gd(i,o){if(!Nt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function ir(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,p=0;if(o)for(var y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)u|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=u,o}function u8(i,o,u){var p=o.pendingProps;switch(Fp(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(o),null;case 1:return ir(o),null;case 3:return u=o.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),Ma(Dr),Q(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(wo(o)?La(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Vp())),ir(o),null;case 26:var y=o.type,k=o.memoizedState;return i===null?(La(o),k!==null?(ir(o),Rk(o,k)):(ir(o),Rg(o,y,null,p,u))):k?k!==i.memoizedState?(La(o),ir(o),Rk(o,k)):(ir(o),o.flags&=-16777217):(i=i.memoizedProps,i!==p&&La(o),ir(o),Rg(o,y,i,p,u)),null;case 27:if(de(o),u=Ne.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==p&&La(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return ir(o),null}i=he.current,wo(o)?m_(o):(i=qN(y,p,u),o.stateNode=i,La(o))}return ir(o),null;case 5:if(de(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==p&&La(o);else{if(!p){if(o.stateNode===null)throw Error(n(166));return ir(o),null}if(k=he.current,wo(o))m_(o);else{var O=Qh(Ne.current);switch(k){case 1:k=O.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:k=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":k=O.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":k=O.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":k=O.createElement("div"),k.innerHTML="<script><\/script>",k=k.removeChild(k.firstChild);break;case"select":k=typeof p.is=="string"?O.createElement("select",{is:p.is}):O.createElement("select"),p.multiple?k.multiple=!0:p.size&&(k.size=p.size);break;default:k=typeof p.is=="string"?O.createElement(y,{is:p.is}):O.createElement(y)}}k[Se]=o,k[Pe]=p;e:for(O=o.child;O!==null;){if(O.tag===5||O.tag===6)k.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===o)break e;for(;O.sibling===null;){if(O.return===null||O.return===o)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}o.stateNode=k;e:switch(hn(k,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&La(o)}}return ir(o),Rg(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,u),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==p&&La(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(n(166));if(i=Ne.current,wo(o)){if(i=o.stateNode,u=o.memoizedProps,p=null,y=cn,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}i[Se]=o,i=!!(i.nodeValue===u||p!==null&&p.suppressHydrationWarning===!0||ON(i.nodeValue,u)),i||Ci(o,!0)}else i=Qh(i).createTextNode(p),i[Se]=o,o.stateNode=i}return ir(o),null;case 31:if(u=o.memoizedState,i===null||i.memoizedState!==null){if(p=wo(o),u!==null){if(i===null){if(!p)throw Error(n(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[Se]=o}else ml(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ir(o),i=!1}else u=Vp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=u),i=!0;if(!i)return o.flags&256?(ss(o),o):(ss(o),null);if((o.flags&128)!==0)throw Error(n(558))}return ir(o),null;case 13:if(p=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=wo(o),p!==null&&p.dehydrated!==null){if(i===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[Se]=o}else ml(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ir(o),y=!1}else y=Vp(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(ss(o),o):(ss(o),null)}return ss(o),(o.flags&128)!==0?(o.lanes=u,o):(u=p!==null,i=i!==null&&i.memoizedState!==null,u&&(p=o.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),k=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(k=p.memoizedState.cachePool.pool),k!==y&&(p.flags|=2048)),u!==i&&u&&(o.child.flags|=8192),$h(o,o.updateQueue),ir(o),null);case 4:return Q(),i===null&&nx(o.stateNode.containerInfo),ir(o),null;case 10:return Ma(o.type),ir(o),null;case 19:if(V(Nr),p=o.memoizedState,p===null)return ir(o),null;if(y=(o.flags&128)!==0,k=p.rendering,k===null)if(y)gd(p,!1);else{if(yr!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(k=kh(i),k!==null){for(o.flags|=128,gd(p,!1),i=k.updateQueue,o.updateQueue=i,$h(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)c_(u,i),u=u.sibling;return te(Nr,Nr.current&1|2),Nt&&Pa(o,p.treeForkCount),o.child}i=i.sibling}p.tail!==null&&tt()>qh&&(o.flags|=128,y=!0,gd(p,!1),o.lanes=4194304)}else{if(!y)if(i=kh(k),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,$h(o,i),gd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!k.alternate&&!Nt)return ir(o),null}else 2*tt()-p.renderingStartTime>qh&&u!==536870912&&(o.flags|=128,y=!0,gd(p,!1),o.lanes=4194304);p.isBackwards?(k.sibling=o.child,o.child=k):(i=p.last,i!==null?i.sibling=k:o.child=k,p.last=k)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=tt(),i.sibling=null,u=Nr.current,te(Nr,y?u&1|2:u&1),Nt&&Pa(o,p.treeForkCount),i):(ir(o),null);case 22:case 23:return ss(o),sg(),p=o.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(u&536870912)!==0&&(o.flags&128)===0&&(ir(o),o.subtreeFlags&6&&(o.flags|=8192)):ir(o),u=o.updateQueue,u!==null&&$h(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==u&&(o.flags|=2048),i!==null&&V(xl),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ma(Dr),ir(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function h8(i,o){switch(Fp(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ma(Dr),Q(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return de(o),null;case 31:if(o.memoizedState!==null){if(ss(o),o.alternate===null)throw Error(n(340));ml()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(ss(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ml()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return V(Nr),null;case 4:return Q(),null;case 10:return Ma(o.type),null;case 22:case 23:return ss(o),sg(),i!==null&&V(xl),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Ma(Dr),null;case 25:return null;default:return null}}function Ik(i,o){switch(Fp(o),o.tag){case 3:Ma(Dr),Q();break;case 26:case 27:case 5:de(o);break;case 4:Q();break;case 31:o.memoizedState!==null&&ss(o);break;case 13:ss(o);break;case 19:V(Nr);break;case 10:Ma(o.type);break;case 22:case 23:ss(o),sg(),i!==null&&V(xl);break;case 24:Ma(Dr)}}function xd(i,o){try{var u=o.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&i)===i){p=void 0;var k=u.create,O=u.inst;p=k(),O.destroy=p}u=u.next}while(u!==y)}}catch(z){qt(o,o.return,z)}}function Mi(i,o,u){try{var p=o.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var k=y.next;p=k;do{if((p.tag&i)===i){var O=p.inst,z=O.destroy;if(z!==void 0){O.destroy=void 0,y=o;var F=u,re=z;try{re()}catch(ue){qt(y,F,ue)}}}p=p.next}while(p!==k)}}catch(ue){qt(o,o.return,ue)}}function $k(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{C_(o,u)}catch(p){qt(i,i.return,p)}}}function Lk(i,o,u){u.props=jl(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(p){qt(i,o,p)}}function bd(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof u=="function"?i.refCleanup=u(p):u.current=p}}catch(y){qt(i,o,y)}}function ha(i,o){var u=i.ref,p=i.refCleanup;if(u!==null)if(typeof p=="function")try{p()}catch(y){qt(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){qt(i,o,y)}else u.current=null}function zk(i){var o=i.type,u=i.memoizedProps,p=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&p.focus();break e;case"img":u.src?p.src=u.src:u.srcSet&&(p.srcset=u.srcSet)}}catch(y){qt(i,i.return,y)}}function Ig(i,o,u){try{var p=i.stateNode;M8(p,i.type,u,o),p[Pe]=o}catch(y){qt(i,i.return,y)}}function Uk(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Bi(i.type)||i.tag===4}function $g(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uk(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Bi(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Lg(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Aa));else if(p!==4&&(p===27&&Bi(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(Lg(i,o,u),i=i.sibling;i!==null;)Lg(i,o,u),i=i.sibling}function Lh(i,o,u){var p=i.tag;if(p===5||p===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(p!==4&&(p===27&&Bi(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(Lh(i,o,u),i=i.sibling;i!==null;)Lh(i,o,u),i=i.sibling}function Bk(i){var o=i.stateNode,u=i.memoizedProps;try{for(var p=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);hn(o,p,u),o[Se]=i,o[Pe]=u}catch(k){qt(i,i.return,k)}}var za=!1,Ir=!1,zg=!1,qk=typeof WeakSet=="function"?WeakSet:Set,Qr=null;function f8(i,o){if(i=i.containerInfo,ix=af,i=e_(i),Pp(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var y=p.anchorOffset,k=p.focusNode;p=p.focusOffset;try{u.nodeType,k.nodeType}catch{u=null;break e}var O=0,z=-1,F=-1,re=0,ue=0,pe=i,ne=null;t:for(;;){for(var ae;pe!==u||y!==0&&pe.nodeType!==3||(z=O+y),pe!==k||p!==0&&pe.nodeType!==3||(F=O+p),pe.nodeType===3&&(O+=pe.nodeValue.length),(ae=pe.firstChild)!==null;)ne=pe,pe=ae;for(;;){if(pe===i)break t;if(ne===u&&++re===y&&(z=O),ne===k&&++ue===p&&(F=O),(ae=pe.nextSibling)!==null)break;pe=ne,ne=pe.parentNode}pe=ae}u=z===-1||F===-1?null:{start:z,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(lx={focusedElem:i,selectionRange:u},af=!1,Qr=o;Qr!==null;)if(o=Qr,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Qr=i;else for(;Qr!==null;){switch(o=Qr,k=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(u=0;u<i.length;u++)y=i[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&k!==null){i=void 0,u=o,y=k.memoizedProps,k=k.memoizedState,p=u.stateNode;try{var ze=jl(u.type,y);i=p.getSnapshotBeforeUpdate(ze,k),p.__reactInternalSnapshotBeforeUpdate=i}catch(Xe){qt(u,u.return,Xe)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)dx(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":dx(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,Qr=i;break}Qr=o.return}}function Fk(i,o,u){var p=u.flags;switch(u.tag){case 0:case 11:case 15:Ba(i,u),p&4&&xd(5,u);break;case 1:if(Ba(i,u),p&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(O){qt(u,u.return,O)}else{var y=jl(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(O){qt(u,u.return,O)}}p&64&&$k(u),p&512&&bd(u,u.return);break;case 3:if(Ba(i,u),p&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{C_(i,o)}catch(O){qt(u,u.return,O)}}break;case 27:o===null&&p&4&&Bk(u);case 26:case 5:Ba(i,u),o===null&&p&4&&zk(u),p&512&&bd(u,u.return);break;case 12:Ba(i,u);break;case 31:Ba(i,u),p&4&&Wk(i,u);break;case 13:Ba(i,u),p&4&&Gk(i,u),p&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=j8.bind(null,u),q8(i,u))));break;case 22:if(p=u.memoizedState!==null||za,!p){o=o!==null&&o.memoizedState!==null||Ir,y=za;var k=Ir;za=p,(Ir=o)&&!k?qa(i,u,(u.subtreeFlags&8772)!==0):Ba(i,u),za=y,Ir=k}break;case 30:break;default:Ba(i,u)}}function Hk(i){var o=i.alternate;o!==null&&(i.alternate=null,Hk(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&zn(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var dr=null,Bn=!1;function Ua(i,o,u){for(u=u.child;u!==null;)Vk(i,o,u),u=u.sibling}function Vk(i,o,u){if(wt&&typeof wt.onCommitFiberUnmount=="function")try{wt.onCommitFiberUnmount($t,u)}catch{}switch(u.tag){case 26:Ir||ha(u,o),Ua(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ir||ha(u,o);var p=dr,y=Bn;Bi(u.type)&&(dr=u.stateNode,Bn=!1),Ua(i,o,u),Cd(u.stateNode),dr=p,Bn=y;break;case 5:Ir||ha(u,o);case 6:if(p=dr,y=Bn,dr=null,Ua(i,o,u),dr=p,Bn=y,dr!==null)if(Bn)try{(dr.nodeType===9?dr.body:dr.nodeName==="HTML"?dr.ownerDocument.body:dr).removeChild(u.stateNode)}catch(k){qt(u,o,k)}else try{dr.removeChild(u.stateNode)}catch(k){qt(u,o,k)}break;case 18:dr!==null&&(Bn?(i=dr,$N(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),qo(i)):$N(dr,u.stateNode));break;case 4:p=dr,y=Bn,dr=u.stateNode.containerInfo,Bn=!0,Ua(i,o,u),dr=p,Bn=y;break;case 0:case 11:case 14:case 15:Mi(2,u,o),Ir||Mi(4,u,o),Ua(i,o,u);break;case 1:Ir||(ha(u,o),p=u.stateNode,typeof p.componentWillUnmount=="function"&&Lk(u,o,p)),Ua(i,o,u);break;case 21:Ua(i,o,u);break;case 22:Ir=(p=Ir)||u.memoizedState!==null,Ua(i,o,u),Ir=p;break;default:Ua(i,o,u)}}function Wk(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{qo(i)}catch(u){qt(o,o.return,u)}}}function Gk(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{qo(i)}catch(u){qt(o,o.return,u)}}function m8(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new qk),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new qk),o;default:throw Error(n(435,i.tag))}}function zh(i,o){var u=m8(i);o.forEach(function(p){if(!u.has(p)){u.add(p);var y=_8.bind(null,i,p);p.then(y,y)}})}function qn(i,o){var u=o.deletions;if(u!==null)for(var p=0;p<u.length;p++){var y=u[p],k=i,O=o,z=O;e:for(;z!==null;){switch(z.tag){case 27:if(Bi(z.type)){dr=z.stateNode,Bn=!1;break e}break;case 5:dr=z.stateNode,Bn=!1;break e;case 3:case 4:dr=z.stateNode.containerInfo,Bn=!0;break e}z=z.return}if(dr===null)throw Error(n(160));Vk(k,O,y),dr=null,Bn=!1,k=y.alternate,k!==null&&(k.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Kk(o,i),o=o.sibling}var Hs=null;function Kk(i,o){var u=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:qn(o,i),Fn(i),p&4&&(Mi(3,i,i.return),xd(3,i),Mi(5,i,i.return));break;case 1:qn(o,i),Fn(i),p&512&&(Ir||u===null||ha(u,u.return)),p&64&&za&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?p:u.concat(p))));break;case 26:var y=Hs;if(qn(o,i),Fn(i),p&512&&(Ir||u===null||ha(u,u.return)),p&4){var k=u!==null?u.memoizedState:null;if(p=i.memoizedState,u===null)if(p===null)if(i.stateNode===null){e:{p=i.type,u=i.memoizedProps,y=y.ownerDocument||y;t:switch(p){case"title":k=y.getElementsByTagName("title")[0],(!k||k[js]||k[Se]||k.namespaceURI==="http://www.w3.org/2000/svg"||k.hasAttribute("itemprop"))&&(k=y.createElement(p),y.head.insertBefore(k,y.querySelector("head > title"))),hn(k,p,u),k[Se]=i,kr(k),p=k;break e;case"link":var O=KN("link","href",y).get(p+(u.href||""));if(O){for(var z=0;z<O.length;z++)if(k=O[z],k.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&k.getAttribute("rel")===(u.rel==null?null:u.rel)&&k.getAttribute("title")===(u.title==null?null:u.title)&&k.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){O.splice(z,1);break t}}k=y.createElement(p),hn(k,p,u),y.head.appendChild(k);break;case"meta":if(O=KN("meta","content",y).get(p+(u.content||""))){for(z=0;z<O.length;z++)if(k=O[z],k.getAttribute("content")===(u.content==null?null:""+u.content)&&k.getAttribute("name")===(u.name==null?null:u.name)&&k.getAttribute("property")===(u.property==null?null:u.property)&&k.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&k.getAttribute("charset")===(u.charSet==null?null:u.charSet)){O.splice(z,1);break t}}k=y.createElement(p),hn(k,p,u),y.head.appendChild(k);break;default:throw Error(n(468,p))}k[Se]=i,kr(k),p=k}i.stateNode=p}else YN(y,i.type,i.stateNode);else i.stateNode=GN(y,p,i.memoizedProps);else k!==p?(k===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):k.count--,p===null?YN(y,i.type,i.stateNode):GN(y,p,i.memoizedProps)):p===null&&i.stateNode!==null&&Ig(i,i.memoizedProps,u.memoizedProps)}break;case 27:qn(o,i),Fn(i),p&512&&(Ir||u===null||ha(u,u.return)),u!==null&&p&4&&Ig(i,i.memoizedProps,u.memoizedProps);break;case 5:if(qn(o,i),Fn(i),p&512&&(Ir||u===null||ha(u,u.return)),i.flags&32){y=i.stateNode;try{uo(y,"")}catch(ze){qt(i,i.return,ze)}}p&4&&i.stateNode!=null&&(y=i.memoizedProps,Ig(i,y,u!==null?u.memoizedProps:y)),p&1024&&(zg=!0);break;case 6:if(qn(o,i),Fn(i),p&4){if(i.stateNode===null)throw Error(n(162));p=i.memoizedProps,u=i.stateNode;try{u.nodeValue=p}catch(ze){qt(i,i.return,ze)}}break;case 3:if(tf=null,y=Hs,Hs=Zh(o.containerInfo),qn(o,i),Hs=y,Fn(i),p&4&&u!==null&&u.memoizedState.isDehydrated)try{qo(o.containerInfo)}catch(ze){qt(i,i.return,ze)}zg&&(zg=!1,Yk(i));break;case 4:p=Hs,Hs=Zh(i.stateNode.containerInfo),qn(o,i),Fn(i),Hs=p;break;case 12:qn(o,i),Fn(i);break;case 31:qn(o,i),Fn(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,zh(i,p)));break;case 13:qn(o,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Bh=tt()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,zh(i,p)));break;case 22:y=i.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,re=za,ue=Ir;if(za=re||y,Ir=ue||F,qn(o,i),Ir=ue,za=re,Fn(i),p&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(u===null||F||za||Ir||_l(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){F=u=o;try{if(k=F.stateNode,y)O=k.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{z=F.stateNode;var pe=F.memoizedProps.style,ne=pe!=null&&pe.hasOwnProperty("display")?pe.display:null;z.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ze){qt(F,F.return,ze)}}}else if(o.tag===6){if(u===null){F=o;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(ze){qt(F,F.return,ze)}}}else if(o.tag===18){if(u===null){F=o;try{var ae=F.stateNode;y?LN(ae,!0):LN(F.stateNode,!1)}catch(ze){qt(F,F.return,ze)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=i.updateQueue,p!==null&&(u=p.retryQueue,u!==null&&(p.retryQueue=null,zh(i,u))));break;case 19:qn(o,i),Fn(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,zh(i,p)));break;case 30:break;case 21:break;default:qn(o,i),Fn(i)}}function Fn(i){var o=i.flags;if(o&2){try{for(var u,p=i.return;p!==null;){if(Uk(p)){u=p;break}p=p.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var y=u.stateNode,k=$g(i);Lh(i,k,y);break;case 5:var O=u.stateNode;u.flags&32&&(uo(O,""),u.flags&=-33);var z=$g(i);Lh(i,z,O);break;case 3:case 4:var F=u.stateNode.containerInfo,re=$g(i);Lg(i,re,F);break;default:throw Error(n(161))}}catch(ue){qt(i,i.return,ue)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function Yk(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;Yk(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function Ba(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Fk(i,o.alternate,o),o=o.sibling}function _l(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Mi(4,o,o.return),_l(o);break;case 1:ha(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&Lk(o,o.return,u),_l(o);break;case 27:Cd(o.stateNode);case 26:case 5:ha(o,o.return),_l(o);break;case 22:o.memoizedState===null&&_l(o);break;case 30:_l(o);break;default:_l(o)}i=i.sibling}}function qa(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,y=i,k=o,O=k.flags;switch(k.tag){case 0:case 11:case 15:qa(y,k,u),xd(4,k);break;case 1:if(qa(y,k,u),p=k,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(re){qt(p,p.return,re)}if(p=k,y=p.updateQueue,y!==null){var z=p.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)S_(F[y],z)}catch(re){qt(p,p.return,re)}}u&&O&64&&$k(k),bd(k,k.return);break;case 27:Bk(k);case 26:case 5:qa(y,k,u),u&&p===null&&O&4&&zk(k),bd(k,k.return);break;case 12:qa(y,k,u);break;case 31:qa(y,k,u),u&&O&4&&Wk(y,k);break;case 13:qa(y,k,u),u&&O&4&&Gk(y,k);break;case 22:k.memoizedState===null&&qa(y,k,u),bd(k,k.return);break;case 30:break;default:qa(y,k,u)}o=o.sibling}}function Ug(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&sd(u))}function Bg(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&sd(i))}function Vs(i,o,u,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Xk(i,o,u,p),o=o.sibling}function Xk(i,o,u,p){var y=o.flags;switch(o.tag){case 0:case 11:case 15:Vs(i,o,u,p),y&2048&&xd(9,o);break;case 1:Vs(i,o,u,p);break;case 3:Vs(i,o,u,p),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&sd(i)));break;case 12:if(y&2048){Vs(i,o,u,p),i=o.stateNode;try{var k=o.memoizedProps,O=k.id,z=k.onPostCommit;typeof z=="function"&&z(O,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(F){qt(o,o.return,F)}}else Vs(i,o,u,p);break;case 31:Vs(i,o,u,p);break;case 13:Vs(i,o,u,p);break;case 23:break;case 22:k=o.stateNode,O=o.alternate,o.memoizedState!==null?k._visibility&2?Vs(i,o,u,p):vd(i,o):k._visibility&2?Vs(i,o,u,p):(k._visibility|=2,Oo(i,o,u,p,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Ug(O,o);break;case 24:Vs(i,o,u,p),y&2048&&Bg(o.alternate,o);break;default:Vs(i,o,u,p)}}function Oo(i,o,u,p,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var k=i,O=o,z=u,F=p,re=O.flags;switch(O.tag){case 0:case 11:case 15:Oo(k,O,z,F,y),xd(8,O);break;case 23:break;case 22:var ue=O.stateNode;O.memoizedState!==null?ue._visibility&2?Oo(k,O,z,F,y):vd(k,O):(ue._visibility|=2,Oo(k,O,z,F,y)),y&&re&2048&&Ug(O.alternate,O);break;case 24:Oo(k,O,z,F,y),y&&re&2048&&Bg(O.alternate,O);break;default:Oo(k,O,z,F,y)}o=o.sibling}}function vd(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,p=o,y=p.flags;switch(p.tag){case 22:vd(u,p),y&2048&&Ug(p.alternate,p);break;case 24:vd(u,p),y&2048&&Bg(p.alternate,p);break;default:vd(u,p)}o=o.sibling}}var yd=8192;function Po(i,o,u){if(i.subtreeFlags&yd)for(i=i.child;i!==null;)Jk(i,o,u),i=i.sibling}function Jk(i,o,u){switch(i.tag){case 26:Po(i,o,u),i.flags&yd&&i.memoizedState!==null&&eI(u,Hs,i.memoizedState,i.memoizedProps);break;case 5:Po(i,o,u);break;case 3:case 4:var p=Hs;Hs=Zh(i.stateNode.containerInfo),Po(i,o,u),Hs=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=yd,yd=16777216,Po(i,o,u),yd=p):Po(i,o,u));break;default:Po(i,o,u)}}function Qk(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function wd(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];Qr=p,eN(p,i)}Qk(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Zk(i),i=i.sibling}function Zk(i){switch(i.tag){case 0:case 11:case 15:wd(i),i.flags&2048&&Mi(9,i,i.return);break;case 3:wd(i);break;case 12:wd(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Uh(i)):wd(i);break;default:wd(i)}}function Uh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var p=o[u];Qr=p,eN(p,i)}Qk(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Mi(8,o,o.return),Uh(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Uh(o));break;default:Uh(o)}i=i.sibling}}function eN(i,o){for(;Qr!==null;){var u=Qr;switch(u.tag){case 0:case 11:case 15:Mi(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var p=u.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:sd(u.memoizedState.cache)}if(p=u.child,p!==null)p.return=u,Qr=p;else e:for(u=i;Qr!==null;){p=Qr;var y=p.sibling,k=p.return;if(Hk(p),p===u){Qr=null;break e}if(y!==null){y.return=k,Qr=y;break e}Qr=k}}}var p8={getCacheForType:function(i){var o=dn(Dr),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u},cacheSignal:function(){return dn(Dr).controller.signal}},g8=typeof WeakMap=="function"?WeakMap:Map,Mt=0,Jt=null,vt=null,jt=0,Bt=0,as=null,Ri=!1,Do=!1,qg=!1,Fa=0,yr=0,Ii=0,kl=0,Fg=0,is=0,Mo=0,jd=null,Hn=null,Hg=!1,Bh=0,tN=0,qh=1/0,Fh=null,$i=null,Fr=0,Li=null,Ro=null,Ha=0,Vg=0,Wg=null,rN=null,_d=0,Gg=null;function ls(){return(Mt&2)!==0&&jt!==0?jt&-jt:L.T!==null?Zg():cr()}function nN(){if(is===0)if((jt&536870912)===0||Nt){var i=Ee;Ee<<=1,(Ee&3932160)===0&&(Ee=262144),is=i}else is=536870912;return i=ns.current,i!==null&&(i.flags|=32),is}function Vn(i,o,u){(i===Jt&&(Bt===2||Bt===9)||i.cancelPendingCommit!==null)&&(Io(i,0),zi(i,jt,is,!1)),Ut(i,u),((Mt&2)===0||i!==Jt)&&(i===Jt&&((Mt&2)===0&&(kl|=u),yr===4&&zi(i,jt,is,!1)),fa(i))}function sN(i,o,u){if((Mt&6)!==0)throw Error(n(327));var p=!u&&(o&127)===0&&(o&i.expiredLanes)===0||Le(i,o),y=p?v8(i,o):Yg(i,o,!0),k=p;do{if(y===0){Do&&!p&&zi(i,o,0,!1);break}else{if(u=i.current.alternate,k&&!x8(u)){y=Yg(i,o,!1),k=!1;continue}if(y===2){if(k=o,i.errorRecoveryDisabledLanes&k)var O=0;else O=i.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){o=O;e:{var z=i;y=jd;var F=z.current.memoizedState.isDehydrated;if(F&&(Io(z,O).flags|=256),O=Yg(z,O,!1),O!==2){if(qg&&!F){z.errorRecoveryDisabledLanes|=k,kl|=k,y=4;break e}k=Hn,Hn=y,k!==null&&(Hn===null?Hn=k:Hn.push.apply(Hn,k))}y=O}if(k=!1,y!==2)continue}}if(y===1){Io(i,0),zi(i,o,0,!0);break}e:{switch(p=i,k=y,k){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:zi(p,o,is,!Ri);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(y=Bh+300-tt(),10<y)){if(zi(p,o,is,!Ri),Ue(p,0,!0)!==0)break e;Ha=o,p.timeoutHandle=RN(aN.bind(null,p,u,Hn,Fh,Hg,o,is,kl,Mo,Ri,k,"Throttled",-0,0),y);break e}aN(p,u,Hn,Fh,Hg,o,is,kl,Mo,Ri,k,null,-0,0)}}break}while(!0);fa(i)}function aN(i,o,u,p,y,k,O,z,F,re,ue,pe,ne,ae){if(i.timeoutHandle=-1,pe=o.subtreeFlags,pe&8192||(pe&16785408)===16785408){pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},Jk(o,k,pe);var ze=(k&62914560)===k?Bh-tt():(k&4194048)===k?tN-tt():0;if(ze=tI(pe,ze),ze!==null){Ha=k,i.cancelPendingCommit=ze(fN.bind(null,i,o,k,u,p,y,O,z,F,ue,pe,null,ne,ae)),zi(i,k,O,!re);return}}fN(i,o,k,u,p,y,O,z,F)}function x8(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var p=0;p<u.length;p++){var y=u[p],k=y.getSnapshot;y=y.value;try{if(!ts(k(),y))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function zi(i,o,u,p){o&=~Fg,o&=~kl,i.suspendedLanes|=o,i.pingedLanes&=~o,p&&(i.warmLanes|=o),p=i.expirationTimes;for(var y=o;0<y;){var k=31-gt(y),O=1<<k;p[k]=-1,y&=~O}u!==0&&Zn(i,u,o)}function Hh(){return(Mt&6)===0?(kd(0),!1):!0}function Kg(){if(vt!==null){if(Bt===0)var i=vt.return;else i=vt,Da=pl=null,dg(i),So=null,id=0,i=vt;for(;i!==null;)Ik(i.alternate,i),i=i.return;vt=null}}function Io(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,$8(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),Ha=0,Kg(),Jt=i,vt=u=Oa(i.current,null),jt=o,Bt=0,as=null,Ri=!1,Do=Le(i,o),qg=!1,Mo=is=Fg=kl=Ii=yr=0,Hn=jd=null,Hg=!1,(o&8)!==0&&(o|=o&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=o;0<p;){var y=31-gt(p),k=1<<y;o|=i[y],p&=~k}return Fa=o,uh(),u}function iN(i,o){ot=null,L.H=md,o===No||o===vh?(o=j_(),Bt=3):o===Qp?(o=j_(),Bt=4):Bt=o===Sg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,as=o,vt===null&&(yr=1,Dh(i,Ss(o,i.current)))}function lN(){var i=ns.current;return i===null?!0:(jt&4194048)===jt?Ts===null:(jt&62914560)===jt||(jt&536870912)!==0?i===Ts:!1}function oN(){var i=L.H;return L.H=md,i===null?md:i}function cN(){var i=L.A;return L.A=p8,i}function Vh(){yr=4,Ri||(jt&4194048)!==jt&&ns.current!==null||(Do=!0),(Ii&134217727)===0&&(kl&134217727)===0||Jt===null||zi(Jt,jt,is,!1)}function Yg(i,o,u){var p=Mt;Mt|=2;var y=oN(),k=cN();(Jt!==i||jt!==o)&&(Fh=null,Io(i,o)),o=!1;var O=yr;e:do try{if(Bt!==0&&vt!==null){var z=vt,F=as;switch(Bt){case 8:Kg(),O=6;break e;case 3:case 2:case 9:case 6:ns.current===null&&(o=!0);var re=Bt;if(Bt=0,as=null,$o(i,z,F,re),u&&Do){O=0;break e}break;default:re=Bt,Bt=0,as=null,$o(i,z,F,re)}}b8(),O=yr;break}catch(ue){iN(i,ue)}while(!0);return o&&i.shellSuspendCounter++,Da=pl=null,Mt=p,L.H=y,L.A=k,vt===null&&(Jt=null,jt=0,uh()),O}function b8(){for(;vt!==null;)dN(vt)}function v8(i,o){var u=Mt;Mt|=2;var p=oN(),y=cN();Jt!==i||jt!==o?(Fh=null,qh=tt()+500,Io(i,o)):Do=Le(i,o);e:do try{if(Bt!==0&&vt!==null){o=vt;var k=as;t:switch(Bt){case 1:Bt=0,as=null,$o(i,o,k,1);break;case 2:case 9:if(y_(k)){Bt=0,as=null,uN(o);break}o=function(){Bt!==2&&Bt!==9||Jt!==i||(Bt=7),fa(i)},k.then(o,o);break e;case 3:Bt=7;break e;case 4:Bt=5;break e;case 7:y_(k)?(Bt=0,as=null,uN(o)):(Bt=0,as=null,$o(i,o,k,7));break;case 5:var O=null;switch(vt.tag){case 26:O=vt.memoizedState;case 5:case 27:var z=vt;if(O?XN(O):z.stateNode.complete){Bt=0,as=null;var F=z.sibling;if(F!==null)vt=F;else{var re=z.return;re!==null?(vt=re,Wh(re)):vt=null}break t}}Bt=0,as=null,$o(i,o,k,5);break;case 6:Bt=0,as=null,$o(i,o,k,6);break;case 8:Kg(),yr=6;break e;default:throw Error(n(462))}}y8();break}catch(ue){iN(i,ue)}while(!0);return Da=pl=null,L.H=p,L.A=y,Mt=u,vt!==null?0:(Jt=null,jt=0,uh(),yr)}function y8(){for(;vt!==null&&!Ce();)dN(vt)}function dN(i){var o=Mk(i.alternate,i,Fa);i.memoizedProps=i.pendingProps,o===null?Wh(i):vt=o}function uN(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=Ek(u,o,o.pendingProps,o.type,void 0,jt);break;case 11:o=Ek(u,o,o.pendingProps,o.type.render,o.ref,jt);break;case 5:dg(o);default:Ik(u,o),o=vt=c_(o,Fa),o=Mk(u,o,Fa)}i.memoizedProps=i.pendingProps,o===null?Wh(i):vt=o}function $o(i,o,u,p){Da=pl=null,dg(o),So=null,id=0;var y=o.return;try{if(o8(i,y,o,u,jt)){yr=1,Dh(i,Ss(u,i.current)),vt=null;return}}catch(k){if(y!==null)throw vt=y,k;yr=1,Dh(i,Ss(u,i.current)),vt=null;return}o.flags&32768?(Nt||p===1?i=!0:Do||(jt&536870912)!==0?i=!1:(Ri=i=!0,(p===2||p===9||p===3||p===6)&&(p=ns.current,p!==null&&p.tag===13&&(p.flags|=16384))),hN(o,i)):Wh(o)}function Wh(i){var o=i;do{if((o.flags&32768)!==0){hN(o,Ri);return}i=o.return;var u=u8(o.alternate,o,Fa);if(u!==null){vt=u;return}if(o=o.sibling,o!==null){vt=o;return}vt=o=i}while(o!==null);yr===0&&(yr=5)}function hN(i,o){do{var u=h8(i.alternate,i);if(u!==null){u.flags&=32767,vt=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){vt=i;return}vt=i=u}while(i!==null);yr=6,vt=null}function fN(i,o,u,p,y,k,O,z,F){i.cancelPendingCommit=null;do Gh();while(Fr!==0);if((Mt&6)!==0)throw Error(n(327));if(o!==null){if(o===i.current)throw Error(n(177));if(k=o.lanes|o.childLanes,k|=$p,nr(i,u,k,O,z,F),i===Jt&&(vt=Jt=null,jt=0),Ro=o,Li=i,Ha=u,Vg=k,Wg=y,rN=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,k8(se,function(){return bN(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=L.T,L.T=null,y=B.p,B.p=2,O=Mt,Mt|=4;try{f8(i,o,u)}finally{Mt=O,B.p=y,L.T=p}}Fr=1,mN(),pN(),gN()}}function mN(){if(Fr===1){Fr=0;var i=Li,o=Ro,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=L.T,L.T=null;var p=B.p;B.p=2;var y=Mt;Mt|=4;try{Kk(o,i);var k=lx,O=e_(i.containerInfo),z=k.focusedElem,F=k.selectionRange;if(O!==z&&z&&z.ownerDocument&&Zj(z.ownerDocument.documentElement,z)){if(F!==null&&Pp(z)){var re=F.start,ue=F.end;if(ue===void 0&&(ue=re),"selectionStart"in z)z.selectionStart=re,z.selectionEnd=Math.min(ue,z.value.length);else{var pe=z.ownerDocument||document,ne=pe&&pe.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),ze=z.textContent.length,Xe=Math.min(F.start,ze),Kt=F.end===void 0?Xe:Math.min(F.end,ze);!ae.extend&&Xe>Kt&&(O=Kt,Kt=Xe,Xe=O);var J=Qj(z,Xe),K=Qj(z,Kt);if(J&&K&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==K.node||ae.focusOffset!==K.offset)){var ee=pe.createRange();ee.setStart(J.node,J.offset),ae.removeAllRanges(),Xe>Kt?(ae.addRange(ee),ae.extend(K.node,K.offset)):(ee.setEnd(K.node,K.offset),ae.addRange(ee))}}}}for(pe=[],ae=z;ae=ae.parentNode;)ae.nodeType===1&&pe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof z.focus=="function"&&z.focus(),z=0;z<pe.length;z++){var fe=pe[z];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}af=!!ix,lx=ix=null}finally{Mt=y,B.p=p,L.T=u}}i.current=o,Fr=2}}function pN(){if(Fr===2){Fr=0;var i=Li,o=Ro,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=L.T,L.T=null;var p=B.p;B.p=2;var y=Mt;Mt|=4;try{Fk(i,o.alternate,o)}finally{Mt=y,B.p=p,L.T=u}}Fr=3}}function gN(){if(Fr===4||Fr===3){Fr=0,Qe();var i=Li,o=Ro,u=Ha,p=rN;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Fr=5:(Fr=0,Ro=Li=null,xN(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&($i=null),Ze(u),o=o.stateNode,wt&&typeof wt.onCommitFiberRoot=="function")try{wt.onCommitFiberRoot($t,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=L.T,y=B.p,B.p=2,L.T=null;try{for(var k=i.onRecoverableError,O=0;O<p.length;O++){var z=p[O];k(z.value,{componentStack:z.stack})}}finally{L.T=o,B.p=y}}(Ha&3)!==0&&Gh(),fa(i),y=i.pendingLanes,(u&261930)!==0&&(y&42)!==0?i===Gg?_d++:(_d=0,Gg=i):_d=0,kd(0)}}function xN(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,sd(o)))}function Gh(){return mN(),pN(),gN(),bN()}function bN(){if(Fr!==5)return!1;var i=Li,o=Vg;Vg=0;var u=Ze(Ha),p=L.T,y=B.p;try{B.p=32>u?32:u,L.T=null,u=Wg,Wg=null;var k=Li,O=Ha;if(Fr=0,Ro=Li=null,Ha=0,(Mt&6)!==0)throw Error(n(331));var z=Mt;if(Mt|=4,Zk(k.current),Xk(k,k.current,O,u),Mt=z,kd(0,!1),wt&&typeof wt.onPostCommitFiberRoot=="function")try{wt.onPostCommitFiberRoot($t,k)}catch{}return!0}finally{B.p=y,L.T=p,xN(i,o)}}function vN(i,o,u){o=Ss(u,o),o=Ng(i.stateNode,o,2),i=Oi(i,o,2),i!==null&&(Ut(i,2),fa(i))}function qt(i,o,u){if(i.tag===3)vN(i,i,u);else for(;o!==null;){if(o.tag===3){vN(o,i,u);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&($i===null||!$i.has(p))){i=Ss(u,i),u=yk(2),p=Oi(o,u,2),p!==null&&(wk(u,p,o,i),Ut(p,2),fa(p));break}}o=o.return}}function Xg(i,o,u){var p=i.pingCache;if(p===null){p=i.pingCache=new g8;var y=new Set;p.set(o,y)}else y=p.get(o),y===void 0&&(y=new Set,p.set(o,y));y.has(u)||(qg=!0,y.add(u),i=w8.bind(null,i,o,u),o.then(i,i))}function w8(i,o,u){var p=i.pingCache;p!==null&&p.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,Jt===i&&(jt&u)===u&&(yr===4||yr===3&&(jt&62914560)===jt&&300>tt()-Bh?(Mt&2)===0&&Io(i,0):Fg|=u,Mo===jt&&(Mo=0)),fa(i)}function yN(i,o){o===0&&(o=nt()),i=hl(i,o),i!==null&&(Ut(i,o),fa(i))}function j8(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),yN(i,u)}function _8(i,o){var u=0;switch(i.tag){case 31:case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(u=y.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(n(314))}p!==null&&p.delete(o),yN(i,u)}function k8(i,o){return It(i,o)}var Kh=null,Lo=null,Jg=!1,Yh=!1,Qg=!1,Ui=0;function fa(i){i!==Lo&&i.next===null&&(Lo===null?Kh=Lo=i:Lo=Lo.next=i),Yh=!0,Jg||(Jg=!0,S8())}function kd(i,o){if(!Qg&&Yh){Qg=!0;do for(var u=!1,p=Kh;p!==null;){if(i!==0){var y=p.pendingLanes;if(y===0)var k=0;else{var O=p.suspendedLanes,z=p.pingedLanes;k=(1<<31-gt(42|i)+1)-1,k&=y&~(O&~z),k=k&201326741?k&201326741|1:k?k|2:0}k!==0&&(u=!0,kN(p,k))}else k=jt,k=Ue(p,p===Jt?k:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(k&3)===0||Le(p,k)||(u=!0,kN(p,k));p=p.next}while(u);Qg=!1}}function N8(){wN()}function wN(){Yh=Jg=!1;var i=0;Ui!==0&&I8()&&(i=Ui);for(var o=tt(),u=null,p=Kh;p!==null;){var y=p.next,k=jN(p,o);k===0?(p.next=null,u===null?Kh=y:u.next=y,y===null&&(Lo=u)):(u=p,(i!==0||(k&3)!==0)&&(Yh=!0)),p=y}Fr!==0&&Fr!==5||kd(i),Ui!==0&&(Ui=0)}function jN(i,o){for(var u=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,k=i.pendingLanes&-62914561;0<k;){var O=31-gt(k),z=1<<O,F=y[O];F===-1?((z&u)===0||(z&p)!==0)&&(y[O]=bt(z,o)):F<=o&&(i.expiredLanes|=z),k&=~z}if(o=Jt,u=jt,u=Ue(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,u===0||i===o&&(Bt===2||Bt===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&oe(p),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Le(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(p!==null&&oe(p),Ze(u)){case 2:case 8:u=pt;break;case 32:u=se;break;case 268435456:u=Ge;break;default:u=se}return p=_N.bind(null,i),u=It(u,p),i.callbackPriority=o,i.callbackNode=u,o}return p!==null&&p!==null&&oe(p),i.callbackPriority=2,i.callbackNode=null,2}function _N(i,o){if(Fr!==0&&Fr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(Gh()&&i.callbackNode!==u)return null;var p=jt;return p=Ue(i,i===Jt?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(sN(i,p,o),jN(i,tt()),i.callbackNode!=null&&i.callbackNode===u?_N.bind(null,i):null)}function kN(i,o){if(Gh())return null;sN(i,o,!0)}function S8(){L8(function(){(Mt&6)!==0?It(Be,N8):wN()})}function Zg(){if(Ui===0){var i=_o;i===0&&(i=Ae,Ae<<=1,(Ae&261888)===0&&(Ae=256)),Ui=i}return Ui}function NN(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:nh(""+i)}function SN(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function C8(i,o,u,p,y){if(o==="submit"&&u&&u.stateNode===y){var k=NN((y[Pe]||null).action),O=p.submitter;O&&(o=(o=O[Pe]||null)?NN(o.formAction):O.getAttribute("formAction"),o!==null&&(k=o,O=null));var z=new lh("action","action",null,p,y);i.push({event:z,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Ui!==0){var F=O?SN(y,O):new FormData(y);vg(u,{pending:!0,data:F,method:y.method,action:k},null,F)}}else typeof k=="function"&&(z.preventDefault(),F=O?SN(y,O):new FormData(y),vg(u,{pending:!0,data:F,method:y.method,action:k},k,F))},currentTarget:y}]})}}for(var ex=0;ex<Ip.length;ex++){var tx=Ip[ex],E8=tx.toLowerCase(),A8=tx[0].toUpperCase()+tx.slice(1);Fs(E8,"on"+A8)}Fs(n_,"onAnimationEnd"),Fs(s_,"onAnimationIteration"),Fs(a_,"onAnimationStart"),Fs("dblclick","onDoubleClick"),Fs("focusin","onFocus"),Fs("focusout","onBlur"),Fs(VR,"onTransitionRun"),Fs(WR,"onTransitionStart"),Fs(GR,"onTransitionCancel"),Fs(i_,"onTransitionEnd"),Ca("onMouseEnter",["mouseout","mouseover"]),Ca("onMouseLeave",["mouseout","mouseover"]),Ca("onPointerEnter",["pointerout","pointerover"]),Ca("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nd));function CN(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var p=i[u],y=p.event;p=p.listeners;e:{var k=void 0;if(o)for(var O=p.length-1;0<=O;O--){var z=p[O],F=z.instance,re=z.currentTarget;if(z=z.listener,F!==k&&y.isPropagationStopped())break e;k=z,y.currentTarget=re;try{k(y)}catch(ue){dh(ue)}y.currentTarget=null,k=F}else for(O=0;O<p.length;O++){if(z=p[O],F=z.instance,re=z.currentTarget,z=z.listener,F!==k&&y.isPropagationStopped())break e;k=z,y.currentTarget=re;try{k(y)}catch(ue){dh(ue)}y.currentTarget=null,k=F}}}}function yt(i,o){var u=o[at];u===void 0&&(u=o[at]=new Set);var p=i+"__bubble";u.has(p)||(EN(o,i,2,!1),u.add(p))}function rx(i,o,u){var p=0;o&&(p|=4),EN(u,i,p,o)}var Xh="_reactListening"+Math.random().toString(36).slice(2);function nx(i){if(!i[Xh]){i[Xh]=!0,st.forEach(function(u){u!=="selectionchange"&&(T8.has(u)||rx(u,!1,i),rx(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Xh]||(o[Xh]=!0,rx("selectionchange",!1,o))}}function EN(i,o,u,p){switch(n2(o)){case 2:var y=sI;break;case 8:y=aI;break;default:y=bx}u=y.bind(null,o,u,i),y=void 0,!_p||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(o,u,{capture:!0,passive:y}):i.addEventListener(o,u,!0):y!==void 0?i.addEventListener(o,u,{passive:y}):i.addEventListener(o,u,!1)}function sx(i,o,u,p,y){var k=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var O=p.tag;if(O===3||O===4){var z=p.stateNode.containerInfo;if(z===y)break;if(O===4)for(O=p.return;O!==null;){var F=O.tag;if((F===3||F===4)&&O.stateNode.containerInfo===y)return;O=O.return}for(;z!==null;){if(O=ji(z),O===null)return;if(F=O.tag,F===5||F===6||F===26||F===27){p=k=O;continue e}z=z.parentNode}}p=p.return}Dj(function(){var re=k,ue=wp(u),pe=[];e:{var ne=l_.get(i);if(ne!==void 0){var ae=lh,ze=i;switch(i){case"keypress":if(ah(u)===0)break e;case"keydown":case"keyup":ae=_R;break;case"focusin":ze="focus",ae=Cp;break;case"focusout":ze="blur",ae=Cp;break;case"beforeblur":case"afterblur":ae=Cp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Ij;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=uR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=SR;break;case n_:case s_:case a_:ae=mR;break;case i_:ae=ER;break;case"scroll":case"scrollend":ae=cR;break;case"wheel":ae=TR;break;case"copy":case"cut":case"paste":ae=gR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Lj;break;case"toggle":case"beforetoggle":ae=PR}var Xe=(o&4)!==0,Kt=!Xe&&(i==="scroll"||i==="scrollend"),J=Xe?ne!==null?ne+"Capture":null:ne;Xe=[];for(var K=re,ee;K!==null;){var fe=K;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||J===null||(fe=Gc(K,J),fe!=null&&Xe.push(Sd(K,fe,ee))),Kt)break;K=K.return}0<Xe.length&&(ne=new ae(ne,ze,null,u,ue),pe.push({event:ne,listeners:Xe}))}}if((o&7)===0){e:{if(ne=i==="mouseover"||i==="pointerover",ae=i==="mouseout"||i==="pointerout",ne&&u!==yp&&(ze=u.relatedTarget||u.fromElement)&&(ji(ze)||ze[Ye]))break e;if((ae||ne)&&(ne=ue.window===ue?ue:(ne=ue.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(ze=u.relatedTarget||u.toElement,ae=re,ze=ze?ji(ze):null,ze!==null&&(Kt=l(ze),Xe=ze.tag,ze!==Kt||Xe!==5&&Xe!==27&&Xe!==6)&&(ze=null)):(ae=null,ze=re),ae!==ze)){if(Xe=Ij,fe="onMouseLeave",J="onMouseEnter",K="mouse",(i==="pointerout"||i==="pointerover")&&(Xe=Lj,fe="onPointerLeave",J="onPointerEnter",K="pointer"),Kt=ae==null?ne:_i(ae),ee=ze==null?ne:_i(ze),ne=new Xe(fe,K+"leave",ae,u,ue),ne.target=Kt,ne.relatedTarget=ee,fe=null,ji(ue)===re&&(Xe=new Xe(J,K+"enter",ze,u,ue),Xe.target=ee,Xe.relatedTarget=Kt,fe=Xe),Kt=fe,ae&&ze)t:{for(Xe=O8,J=ae,K=ze,ee=0,fe=J;fe;fe=Xe(fe))ee++;fe=0;for(var We=K;We;We=Xe(We))fe++;for(;0<ee-fe;)J=Xe(J),ee--;for(;0<fe-ee;)K=Xe(K),fe--;for(;ee--;){if(J===K||K!==null&&J===K.alternate){Xe=J;break t}J=Xe(J),K=Xe(K)}Xe=null}else Xe=null;ae!==null&&AN(pe,ne,ae,Xe,!1),ze!==null&&Kt!==null&&AN(pe,Kt,ze,Xe,!0)}}e:{if(ne=re?_i(re):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var Tt=Wj;else if(Hj(ne))if(Gj)Tt=qR;else{Tt=UR;var qe=zR}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?re&&vp(re.elementType)&&(Tt=Wj):Tt=BR;if(Tt&&(Tt=Tt(i,re))){Vj(pe,Tt,u,ue);break e}qe&&qe(i,ne,re),i==="focusout"&&re&&ne.type==="number"&&re.memoizedProps.value!=null&&bp(ne,"number",ne.value)}switch(qe=re?_i(re):window,i){case"focusin":(Hj(qe)||qe.contentEditable==="true")&&(po=qe,Dp=re,td=null);break;case"focusout":td=Dp=po=null;break;case"mousedown":Mp=!0;break;case"contextmenu":case"mouseup":case"dragend":Mp=!1,t_(pe,u,ue);break;case"selectionchange":if(HR)break;case"keydown":case"keyup":t_(pe,u,ue)}var ct;if(Ap)e:{switch(i){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else mo?qj(i,u)&&(_t="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(_t="onCompositionStart");_t&&(zj&&u.locale!=="ko"&&(mo||_t!=="onCompositionStart"?_t==="onCompositionEnd"&&mo&&(ct=Mj()):(ki=ue,kp="value"in ki?ki.value:ki.textContent,mo=!0)),qe=Jh(re,_t),0<qe.length&&(_t=new $j(_t,i,null,u,ue),pe.push({event:_t,listeners:qe}),ct?_t.data=ct:(ct=Fj(u),ct!==null&&(_t.data=ct)))),(ct=MR?RR(i,u):IR(i,u))&&(_t=Jh(re,"onBeforeInput"),0<_t.length&&(qe=new $j("onBeforeInput","beforeinput",null,u,ue),pe.push({event:qe,listeners:_t}),qe.data=ct)),C8(pe,i,re,u,ue)}CN(pe,o)})}function Sd(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Jh(i,o){for(var u=o+"Capture",p=[];i!==null;){var y=i,k=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||k===null||(y=Gc(i,u),y!=null&&p.unshift(Sd(i,y,k)),y=Gc(i,o),y!=null&&p.push(Sd(i,y,k))),i.tag===3)return p;i=i.return}return[]}function O8(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function AN(i,o,u,p,y){for(var k=o._reactName,O=[];u!==null&&u!==p;){var z=u,F=z.alternate,re=z.stateNode;if(z=z.tag,F!==null&&F===p)break;z!==5&&z!==26&&z!==27||re===null||(F=re,y?(re=Gc(u,k),re!=null&&O.unshift(Sd(u,re,F))):y||(re=Gc(u,k),re!=null&&O.push(Sd(u,re,F)))),u=u.return}O.length!==0&&i.push({event:o,listeners:O})}var P8=/\r\n?/g,D8=/\u0000|\uFFFD/g;function TN(i){return(typeof i=="string"?i:""+i).replace(P8,`
`).replace(D8,"")}function ON(i,o){return o=TN(o),TN(i)===o}function Gt(i,o,u,p,y,k){switch(u){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||uo(i,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&uo(i,""+p);break;case"className":th(i,"class",p);break;case"tabIndex":th(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":th(i,u,p);break;case"style":Oj(i,p,k);break;case"data":if(o!=="object"){th(i,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=nh(""+p),i.setAttribute(u,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof k=="function"&&(u==="formAction"?(o!=="input"&&Gt(i,o,"name",y.name,y,null),Gt(i,o,"formEncType",y.formEncType,y,null),Gt(i,o,"formMethod",y.formMethod,y,null),Gt(i,o,"formTarget",y.formTarget,y,null)):(Gt(i,o,"encType",y.encType,y,null),Gt(i,o,"method",y.method,y,null),Gt(i,o,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(u);break}p=nh(""+p),i.setAttribute(u,p);break;case"onClick":p!=null&&(i.onclick=Aa);break;case"onScroll":p!=null&&yt("scroll",i);break;case"onScrollEnd":p!=null&&yt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}u=nh(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""+p):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":p===!0?i.setAttribute(u,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(u,p):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(u,p):i.removeAttribute(u);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(u):i.setAttribute(u,p);break;case"popover":yt("beforetoggle",i),yt("toggle",i),eh(i,"popover",p);break;case"xlinkActuate":Ea(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":Ea(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":Ea(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":Ea(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":Ea(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":Ea(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":Ea(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":Ea(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":Ea(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":eh(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=lR.get(u)||u,eh(i,u,p))}}function ax(i,o,u,p,y,k){switch(u){case"style":Oj(i,p,k);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(n(61));if(u=p.__html,u!=null){if(y.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof p=="string"?uo(i,p):(typeof p=="number"||typeof p=="bigint")&&uo(i,""+p);break;case"onScroll":p!=null&&yt("scroll",i);break;case"onScrollEnd":p!=null&&yt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oo.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),o=u.slice(2,y?u.length-7:void 0),k=i[Pe]||null,k=k!=null?k[u]:null,typeof k=="function"&&i.removeEventListener(o,k,y),typeof p=="function")){typeof k!="function"&&k!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,p,y);break e}u in i?i[u]=p:p===!0?i.setAttribute(u,""):eh(i,u,p)}}}function hn(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",i),yt("load",i);var p=!1,y=!1,k;for(k in u)if(u.hasOwnProperty(k)){var O=u[k];if(O!=null)switch(k){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Gt(i,o,k,O,u,null)}}y&&Gt(i,o,"srcSet",u.srcSet,u,null),p&&Gt(i,o,"src",u.src,u,null);return;case"input":yt("invalid",i);var z=k=O=y=null,F=null,re=null;for(p in u)if(u.hasOwnProperty(p)){var ue=u[p];if(ue!=null)switch(p){case"name":y=ue;break;case"type":O=ue;break;case"checked":F=ue;break;case"defaultChecked":re=ue;break;case"value":k=ue;break;case"defaultValue":z=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(n(137,o));break;default:Gt(i,o,p,ue,u,null)}}Cj(i,k,z,F,re,O,y,!1);return;case"select":yt("invalid",i),p=O=k=null;for(y in u)if(u.hasOwnProperty(y)&&(z=u[y],z!=null))switch(y){case"value":k=z;break;case"defaultValue":O=z;break;case"multiple":p=z;default:Gt(i,o,y,z,u,null)}o=k,u=O,i.multiple=!!p,o!=null?co(i,!!p,o,!1):u!=null&&co(i,!!p,u,!0);return;case"textarea":yt("invalid",i),k=y=p=null;for(O in u)if(u.hasOwnProperty(O)&&(z=u[O],z!=null))switch(O){case"value":p=z;break;case"defaultValue":y=z;break;case"children":k=z;break;case"dangerouslySetInnerHTML":if(z!=null)throw Error(n(91));break;default:Gt(i,o,O,z,u,null)}Aj(i,p,y,k);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(p=u[F],p!=null))switch(F){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Gt(i,o,F,p,u,null)}return;case"dialog":yt("beforetoggle",i),yt("toggle",i),yt("cancel",i),yt("close",i);break;case"iframe":case"object":yt("load",i);break;case"video":case"audio":for(p=0;p<Nd.length;p++)yt(Nd[p],i);break;case"image":yt("error",i),yt("load",i);break;case"details":yt("toggle",i);break;case"embed":case"source":case"link":yt("error",i),yt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in u)if(u.hasOwnProperty(re)&&(p=u[re],p!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Gt(i,o,re,p,u,null)}return;default:if(vp(o)){for(ue in u)u.hasOwnProperty(ue)&&(p=u[ue],p!==void 0&&ax(i,o,ue,p,u,void 0));return}}for(z in u)u.hasOwnProperty(z)&&(p=u[z],p!=null&&Gt(i,o,z,p,u,null))}function M8(i,o,u,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,k=null,O=null,z=null,F=null,re=null,ue=null;for(ae in u){var pe=u[ae];if(u.hasOwnProperty(ae)&&pe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":F=pe;default:p.hasOwnProperty(ae)||Gt(i,o,ae,null,p,pe)}}for(var ne in p){var ae=p[ne];if(pe=u[ne],p.hasOwnProperty(ne)&&(ae!=null||pe!=null))switch(ne){case"type":k=ae;break;case"name":y=ae;break;case"checked":re=ae;break;case"defaultChecked":ue=ae;break;case"value":O=ae;break;case"defaultValue":z=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,o));break;default:ae!==pe&&Gt(i,o,ne,ae,p,pe)}}xp(i,O,z,F,re,ue,k,y);return;case"select":ae=O=z=ne=null;for(k in u)if(F=u[k],u.hasOwnProperty(k)&&F!=null)switch(k){case"value":break;case"multiple":ae=F;default:p.hasOwnProperty(k)||Gt(i,o,k,null,p,F)}for(y in p)if(k=p[y],F=u[y],p.hasOwnProperty(y)&&(k!=null||F!=null))switch(y){case"value":ne=k;break;case"defaultValue":z=k;break;case"multiple":O=k;default:k!==F&&Gt(i,o,y,k,p,F)}o=z,u=O,p=ae,ne!=null?co(i,!!u,ne,!1):!!p!=!!u&&(o!=null?co(i,!!u,o,!0):co(i,!!u,u?[]:"",!1));return;case"textarea":ae=ne=null;for(z in u)if(y=u[z],u.hasOwnProperty(z)&&y!=null&&!p.hasOwnProperty(z))switch(z){case"value":break;case"children":break;default:Gt(i,o,z,null,p,y)}for(O in p)if(y=p[O],k=u[O],p.hasOwnProperty(O)&&(y!=null||k!=null))switch(O){case"value":ne=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==k&&Gt(i,o,O,y,p,k)}Ej(i,ne,ae);return;case"option":for(var ze in u)if(ne=u[ze],u.hasOwnProperty(ze)&&ne!=null&&!p.hasOwnProperty(ze))switch(ze){case"selected":i.selected=!1;break;default:Gt(i,o,ze,null,p,ne)}for(F in p)if(ne=p[F],ae=u[F],p.hasOwnProperty(F)&&ne!==ae&&(ne!=null||ae!=null))switch(F){case"selected":i.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:Gt(i,o,F,ne,p,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in u)ne=u[Xe],u.hasOwnProperty(Xe)&&ne!=null&&!p.hasOwnProperty(Xe)&&Gt(i,o,Xe,null,p,ne);for(re in p)if(ne=p[re],ae=u[re],p.hasOwnProperty(re)&&ne!==ae&&(ne!=null||ae!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(n(137,o));break;default:Gt(i,o,re,ne,p,ae)}return;default:if(vp(o)){for(var Kt in u)ne=u[Kt],u.hasOwnProperty(Kt)&&ne!==void 0&&!p.hasOwnProperty(Kt)&&ax(i,o,Kt,void 0,p,ne);for(ue in p)ne=p[ue],ae=u[ue],!p.hasOwnProperty(ue)||ne===ae||ne===void 0&&ae===void 0||ax(i,o,ue,ne,p,ae);return}}for(var J in u)ne=u[J],u.hasOwnProperty(J)&&ne!=null&&!p.hasOwnProperty(J)&&Gt(i,o,J,null,p,ne);for(pe in p)ne=p[pe],ae=u[pe],!p.hasOwnProperty(pe)||ne===ae||ne==null&&ae==null||Gt(i,o,pe,ne,p,ae)}function PN(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function R8(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,u=performance.getEntriesByType("resource"),p=0;p<u.length;p++){var y=u[p],k=y.transferSize,O=y.initiatorType,z=y.duration;if(k&&z&&PN(O)){for(O=0,z=y.responseEnd,p+=1;p<u.length;p++){var F=u[p],re=F.startTime;if(re>z)break;var ue=F.transferSize,pe=F.initiatorType;ue&&PN(pe)&&(F=F.responseEnd,O+=ue*(F<z?1:(z-re)/(F-re)))}if(--p,o+=8*(k+O)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ix=null,lx=null;function Qh(i){return i.nodeType===9?i:i.ownerDocument}function DN(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MN(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function ox(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cx=null;function I8(){var i=window.event;return i&&i.type==="popstate"?i===cx?!1:(cx=i,!0):(cx=null,!1)}var RN=typeof setTimeout=="function"?setTimeout:void 0,$8=typeof clearTimeout=="function"?clearTimeout:void 0,IN=typeof Promise=="function"?Promise:void 0,L8=typeof queueMicrotask=="function"?queueMicrotask:typeof IN<"u"?function(i){return IN.resolve(null).then(i).catch(z8)}:RN;function z8(i){setTimeout(function(){throw i})}function Bi(i){return i==="head"}function $N(i,o){var u=o,p=0;do{var y=u.nextSibling;if(i.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(p===0){i.removeChild(y),qo(o);return}p--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")p++;else if(u==="html")Cd(i.ownerDocument.documentElement);else if(u==="head"){u=i.ownerDocument.head,Cd(u);for(var k=u.firstChild;k;){var O=k.nextSibling,z=k.nodeName;k[js]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&k.rel.toLowerCase()==="stylesheet"||u.removeChild(k),k=O}}else u==="body"&&Cd(i.ownerDocument.body);u=y}while(u);qo(o)}function LN(i,o){var u=i;i=0;do{var p=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),p&&p.nodeType===8)if(u=p.data,u==="/$"){if(i===0)break;i--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||i++;u=p}while(u)}function dx(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":dx(u),zn(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function U8(i,o,u,p){for(;i.nodeType===1;){var y=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[js])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(k=i.getAttribute("rel"),k==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(k!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(k=i.getAttribute("src"),(k!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&k&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var k=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===k)return i}else return i;if(i=Os(i.nextSibling),i===null)break}return null}function B8(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=Os(i.nextSibling),i===null))return null;return i}function zN(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Os(i.nextSibling),i===null))return null;return i}function ux(i){return i.data==="$?"||i.data==="$~"}function hx(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function q8(i,o){var u=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||u.readyState!=="loading")o();else{var p=function(){o(),u.removeEventListener("DOMContentLoaded",p)};u.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function Os(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var fx=null;function UN(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"||u==="/&"){if(o===0)return Os(i.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}i=i.nextSibling}return null}function BN(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return i;o--}else u!=="/$"&&u!=="/&"||o++}i=i.previousSibling}return null}function qN(i,o,u){switch(o=Qh(u),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Cd(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);zn(i)}var Ps=new Map,FN=new Set;function Zh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Va=B.d;B.d={f:F8,r:H8,D:V8,C:W8,L:G8,m:K8,X:X8,S:Y8,M:J8};function F8(){var i=Va.f(),o=Hh();return i||o}function H8(i){var o=ca(i);o!==null&&o.tag===5&&o.type==="form"?ik(o):Va.r(i)}var zo=typeof document>"u"?null:document;function HN(i,o,u){var p=zo;if(p&&typeof o=="string"&&o){var y=ks(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),FN.has(y)||(FN.add(y),i={rel:i,crossOrigin:u,href:o},p.querySelector(y)===null&&(o=p.createElement("link"),hn(o,"link",i),kr(o),p.head.appendChild(o)))}}function V8(i){Va.D(i),HN("dns-prefetch",i,null)}function W8(i,o){Va.C(i,o),HN("preconnect",i,o)}function G8(i,o,u){Va.L(i,o,u);var p=zo;if(p&&i&&o){var y='link[rel="preload"][as="'+ks(o)+'"]';o==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+ks(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+ks(u.imageSizes)+'"]')):y+='[href="'+ks(i)+'"]';var k=y;switch(o){case"style":k=Uo(i);break;case"script":k=Bo(i)}Ps.has(k)||(i=g({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),Ps.set(k,i),p.querySelector(y)!==null||o==="style"&&p.querySelector(Ed(k))||o==="script"&&p.querySelector(Ad(k))||(o=p.createElement("link"),hn(o,"link",i),kr(o),p.head.appendChild(o)))}}function K8(i,o){Va.m(i,o);var u=zo;if(u&&i){var p=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+ks(p)+'"][href="'+ks(i)+'"]',k=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":k=Bo(i)}if(!Ps.has(k)&&(i=g({rel:"modulepreload",href:i},o),Ps.set(k,i),u.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ad(k)))return}p=u.createElement("link"),hn(p,"link",i),kr(p),u.head.appendChild(p)}}}function Y8(i,o,u){Va.S(i,o,u);var p=zo;if(p&&i){var y=Sa(p).hoistableStyles,k=Uo(i);o=o||"default";var O=y.get(k);if(!O){var z={loading:0,preload:null};if(O=p.querySelector(Ed(k)))z.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},u),(u=Ps.get(k))&&mx(i,u);var F=O=p.createElement("link");kr(F),hn(F,"link",i),F._p=new Promise(function(re,ue){F.onload=re,F.onerror=ue}),F.addEventListener("load",function(){z.loading|=1}),F.addEventListener("error",function(){z.loading|=2}),z.loading|=4,ef(O,o,p)}O={type:"stylesheet",instance:O,count:1,state:z},y.set(k,O)}}}function X8(i,o){Va.X(i,o);var u=zo;if(u&&i){var p=Sa(u).hoistableScripts,y=Bo(i),k=p.get(y);k||(k=u.querySelector(Ad(y)),k||(i=g({src:i,async:!0},o),(o=Ps.get(y))&&px(i,o),k=u.createElement("script"),kr(k),hn(k,"link",i),u.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},p.set(y,k))}}function J8(i,o){Va.M(i,o);var u=zo;if(u&&i){var p=Sa(u).hoistableScripts,y=Bo(i),k=p.get(y);k||(k=u.querySelector(Ad(y)),k||(i=g({src:i,async:!0,type:"module"},o),(o=Ps.get(y))&&px(i,o),k=u.createElement("script"),kr(k),hn(k,"link",i),u.head.appendChild(k)),k={type:"script",instance:k,count:1,state:null},p.set(y,k))}}function VN(i,o,u,p){var y=(y=Ne.current)?Zh(y):null;if(!y)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Uo(u.href),u=Sa(y).hoistableStyles,p=u.get(o),p||(p={type:"style",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Uo(u.href);var k=Sa(y).hoistableStyles,O=k.get(i);if(O||(y=y.ownerDocument||y,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},k.set(i,O),(k=y.querySelector(Ed(i)))&&!k._p&&(O.instance=k,O.state.loading=5),Ps.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ps.set(i,u),k||Q8(y,i,u,O.state))),o&&p===null)throw Error(n(528,""));return O}if(o&&p!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Bo(u),u=Sa(y).hoistableScripts,p=u.get(o),p||(p={type:"script",instance:null,count:0,state:null},u.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Uo(i){return'href="'+ks(i)+'"'}function Ed(i){return'link[rel="stylesheet"]['+i+"]"}function WN(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function Q8(i,o,u,p){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=i.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),hn(o,"link",u),kr(o),i.head.appendChild(o))}function Bo(i){return'[src="'+ks(i)+'"]'}function Ad(i){return"script[async]"+i}function GN(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var p=i.querySelector('style[data-href~="'+ks(u.href)+'"]');if(p)return o.instance=p,kr(p),p;var y=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),kr(p),hn(p,"style",y),ef(p,u.precedence,i),o.instance=p;case"stylesheet":y=Uo(u.href);var k=i.querySelector(Ed(y));if(k)return o.state.loading|=4,o.instance=k,kr(k),k;p=WN(u),(y=Ps.get(y))&&mx(p,y),k=(i.ownerDocument||i).createElement("link"),kr(k);var O=k;return O._p=new Promise(function(z,F){O.onload=z,O.onerror=F}),hn(k,"link",p),o.state.loading|=4,ef(k,u.precedence,i),o.instance=k;case"script":return k=Bo(u.src),(y=i.querySelector(Ad(k)))?(o.instance=y,kr(y),y):(p=u,(y=Ps.get(k))&&(p=g({},u),px(p,y)),i=i.ownerDocument||i,y=i.createElement("script"),kr(y),hn(y,"link",p),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,ef(p,u.precedence,i));return o.instance}function ef(i,o,u){for(var p=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,k=y,O=0;O<p.length;O++){var z=p[O];if(z.dataset.precedence===o)k=z;else if(k!==y)break}k?k.parentNode.insertBefore(i,k.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function mx(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function px(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var tf=null;function KN(i,o,u){if(tf===null){var p=new Map,y=tf=new Map;y.set(u,p)}else y=tf,p=y.get(u),p||(p=new Map,y.set(u,p));if(p.has(i))return p;for(p.set(i,null),u=u.getElementsByTagName(i),y=0;y<u.length;y++){var k=u[y];if(!(k[js]||k[Se]||i==="link"&&k.getAttribute("rel")==="stylesheet")&&k.namespaceURI!=="http://www.w3.org/2000/svg"){var O=k.getAttribute(o)||"";O=i+O;var z=p.get(O);z?z.push(k):p.set(O,[k])}}return p}function YN(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function Z8(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function XN(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function eI(i,o,u,p){if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=Uo(p.href),k=o.querySelector(Ed(y));if(k){o=k._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=rf.bind(i),o.then(i,i)),u.state.loading|=4,u.instance=k,kr(k);return}k=o.ownerDocument||o,p=WN(p),(y=Ps.get(y))&&mx(p,y),k=k.createElement("link"),kr(k);var O=k;O._p=new Promise(function(z,F){O.onload=z,O.onerror=F}),hn(k,"link",p),u.instance=k}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(i.count++,u=rf.bind(i),o.addEventListener("load",u),o.addEventListener("error",u))}}var gx=0;function tI(i,o){return i.stylesheets&&i.count===0&&sf(i,i.stylesheets),0<i.count||0<i.imgCount?function(u){var p=setTimeout(function(){if(i.stylesheets&&sf(i,i.stylesheets),i.unsuspend){var k=i.unsuspend;i.unsuspend=null,k()}},6e4+o);0<i.imgBytes&&gx===0&&(gx=62500*R8());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&sf(i,i.stylesheets),i.unsuspend)){var k=i.unsuspend;i.unsuspend=null,k()}},(i.imgBytes>gx?50:800)+o);return i.unsuspend=u,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var nf=null;function sf(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,nf=new Map,o.forEach(rI,i),nf=null,rf.call(i))}function rI(i,o){if(!(o.state.loading&4)){var u=nf.get(i);if(u)var p=u.get(null);else{u=new Map,nf.set(i,u);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),k=0;k<y.length;k++){var O=y[k];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(u.set(O.dataset.precedence,O),p=O)}p&&u.set(null,p)}y=o.instance,O=y.getAttribute("data-precedence"),k=u.get(O)||p,k===p&&u.set(null,y),u.set(O,y),this.count++,p=rf.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),k?k.parentNode.insertBefore(y,k.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var Td={$$typeof:E,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function nI(i,o,u,p,y,k,O,z,F){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Dt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.hiddenUpdates=Dt(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=k,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function JN(i,o,u,p,y,k,O,z,F,re,ue,pe){return i=new nI(i,o,u,O,F,re,ue,pe,z),o=1,k===!0&&(o|=24),k=rs(3,null,null,o),i.current=k,k.stateNode=i,o=Yp(),o.refCount++,i.pooledCache=o,o.refCount++,k.memoizedState={element:p,isDehydrated:u,cache:o},Zp(k),i}function QN(i){return i?(i=bo,i):bo}function ZN(i,o,u,p,y,k){y=QN(y),p.context===null?p.context=y:p.pendingContext=y,p=Ti(o),p.payload={element:u},k=k===void 0?null:k,k!==null&&(p.callback=k),u=Oi(i,p,o),u!==null&&(Vn(u,i,o),od(u,i,o))}function e2(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function xx(i,o){e2(i,o),(i=i.alternate)&&e2(i,o)}function t2(i){if(i.tag===13||i.tag===31){var o=hl(i,67108864);o!==null&&Vn(o,i,67108864),xx(i,67108864)}}function r2(i){if(i.tag===13||i.tag===31){var o=ls();o=sr(o);var u=hl(i,o);u!==null&&Vn(u,i,o),xx(i,o)}}var af=!0;function sI(i,o,u,p){var y=L.T;L.T=null;var k=B.p;try{B.p=2,bx(i,o,u,p)}finally{B.p=k,L.T=y}}function aI(i,o,u,p){var y=L.T;L.T=null;var k=B.p;try{B.p=8,bx(i,o,u,p)}finally{B.p=k,L.T=y}}function bx(i,o,u,p){if(af){var y=vx(p);if(y===null)sx(i,o,p,lf,u),s2(i,p);else if(lI(y,i,o,u,p))p.stopPropagation();else if(s2(i,p),o&4&&-1<iI.indexOf(i)){for(;y!==null;){var k=ca(y);if(k!==null)switch(k.tag){case 3:if(k=k.stateNode,k.current.memoizedState.isDehydrated){var O=Z(k.pendingLanes);if(O!==0){var z=k;for(z.pendingLanes|=2,z.entangledLanes|=2;O;){var F=1<<31-gt(O);z.entanglements[1]|=F,O&=~F}fa(k),(Mt&6)===0&&(qh=tt()+500,kd(0))}}break;case 31:case 13:z=hl(k,2),z!==null&&Vn(z,k,2),Hh(),xx(k,2)}if(k=vx(p),k===null&&sx(i,o,p,lf,u),k===y)break;y=k}y!==null&&p.stopPropagation()}else sx(i,o,p,null,u)}}function vx(i){return i=wp(i),yx(i)}var lf=null;function yx(i){if(lf=null,i=ji(i),i!==null){var o=l(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=c(o),i!==null)return i;i=null}else if(u===31){if(i=d(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return lf=i,null}function n2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xe()){case Be:return 2;case pt:return 8;case se:case Te:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var wx=!1,qi=null,Fi=null,Hi=null,Od=new Map,Pd=new Map,Vi=[],iI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s2(i,o){switch(i){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":Hi=null;break;case"pointerover":case"pointerout":Od.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pd.delete(o.pointerId)}}function Dd(i,o,u,p,y,k){return i===null||i.nativeEvent!==k?(i={blockedOn:o,domEventName:u,eventSystemFlags:p,nativeEvent:k,targetContainers:[y]},o!==null&&(o=ca(o),o!==null&&t2(o)),i):(i.eventSystemFlags|=p,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function lI(i,o,u,p,y){switch(o){case"focusin":return qi=Dd(qi,i,o,u,p,y),!0;case"dragenter":return Fi=Dd(Fi,i,o,u,p,y),!0;case"mouseover":return Hi=Dd(Hi,i,o,u,p,y),!0;case"pointerover":var k=y.pointerId;return Od.set(k,Dd(Od.get(k)||null,i,o,u,p,y)),!0;case"gotpointercapture":return k=y.pointerId,Pd.set(k,Dd(Pd.get(k)||null,i,o,u,p,y)),!0}return!1}function a2(i){var o=ji(i.target);if(o!==null){var u=l(o);if(u!==null){if(o=u.tag,o===13){if(o=c(u),o!==null){i.blockedOn=o,Pr(i.priority,function(){r2(u)});return}}else if(o===31){if(o=d(u),o!==null){i.blockedOn=o,Pr(i.priority,function(){r2(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function of(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=vx(i.nativeEvent);if(u===null){u=i.nativeEvent;var p=new u.constructor(u.type,u);yp=p,u.target.dispatchEvent(p),yp=null}else return o=ca(u),o!==null&&t2(o),i.blockedOn=u,!1;o.shift()}return!0}function i2(i,o,u){of(i)&&u.delete(o)}function oI(){wx=!1,qi!==null&&of(qi)&&(qi=null),Fi!==null&&of(Fi)&&(Fi=null),Hi!==null&&of(Hi)&&(Hi=null),Od.forEach(i2),Pd.forEach(i2)}function cf(i,o){i.blockedOn===o&&(i.blockedOn=null,wx||(wx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oI)))}var df=null;function l2(i){df!==i&&(df=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){df===i&&(df=null);for(var o=0;o<i.length;o+=3){var u=i[o],p=i[o+1],y=i[o+2];if(typeof p!="function"){if(yx(p||u)===null)continue;break}var k=ca(u);k!==null&&(i.splice(o,3),o-=3,vg(k,{pending:!0,data:y,method:u.method,action:p},p,y))}}))}function qo(i){function o(F){return cf(F,i)}qi!==null&&cf(qi,i),Fi!==null&&cf(Fi,i),Hi!==null&&cf(Hi,i),Od.forEach(o),Pd.forEach(o);for(var u=0;u<Vi.length;u++){var p=Vi[u];p.blockedOn===i&&(p.blockedOn=null)}for(;0<Vi.length&&(u=Vi[0],u.blockedOn===null);)a2(u),u.blockedOn===null&&Vi.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(p=0;p<u.length;p+=3){var y=u[p],k=u[p+1],O=y[Pe]||null;if(typeof k=="function")O||l2(u);else if(O){var z=null;if(k&&k.hasAttribute("formAction")){if(y=k,O=k[Pe]||null)z=O.formAction;else if(yx(y)!==null)continue}else z=O.action;typeof z=="function"?u[p+1]=z:(u.splice(p,3),p-=3),l2(u)}}}function o2(){function i(k){k.canIntercept&&k.info==="react-transition"&&k.intercept({handler:function(){return new Promise(function(O){return y=O})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),p||setTimeout(u,20)}function u(){if(!p&&!navigation.transition){var k=navigation.currentEntry;k&&k.url!=null&&navigation.navigate(k.url,{state:k.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function jx(i){this._internalRoot=i}uf.prototype.render=jx.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,p=ls();ZN(u,p,i,o,null,null)},uf.prototype.unmount=jx.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;ZN(i.current,2,null,i,null,null),Hh(),o[Ye]=null}};function uf(i){this._internalRoot=i}uf.prototype.unstable_scheduleHydration=function(i){if(i){var o=cr();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Vi.length&&o!==0&&o<Vi[u].priority;u++);Vi.splice(u,0,i),u===0&&a2(i)}};var c2=t.version;if(c2!=="19.2.3")throw Error(n(527,c2,"19.2.3"));B.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var cI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hf.isDisabled&&hf.supportsFiber)try{$t=hf.inject(cI),wt=hf}catch{}}return Rd.createRoot=function(i,o){if(!a(i))throw Error(n(299));var u=!1,p="",y=gk,k=xk,O=bk;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(k=o.onCaughtError),o.onRecoverableError!==void 0&&(O=o.onRecoverableError)),o=JN(i,1,!1,null,null,u,p,null,y,k,O,o2),i[Ye]=o.current,nx(i),new jx(o)},Rd.hydrateRoot=function(i,o,u){if(!a(i))throw Error(n(299));var p=!1,y="",k=gk,O=xk,z=bk,F=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(k=u.onUncaughtError),u.onCaughtError!==void 0&&(O=u.onCaughtError),u.onRecoverableError!==void 0&&(z=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),o=JN(i,1,!0,o,u??null,p,y,F,k,O,z,o2),o.context=QN(null),u=o.current,p=ls(),p=sr(p),y=Ti(p),y.callback=null,Oi(u,y,p),u=p,o.current.lanes=u,Ut(o,u),fa(o),i[Ye]=o.current,nx(i),new uf(o)},Rd.version="19.2.3",Rd}var v2;function jI(){if(v2)return Sx.exports;v2=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sx.exports=wI(),Sx.exports}var _I=jI();const kI=ys(_I);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SI=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),y2=e=>{const t=SI(e);return t.charAt(0).toUpperCase()+t.slice(1)},x3=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),CI=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:l,iconNode:c,...d},h)=>v.createElement("svg",{ref:h,...EI,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:x3("lucide",a),...!l&&!CI(d)&&{"aria-hidden":"true"},...d},[...c.map(([f,m])=>v.createElement(f,m)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=(e,t)=>{const r=v.forwardRef(({className:n,...a},l)=>v.createElement(AI,{ref:l,iconNode:t,className:x3(`lucide-${NI(y2(e))}`,`lucide-${e}`,n),...a}));return r.displayName=y2(e),r};/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ti=ie("activity",TI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],PI=ie("arrow-down-right",OI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],MI=ie("arrow-down",DI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],b3=ie("arrow-left",RI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],l0=ie("arrow-right",II);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],LI=ie("arrow-up-down",$I);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],o0=ie("arrow-up-right",zI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],BI=ie("arrow-up",UI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],rl=ie("award",qI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],HI=ie("banknote",FI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],WI=ie("bell-ring",VI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ri=ie("bell",GI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ku=ie("book-open",KI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],XI=ie("book",YI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JI=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],w2=ie("bot",JI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],sw=ie("briefcase",QI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],ja=ie("building-2",ZI);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e$=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],On=ie("calendar",e$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t$=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],r$=ie("camera",t$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n$=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],aw=ie("chart-column",n$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s$=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],a$=ie("chart-no-axes-column",s$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i$=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],l$=ie("chart-pie",i$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o$=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],v3=ie("check-check",o$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c$=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Er=ie("check",c$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d$=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Et=ie("chevron-down",d$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u$=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],os=ie("chevron-left",u$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h$=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],f$=ie("chevron-right",h$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m$=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Yl=ie("chevron-up",m$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ru=ie("circle-alert",p$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 8-4 4 4 4",key:"15vm53"}],["path",{d:"M16 12H8",key:"1fr5h0"}]],x$=ie("circle-arrow-left",g$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b$=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],iw=ie("circle-check-big",b$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],At=ie("circle-check",v$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]],lw=ie("circle-pause",y$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w$=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],y3=ie("circle-play",w$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ow=ie("circle-question-mark",j$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],nu=ie("circle-x",_$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k$=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Br=ie("clock",k$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N$=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],S$=ie("code",N$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C$=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],E$=ie("command",C$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A$=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],c0=ie("copy",A$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T$=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],d0=ie("credit-card",T$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],cw=ie("crown",O$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P$=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],D$=ie("database",P$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],w3=ie("dollar-sign",M$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R$=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Nu=ie("download",R$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],dw=ie("ellipsis-vertical",I$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],j2=ie("ellipsis",$$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],j3=ie("external-link",L$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],_3=ie("eye-off",z$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pm=ie("eye",U$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_2=ie("file-exclamation-point",B$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gs=ie("file-text",q$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],su=ie("flame",F$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],V$=ie("frown",H$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],uw=ie("funnel",W$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],K$=ie("git-merge",G$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],fc=ie("globe",Y$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],hw=ie("grip-vertical",X$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Q$=ie("hash",J$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["path",{d:"M12.409 5.824c-.702.792-1.15 1.496-1.415 2.166l2.153 2.156a.5.5 0 0 1 0 .707l-2.293 2.293a.5.5 0 0 0 0 .707L12 15",key:"idzbju"}],["path",{d:"M13.508 20.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 9.591-3.677.6.6 0 0 0 .818.001A5.5 5.5 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5z",key:"1su70f"}]],e9=ie("heart-crack",Z$);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],k3=ie("headphones",t9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],n9=ie("info",r9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],N3=ie("key",s9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],u0=ie("layout-dashboard",a9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],l9=ie("layout-grid",i9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],c9=ie("layout-list",o9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],S3=ie("layout-template",d9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Qd=ie("lightbulb",u9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],C3=ie("list-todo",h9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],rt=ie("loader-circle",f9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],h0=ie("lock",m9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fw=ie("log-out",p9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xs=ie("mail",g9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],b9=ie("maximize-2",x9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],E3=ie("medal",v9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],w9=ie("menu",y9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Zd=ie("message-circle",j9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 15h.01",key:"q59x07"}],["path",{d:"M12 7v4",key:"xawao1"}]],k2=ie("message-square-warning",_9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Xn=ie("message-square",k9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],S9=ie("mic-off",N9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C9=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],E9=ie("mic",C9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],T9=ie("minimize-2",A9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],A3=ie("moon",O9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],D9=ie("octagon-alert",P9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],R9=ie("palette",M9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],$9=ie("panel-left",I9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],z9=ie("panel-right",L9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],B9=ie("panels-top-left",U9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],T3=ie("paperclip",q9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],H9=ie("pause",F9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],W9=ie("pen-line",V9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Su=ie("pen",G9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],O3=ie("pencil",K9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],X9=ie("phone-call",Y9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],P3=ie("phone-off",J9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],mt=ie("phone",Q9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Hl=ie("play",Z9);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M17 8a1 1 0 0 1 1 1v4a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1z",key:"1xoxul"}],["path",{d:"M9 8V2",key:"14iosj"}]],mw=ie("plug",eL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wn=ie("plus",tL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],nL=ie("quote",rL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pw=ie("refresh-cw",sL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],iL=ie("repeat",aL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Cu=ie("rotate-ccw",lL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],sl=ie("save",oL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ta=ie("search",cL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],mc=ie("send",dL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eu=ie("settings",uL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],gm=ie("shield-alert",hL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],xm=ie("shield-check",fL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],bm=ie("shield",mL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]],gL=ie("skip-forward",pL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],bL=ie("sliders-vertical",xL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],D3=ie("smartphone",vL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],jr=ie("sparkles",yL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gw=ie("square-check-big",wL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_L=ie("square-pen",jL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],NL=ie("square",kL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],CL=ie("sun",SL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]],AL=ie("swords",EL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ar=ie("target",TL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}],["path",{d:"M17 14V2",key:"8ymqnk"}]],N2=ie("thumbs-down",OL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],DL=ie("timer",PL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ra=ie("trash-2",ML);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Vd=ie("trending-down",RL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Pc=ie("trending-up",IL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vn=ie("triangle-alert",$L);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],xw=ie("trophy",LL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],M3=ie("upload",zL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],BL=ie("user-check",UL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bw=ie("user-plus",qL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Mn=ie("user",FL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gr=ie("users",HL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],_v=ie("volume-2",VL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],GL=ie("volume-x",WL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],YL=ie("webhook",KL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],JL=ie("wifi-off",XL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ZL=ie("wifi",QL);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Rt=ie("x",e7);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],el=ie("zap",t7),r7=({activePage:e,onNavigate:t,userRole:r,centerType:n="sales",isOpen:a,onClose:l})=>{const c=[{id:"dashboard",icon:u0,label:" ",page:"dashboard"},{id:"pipeline",icon:l$,label:n==="support"?"":"",page:"pipeline"},{id:"leads",icon:Gr,label:n==="support"?"":"",page:"leads"},{id:"calls",icon:mt,label:"",page:"calls"},{id:"tasks",icon:gw,label:"",page:"tasks"},{id:"chat",icon:Xn,label:"'",page:"chat"},{id:"targets",icon:Ar,label:r==="manager"?"":" ",page:"targets"},{id:"gamification",icon:xw,label:"",page:"gamification"},{id:"reports",icon:a$,label:"",page:"dashboard"}],d=h=>{t(h),l()};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-300 ${a?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,onClick:l}),s.jsxs("div",{className:`
        fixed lg:relative inset-y-0 right-0 z-50 
        flex flex-col w-64 lg:w-20 
        bg-[#0B1120] border-l lg:border-l-0 lg:border-e border-white/5 
        items-center py-6 shadow-2xl lg:shadow-xl 
        transform transition-transform duration-300 ease-in-out
        ${a?"translate-x-0":"translate-x-full lg:translate-x-0"}
      `,children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-40 bg-gradient-to-b from-brand-500/10 to-transparent pointer-events-none"}),s.jsx("button",{onClick:l,className:"absolute top-4 left-4 p-2 text-slate-400 hover:text-white lg:hidden",children:s.jsx(Rt,{className:"w-6 h-6"})}),s.jsxs("div",{className:"mb-8 p-3 bg-gradient-to-br from-brand-600 to-brand-700 rounded-2xl shadow-lg shadow-brand-500/20 cursor-pointer hover:scale-105 transition-transform duration-200 group relative z-10",onClick:()=>d("dashboard"),children:[s.jsx(E$,{className:"w-6 h-6 text-white relative z-10"}),s.jsx("div",{className:"absolute inset-0 rounded-2xl bg-white/20 opacity-0 group-hover:opacity-100 transition-opacity"})]}),s.jsx("nav",{className:"flex-1 flex flex-col gap-2 w-full px-3 relative z-10 overflow-y-auto lg:overflow-visible",children:c.map(h=>{const f=e===h.page&&(h.page!=="dashboard"||h.id==="dashboard");return s.jsxs("button",{onClick:()=>d(h.page),className:`
                  flex items-center lg:flex-col lg:justify-center w-full lg:aspect-square p-3 lg:p-0 rounded-xl lg:rounded-2xl transition-all duration-300 group relative
                  ${f?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30":"text-slate-400 hover:text-white hover:bg-white/5"}
                `,title:h.label,children:[s.jsx("div",{className:`transition-transform duration-300 ${f?"scale-110":"group-hover:scale-110"}`,children:s.jsx(h.icon,{className:"w-5 h-5 lg:mx-auto",strokeWidth:f?2.5:2})}),s.jsx("span",{className:`
                  text-sm lg:text-[9px] font-medium mr-4 lg:mr-0 lg:mt-1.5 transition-opacity duration-300 
                  ${f?"text-white":"text-slate-500 group-hover:text-slate-300"}
                `,children:h.label}),f&&s.jsx("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 h-8 w-1 bg-brand-400 rounded-l-full lg:left-[-4px] lg:right-auto lg:w-1 lg:h-8 lg:rounded-r-full shadow-[0_0_12px_rgba(129,140,248,0.5)]"})]},h.id)})}),s.jsxs("div",{className:"mt-auto px-3 w-full flex flex-col gap-3",children:[s.jsxs("button",{onClick:()=>d("settings"),className:`
              flex items-center lg:flex-col lg:justify-center w-full lg:aspect-square p-3 lg:p-0 rounded-xl lg:rounded-2xl transition-all
              ${e==="settings"?"bg-white/10 text-white border border-white/5":"text-slate-400 hover:text-slate-200 hover:bg-white/5"}
            `,children:[s.jsx(Eu,{className:"w-5 h-5 lg:mx-auto"}),s.jsx("span",{className:"lg:hidden text-sm font-medium mr-4",children:""})]}),s.jsx("div",{className:"w-full lg:w-8 h-px bg-white/10 mx-auto my-1"}),s.jsxs("div",{className:"w-full flex lg:justify-center px-2 lg:px-0 items-center gap-3 lg:gap-0",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-slate-700 to-slate-600 border border-white/10 shadow-sm flex-shrink-0"}),s.jsx("span",{className:"lg:hidden text-sm text-slate-300",children:" "})]})]})]})]})};var kv=function(e,t){return kv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},kv(e,t)};function R3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var f0=function(){return f0=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},f0.apply(this,arguments)};function Dc(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function I3(e,t,r,n){var a=arguments.length,l=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(e,t,r,n);else for(var d=e.length-1;d>=0;d--)(c=e[d])&&(l=(a<3?c(l):a>3?c(t,r,l):c(t,r))||l);return a>3&&l&&Object.defineProperty(t,r,l),l}function $3(e,t){return function(r,n){t(r,n,e)}}function L3(e,t,r,n,a,l){function c(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var d=n.kind,h=d==="getter"?"get":d==="setter"?"set":"value",f=!t&&e?n.static?e:e.prototype:null,m=t||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),g,x=!1,b=r.length-1;b>=0;b--){var j={};for(var w in n)j[w]=w==="access"?{}:n[w];for(var w in n.access)j.access[w]=n.access[w];j.addInitializer=function(N){if(x)throw new TypeError("Cannot add initializers after decoration has completed");l.push(c(N||null))};var _=(0,r[b])(d==="accessor"?{get:m.get,set:m.set}:m[h],j);if(d==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(g=c(_.get))&&(m.get=g),(g=c(_.set))&&(m.set=g),(g=c(_.init))&&a.unshift(g)}else(g=c(_))&&(d==="field"?a.unshift(g):m[h]=g)}f&&Object.defineProperty(f,n.name,m),x=!0}function z3(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function U3(e){return typeof e=="symbol"?e:"".concat(e)}function B3(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function q3(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ke(e,t,r,n){function a(l){return l instanceof r?l:new r(function(c){c(l)})}return new(r||(r=Promise))(function(l,c){function d(m){try{f(n.next(m))}catch(g){c(g)}}function h(m){try{f(n.throw(m))}catch(g){c(g)}}function f(m){m.done?l(m.value):a(m.value).then(d,h)}f((n=n.apply(e,t||[])).next())})}function F3(e,t){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},n,a,l,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=d(0),c.throw=d(1),c.return=d(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(f){return function(m){return h([f,m])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(r=0)),r;)try{if(n=1,a&&(l=f[0]&2?a.return:f[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,f[1])).done)return l;switch(a=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,a=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){r.label=f[1];break}if(f[0]===6&&r.label<l[1]){r.label=l[1],l=f;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(f);break}l[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(m){f=[6,m],a=0}finally{n=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var vm=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function H3(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&vm(t,e,r)}function m0(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vw(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,l=[],c;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)l.push(a.value)}catch(d){c={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return l}function V3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(vw(arguments[t]));return e}function W3(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var l=arguments[t],c=0,d=l.length;c<d;c++,a++)n[a]=l[c];return n}function G3(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,l;n<a;n++)(l||!(n in t))&&(l||(l=Array.prototype.slice.call(t,0,n)),l[n]=t[n]);return e.concat(l||Array.prototype.slice.call(t))}function pc(e){return this instanceof pc?(this.v=e,this):new pc(e)}function K3(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,l=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(b){return function(j){return Promise.resolve(j).then(b,g)}}function d(b,j){n[b]&&(a[b]=function(w){return new Promise(function(_,N){l.push([b,w,_,N])>1||h(b,w)})},j&&(a[b]=j(a[b])))}function h(b,j){try{f(n[b](j))}catch(w){x(l[0][3],w)}}function f(b){b.value instanceof pc?Promise.resolve(b.value.v).then(m,g):x(l[0][2],b)}function m(b){h("next",b)}function g(b){h("throw",b)}function x(b,j){b(j),l.shift(),l.length&&h(l[0][0],l[0][1])}}function Y3(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,l){t[a]=e[a]?function(c){return(r=!r)?{value:pc(e[a](c)),done:!1}:l?l(c):c}:l}}function X3(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof m0=="function"?m0(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(l){r[l]=e[l]&&function(c){return new Promise(function(d,h){c=e[l](c),a(d,h,c.done,c.value)})}}function a(l,c,d,h){Promise.resolve(h).then(function(f){l({value:f,done:d})},c)}}function J3(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var n7=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Nv=function(e){return Nv=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Nv(e)};function Q3(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Nv(e),n=0;n<r.length;n++)r[n]!=="default"&&vm(t,e,r[n]);return n7(t,e),t}function Z3(e){return e&&e.__esModule?e:{default:e}}function eA(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function tA(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function rA(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function nA(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(l){return Promise.reject(l)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var s7=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function sA(e){function t(l){e.error=e.hasError?new s7(l,e.error,"An error was suppressed during disposal."):l,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(l).then(a,function(c){return t(c),a()})}else n|=1}catch(c){t(c)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function aA(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,l,c){return n?t?".jsx":".js":a&&(!l||!c)?r:a+l+"."+c.toLowerCase()+"js"}):e}const a7={__extends:R3,__assign:f0,__rest:Dc,__decorate:I3,__param:$3,__esDecorate:L3,__runInitializers:z3,__propKey:U3,__setFunctionName:B3,__metadata:q3,__awaiter:ke,__generator:F3,__createBinding:vm,__exportStar:H3,__values:m0,__read:vw,__spread:V3,__spreadArrays:W3,__spreadArray:G3,__await:pc,__asyncGenerator:K3,__asyncDelegator:Y3,__asyncValues:X3,__makeTemplateObject:J3,__importStar:Q3,__importDefault:Z3,__classPrivateFieldGet:eA,__classPrivateFieldSet:tA,__classPrivateFieldIn:rA,__addDisposableResource:nA,__disposeResources:sA,__rewriteRelativeImportExtension:aA},i7=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:nA,get __assign(){return f0},__asyncDelegator:Y3,__asyncGenerator:K3,__asyncValues:X3,__await:pc,__awaiter:ke,__classPrivateFieldGet:eA,__classPrivateFieldIn:rA,__classPrivateFieldSet:tA,__createBinding:vm,__decorate:I3,__disposeResources:sA,__esDecorate:L3,__exportStar:H3,__extends:R3,__generator:F3,__importDefault:Z3,__importStar:Q3,__makeTemplateObject:J3,__metadata:q3,__param:$3,__propKey:U3,__read:vw,__rest:Dc,__rewriteRelativeImportExtension:aA,__runInitializers:z3,__setFunctionName:B3,__spread:V3,__spreadArray:G3,__spreadArrays:W3,__values:m0,default:a7},Symbol.toStringTag,{value:"Module"})),l7=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class ym extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class iA extends ym{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Sv extends ym{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Cv extends ym{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var p0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(p0||(p0={}));class o7{constructor(t,{headers:r={},customFetch:n,region:a=p0.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=l7(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ke(this,arguments,void 0,function*(r,n={}){var a;let l,c;try{const{headers:d,method:h,body:f,signal:m,timeout:g}=n;let x={},{region:b}=n;b||(b=this.region);const j=new URL(`${this.url}/${r}`);b&&b!=="any"&&(x["x-region"]=b,j.searchParams.set("forceFunctionRegion",b));let w;f&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(x["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(x["Content-Type"]="application/json",w=JSON.stringify(f)):w=f;let _=m;g&&(c=new AbortController,l=setTimeout(()=>c.abort(),g),m?(_=c.signal,m.addEventListener("abort",()=>c.abort())):_=c.signal);const N=yield this.fetch(j.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:w,signal:_}).catch(S=>{throw new iA(S)}),C=N.headers.get("x-relay-error");if(C&&C==="true")throw new Sv(N);if(!N.ok)throw new Cv(N);let E=((a=N.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),A;return E==="application/json"?A=yield N.json():E==="application/octet-stream"||E==="application/pdf"?A=yield N.blob():E==="text/event-stream"?A=N:E==="multipart/form-data"?A=yield N.formData():A=yield N.text(),{data:A,error:null,response:N}}catch(d){return{data:null,error:d,response:d instanceof Cv||d instanceof Sv?d.context:void 0}}finally{l&&clearTimeout(l)}})}}var kn={};const Mc=fI(i7);var ff={},mf={},pf={},gf={},xf={},bf={},S2;function lA(){if(S2)return bf;S2=1,Object.defineProperty(bf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return bf.default=e,bf}var C2;function oA(){if(C2)return xf;C2=1,Object.defineProperty(xf,"__esModule",{value:!0});const t=Mc.__importDefault(lA());class r{constructor(a){var l,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let d=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var f,m,g,x;let b=null,j=null,w=null,_=h.status,N=h.statusText;if(h.ok){if(this.method!=="HEAD"){const S=await h.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?j=S:j=JSON.parse(S))}const E=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),A=(g=h.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");E&&A&&A.length>1&&(w=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(b={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,w=null,_=406,N="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const E=await h.text();try{b=JSON.parse(E),Array.isArray(b)&&h.status===404&&(j=[],b=null,_=200,N="OK")}catch{h.status===404&&E===""?(_=204,N="No Content"):b={message:E}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,_=200,N="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:j,count:w,status:_,statusText:N}});return this.shouldThrowOnError||(d=d.catch(h=>{var f,m,g,x,b,j;let w="";const _=h==null?void 0:h.cause;if(_){const N=(f=_==null?void 0:_.message)!==null&&f!==void 0?f:"",C=(m=_==null?void 0:_.code)!==null&&m!==void 0?m:"";w=`${(g=h==null?void 0:h.name)!==null&&g!==void 0?g:"FetchError"}: ${h==null?void 0:h.message}`,w+=`

Caused by: ${(x=_==null?void 0:_.name)!==null&&x!==void 0?x:"Error"}: ${N}`,C&&(w+=` (${C})`),_!=null&&_.stack&&(w+=`
${_.stack}`)}else w=(b=h==null?void 0:h.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(j=h==null?void 0:h.name)!==null&&j!==void 0?j:"FetchError"}: ${h==null?void 0:h.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return xf.default=r,xf}var E2;function cA(){if(E2)return gf;E2=1,Object.defineProperty(gf,"__esModule",{value:!0});const t=Mc.__importDefault(oA());class r extends t.default{select(a){let l=!1;const c=(a??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:l=!0,nullsFirst:c,foreignTable:d,referencedTable:h=d}={}){const f=h?`${h}.order`:"order",m=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${m?`${m},`:""}${a}.${l?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:l,referencedTable:c=l}={}){const d=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(d,`${a}`),this}range(a,l,{foreignTable:c,referencedTable:d=c}={}){const h=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${a}`),this.url.searchParams.set(f,`${l-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:l=!1,settings:c=!1,buffers:d=!1,wal:h=!1,format:f="text"}={}){var m;const g=[a?"analyze":null,l?"verbose":null,c?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),x=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${x}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return gf.default=r,gf}var A2;function yw(){if(A2)return pf;A2=1,Object.defineProperty(pf,"__esModule",{value:!0});const t=Mc.__importDefault(cA()),r=new RegExp("[,()]");class n extends t.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}regexMatch(l,c){return this.url.searchParams.append(l,`match.${c}`),this}regexIMatch(l,c){return this.url.searchParams.append(l,`imatch.${c}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}isDistinct(l,c){return this.url.searchParams.append(l,`isdistinct.${c}`),this}in(l,c){const d=Array.from(new Set(c)).map(h=>typeof h=="string"&&r.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${d})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:d,type:h}={}){let f="";h==="plain"?f="pl":h==="phrase"?f="ph":h==="websearch"&&(f="w");const m=d===void 0?"":`(${d})`;return this.url.searchParams.append(l,`${f}fts${m}.${c}`),this}match(l){return Object.entries(l).forEach(([c,d])=>{this.url.searchParams.append(c,`eq.${d}`)}),this}not(l,c,d){return this.url.searchParams.append(l,`not.${c}.${d}`),this}or(l,{foreignTable:c,referencedTable:d=c}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,c,d){return this.url.searchParams.append(l,`${c}.${d}`),this}}return pf.default=n,pf}var T2;function dA(){if(T2)return mf;T2=1,Object.defineProperty(mf,"__esModule",{value:!0});const t=Mc.__importDefault(yw());class r{constructor(a,{headers:l={},schema:c,fetch:d}){this.url=a,this.headers=new Headers(l),this.schema=c,this.fetch=d}select(a,l){const{head:c=!1,count:d}=l??{},h=c?"HEAD":"GET";let f=!1;const m=(a??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",m),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:l,defaultToNull:c=!0}={}){var d;const h="POST";if(l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(f.length>0){const m=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(a,{onConflict:l,ignoreDuplicates:c=!1,count:d,defaultToNull:h=!0}={}){var f;const m="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const g=a.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(g.length>0){const x=[...new Set(g)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(a,{count:l}={}){var c;const d="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var l;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return mf.default=r,mf}var O2;function c7(){if(O2)return ff;O2=1,Object.defineProperty(ff,"__esModule",{value:!0});const e=Mc,t=e.__importDefault(dA()),r=e.__importDefault(yw());class n{constructor(l,{headers:c={},schema:d,fetch:h}={}){this.url=l,this.headers=new Headers(c),this.schemaName=d,this.fetch=h}from(l){if(!l||typeof l!="string"||l.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${l}`);return new t.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new n(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,c={},{head:d=!1,get:h=!1,count:f}={}){var m;let g;const x=new URL(`${this.url}/rpc/${l}`);let b;d||h?(g=d?"HEAD":"GET",Object.entries(c).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{x.searchParams.append(w,_)})):(g="POST",b=c);const j=new Headers(this.headers);return f&&j.set("Prefer",`count=${f}`),new r.default({method:g,url:x,headers:j,schema:this.schemaName,body:b,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return ff.default=n,ff}var P2;function d7(){if(P2)return kn;P2=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.PostgrestError=kn.PostgrestBuilder=kn.PostgrestTransformBuilder=kn.PostgrestFilterBuilder=kn.PostgrestQueryBuilder=kn.PostgrestClient=void 0;const e=Mc,t=e.__importDefault(c7());kn.PostgrestClient=t.default;const r=e.__importDefault(dA());kn.PostgrestQueryBuilder=r.default;const n=e.__importDefault(yw());kn.PostgrestFilterBuilder=n.default;const a=e.__importDefault(cA());kn.PostgrestTransformBuilder=a.default;const l=e.__importDefault(oA());kn.PostgrestBuilder=l.default;const c=e.__importDefault(lA());return kn.PostgrestError=c.default,kn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default},kn}var uA=d7();const hA=ys(uA),u7=nw({__proto__:null,default:hA},[uA]),{PostgrestClient:h7,PostgrestQueryBuilder:Ode,PostgrestFilterBuilder:Pde,PostgrestTransformBuilder:Dde,PostgrestBuilder:Mde,PostgrestError:f7}=hA||u7;class fA{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const m7="2.87.3",p7=`realtime-js/${m7}`,mA="1.0.0",g7="2.0.0",D2=mA,Ev=1e4,x7=1e3,b7=100;var Rl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Rl||(Rl={}));var $r;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})($r||($r={}));var Ys;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ys||(Ys={}));var Av;(function(e){e.websocket="websocket"})(Av||(Av={}));var Il;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Il||(Il={}));class v7{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(t,r,n){var a,l;const c=t.topic,d=(a=t.ref)!==null&&a!==void 0?a:"",h=(l=t.join_ref)!==null&&l!==void 0?l:"",f=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},g=Object.keys(m).length===0?"":JSON.stringify(m);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+c.length+f.length+g.length,b=new ArrayBuffer(this.HEADER_LENGTH+x);let j=new DataView(b),w=0;j.setUint8(w++,this.KINDS.userBroadcastPush),j.setUint8(w++,h.length),j.setUint8(w++,d.length),j.setUint8(w++,c.length),j.setUint8(w++,f.length),j.setUint8(w++,g.length),j.setUint8(w++,r),Array.from(h,N=>j.setUint8(w++,N.charCodeAt(0))),Array.from(d,N=>j.setUint8(w++,N.charCodeAt(0))),Array.from(c,N=>j.setUint8(w++,N.charCodeAt(0))),Array.from(f,N=>j.setUint8(w++,N.charCodeAt(0))),Array.from(g,N=>j.setUint8(w++,N.charCodeAt(0)));var _=new Uint8Array(b.byteLength+n.byteLength);return _.set(new Uint8Array(b),0),_.set(new Uint8Array(n),b.byteLength),_.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,l,c,d,h]=n;return r({join_ref:a,ref:l,topic:c,event:d,payload:h})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),l=r.getUint8(2),c=r.getUint8(3),d=r.getUint8(4);let h=this.HEADER_LENGTH+4;const f=n.decode(t.slice(h,h+a));h=h+a;const m=n.decode(t.slice(h,h+l));h=h+l;const g=n.decode(t.slice(h,h+c));h=h+c;const x=t.slice(h,t.byteLength),b=d===this.JSON_ENCODING?JSON.parse(n.decode(x)):x,j={type:this.BROADCAST_EVENT,event:m,payload:b};return c>0&&(j.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}class pA{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Zt||(Zt={}));const M2=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((l,c)=>(l[c]=y7(c,e,t,a),l),{}):{}},y7=(e,t,r,n)=>{const a=t.find(d=>d.name===e),l=a==null?void 0:a.type,c=r[e];return l&&!n.includes(l)?gA(l,c):Tv(c)},gA=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return k7(t,r)}switch(e){case Zt.bool:return w7(t);case Zt.float4:case Zt.float8:case Zt.int2:case Zt.int4:case Zt.int8:case Zt.numeric:case Zt.oid:return j7(t);case Zt.json:case Zt.jsonb:return _7(t);case Zt.timestamp:return N7(t);case Zt.abstime:case Zt.date:case Zt.daterange:case Zt.int4range:case Zt.int8range:case Zt.money:case Zt.reltime:case Zt.text:case Zt.time:case Zt.timestamptz:case Zt.timetz:case Zt.tsrange:case Zt.tstzrange:return Tv(t);default:return Tv(t)}},Tv=e=>e,w7=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},j7=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_7=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},k7=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let l;const c=e.slice(1,r);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(d=>gA(t,d))}return e},N7=e=>typeof e=="string"?e.replace(" ","T"):e,xA=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Tx{constructor(t,r,n={},a=Ev){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ov;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ov||(Ov={}));class lc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lc.syncState(this.state,a,l,c),this.pendingDiffs.forEach(h=>{this.state=lc.syncDiff(this.state,h,l,c)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},a=>{const{onJoin:l,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=lc.syncDiff(this.state,a,l,c),d())}),this.onJoin((a,l,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:c})}),this.onLeave((a,l,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const l=this.cloneDeep(t),c=this.transformState(r),d={},h={};return this.map(l,(f,m)=>{c[f]||(h[f]=m)}),this.map(c,(f,m)=>{const g=l[f];if(g){const x=m.map(_=>_.presence_ref),b=g.map(_=>_.presence_ref),j=m.filter(_=>b.indexOf(_.presence_ref)<0),w=g.filter(_=>x.indexOf(_.presence_ref)<0);j.length>0&&(d[f]=j),w.length>0&&(h[f]=w)}else d[f]=m}),this.syncDiff(l,{joins:d,leaves:h},n,a)}static syncDiff(t,r,n,a){const{joins:l,leaves:c}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(l,(d,h)=>{var f;const m=(f=t[d])!==null&&f!==void 0?f:[];if(t[d]=this.cloneDeep(h),m.length>0){const g=t[d].map(b=>b.presence_ref),x=m.filter(b=>g.indexOf(b.presence_ref)<0);t[d].unshift(...x)}n(d,m,h)}),this.map(c,(d,h)=>{let f=t[d];if(!f)return;const m=h.map(g=>g.presence_ref);f=f.filter(g=>m.indexOf(g.presence_ref)<0),t[d]=f,a(d,f,h),f.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Pv||(Pv={}));var oc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(oc||(oc={}));var pa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(pa||(pa={}));const S7=$r;class $l{constructor(t,r={config:{}},n){var a,l;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=$r.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Tx(this,Ys.join,this.params,this.timeout),this.rejoinTimer=new pA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$r.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$r.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=$r.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$r.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=$r.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ys.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new lc(this),this.broadcastEndpointURL=xA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,l;if(this.socket.isConnected()||this.socket.connect(),this.state==$r.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,f=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&a!==void 0?a:[],m=!!this.bindings[oc.PRESENCE]&&this.bindings[oc.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,g={},x={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(pa.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(pa.CLOSED)),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var j;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){t==null||t(pa.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(j=w==null?void 0:w.length)!==null&&j!==void 0?j:0,N=[];for(let C=0;C<_;C++){const E=w[C],{filter:{event:A,schema:S,table:T,filter:D}}=E,P=b&&b[C];if(P&&P.event===A&&$l.isFilterValueEqual(P.schema,S)&&$l.isFilterValueEqual(P.table,T)&&$l.isFilterValueEqual(P.filter,D))N.push(Object.assign(Object.assign({},E),{id:P.id}));else{this.unsubscribe(),this.state=$r.errored,t==null||t(pa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(pa.SUBSCRIBED);return}}).receive("error",b=>{this.state=$r.errored,t==null||t(pa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(pa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===$r.joined&&t===oc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const f=await d.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=t,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,d,h;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),f.receive("ok",()=>l("ok")),f.receive("error",()=>l("error")),f.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=$r.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ys.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Tx(this,Ys.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$r.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,l=setTimeout(()=>a.abort(),n),c=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(l),c}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Tx(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>b7){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,l;const c=t.toLocaleLowerCase(),{close:d,error:h,leave:f,join:m}=Ys;if(n&&[d,h,f,m].indexOf(c)>=0&&n!==this._joinRef())return;let x=this._onMessage(c,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(b=>{var j,w,_;return((j=b.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(w=b.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===c}).map(b=>b.callback(x,n)):(l=this.bindings[c])===null||l===void 0||l.filter(b=>{var j,w,_,N,C,E;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const A=b.id,S=(j=b.filter)===null||j===void 0?void 0:j.event;return A&&((w=r.ids)===null||w===void 0?void 0:w.includes(A))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const A=(C=(N=b==null?void 0:b.filter)===null||N===void 0?void 0:N.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return A==="*"||A===((E=r==null?void 0:r.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof x=="object"&&"ids"in x){const j=x.data,{schema:w,table:_,commit_timestamp:N,type:C,errors:E}=j;x=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:N,eventType:C,new:{},old:{},errors:E}),this._getPayloadRecords(j))}b.callback(x,n)})}_isClosed(){return this.state===$r.closed}_isJoined(){return this.state===$r.joined}_isJoining(){return this.state===$r.joining}_isLeaving(){return this.state===$r.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),l={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&$l.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ys.close,{},t)}_onError(t){this._on(Ys.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$r.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=M2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=M2(t.columns,t.old_record)),r}}const Ox=()=>{},vf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},C7=[1e3,2e3,5e3,1e4],E7=1e4,A7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class bA{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ev,this.transport=null,this.heartbeatIntervalMs=vf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ox,this.ref=0,this.reconnectTimer=null,this.vsn=D2,this.logger=Ox,this.conn=null,this.sendBuffer=[],this.serializer=new v7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...l)=>a(...l):(...l)=>fetch(...l),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Av.websocket}`,this.httpEndpoint=xA(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=fA.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rl.connecting:return Il.Connecting;case Rl.open:return Il.Open;case Rl.closing:return Il.Closing;default:return Il.Closed}}isConnected(){return this.connectionState()===Il.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(l=>l.topic===n);if(a)return a;{const l=new $l(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:n,payload:a,ref:l}=t,c=()=>{this.encode(t,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${r} ${n} (${l})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(x7,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},vf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:l,ref:c}=r,d=c?`(${c})`:"",h=l.status||"";this.log("receive",`${h} ${n} ${a} ${d}`.trim(),l),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(a,l,c)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Rl.open||this.conn.readyState===Rl.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ys.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([A7],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const l={access_token:r,version:p7};r&&a.updateJoinPayload(l),a.joinedOnce&&a._isJoined()&&a._push(Ys.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new pA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},vf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,l,c,d,h,f,m,g,x,b;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Ev,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:vf.HEARTBEAT_INTERVAL,this.worker=(l=t==null?void 0:t.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=t==null?void 0:t.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:Ox,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:D2,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:(j=>C7[j-1]||E7),this.vsn){case mA:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((j,w)=>w(JSON.stringify(j))),this.decode=(g=t==null?void 0:t.decode)!==null&&g!==void 0?g:((j,w)=>w(JSON.parse(j)));break;case g7:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(b=t==null?void 0:t.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class wm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function gr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class T7 extends wm{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Dv extends wm{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const ww=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),O7=()=>Response,Mv=e=>{if(Array.isArray(e))return e.map(r=>Mv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[a]=Mv(n)}),t},P7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},D7=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),Px=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},M7=(e,t,r)=>ke(void 0,void 0,void 0,function*(){const n=yield O7();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const l=e.status||500,c=(a==null?void 0:a.statusCode)||l+"";t(new T7(Px(a),l,c))}).catch(a=>{t(new Dv(Px(a),a))}):t(new Dv(Px(e),e))}),R7=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(P7(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Au(e,t,r,n,a,l){return ke(this,void 0,void 0,function*(){return new Promise((c,d)=>{e(r,R7(t,n,a,l)).then(h=>{if(!h.ok)throw h;return n!=null&&n.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>M7(h,d,n))})})}function au(e,t,r,n){return ke(this,void 0,void 0,function*(){return Au(e,"GET",t,r,n)})}function Gs(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return Au(e,"POST",t,n,a,r)})}function Rv(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return Au(e,"PUT",t,n,a,r)})}function I7(e,t,r,n){return ke(this,void 0,void 0,function*(){return Au(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function jw(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return Au(e,"DELETE",t,n,a,r)})}class $7{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ke(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}}var vA;class L7{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[vA]="BlobDownloadBuilder",this.promise=null}asStream(){return new $7(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ke(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(gr(t))return{data:null,error:t};throw t}})}}vA=Symbol.toStringTag;const z7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},R2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class U7{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=ww(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return ke(this,void 0,void 0,function*(){try{let l;const c=Object.assign(Object.assign({},R2),a);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),h&&l.append("metadata",this.encodeMetadata(h)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),h&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(h))):(l=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(d=Object.assign(Object.assign({},d),a.headers));const f=this._removeEmptyFolders(r),m=this._getFinalPath(f),g=yield(t=="PUT"?Rv:Gs)(this.fetch,`${this.url}/object/${m}`,l,Object.assign({headers:d},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(gr(l))return{data:null,error:l};throw l}})}upload(t,r,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return ke(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=new URL(this.url+`/object/upload/sign/${c}`);d.searchParams.set("token",r);try{let h;const f=Object.assign({upsert:R2.upsert},a),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.append("cacheControl",f.cacheControl)):(h=n,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType);const g=yield Rv(this.fetch,d.toString(),h,{headers:m});return{data:{path:l,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(gr(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(t,r){return ke(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const l=yield Gs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),c=new URL(this.url+l.url),d=c.searchParams.get("token");if(!d)throw new wm("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}})}update(t,r,n){return ke(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ke(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gr(a))return{data:null,error:a};throw a}})}copy(t,r,n){return ke(this,void 0,void 0,function*(){try{return{data:{path:(yield Gs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return ke(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),l=yield Gs(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const c=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${c}`)},{data:l,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return ke(this,void 0,void 0,function*(){try{const a=yield Gs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${l}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gr(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),c=l?`?${l}`:"",d=this._getFinalPath(t),h=()=>au(this.fetch,`${this.url}/${a}/${d}${c}`,{headers:this.headers,noResolveJson:!0});return new L7(h,this.shouldThrowOnError)}info(t){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield au(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Mv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}})}exists(t){return ke(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield I7(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gr(n)&&n instanceof Dv){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&a.push(l);const d=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});h!==""&&a.push(h);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${f}`)}}}remove(t){return ke(this,void 0,void 0,function*(){try{return{data:yield jw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}list(t,r,n){return ke(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},z7),r),{prefix:t||""});return{data:yield Gs(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gr(a))return{data:null,error:a};throw a}})}listV2(t,r){return ke(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Gs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const yA="2.87.3",wA={"X-Client-Info":`storage-js/${yA}`};class B7{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const l=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wA),r),this.fetch=ww(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ke(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield au(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}getBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield au(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}createBucket(t){return ke(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Gs(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(gr(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return ke(this,void 0,void 0,function*(){try{return{data:yield Rv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(gr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield jw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var iu=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function q7(e,t,r){const n=new URL(t,e);if(r)for(const[a,l]of Object.entries(r))l!==void 0&&n.searchParams.set(a,l);return n.toString()}async function F7(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function H7(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:l,headers:c}){const d=q7(e.baseUrl,n,a),h=await F7(e.auth),f=await t(d,{method:r,headers:{...l?{"Content-Type":"application/json"}:{},...h,...c},body:l?JSON.stringify(l):void 0}),m=await f.text(),g=(f.headers.get("content-type")||"").includes("application/json"),x=g&&m?JSON.parse(m):m;if(!f.ok){const b=g?x:void 0,j=b==null?void 0:b.error;throw new iu((j==null?void 0:j.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:b})}return{status:f.status,headers:f.headers,data:x}}}}function yf(e){return e.join("")}var V7=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:yf(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${yf(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${yf(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${yf(e.namespace)}`}),!0}catch(t){if(t instanceof iu&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof iu&&r.status===409)return;throw r}}};function Fo(e){return e.join("")}var W7=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fo(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof iu&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof iu&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},G7=class{constructor(e){var n;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=H7({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(n=e.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new V7(this.client,t),this.tableOps=new W7(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class K7{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wA),r),this.fetch=ww(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}listBuckets(t){return ke(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield au(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield jw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(gr(r))return{data:null,error:r};throw r}})}from(t){if(!D7(t))throw new wm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new G7({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>ke(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(l,c){const d=l[c];return typeof d!="function"?d:(...h)=>ke(this,void 0,void 0,function*(){try{return{data:yield d.apply(l,h),error:null}}catch(f){if(n)throw f;return{data:null,error:f}}})}})}}const _w={"X-Client-Info":`storage-js/${yA}`,"Content-Type":"application/json"};class jA extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function us(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Dx extends jA{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Y7 extends jA{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var I2;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(I2||(I2={}));const kw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),X7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$2=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),J7=(e,t,r)=>ke(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,l=e;if(typeof l.json=="function")l.json().then(c=>{const d=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";t(new Dx($2(c),a,d))}).catch(()=>{const c=a+"",d=l.statusText||`HTTP ${a} error`;t(new Dx(d,a,c))});else{const c=a+"",d=l.statusText||`HTTP ${a} error`;t(new Dx(d,a,c))}}else t(new Y7($2(e),e))}),Q7=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(X7(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function Z7(e,t,r,n,a,l){return ke(this,void 0,void 0,function*(){return new Promise((c,d)=>{e(r,Q7(t,n,a,l)).then(h=>{if(!h.ok)throw h;if(n!=null&&n.noResolveJson)return h;const f=h.headers.get("content-type");return!f||!f.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>J7(h,d,n))})})}function hs(e,t,r,n,a){return ke(this,void 0,void 0,function*(){return Z7(e,"POST",t,n,a,r)})}class ez{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_w),r),this.fetch=kw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield hs(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ke(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(us(n))return{data:null,error:n};throw n}})}listIndexes(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ke(this,void 0,void 0,function*(){try{return{data:(yield hs(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(us(n))return{data:null,error:n};throw n}})}}class tz{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_w),r),this.fetch=kw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield hs(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}getVectors(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}listVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield hs(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}queryVectors(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ke(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield hs(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}}class rz{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_w),r),this.fetch=kw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield hs(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}getBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:yield hs(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}listBuckets(){return ke(this,arguments,void 0,function*(t={}){try{return{data:yield hs(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ke(this,void 0,void 0,function*(){try{return{data:(yield hs(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(us(r))return{data:null,error:r};throw r}})}}class nz extends rz{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new sz(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ke(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ke(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ke(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ke(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class sz extends ez{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ke(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ke(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ke(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ke(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new az(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class az extends tz{constructor(t,r,n,a,l){super(t,r,l),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ke(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ke(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ke(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ke(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ke(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class iz extends B7{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new U7(this.url,this.headers,t,this.fetch)}get vectors(){return new nz(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new K7(this.url+"/iceberg",this.headers,this.fetch)}}const lz="2.87.3";let Wd="";typeof Deno<"u"?Wd="deno":typeof document<"u"?Wd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wd="react-native":Wd="node";const oz={"X-Client-Info":`supabase-js-${Wd}/${lz}`},cz={headers:oz},dz={schema:"public"},uz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hz={},fz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),mz=()=>Headers,pz=(e,t,r)=>{const n=fz(r),a=mz();return async(l,c)=>{var d;const h=(d=await t())!==null&&d!==void 0?d:e;let f=new a(c==null?void 0:c.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),n(l,Object.assign(Object.assign({},c),{headers:f}))}};function gz(e){return e.endsWith("/")?e:e+"/"}function xz(e,t){var r,n;const{db:a,auth:l,realtime:c,global:d}=e,{db:h,auth:f,realtime:m,global:g}=t,x={db:Object.assign(Object.assign({},h),a),auth:Object.assign(Object.assign({},f),l),realtime:Object.assign(Object.assign({},m),c),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function bz(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(gz(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const _A="2.87.3",Qo=30*1e3,Iv=3,Mx=Iv*Qo,vz="http://localhost:9999",yz="supabase.auth.token",wz={"X-Client-Info":`gotrue-js/${_A}`},$v="X-Supabase-Api-Version",kA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},jz=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_z=600*1e3;class gc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class NA extends gc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function SA(e){return Fe(e)&&e.name==="AuthApiError"}class Xi extends gc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _a extends gc{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Wn extends _a{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function CA(e){return Fe(e)&&e.name==="AuthSessionMissingError"}class Al extends _a{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gd extends _a{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Kd extends _a{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function EA(e){return Fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class Lv extends _a{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AA extends _a{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}function kz(e){return Fe(e)&&e.name==="AuthPKCECodeVerifierMissingError"}class g0 extends _a{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Gf(e){return Fe(e)&&e.name==="AuthRetryableFetchError"}class zv extends _a{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}function Nz(e){return Fe(e)&&e.name==="AuthWeakPasswordError"}class x0 extends _a{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const b0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),L2=` 	
\r=`.split(""),Sz=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<L2.length;t+=1)e[L2[t].charCodeAt(0)]=-2;for(let t=0;t<b0.length;t+=1)e[b0[t].charCodeAt(0)]=t;return e})();function z2(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(b0[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(b0[n]),t.queuedBits-=6}}function TA(e,t,r){const n=Sz[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function U2(e){const t=[],r=c=>{t.push(String.fromCodePoint(c))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=c=>{Az(c,n,r)};for(let c=0;c<e.length;c+=1)TA(e.charCodeAt(c),a,l);return t.join("")}function Cz(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Ez(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Cz(n,t)}}function Az(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function cc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)TA(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Tz(e){const t=[];return Ez(e,r=>t.push(r)),new Uint8Array(t)}function Ll(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>z2(a,r,n)),z2(null,r,n),t.join("")}function Oz(e){return Math.round(Date.now()/1e3)+e}function Pz(){return Symbol("auth-callback")}const mn=()=>typeof window<"u"&&typeof document<"u",Nl={tested:!1,writable:!1},OA=()=>{if(!mn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Nl.tested)return Nl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Nl.tested=!0,Nl.writable=!0}catch{Nl.tested=!0,Nl.writable=!1}return Nl.writable};function Dz(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,l)=>{t[l]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const PA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Mz=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zo=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Sl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},fn=async(e,t)=>{await e.removeItem(t)};let DA=class MA{constructor(){this.promise=new MA.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}};DA.promiseConstructor=Promise;function Rx(e){const t=e.split(".");if(t.length!==3)throw new x0("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!jz.test(t[n]))throw new x0("JWT not in base64url format");return{header:JSON.parse(U2(t[0])),payload:JSON.parse(U2(t[1])),signature:cc(t[2]),raw:{header:t[0],payload:t[1]}}}async function Rz(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Iz(e,t){return new Promise((n,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await e(l);if(!t(l,null,c)){n(c);return}}catch(c){if(!t(l,c)){a(c);return}}})()})}function $z(e){return("0"+e.toString(16)).substr(-2)}function Lz(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let l=0;l<56;l++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,$z).join("")}async function zz(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function Uz(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await zz(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ho(e,t,r=!1){const n=Lz();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Zo(e,`${t}-code-verifier`,a);const l=await Uz(n);return[l,n===l?"plain":"s256"]}const Bz=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qz(e){const t=e.headers.get($v);if(!t||!t.match(Bz))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Fz(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Hz(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Vz=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vo(e){if(!Vz.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ix(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wz(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const l=n.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function B2(e){return JSON.parse(JSON.stringify(e))}const Tl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Gz=[502,503,504];async function q2(e){var t;if(!Mz(e))throw new g0(Tl(e),0);if(Gz.includes(e.status))throw new g0(Tl(e),e.status);let r;try{r=await e.json()}catch(l){throw new Xi(Tl(l),l)}let n;const a=qz(e);if(a&&a.getTime()>=kA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new zv(Tl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Wn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new zv(Tl(r),e.status,r.weak_password.reasons);throw new NA(Tl(r),e.status||500,n)}const Kz=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function et(e,t,r,n){var a;const l=Object.assign({},n==null?void 0:n.headers);l[$v]||(l[$v]=kA["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const c=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(c.redirect_to=n.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await Yz(e,t,r+d,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(h):{data:Object.assign({},h),error:null}}async function Yz(e,t,r,n,a,l){const c=Kz(t,n,a,l);let d;try{d=await e(r,Object.assign({},c))}catch(h){throw console.error(h),new g0(Tl(h),0)}if(d.ok||await q2(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(h){await q2(h)}}function Ws(e){var t;let r=null;Qz(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Oz(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function F2(e){const t=Ws(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ji(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Xz(e){return{data:e,error:null}}function Jz(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l}=e,c=Dc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:l},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function H2(e){return e}function Qz(e){return e.access_token&&e.refresh_token&&e.expires_in}const Kf=["global","local","others"];class Nw{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=PA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Kf[0]){if(Kf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Kf.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ji})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Dc(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Jz,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ji})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,l,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},m=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:H2});if(m.error)throw m.error;const g=await m.json(),x=(c=m.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);f[`${_}Page`]=w}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Fe(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Vo(t);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ji})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Vo(t);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ji})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Vo(t);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ji})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Vo(t.userId);try{const{data:r,error:n}=await et(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Vo(t.userId),Vo(t.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,l,c,d,h;try{const f={nextPage:null,lastPage:0,total:0},m=await et(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(l=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:H2});if(m.error)throw m.error;const g=await m.json(),x=(c=m.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(h=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);f[`${_}Page`]=w}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(Fe(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await et(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await et(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await et(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}function V2(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ol={debug:!!(globalThis&&OA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Sw extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class RA extends Sw{}class Zz extends Sw{}async function IA(e,t,r){Ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ol.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ol.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new RA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ol.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const W2={};async function eU(e,t,r){var n;const a=(n=W2[e])!==null&&n!==void 0?n:Promise.resolve(),l=Promise.race([a.catch(()=>null),t>=0?new Promise((c,d)=>{setTimeout(()=>{d(new Zz(`Acquiring process lock with name "${e}" timed out`))},t)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await r());return W2[e]=l.catch(async c=>{if(c&&c.isAcquireTimeout)return await a,null;throw c}),await l}function tU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function $A(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function rU(e){return parseInt(e,16)}function nU(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function sU(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:l=new Date,nonce:c,notBefore:d,requestId:h,resources:f,scheme:m,uri:g,version:x}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=$A(e.address),j=m?`${m}://${n}`:n,w=e.statement?`${e.statement}
`:"",_=`${j} wants you to sign in with your Ethereum account:
${b}

${w}`;let N=`URI: ${g}
Version: ${x}
Chain ID: ${r}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(a&&(N+=`
Expiration Time: ${a.toISOString()}`),d&&(N+=`
Not Before: ${d.toISOString()}`),h&&(N+=`
Request ID: ${h}`),f){let C=`
Resources:`;for(const E of f){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);C+=`
- ${E}`}N+=C}return`${_}
${N}`}class Lr extends Error{constructor({message:t,code:r,cause:n,name:a}){var l;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(l=a??(n instanceof Error?n.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class v0 extends Lr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function aU({error:e,options:t}){var r,n,a;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Lr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=l.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Lr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=l.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Lr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Lr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Lr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return l.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Lr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Lr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const c=window.location.hostname;if(LA(c)){if(l.rp.id!==c)return new Lr({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Lr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Lr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function iU({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Lr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Lr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(LA(n)){if(r.rpId!==n)return new Lr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Lr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Lr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Lr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class lU{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const oU=new lU;function cU(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Dc(e,["challenge","user","excludeCredentials"]),l=cc(t).buffer,c=Object.assign(Object.assign({},r),{id:cc(r.id).buffer}),d=Object.assign(Object.assign({},a),{challenge:l,user:c});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let h=0;h<n.length;h++){const f=n[h];d.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:cc(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function dU(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Dc(e,["challenge","allowCredentials"]),a=cc(t).buffer,l=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const d=r[c];l.allowCredentials[c]=Object.assign(Object.assign({},d),{id:cc(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return l}function uU(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ll(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ll(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function hU(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ll(new Uint8Array(a.authenticatorData)),clientDataJSON:Ll(new Uint8Array(a.clientDataJSON)),signature:Ll(new Uint8Array(a.signature)),userHandle:a.userHandle?Ll(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function LA(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function G2(){var e,t;return!!(mn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function fU(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new v0("Browser returned unexpected credential type",t)}:{data:null,error:new v0("Empty credential response",t)}}catch(t){return{data:null,error:aU({error:t,options:e})}}}async function mU(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new v0("Browser returned unexpected credential type",t)}:{data:null,error:new v0("Empty credential response",t)}}catch(t){return{data:null,error:iU({error:t,options:e})}}}const pU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},gU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function y0(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const l in a){const c=a[l];if(c!==void 0)if(Array.isArray(c))n[l]=c;else if(r(c))n[l]=c;else if(t(c)){const d=n[l];t(d)?n[l]=y0(d,c):n[l]=y0(c)}else n[l]=c}return n}function xU(e,t){return y0(pU,e,t||{})}function bU(e,t){return y0(gU,e,t||{})}class vU{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},l){try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!c)return{data:null,error:d};const h=a??oU.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{const f=xU(c.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:m,error:g}=await fU({publicKey:f,signal:h});return m?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const f=bU(c.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:m,error:g}=await mU(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:h}));return m?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(c){return Fe(c)?{data:null,error:c}:{data:null,error:new Xi("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new gc("rpId is required for WebAuthn authentication")};try{if(!G2())return{data:null,error:new Xi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:l});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:h.type,rpId:r,rpOrigins:n,credential_response:h.credential_response}})}catch(c){return Fe(c)?{data:null,error:c}:{data:null,error:new Xi("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},l){if(!r)return{data:null,error:new gc("rpId is required for WebAuthn registration")};try{if(!G2())return{data:null,error:new Xi("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:d};const{data:h,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:l});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:r,rpOrigins:n,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(c){return Fe(c)?{data:null,error:c}:{data:null,error:new Xi("Unexpected error in register",c)}}}}tU();const yU={url:vz,storageKey:yz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wz,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function K2(e,t,r){return await r()}const Wo={};class xc{get jwks(){var t,r;return(r=(t=Wo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Wo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Wo[this.storageKey]=Object.assign(Object.assign({},Wo[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},yU),t);if(this.storageKey=l.storageKey,this.instanceID=(r=xc.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,xc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&mn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new Nw({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=PA(l.fetch),this.lock=l.lock||K2,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&mn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=IA:this.lock=K2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:OA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=V2(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=V2(this.memoryStorage)),mn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_A}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(mn()&&(r=Dz(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),mn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:l}=await this._getSessionFromURL(r,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),EA(l)){const h=(t=l.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:c,redirectType:d}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Fe(r)?this._returnResult({error:r}):this._returnResult({error:new Xi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const l=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ws}),{data:c,error:d}=l;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(l){if(Fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var r,n,a;try{let l;if("email"in t){const{email:m,password:g,options:x}=t;let b=null,j=null;this.flowType==="pkce"&&([b,j]=await Ho(this.storage,this.storageKey)),l=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:m,password:g,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:j},xform:Ws})}else if("phone"in t){const{phone:m,password:g,options:x}=t;l=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(a=x==null?void 0:x.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Ws})}else throw new Gd("You must provide either an email or phone number and a password");const{data:c,error:d}=l;if(d||!c)return await fn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(l){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Fe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:c,options:d}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:F2})}else if("phone"in t){const{phone:l,password:c,options:d}=t;r=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:F2})}else throw new Gd("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const l=new Al;return this._returnResult({data:{user:null,session:null},error:l})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,l,c,d,h,f,m,g,x;let b,j;if("message"in t)b=t.message,j=t.signature;else{const{chain:w,wallet:_,statement:N,options:C}=t;let E;if(mn())if(typeof _=="object")E=_;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")E=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const A=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href),S=await E.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!S||S.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=$A(S[0]);let D=(n=C==null?void 0:C.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!D){const I=await E.request({method:"eth_chainId"});D=rU(I)}const P={domain:A.host,address:T,statement:N,uri:A.href,version:"1",chainId:D,nonce:(a=C==null?void 0:C.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(l=C==null?void 0:C.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=C==null?void 0:C.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=C==null?void 0:C.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=C==null?void 0:C.signInWithEthereum)===null||m===void 0?void 0:m.resources};b=sU(P),j=await E.request({method:"personal_sign",params:[nU(b),T]})}try{const{data:w,error:_}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:j},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ws});if(_)throw _;if(!w||!w.session||!w.user){const N=new Al;return this._returnResult({data:{user:null,session:null},error:N})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:_})}catch(w){if(Fe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,a,l,c,d,h,f,m,g,x,b;let j,w;if("message"in t)j=t.message,w=t.signature;else{const{chain:_,wallet:N,statement:C,options:E}=t;let A;if(mn())if(typeof N=="object")A=N;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))A=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=N}const S=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const T=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:S.host,uri:S.href}),C?{statement:C}:null));let D;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")D=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)D=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)j=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),w=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${S.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${S.href}`,`Issued At: ${(a=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((c=E==null?void 0:E.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((h=E==null?void 0:E.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((f=E==null?void 0:E.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((g=(m=E==null?void 0:E.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...E.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const T=await A.signMessage(new TextEncoder().encode(j),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=T}}try{const{data:_,error:N}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Ll(w)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Ws});if(N)throw N;if(!_||!_.session||!_.user){const C=new Al;return this._returnResult({data:{user:null,session:null},error:C})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:N})}catch(_){if(Fe(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const r=await Sl(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new AA;const{data:l,error:c}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ws});if(await fn(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const d=new Al;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:c})}catch(l){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Fe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:l,nonce:c}=t,d=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ws}),{data:h,error:f}=d;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h||!h.session||!h.user){const m=new Al;return this._returnResult({data:{user:null,session:null},error:m})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:f})}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,l,c;try{if("email"in t){const{email:d,options:h}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Ho(this.storage,this.storageKey));const{error:g}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},create_user:(n=h==null?void 0:h.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:d,options:h}=t,{data:f,error:m}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(l=h==null?void 0:h.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Gd("You must provide either an email or phone number.")}catch(d){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Fe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,n;try{let a,l;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:c,error:d}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:Ws});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,f=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(a){if(Fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,l,c;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await Ho(this.storage,this.storageKey));const f=await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:Xz});return!((l=f.data)===null||l===void 0)&&l.url&&mn()&&!(!((c=t.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(d){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Fe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Wn;const{error:a}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(Fe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:l}=t,{error:c}=await et(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in t){const{phone:n,type:a,options:l}=t,{data:c,error:d}=await et(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Gd("You must provide either an email or phone number and a type")}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Sl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Mx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const c=await Sl(this.userStorage,this.storageKey+"-user");c!=null&&c.user?t.user=c.user:t.user=Ix()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};t.user=Wz(t.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ji}):await this._useSession(async r=>{var n,a,l;const{data:c,error:d}=r;if(d)throw d;return!(!((n=c.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wn}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ji})})}catch(r){if(Fe(r))return CA(r)&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:l}=n;if(l)throw l;if(!a.session)throw new Wn;const c=a.session;let d=null,h=null;this.flowType==="pkce"&&t.email!=null&&([d,h]=await Ho(this.storage,this.storageKey));const{data:f,error:m}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:Ji});if(m)throw m;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(n){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Fe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wn;const r=Date.now()/1e3;let n=r,a=!0,l=null;const{payload:c}=Rx(t.access_token);if(c.exp&&(n=c.exp,a=n<=r),a){const{data:d,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};l=d}else{const{data:d,error:h}=await this._getUser(t.access_token);if(h)throw h;l={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(Fe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:c,error:d}=r;if(d)throw d;t=(n=c.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Wn;const{data:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(Fe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!mn())throw new Kd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Kd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Lv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Kd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Lv("No code detected.");const{data:C,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:l,refresh_token:c,expires_in:d,expires_at:h,token_type:f}=t;if(!l||!d||!c||!f)throw new Kd("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let x=m+g;h&&(x=parseInt(h));const b=x-m;b*1e3<=Qo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${g}s`);const j=x-g;m-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,x,m):m-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,x,m);const{data:w,error:_}=await this._getUser(l);if(_)throw _;const N={provider_token:n,provider_refresh_token:a,access_token:l,expires_in:g,expires_at:x,refresh_token:c,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if(Fe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Sl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return this._returnResult({error:l});const c=(n=a.session)===null||n===void 0?void 0:n.access_token;if(c){const{error:d}=await this.admin.signOut(c,t);if(d&&!(SA(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Pz(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:l},error:c}=r;if(c)throw c;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ho(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Fe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async l=>{var c,d,h,f,m;const{data:g,error:x}=l;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return mn()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(Fe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:l}}=r;if(a)throw a;const{options:c,provider:d,token:h,access_token:f,nonce:m}=t,g=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=l==null?void 0:l.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:h,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Ws}),{data:x,error:b}=g;return b?this._returnResult({data:{user:null,session:null},error:b}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Al}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:b}))}catch(a){if(await fn(this.storage,`${this.storageKey}-code-verifier`),Fe(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:c}=r;if(c)throw c;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Iz(async a=>(a>0&&await Rz(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ws})),(a,l)=>{const c=200*Math.pow(2,a);return l&&Gf(l)&&Date.now()+c-n<Qo})}catch(n){if(this._debug(r,"error",n),Fe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),mn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Sl(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Sl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Zo(this.userStorage,this.storageKey+"-user",c)),a.user=(t=c==null?void 0:c.user)!==null&&t!==void 0?t:Ix()}else if(a&&!a.user&&!a.user){const c=await Sl(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await fn(this.storage,this.storageKey+"-user"),await Zo(this.storage,this.storageKey,a)):a.user=Ix()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const l=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Mx;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${Mx}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),Gf(c)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(a.access_token);!d&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(n,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Wn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new DA;const{data:l,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!l.session)throw new Wn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const d={data:l.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(l){if(this._debug(a,"error",l),Fe(l)){const c={data:null,error:l};return Gf(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(c),c}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(h){l.push(h)}});if(await Promise.all(c),l.length>0){for(let d=0;d<l.length;d+=1)console.error(l[d]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await fn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Zo(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const l=B2(a);await Zo(this.storage,this.storageKey,l)}else{const a=B2(r);await Zo(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await fn(this.storage,this.storageKey),await fn(this.storage,this.storageKey+"-code-verifier"),await fn(this.storage,this.storageKey+"-user"),this.userStorage&&await fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&mn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Qo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Qo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Qo}ms, refresh threshold is ${Iv} ticks`),a<=Iv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Sw)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!mn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,c]=await Ho(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(d.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);a.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;return l?this._returnResult({data:null,error:l}):await et(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:l,error:c}=r;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:f}=await et(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&h.type==="totp"&&(!((a=h==null?void 0:h.totp)===null||a===void 0)&&a.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?uU(t.webauthn.credential_response):hU(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:h}=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:l}=r;if(l)return this._returnResult({data:null,error:l});const c=await et(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:cU(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:dU(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(l),l.status==="verified"&&a[l.factor_type].push(l);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Rx(n.access_token);let c=null;l.aal&&(c=l.aal);let d=c;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:c,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await et(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Wn});const c=await et(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&mn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(n){if(Fe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!a)return this._returnResult({data:null,error:new Wn});const c=await et(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&mn()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(n){if(Fe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await et(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Wn})})}catch(t){if(Fe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await et(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Wn})})}catch(r){if(Fe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(d=>d.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(d=>d.kid===t),n&&this.jwks_cached_at+_z>a)return n;const{data:l,error:c}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,n=l.keys.find(d=>d.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:b,error:j}=await this.getSession();if(j||!b.session)return this._returnResult({data:null,error:j});n=b.session.access_token}const{header:a,payload:l,signature:c,raw:{header:d,payload:h}}=Rx(n);r!=null&&r.allowExpired||Fz(l.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!f){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:l,header:a,signature:c},error:null}}const m=Hz(a.alg),g=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,c,Tz(`${d}.${h}`)))throw new x0("Invalid JWT signature");return{data:{claims:l,header:a,signature:c},error:null}}catch(n){if(Fe(n))return this._returnResult({data:null,error:n});throw n}}}xc.nextInstanceID={};const wU=Nw,zA=xc;class jU extends zA{constructor(t){super(t)}}class UA{constructor(t,r,n){var a,l,c;this.supabaseUrl=t,this.supabaseKey=r;const d=bz(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:dz,realtime:hz,auth:Object.assign(Object.assign({},uz),{storageKey:h}),global:cz},m=xz(n??{},f);this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=m.global.headers)!==null&&l!==void 0?l:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=m.auth)!==null&&c!==void 0?c:{},this.headers,m.global.fetch),this.fetch=pz(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new h7(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new iz(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new o7(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:l,storageKey:c,flowType:d,lock:h,debug:f,throwOnError:m},g,x){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jU({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),g),storageKey:c,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:l,flowType:d,lock:h,debug:f,throwOnError:m,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new bA(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _U=(e,t,r)=>new UA(e,t,r);function kU(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}kU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const NU=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:wU,AuthApiError:NA,AuthClient:zA,AuthError:gc,AuthImplicitGrantRedirectError:Kd,AuthInvalidCredentialsError:Gd,AuthInvalidJwtError:x0,AuthInvalidTokenResponseError:Al,AuthPKCECodeVerifierMissingError:AA,AuthPKCEGrantCodeExchangeError:Lv,AuthRetryableFetchError:g0,AuthSessionMissingError:Wn,AuthUnknownError:Xi,AuthWeakPasswordError:zv,CustomAuthError:_a,get FunctionRegion(){return p0},FunctionsError:ym,FunctionsFetchError:iA,FunctionsHttpError:Cv,FunctionsRelayError:Sv,GoTrueAdminApi:Nw,GoTrueClient:xc,NavigatorLockAcquireTimeoutError:RA,PostgrestError:f7,REALTIME_CHANNEL_STATES:S7,get REALTIME_LISTEN_TYPES(){return oc},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Pv},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Ov},get REALTIME_SUBSCRIBE_STATES(){return pa},RealtimeChannel:$l,RealtimeClient:bA,RealtimePresence:lc,SIGN_OUT_SCOPES:Kf,SupabaseClient:UA,WebSocketFactory:fA,createClient:_U,isAuthApiError:SA,isAuthError:Fe,isAuthImplicitGrantRedirectError:EA,isAuthPKCECodeVerifierMissingError:kz,isAuthRetryableFetchError:Gf,isAuthSessionMissingError:CA,isAuthWeakPasswordError:Nz,lockInternals:Ol,navigatorLock:IA,processLock:eU},Symbol.toStringTag,{value:"Module"})),{createClient:SU}=NU,CU="https://ofrnqqvujueivirduyqv.supabase.co",EU="sb_publishable_2DfGc-fRJ9cQlY_0h60U6g_WE7Mdyu1",me=SU(CU,EU),AU=async()=>{const{data:{session:e}}=await me.auth.getSession();return e},TU=Object.freeze(Object.defineProperty({__proto__:null,getCurrentSession:AU,supabase:me},Symbol.toStringTag,{value:"Module"})),OU={urgent_task:{icon:vn,color:"text-rose-500",bg:"bg-rose-50",label:" "},alert:{icon:vn,color:"text-rose-500",bg:"bg-rose-50",label:" "},manager_message:{icon:ri,color:"text-blue-500",bg:"bg-blue-50",label:" "},followup:{icon:mt,color:"text-emerald-500",bg:"bg-emerald-50",label:""},reminder:{icon:Br,color:"text-amber-500",bg:"bg-amber-50",label:""},lead:{icon:mt,color:"text-emerald-500",bg:"bg-emerald-50",label:""},system:{icon:ri,color:"text-slate-500",bg:"bg-slate-50",label:""}},PU=["urgent_task","alert","manager_message","followup","reminder"],DU=({userId:e,orgId:t,onNavigateToLead:r,onOpenReminders:n})=>{const[a,l]=v.useState(!1),[c,d]=v.useState([]),[h,f]=v.useState(!1),[m,g]=v.useState("today"),x=v.useRef(null);v.useEffect(()=>{(async()=>{if(!(!e||!a)){f(!0);try{let E=me.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(50);if(m==="today"){const T=new Date;T.setHours(0,0,0,0),E=E.gte("created_at",T.toISOString())}else if(m==="week"){const T=new Date;T.setDate(T.getDate()-7),E=E.gte("created_at",T.toISOString())}E=E.in("type",PU);const{data:A,error:S}=await E;if(S)throw S;d(A||[])}catch(E){console.error("Failed to fetch notifications:",E)}finally{f(!1)}}})()},[e,a,m]),v.useEffect(()=>{const C=E=>{x.current&&!x.current.contains(E.target)&&l(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]);const b=async C=>{await me.from("notifications").update({is_read:!0}).eq("id",C),d(E=>E.map(A=>A.id===C?{...A,is_read:!0}:A))},j=async()=>{await me.from("notifications").update({is_read:!0}).eq("user_id",e).eq("is_read",!1),d(C=>C.map(E=>({...E,is_read:!0})))},w=C=>{if(b(C.id),["reminder","followup","urgent_task","alert"].includes(C.type)){n==null||n(),l(!1);return}C.lead_id&&r&&(r(C.lead_id),l(!1))},_=c.filter(C=>!C.is_read).length,N=C=>{const E=new Date(C),S=new Date().getTime()-E.getTime(),T=Math.floor(S/6e4),D=Math.floor(S/36e5);return T<1?"":T<60?` ${T} '`:D<24?` ${D} `:E.toLocaleDateString("he-IL")};return s.jsxs("div",{className:"relative",ref:x,children:[s.jsxs("button",{onClick:()=>l(!a),className:"relative p-2 rounded-xl hover:bg-slate-100 transition-colors",children:[s.jsx(ri,{className:"w-5 h-5 text-slate-600"}),_>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-rose-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:_>9?"9+":_})]}),a&&s.jsxs("div",{className:"absolute left-0 top-full mt-2 w-80 bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden z-50",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center justify-between",children:[s.jsx("h3",{className:"font-bold text-slate-800",children:"  "}),s.jsxs("div",{className:"flex items-center gap-2",children:[_>0&&s.jsx("button",{onClick:j,className:"text-xs text-brand-600 hover:underline",children:"  "}),s.jsxs("span",{className:"text-xs text-slate-400",children:[_," "]})]})]}),s.jsx("div",{className:"flex border-b border-slate-100",children:[{key:"today",label:""},{key:"week",label:""},{key:"all",label:""}].map(C=>s.jsx("button",{onClick:()=>g(C.key),className:`flex-1 py-2 text-sm font-medium transition-colors ${m===C.key?"text-brand-600 border-b-2 border-brand-500":"text-slate-500 hover:text-slate-700"}`,children:C.label},C.key))}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:h?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(rt,{className:"w-5 h-5 animate-spin text-slate-400"})}):c.length===0?s.jsxs("div",{className:"py-8 text-center text-sm text-slate-400",children:[s.jsx(ri,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),s.jsx("p",{children:" "})]}):s.jsx("div",{className:"divide-y divide-slate-100",children:c.map(C=>{const E=OU[C.type],A=E.icon;return s.jsxs("div",{onClick:()=>w(C),className:`px-4 py-3 flex items-start gap-3 cursor-pointer hover:bg-slate-50 transition-colors ${C.is_read?"":"bg-brand-50/30"}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${E.bg}`,children:s.jsx(A,{className:`w-4 h-4 ${E.color}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-start justify-between gap-2",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded ${E.bg} ${E.color}`,children:E.label}),!C.is_read&&s.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-500 shrink-0"})]})}),s.jsx("p",{className:`text-sm font-medium mt-1 ${C.is_read?"text-slate-600":"text-slate-900"}`,children:C.title}),C.message&&s.jsx("p",{className:"text-xs text-slate-500 mt-0.5 line-clamp-2",children:C.message}),s.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:N(C.created_at)})]})]},C.id)})})}),s.jsx("div",{className:"px-4 py-3 border-t border-slate-100",children:s.jsx("button",{onClick:()=>{n==null||n(),l(!1)},className:"w-full py-2 text-sm font-medium text-brand-600 hover:bg-brand-50 rounded-lg transition-colors",children:" "})})]})]})},MU=({isOpen:e,onClose:t,orgId:r,userId:n,userRole:a,onNavigate:l,onSelectLead:c,onSelectTask:d})=>{const[h,f]=v.useState(""),[m,g]=v.useState([]),[x,b]=v.useState(!1),[j,w]=v.useState(0),_=v.useRef(null),N=v.useRef(null);v.useEffect(()=>{e&&(f(""),g([]),w(0),setTimeout(()=>{var S;return(S=_.current)==null?void 0:S.focus()},100))},[e]);const C=v.useCallback(async S=>{if(!S.trim()||S.length<2){g([]);return}b(!0);const T=a==="manager"||a==="sales_manager"||a==="admin"||a==="super_admin"||a==="platform_admin";try{let D=me.from("leads").select("id, name, company, phone, email, status").or(`name.ilike.%${S}%,company.ilike.%${S}%,phone.ilike.%${S}%,email.ilike.%${S}%`).limit(6),P=me.from("tasks").select("id, title, due_date, status").ilike("title",`%${S}%`).limit(4),I=T?me.from("profiles").select("id, full_name, email, role").or(`full_name.ilike.%${S}%,email.ilike.%${S}%`).limit(3):null;r&&(D=D.eq("organization_id",r),P=P.eq("organization_id",r),I&&(I=I.eq("organization_id",r))),n&&!T&&(D=D.eq("owner_id",n),P=P.eq("assigned_to",n));const[$,M,R]=await Promise.all([D,P,I||Promise.resolve({data:[]})]),q=[];$.data&&$.data.forEach(H=>{q.push({id:H.id,type:"lead",title:H.name,subtitle:H.company||H.phone||"",icon:s.jsx(Mn,{className:"w-4 h-4 text-brand-500"}),metadata:{status:H.status,phone:H.phone,email:H.email}})}),M.data&&M.data.forEach(H=>{q.push({id:H.id,type:"task",title:H.title,subtitle:H.due_date?new Date(H.due_date).toLocaleDateString("he-IL"):"",icon:s.jsx(At,{className:"w-4 h-4 text-emerald-500"}),metadata:{status:H.status}})}),R&&R.data&&R.data.forEach(H=>{q.push({id:H.id,type:"profile",title:H.full_name,subtitle:H.role==="manager"?"":"",icon:s.jsx(ja,{className:"w-4 h-4 text-slate-500"})})}),g(q),w(0)}catch(D){console.error("Search error:",D)}finally{b(!1)}},[r,n,a]);v.useEffect(()=>{const S=setTimeout(()=>{C(h)},150);return()=>clearTimeout(S)},[h,C]);const E=S=>{S.key==="ArrowDown"?(S.preventDefault(),w(T=>Math.min(T+1,m.length-1))):S.key==="ArrowUp"?(S.preventDefault(),w(T=>Math.max(T-1,0))):S.key==="Enter"&&m[j]?A(m[j]):S.key==="Escape"&&t()},A=S=>{S.type==="lead"?(l("leads"),c&&setTimeout(()=>c(S.id),100)):S.type==="task"?(l("tasks"),d&&setTimeout(()=>d(S.id),100)):S.type==="profile"&&l("settings"),t()};return v.useEffect(()=>{if(N.current){const S=N.current.children[j];S&&S.scrollIntoView({block:"nearest"})}},[j]),e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 animate-in fade-in duration-200",onClick:t}),s.jsxs("div",{className:"fixed top-[15%] left-1/2 -translate-x-1/2 w-full max-w-xl bg-white dark:bg-slate-900 rounded-2xl shadow-2xl z-50 overflow-hidden border border-slate-200 dark:border-slate-800 animate-in fade-in zoom-in-95 slide-in-from-top-4 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-4 border-b border-slate-200 dark:border-slate-800",children:[s.jsx(ta,{className:"w-5 h-5 text-slate-400 flex-shrink-0"}),s.jsx("input",{ref:_,type:"text",value:h,onChange:S=>f(S.target.value),onKeyDown:E,placeholder:" , ,  ...",className:"flex-1 bg-transparent outline-none text-slate-900 dark:text-white placeholder-slate-400 text-base"}),x&&s.jsx(rt,{className:"w-5 h-5 text-brand-500 animate-spin"}),s.jsx("button",{onClick:t,className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:s.jsx(Rt,{className:"w-4 h-4"})})]}),s.jsxs("div",{ref:N,className:"max-h-[400px] overflow-y-auto",children:[h.length>=2&&m.length===0&&!x&&s.jsxs("div",{className:"p-8 text-center text-slate-500 dark:text-slate-400",children:[s.jsx(ta,{className:"w-10 h-10 mx-auto mb-3 opacity-30"}),s.jsxs("p",{className:"text-sm",children:['    "',h,'"']})]}),m.length>0&&s.jsx("div",{className:"p-2",children:["lead","task","profile"].map(S=>{const T=m.filter(P=>P.type===S);if(T.length===0)return null;const D={lead:"",task:"",profile:" "};return s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"px-3 py-1.5 text-xs font-bold text-slate-400 uppercase tracking-wider",children:D[S]}),T.map((P,I)=>{var R;const M=m.indexOf(P)===j;return s.jsxs("button",{onClick:()=>A(P),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-right transition-colors ${M?"bg-brand-50 dark:bg-brand-900/20 text-brand-900 dark:text-brand-100":"hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-900 dark:text-white"}`,children:[s.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${M?"bg-brand-100 dark:bg-brand-900/40":"bg-slate-100 dark:bg-slate-800"}`,children:P.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium truncate",children:P.title}),P.subtitle&&s.jsx("p",{className:"text-xs text-slate-500 truncate",children:P.subtitle})]}),((R=P.metadata)==null?void 0:R.status)&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hidden sm:block",children:P.metadata.status}),s.jsx(b3,{className:"w-4 h-4 text-slate-300 flex-shrink-0"})]},P.id)})]},S)})}),!h&&s.jsxs("div",{className:"p-6 text-center text-slate-400",children:[s.jsx("p",{className:"text-sm",children:"  ..."}),s.jsx("p",{className:"text-xs mt-2 opacity-60",children:"   , , ,   "})]})]}),s.jsxs("div",{className:"px-4 py-2.5 bg-slate-50 dark:bg-slate-950 border-t border-slate-200 dark:border-slate-800 flex items-center justify-between text-xs text-slate-400",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded text-[10px] font-mono",children:""}),""]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded text-[10px] font-mono",children:"Enter"}),""]})]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("kbd",{className:"px-1.5 py-0.5 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700 rounded text-[10px] font-mono",children:"Esc"}),""]})]})]})]}):null},RU=[{id:"h1",text:"  K      ."},{id:"h2",text:"       ."},{id:"h3",text:"-AI        ."}],IU=[{id:"a1",label:"   "},{id:"a2",label:"   "},{id:"a3",label:"    -AI"}],$U=({user:e,userId:t,orgId:r,isDarkMode:n,toggleTheme:a,onNavigate:l,onOpenChat:c,onOpenReminders:d,onToggleMobileMenu:h,onLogout:f,onNavigateToLead:m})=>{const g=e.type==="rep",[x,b]=v.useState(null),[j,w]=v.useState(!1),_=v.useRef(null);v.useEffect(()=>{function C(E){_.current&&!_.current.contains(E.target)&&b(null)}return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[]),v.useEffect(()=>{function C(E){(E.metaKey||E.ctrlKey)&&E.key==="k"&&(E.preventDefault(),w(!0))}return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[]);const N=C=>{b(x===C?null:C)};return s.jsxs(s.Fragment,{children:[s.jsxs("header",{className:`h-16 px-4 md:px-6 flex items-center justify-between flex-shrink-0 z-40 sticky top-0
      bg-white/80 dark:bg-slate-900/80 backdrop-blur-md border-b border-slate-200/60 dark:border-slate-800/60 transition-colors`,children:[s.jsxs("div",{className:"flex items-center gap-3 w-full max-w-xl",children:[s.jsx("button",{onClick:h,className:"lg:hidden p-2 -mr-2 text-slate-500 hover:bg-slate-100 dark:text-slate-300 dark:hover:bg-slate-800 rounded-lg transition-colors",children:s.jsx(w9,{className:"w-5 h-5"})}),s.jsxs("button",{onClick:()=>w(!0),className:`relative w-full group hidden sm:flex items-center pr-10 pl-12 py-2 bg-slate-100/50 dark:bg-slate-800/50 border border-slate-200/60 dark:border-slate-700/60 
                     rounded-xl text-sm text-slate-400 
                     hover:bg-white dark:hover:bg-slate-900 hover:border-brand-500/50 hover:text-slate-600 dark:hover:text-slate-300
                     transition-all shadow-sm cursor-pointer`,children:[s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx(ta,{className:"w-4 h-4"})}),s.jsx("span",{children:"  (K)"}),s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 flex items-center gap-1",children:s.jsx("span",{className:"text-[10px] font-mono text-slate-500 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded px-1.5 py-0.5",children:"K"})})]}),s.jsx("button",{onClick:()=>w(!0),className:"sm:hidden p-2 text-slate-500 dark:text-slate-400 hover:text-brand-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:s.jsx(ta,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex items-center gap-2 md:gap-3 pl-2",ref:_,children:[g&&s.jsxs("button",{onClick:c,className:"hidden md:flex items-center gap-2 px-3 py-1.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:border-brand-300 dark:hover:border-brand-700 text-slate-600 dark:text-slate-300 rounded-lg transition-all text-sm font-medium shadow-sm hover:shadow",children:[s.jsx(Zd,{className:"w-4 h-4 text-brand-500"}),s.jsx("span",{className:"hidden lg:inline",children:"' "})]}),s.jsxs("div",{className:"flex items-center gap-1 relative",children:[s.jsxs("div",{className:"relative hidden md:block",children:[s.jsx("button",{onClick:()=>N("help"),className:`p-2 rounded-full transition-colors ${x==="help"?"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":"text-slate-400 hover:text-slate-600 dark:text-slate-500 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"",children:s.jsx(ow,{className:"w-5 h-5"})}),x==="help"&&s.jsxs("div",{className:"absolute top-full left-0 mt-3 w-80 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200 origin-top-left",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-white dark:from-slate-800 dark:to-slate-900 border-b border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"p-1 bg-blue-100 dark:bg-blue-900/30 rounded-lg text-blue-600 dark:text-blue-400",children:s.jsx(LU,{className:"w-4 h-4"})}),s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:" ?"})]}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"        ."})]}),s.jsxs("div",{className:"p-4 space-y-5",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-1.5",children:[s.jsx(Qd,{className:"w-3.5 h-3.5 text-amber-500"})," "]}),s.jsx("ul",{className:"space-y-2",children:RU.map(C=>s.jsxs("li",{className:"text-xs text-slate-600 dark:text-slate-300 flex items-start gap-2 leading-relaxed",children:[s.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300 dark:bg-slate-600 mt-1.5 flex-shrink-0"}),C.text]},C.id))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-bold text-slate-900 dark:text-white mb-2 flex items-center gap-1.5",children:[s.jsx(Ar,{className:"w-3.5 h-3.5 text-blue-500"})," "]}),s.jsx("ul",{className:"space-y-1",children:IU.map(C=>s.jsx("li",{children:s.jsxs("button",{className:"w-full text-right text-xs py-1.5 px-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors flex items-center justify-between group",children:[C.label,s.jsx(os,{className:"w-3 h-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})},C.id))})]})]}),s.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-950 border-t border-slate-100 dark:border-slate-800 text-center",children:s.jsxs("button",{className:"text-xs font-medium text-blue-600 dark:text-blue-400 hover:underline flex items-center justify-center gap-1.5",children:[s.jsx(ku,{className:"w-3.5 h-3.5"}),"   "]})})]})]}),s.jsx("button",{onClick:a,className:"p-2 text-slate-400 hover:text-brand-600 dark:text-slate-500 dark:hover:text-brand-400 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:n?s.jsx(CL,{className:"w-5 h-5"}):s.jsx(A3,{className:"w-5 h-5"})}),s.jsx(DU,{userId:t||e.id,orgId:r||e.organization_id,onNavigateToLead:m,onOpenReminders:d})]}),s.jsx("div",{className:"h-8 w-px bg-slate-200 dark:bg-slate-700 mx-2 hidden md:block"}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>b(x==="userMenu"?null:"userMenu"),className:"flex items-center gap-3 pl-1 pr-2 py-1 rounded-xl hover:bg-slate-100/50 dark:hover:bg-slate-800/50 transition-colors group",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random`,alt:e.name,className:"w-8 h-8 rounded-full object-cover border border-slate-200 dark:border-slate-600 shadow-sm group-hover:border-brand-300 transition-colors"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-2.5 h-2.5 bg-emerald-500 border-2 border-white dark:border-slate-900 rounded-full"})]}),s.jsxs("div",{className:"text-right hidden md:block",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-800 dark:text-slate-100 leading-tight group-hover:text-brand-600 transition-colors",children:e.name}),s.jsx("p",{className:"text-[11px] text-slate-500 dark:text-slate-400 leading-tight",children:e.role})]})]}),x==="userMenu"&&s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200 origin-top-left",children:[s.jsxs("div",{className:"p-3 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:e.name}),s.jsx("p",{className:"text-xs text-slate-500 truncate",children:e.email})]}),s.jsx("div",{className:"p-1",children:s.jsxs("button",{onClick:()=>{l("settings"),b(null)},className:"w-full text-right flex items-center gap-2 px-3 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[s.jsx(Mn,{className:"w-4 h-4 text-slate-400"})," "]})}),s.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 my-1"}),s.jsx("div",{className:"p-1",children:s.jsxs("button",{onClick:f,className:"w-full text-right flex items-center gap-2 px-3 py-2 text-sm text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors font-medium",children:[s.jsx(fw,{className:"w-4 h-4"}),""]})})]})]})]})]}),s.jsx(MU,{isOpen:j,onClose:()=>w(!1),orgId:r||e.organization_id,userId:t||e.id,userRole:e.role||e.type,onNavigate:l,onSelectLead:m})]})};function LU({className:e}){return s.jsxs("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("circle",{cx:"12",cy:"12",r:"4"}),s.jsx("line",{x1:"4.93",y1:"4.93",x2:"9.17",y2:"9.17"}),s.jsx("line",{x1:"14.83",y1:"14.83",x2:"19.07",y2:"19.07"}),s.jsx("line",{x1:"14.83",y1:"9.17",x2:"19.07",y2:"4.93"}),s.jsx("line",{x1:"14.83",y1:"9.17",x2:"18.36",y2:"5.64"}),s.jsx("line",{x1:"4.93",y1:"19.07",x2:"9.17",y2:"14.83"})]})}const fr=({children:e,variant:t="neutral",className:r=""})=>{const n="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border border-transparent",a={neutral:"bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700",brand:"bg-brand-100 text-brand-800 dark:bg-brand-900/30 dark:text-brand-300 dark:border-brand-800/50",success:"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800/50",warning:"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-800/50",danger:"bg-rose-100 text-rose-800 dark:bg-rose-900/30 dark:text-rose-300 dark:border-rose-800/50",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-800/50",purple:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-800/50",pink:"bg-pink-100 text-pink-800 dark:bg-pink-900/30 dark:text-pink-300 dark:border-pink-800/50"};return s.jsx("span",{className:`${n} ${a[t]} ${r}`,children:e})},zU=[{id:"intro",title:"",icon:"intro",content:`,  [] -[].
      
      [].

   ?`},{id:"questions",title:" ",icon:"questions",content:`    ?
      ?
     ?
     ?
   ?`},{id:"objections",title:"",icon:"objections",content:`" "  " .     ROI  X ?"

" "  ".    ?"

"  "  "  .     ?"

"   "  "!    ?"`},{id:"close",title:"",icon:"close",content:`    
   
  

"  -    []   -[]. ?"`}],UU=e=>{switch(e){case"intro":return s.jsx(Xn,{className:"w-4 h-4"});case"questions":return s.jsx(ow,{className:"w-4 h-4"});case"objections":return s.jsx(vn,{className:"w-4 h-4"});case"close":return s.jsx(At,{className:"w-4 h-4"});default:return s.jsx(gs,{className:"w-4 h-4"})}},BU=({isVisible:e,onClose:t,campaignName:r,leadName:n,customScript:a})=>{const l=a||zU,[c,d]=v.useState(()=>{if(typeof window<"u"){const N=localStorage.getItem("callScriptPosition");if(N)try{return JSON.parse(N)}catch{}}return{x:100,y:100}}),[h,f]=v.useState(!1),[m,g]=v.useState("intro"),[x,b]=v.useState(!1),j=v.useRef({x:0,y:0}),w=v.useRef(null);v.useEffect(()=>{localStorage.setItem("callScriptPosition",JSON.stringify(c))},[c]);const _=N=>{if(!w.current)return;b(!0);const C=w.current.getBoundingClientRect();j.current={x:N.clientX-C.left,y:N.clientY-C.top},N.preventDefault()};return v.useEffect(()=>{if(!x)return;const N=E=>{const A=E.clientX-j.current.x,S=E.clientY-j.current.y,T=window.innerWidth-(h?200:380),D=window.innerHeight-60;d({x:Math.max(0,Math.min(A,T)),y:Math.max(0,Math.min(S,D))})},C=()=>{b(!1)};return window.addEventListener("mousemove",N),window.addEventListener("mouseup",C),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",C)}},[x,h]),e?s.jsxs("div",{ref:w,className:`fixed z-[200] transition-all duration-200 ${x?"cursor-grabbing":""}`,style:{left:c.x,top:c.y,width:h?"200px":"360px"},children:[s.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-hidden ${x?"ring-2 ring-brand-500":""}`,children:[s.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 text-white px-4 py-3 flex items-center gap-3 cursor-grab active:cursor-grabbing select-none",onMouseDown:_,children:[s.jsx(hw,{className:"w-4 h-4 opacity-60"}),s.jsx(gs,{className:"w-4 h-4"}),s.jsx("span",{className:"font-bold text-sm flex-1",children:h?"":" "}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>f(!h),className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",title:h?"":"",children:h?s.jsx(b9,{className:"w-4 h-4"}):s.jsx(T9,{className:"w-4 h-4"})}),s.jsx("button",{onClick:t,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",title:"",children:s.jsx(Rt,{className:"w-4 h-4"})})]})]}),!h&&s.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[(r||n)&&s.jsxs("div",{className:"px-4 py-2 bg-slate-50 border-b border-slate-100 text-xs text-slate-500 flex gap-4",children:[r&&s.jsxs("span",{children:[": ",s.jsx("strong",{className:"text-slate-700",children:r})]}),n&&s.jsxs("span",{children:[": ",s.jsx("strong",{className:"text-slate-700",children:n})]})]}),s.jsx("div",{className:"divide-y divide-slate-100",children:l.map(N=>s.jsxs("div",{children:[s.jsxs("button",{onClick:()=>g(m===N.id?null:N.id),className:`w-full px-4 py-3 flex items-center gap-3 text-right hover:bg-slate-50 transition-colors
                                 ${m===N.id?"bg-brand-50 text-brand-700":"text-slate-700"}`,children:[s.jsx("span",{className:`p-1.5 rounded-lg ${m===N.id?"bg-brand-100 text-brand-600":"bg-slate-100 text-slate-500"}`,children:UU(N.icon)}),s.jsx("span",{className:"font-medium text-sm flex-1",children:N.title}),m===N.id?s.jsx(Yl,{className:"w-4 h-4 text-slate-400"}):s.jsx(Et,{className:"w-4 h-4 text-slate-400"})]}),m===N.id&&s.jsx("div",{className:"px-4 py-3 bg-slate-50 text-sm text-slate-600 leading-relaxed whitespace-pre-line",children:N.content})]},N.id))})]})]}),h&&s.jsx("div",{className:"mt-2 text-center",children:s.jsx("span",{className:"text-xs text-slate-500 bg-white/80 px-2 py-1 rounded-full shadow-sm",children:" "})})]}):null},BA=({leadPhone:e,leadName:t,leadEmail:r,onSendSummary:n,className:a="",callTranscript:l,callSummary:c})=>{const[d,h]=v.useState({whatsapp:"idle",quote:"idle",payment:"idle",summary:"idle"}),[f,m]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(""),[w,_]=v.useState(""),[N,C]=v.useState(""),[E,A]=v.useState(""),[S,T]=v.useState(!1),D=W=>{let L=W.replace(/[\s\-\(\)]/g,"");return L.startsWith("0")&&(L="972"+L.substring(1)),L=L.replace("+",""),L},P=async()=>{var W;if(!l&&!c){_("  "),j("1990");return}T(!0);try{const L=await fetch("/api/ai/generate-quote",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transcript:l,summary:c,leadName:t})});if(L.ok){const B=await L.json();_(B.description||"  "),j(((W=B.amount)==null?void 0:W.toString())||"1990")}else _("  "),j("1990")}catch(L){console.error("Failed to generate AI quote:",L),_("  "),j("1990")}finally{T(!1)}},I=()=>{if(!e)return;h(G=>({...G,whatsapp:"loading"}));const W=D(e),L=encodeURIComponent(` ${t||""},   !     .`),B=`https://wa.me/${W}?text=${L}`;window.open(B,"_blank"),setTimeout(()=>{h(G=>({...G,whatsapp:"success"})),setTimeout(()=>{h(G=>({...G,whatsapp:"idle"}))},2e3)},500)},$=()=>{if(!e||!b)return;h(G=>({...G,quote:"loading"}));const W=D(e),L=encodeURIComponent(` ${t||""},

 :
${w||""}
": ${b}

  !`),B=`https://wa.me/${W}?text=${L}`;window.open(B,"_blank"),setTimeout(()=>{h(G=>({...G,quote:"success"})),m(!1),j(""),_(""),setTimeout(()=>{h(G=>({...G,quote:"idle"}))},2e3)},500)},M=()=>{if(!e||!N)return;h(ce=>({...ce,payment:"loading"}));const W=D(e),L=`https://pay.example.com/${Date.now()}`,B=encodeURIComponent(` ${t||""},

 :
${E||""} - ${N}

${L}

!`),G=`https://wa.me/${W}?text=${B}`;window.open(G,"_blank"),setTimeout(()=>{h(ce=>({...ce,payment:"success"})),x(!1),C(""),A(""),setTimeout(()=>{h(ce=>({...ce,payment:"idle"}))},2e3)},500)},R=()=>{h(W=>({...W,summary:"loading"})),n&&n(),setTimeout(()=>{h(W=>({...W,summary:"success"})),setTimeout(()=>{h(W=>({...W,summary:"idle"}))},2e3)},1e3)},q=(W,L)=>{switch(W){case"loading":return s.jsx(rt,{className:"w-4 h-4 animate-spin"});case"success":return s.jsx(Er,{className:"w-4 h-4"});default:return L}},H=W=>{switch(W){case"success":return"bg-emerald-50 border-emerald-200 text-emerald-600";case"loading":return"bg-slate-100 border-slate-200 text-slate-400 cursor-wait";default:return"bg-white border-slate-200 text-slate-700 hover:bg-slate-50 hover:border-slate-300"}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`flex items-center gap-2 ${a}`,children:[s.jsxs("button",{onClick:I,disabled:!e||d.whatsapp==="loading",className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-all ${H(d.whatsapp)}`,title:"  WhatsApp",children:[q(d.whatsapp,s.jsx(Zd,{className:"w-4 h-4"})),s.jsx("span",{className:"hidden md:inline",children:"WhatsApp"})]}),s.jsxs("button",{onClick:()=>m(!0),disabled:!e||d.quote==="loading",className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-all ${H(d.quote)}`,title:"  ",children:[q(d.quote,s.jsx(gs,{className:"w-4 h-4"})),s.jsx("span",{className:"hidden md:inline",children:""})]}),s.jsxs("button",{onClick:()=>x(!0),disabled:!e||d.payment==="loading",className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-all ${H(d.payment)}`,title:"  ",children:[q(d.payment,s.jsx(d0,{className:"w-4 h-4"})),s.jsx("span",{className:"hidden md:inline",children:""})]}),s.jsxs("button",{onClick:R,disabled:d.summary==="loading",className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-sm font-medium transition-all ${H(d.summary)}`,title:"  ",children:[q(d.summary,s.jsx(mc,{className:"w-4 h-4"})),s.jsx("span",{className:"hidden md:inline",children:""})]})]}),f&&s.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-brand-600 to-indigo-600 px-6 py-4 text-white",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:s.jsx(gs,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:" "}),s.jsxs("p",{className:"text-sm text-white/80",children:[" ",t||""]})]})]}),s.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(Rt,{className:"w-5 h-5"})})]})}),s.jsxs("div",{className:"p-6 space-y-5",children:[(l||c)&&s.jsx("button",{onClick:P,disabled:S,className:"w-full p-4 bg-gradient-to-r from-purple-500 to-indigo-500 text-white rounded-xl font-bold flex items-center justify-center gap-3 hover:from-purple-600 hover:to-indigo-600 transition-all shadow-lg shadow-purple-500/25 disabled:opacity-70",children:S?s.jsxs(s.Fragment,{children:[s.jsx(rt,{className:"w-5 h-5 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jr,{className:"w-5 h-5"}),"    "]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"  "}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{name:"",price:"990"},{name:"",price:"1,990"},{name:"",price:"3,990"}].map(W=>s.jsxs("button",{onClick:()=>{_(` ${W.name}`),j(W.price.replace(",",""))},className:`p-3 rounded-xl border-2 text-center transition-all ${w===` ${W.name}`?"border-brand-500 bg-brand-50 text-brand-700":"border-slate-200 hover:border-brand-300 hover:bg-slate-50"}`,children:[s.jsx("div",{className:"text-sm font-bold",children:W.name}),s.jsxs("div",{className:"text-lg font-extrabold text-brand-600",children:["",W.price]})]},W.name))})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex-1 h-px bg-slate-200"}),s.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"  "}),s.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:" "}),s.jsx("input",{type:"text",value:w,onChange:W=>_(W.target.value),placeholder:":   + ",className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:" ()"}),s.jsx("input",{type:"number",value:b,onChange:W=>j(W.target.value),placeholder:"0",className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-all text-lg font-bold"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5",children:" "}),s.jsxs("select",{className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 transition-all bg-white",children:[s.jsx("option",{value:"7",children:"7 "}),s.jsx("option",{value:"14",children:"14 "}),s.jsx("option",{value:"30",children:"30 "})]})]})]}),b&&s.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Zd,{className:"w-4 h-4 text-emerald-600"}),s.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:" "})]}),s.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-slate-100 text-sm text-slate-700 whitespace-pre-line",children:[" ",t||"[ ]",",  :",w||"",'": ',Number(b).toLocaleString("he-IL"),"  !"]})]})]}),s.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex gap-3",children:[s.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2.5 border border-slate-300 rounded-xl text-slate-600 hover:bg-white font-medium transition-colors",children:""}),s.jsxs("button",{onClick:$,disabled:!b,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl hover:from-emerald-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-bold shadow-lg shadow-emerald-500/25 transition-all",children:[s.jsx(Zd,{className:"w-4 h-4"})," -WhatsApp"]})]})]})}),g&&s.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6 mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"  "}),s.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-500"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" "}),s.jsx("input",{type:"text",value:E,onChange:W=>A(W.target.value),placeholder:": ",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" ()"}),s.jsx("input",{type:"number",value:N,onChange:W=>C(W.target.value),placeholder:"0",className:"w-full px-4 py-2 border border-slate-200 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500"})]}),s.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-amber-700 text-sm",children:[s.jsx("strong",{children:" :"}),"       (Grow, iCount ')    ."]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50",children:""}),s.jsxs("button",{onClick:M,disabled:!N,className:"flex-1 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[s.jsx(d0,{className:"w-4 h-4"})," -WhatsApp"]})]})]})})]})},Y2=[{level:1,name:"Rookie",color:"border-slate-300",ring:"ring-slate-200",icon:bm,bg:"bg-white"},{level:5,name:"Pro",color:"border-emerald-400",ring:"ring-emerald-200",icon:At,bg:"bg-emerald-50"},{level:10,name:"Elite",color:"border-blue-500",ring:"ring-blue-300",icon:E3,bg:"bg-blue-50"},{level:20,name:"Master",color:"border-purple-500",ring:"ring-purple-300",icon:cw,bg:"bg-purple-50"},{level:50,name:"Legend",color:"border-amber-400",ring:"ring-amber-200",icon:xw,bg:"bg-amber-50"}],$x=[{level:1,name:"",minXp:0,maxXp:100},{level:2,name:"",minXp:100,maxXp:300},{level:3,name:"",minXp:300,maxXp:600},{level:4,name:"",minXp:600,maxXp:1e3},{level:5,name:"",minXp:1e3,maxXp:2e3}],qU=({userId:e,orgId:t,compact:r=!1})=>{const[n,a]=v.useState(null),[l,c]=v.useState([]),[d,h]=v.useState(!0);if(v.useEffect(()=>{(async()=>{if(!(!e||!t))try{const{data:N,error:C}=await me.from("user_gamification").select("*").eq("user_id",e).single();if(C&&C.code!=="PGRST116"&&console.error("Gamification fetch error:",C),N)a(N);else{const{data:T}=await me.from("user_gamification").insert({user_id:e,organization_id:t}).select().single();a(T||{xp_total:0,level:1,current_streak:0,achievements:[]})}const E=new Date().toISOString().split("T")[0],{data:A,error:S}=await me.from("daily_missions").select("*").eq("user_id",e).eq("date",E);if(S&&console.error("Missions fetch error:",S),!A||A.length===0){await me.rpc("create_daily_missions",{p_user_id:e,p_org_id:t});const{data:T}=await me.from("daily_missions").select("*").eq("user_id",e).eq("date",E);c(T||[])}else c(A)}catch(N){console.error("Gamification error:",N)}finally{h(!1)}})()},[e,t]),d)return s.jsx("div",{className:"flex items-center justify-center p-4",children:s.jsx(rt,{className:"w-5 h-5 animate-spin text-brand-500"})});const f=$x.find(_=>_.level===((n==null?void 0:n.level)||1))||$x[0];$x.find(_=>_.level===((n==null?void 0:n.level)||1)+1);const m=(n==null?void 0:n.level)||1,g=Y2.reduce((_,N)=>N.level<=m?N:_,Y2[0]),x=((n==null?void 0:n.xp_total)||0)-f.minXp,b=(f.maxXp||2e3)-f.minXp,j=Math.max(0,Math.min(x/(b||100)*100,100)),w=l.filter(_=>_.completed).length;return r?s.jsxs("div",{className:"flex items-center gap-3 px-3 py-2.5 bg-white rounded-xl border border-slate-200 shadow-sm relative overflow-hidden group hover:border-indigo-200 transition-colors cursor-default",children:[s.jsx("div",{className:`relative w-10 h-10 shrink-0 rounded-full border-2 ${g.color} ${g.ring} flex items-center justify-center bg-white z-10`,children:s.jsx(g.icon,{className:`w-4 h-4 ${g.color.replace("border","text")}`})}),s.jsxs("div",{className:"flex-1 min-w-0 z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("span",{className:"text-xs font-bold text-slate-800 truncate",children:["LVL ",n==null?void 0:n.level,"  ",f.name]}),((n==null?void 0:n.current_streak)||0)>0&&s.jsxs("div",{className:"flex items-center gap-0.5 text-orange-500",children:[s.jsx(su,{className:"w-3 h-3 fill-orange-500 animate-pulse"}),s.jsx("span",{className:"text-[10px] font-bold",children:n==null?void 0:n.current_streak})]})]}),s.jsxs("div",{className:"h-1.5 w-full bg-slate-100 rounded-full overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 via-purple-400 to-amber-400 opacity-20 w-full animate-pulse"}),s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-amber-500 rounded-full transition-all duration-700",style:{width:`${j}%`}})]})]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative overflow-hidden bg-white rounded-2xl p-4 border border-slate-200 shadow-sm",children:s.jsxs("div",{className:"relative flex items-center gap-4",children:[s.jsx("div",{className:`relative w-16 h-16 rounded-full border-4 ${g.color} ${g.ring} flex items-center justify-center bg-white z-10 shadow-lg`,children:s.jsx("div",{className:`w-full h-full rounded-full ${g.bg} flex items-center justify-center`,children:s.jsx(g.icon,{className:`w-8 h-8 ${g.color.replace("border","text")}`})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"text-lg font-bold text-slate-900",children:["Level ",n==null?void 0:n.level]}),s.jsx("span",{className:"px-2 py-0.5 bg-slate-100 rounded-full text-xs font-bold text-slate-600",children:f.name})]}),s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex justify-between text-xs mb-1 text-slate-400 font-medium",children:[s.jsxs("span",{children:[n==null?void 0:n.xp_total," XP"]}),s.jsxs("span",{children:[f.maxXp," XP"]})]}),s.jsx("div",{className:"h-2 bg-slate-100 rounded-full overflow-hidden border border-slate-100",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-amber-500 rounded-full transition-all duration-500",style:{width:`${j}%`}})})]})]})]})}),s.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-slate-100 flex items-center justify-between bg-slate-50/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"w-4 h-4 text-slate-500"}),s.jsx("span",{className:"font-bold text-sm text-slate-700",children:""})]}),s.jsxs("span",{className:"text-xs font-bold bg-white px-2 py-0.5 rounded border border-slate-200 text-slate-500",children:[w,"/",l.length]})]}),s.jsx("div",{className:"divide-y divide-slate-50",children:l.map(_=>s.jsxs("div",{className:`p-3 flex items-center gap-3 ${_.completed?"bg-slate-50/50 opacity-60":"hover:bg-slate-50"}`,children:[s.jsx("div",{className:`shrink-0 w-6 h-6 rounded-full flex items-center justify-center ${_.completed?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"}`,children:_.completed?s.jsx(At,{className:"w-3.5 h-3.5"}):s.jsx(Ar,{className:"w-3.5 h-3.5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:`text-xs font-bold truncate ${_.completed?"text-slate-500 line-through":"text-slate-700"}`,children:_.title}),s.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[s.jsx("div",{className:"flex-1 h-1 bg-slate-100 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full ${_.completed?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${Math.min(_.progress/_.target*100,100)}%`}})}),s.jsxs("span",{className:"text-[10px] text-slate-400 font-medium",children:[_.progress,"/",_.target]})]})]})]},_.id))})]})]})},be=({children:e,variant:t="primary",size:r="md",className:n="",...a})=>{const l="inline-flex items-center justify-center font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg active:scale-[0.98]",c={primary:"bg-brand-600 text-white hover:bg-brand-700 shadow-sm border border-transparent focus:ring-brand-500",secondary:"bg-white text-slate-700 border border-slate-200 hover:bg-slate-50 hover:text-slate-900 hover:border-slate-300 dark:bg-slate-900 dark:border-slate-700 dark:text-slate-300 dark:hover:bg-slate-800 focus:ring-slate-200",ghost:"text-slate-500 hover:bg-slate-100 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-200 border border-transparent",danger:"bg-rose-600 text-white hover:bg-rose-700 shadow-sm border border-transparent focus:ring-rose-500"},d={sm:"px-3 py-1.5 text-xs h-8",md:"px-4 py-2 text-sm h-10",lg:"px-6 py-3 text-base h-12",icon:"p-2 h-9 w-9"};return s.jsx("button",{className:`${l} ${c[t]} ${d[r]} ${n}`,...a,children:e})};var wf={exports:{}},X2;function FU(){if(X2)return wf.exports;X2=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(S,T,D){return Function.prototype.apply.call(S,T,D)},r;e&&typeof e.ownKeys=="function"?r=e.ownKeys:Object.getOwnPropertySymbols?r=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:r=function(S){return Object.getOwnPropertyNames(S)};function n(A){console&&console.warn&&console.warn(A)}var a=Number.isNaN||function(S){return S!==S};function l(){l.init.call(this)}wf.exports=l,wf.exports.once=N,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var c=10;function d(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(A){if(typeof A!="number"||A<0||a(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");c=A}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||a(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function h(A){return A._maxListeners===void 0?l.defaultMaxListeners:A._maxListeners}l.prototype.getMaxListeners=function(){return h(this)},l.prototype.emit=function(S){for(var T=[],D=1;D<arguments.length;D++)T.push(arguments[D]);var P=S==="error",I=this._events;if(I!==void 0)P=P&&I.error===void 0;else if(!P)return!1;if(P){var $;if(T.length>0&&($=T[0]),$ instanceof Error)throw $;var M=new Error("Unhandled error."+($?" ("+$.message+")":""));throw M.context=$,M}var R=I[S];if(R===void 0)return!1;if(typeof R=="function")t(R,this,T);else for(var q=R.length,H=j(R,q),D=0;D<q;++D)t(H[D],this,T);return!0};function f(A,S,T,D){var P,I,$;if(d(T),I=A._events,I===void 0?(I=A._events=Object.create(null),A._eventsCount=0):(I.newListener!==void 0&&(A.emit("newListener",S,T.listener?T.listener:T),I=A._events),$=I[S]),$===void 0)$=I[S]=T,++A._eventsCount;else if(typeof $=="function"?$=I[S]=D?[T,$]:[$,T]:D?$.unshift(T):$.push(T),P=h(A),P>0&&$.length>P&&!$.warned){$.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+$.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=A,M.type=S,M.count=$.length,n(M)}return A}l.prototype.addListener=function(S,T){return f(this,S,T,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(S,T){return f(this,S,T,!0)};function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(A,S,T){var D={fired:!1,wrapFn:void 0,target:A,type:S,listener:T},P=m.bind(D);return P.listener=T,D.wrapFn=P,P}l.prototype.once=function(S,T){return d(T),this.on(S,g(this,S,T)),this},l.prototype.prependOnceListener=function(S,T){return d(T),this.prependListener(S,g(this,S,T)),this},l.prototype.removeListener=function(S,T){var D,P,I,$,M;if(d(T),P=this._events,P===void 0)return this;if(D=P[S],D===void 0)return this;if(D===T||D.listener===T)--this._eventsCount===0?this._events=Object.create(null):(delete P[S],P.removeListener&&this.emit("removeListener",S,D.listener||T));else if(typeof D!="function"){for(I=-1,$=D.length-1;$>=0;$--)if(D[$]===T||D[$].listener===T){M=D[$].listener,I=$;break}if(I<0)return this;I===0?D.shift():w(D,I),D.length===1&&(P[S]=D[0]),P.removeListener!==void 0&&this.emit("removeListener",S,M||T)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(S){var T,D,P;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[S]),this;if(arguments.length===0){var I=Object.keys(D),$;for(P=0;P<I.length;++P)$=I[P],$!=="removeListener"&&this.removeAllListeners($);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(T=D[S],typeof T=="function")this.removeListener(S,T);else if(T!==void 0)for(P=T.length-1;P>=0;P--)this.removeListener(S,T[P]);return this};function x(A,S,T){var D=A._events;if(D===void 0)return[];var P=D[S];return P===void 0?[]:typeof P=="function"?T?[P.listener||P]:[P]:T?_(P):j(P,P.length)}l.prototype.listeners=function(S){return x(this,S,!0)},l.prototype.rawListeners=function(S){return x(this,S,!1)},l.listenerCount=function(A,S){return typeof A.listenerCount=="function"?A.listenerCount(S):b.call(A,S)},l.prototype.listenerCount=b;function b(A){var S=this._events;if(S!==void 0){var T=S[A];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function j(A,S){for(var T=new Array(S),D=0;D<S;++D)T[D]=A[D];return T}function w(A,S){for(;S+1<A.length;S++)A[S]=A[S+1];A.pop()}function _(A){for(var S=new Array(A.length),T=0;T<S.length;++T)S[T]=A[T].listener||A[T];return S}function N(A,S){return new Promise(function(T,D){function P($){A.removeListener(S,I),D($)}function I(){typeof A.removeListener=="function"&&A.removeListener("error",P),T([].slice.call(arguments))}E(A,S,I,{once:!0}),S!=="error"&&C(A,P,{once:!0})})}function C(A,S,T){typeof A.on=="function"&&E(A,"error",S,T)}function E(A,S,T,D){if(typeof A.on=="function")D.once?A.once(S,T):A.on(S,T);else if(typeof A.addEventListener=="function")A.addEventListener(S,function P(I){D.once&&A.removeEventListener(S,P),T(I)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return wf.exports}var Ls=FU();class Uv extends Ls.EventEmitter{constructor(t){super(),Object.defineProperties(this,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get(){let r=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){const n=Math.random(),a=Math.floor(n*this._jitter*r);r=(Math.floor(n*10)&1)===0?r-a:r+a}return Math.min(r,this._max)|0}},_factor:{value:t.factor||2},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_max:{value:t.max||1e4},_min:{value:t.min||100},_timeoutID:{value:null,writable:!0}})}backoff(){const t=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,t),this._timeoutID=setTimeout(()=>{this.emit("ready",this._attempts,t),this._attempts++},t)}reset(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}var Yf={exports:{}},HU=Yf.exports,J2;function VU(){return J2||(J2=1,(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(HU,function(){var t=function(){},r="undefined",n=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],l={},c=null;function d(w,_){var N=w[_];if(typeof N.bind=="function")return N.bind(w);try{return Function.prototype.bind.call(N,w)}catch{return function(){return Function.prototype.apply.apply(N,[w,arguments])}}}function h(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function f(w){return w==="debug"&&(w="log"),typeof console===r?!1:w==="trace"&&n?h:console[w]!==void 0?d(console,w):console.log!==void 0?d(console,"log"):t}function m(){for(var w=this.getLevel(),_=0;_<a.length;_++){var N=a[_];this[N]=_<w?t:this.methodFactory(N,w,this.name)}if(this.log=this.debug,typeof console===r&&w<this.levels.SILENT)return"No console available for logging"}function g(w){return function(){typeof console!==r&&(m.call(this),this[w].apply(this,arguments))}}function x(w,_,N){return f(w)||g.apply(this,arguments)}function b(w,_){var N=this,C,E,A,S="loglevel";typeof w=="string"?S+=":"+w:typeof w=="symbol"&&(S=void 0);function T(M){var R=(a[M]||"silent").toUpperCase();if(!(typeof window===r||!S)){try{window.localStorage[S]=R;return}catch{}try{window.document.cookie=encodeURIComponent(S)+"="+R+";"}catch{}}}function D(){var M;if(!(typeof window===r||!S)){try{M=window.localStorage[S]}catch{}if(typeof M===r)try{var R=window.document.cookie,q=encodeURIComponent(S),H=R.indexOf(q+"=");H!==-1&&(M=/^([^;]+)/.exec(R.slice(H+q.length+1))[1])}catch{}return N.levels[M]===void 0&&(M=void 0),M}}function P(){if(!(typeof window===r||!S)){try{window.localStorage.removeItem(S)}catch{}try{window.document.cookie=encodeURIComponent(S)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function I(M){var R=M;if(typeof R=="string"&&N.levels[R.toUpperCase()]!==void 0&&(R=N.levels[R.toUpperCase()]),typeof R=="number"&&R>=0&&R<=N.levels.SILENT)return R;throw new TypeError("log.setLevel() called with invalid level: "+M)}N.name=w,N.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},N.methodFactory=_||x,N.getLevel=function(){return A??E??C},N.setLevel=function(M,R){return A=I(M),R!==!1&&T(A),m.call(N)},N.setDefaultLevel=function(M){E=I(M),D()||N.setLevel(M,!1)},N.resetLevel=function(){A=null,P(),m.call(N)},N.enableAll=function(M){N.setLevel(N.levels.TRACE,M)},N.disableAll=function(M){N.setLevel(N.levels.SILENT,M)},N.rebuild=function(){if(c!==N&&(C=I(c.getLevel())),m.call(N),c===N)for(var M in l)l[M].rebuild()},C=I(c?c.getLevel():"WARN");var $=D();$!=null&&(A=I($)),m.call(N)}c=new b,c.getLogger=function(_){if(typeof _!="symbol"&&typeof _!="string"||_==="")throw new TypeError("You must supply a name when creating a logger.");var N=l[_];return N||(N=l[_]=new b(_,c.methodFactory)),N};var j=typeof window!==r?window.log:void 0;return c.noConflict=function(){return typeof window!==r&&window.log===c&&(window.log=j),c},c.getLoggers=function(){return l},c.default=c,c})})(Yf)),Yf.exports}var lu=VU();const WU=ys(lu),GU=nw({__proto__:null,default:WU},[lu]);class dt extends Error{constructor(t,r){super(),Object.setPrototypeOf(this,dt.prototype);const n=typeof t=="string"?t:this.explanation,a=typeof t=="object"?t:r;this.message=`${this.name} (${this.code}): ${n}`,this.originalError=a}}var Hr;(function(e){class t extends dt{constructor(l,c){super(l,c),this.causes=[],this.code=20101,this.description="Invalid access token",this.explanation="Twilio was unable to validate your Access Token",this.name="AccessTokenInvalid",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenInvalid.prototype);const d=typeof l=="string"?l:this.explanation,h=typeof l=="object"?l:c;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=h}}e.AccessTokenInvalid=t;class r extends dt{constructor(l,c){super(l,c),this.causes=[],this.code=20104,this.description="Access token expired or expiration date invalid",this.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",this.name="AccessTokenExpired",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenExpired.prototype);const d=typeof l=="string"?l:this.explanation,h=typeof l=="object"?l:c;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=h}}e.AccessTokenExpired=r;class n extends dt{constructor(l,c){super(l,c),this.causes=[],this.code=20151,this.description="Authentication Failed",this.explanation="The Authentication with the provided JWT failed",this.name="AuthenticationFailed",this.solutions=[],Object.setPrototypeOf(this,e.AuthenticationFailed.prototype);const d=typeof l=="string"?l:this.explanation,h=typeof l=="object"?l:c;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=h}}e.AuthenticationFailed=n})(Hr||(Hr={}));var Bv;(function(e){class t extends dt{constructor(n,a){super(n,a),this.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],this.code=31202,this.description="Signature validation failed.",this.explanation="The provided access token failed signature validation.",this.name="AccessTokenSignatureValidationFailed",this.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(this,e.AccessTokenSignatureValidationFailed.prototype);const l=typeof n=="string"?n:this.explanation,c=typeof n=="object"?n:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.AccessTokenSignatureValidationFailed=t})(Bv||(Bv={}));var zl;(function(e){class t extends dt{constructor(c,d){super(c,d),this.causes=[],this.code=31400,this.description="Bad Request (HTTP/SIP)",this.explanation="The request could not be understood due to malformed syntax.",this.name="BadRequest",this.solutions=[],Object.setPrototypeOf(this,e.BadRequest.prototype);const h=typeof c=="string"?c:this.explanation,f=typeof c=="object"?c:d;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=f}}e.BadRequest=t;class r extends dt{constructor(c,d){super(c,d),this.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],this.code=31404,this.description="Not Found (HTTP/SIP)",this.explanation="The server has not found anything matching the request.",this.name="NotFound",this.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(this,e.NotFound.prototype);const h=typeof c=="string"?c:this.explanation,f=typeof c=="object"?c:d;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=f}}e.NotFound=r;class n extends dt{constructor(c,d){super(c,d),this.causes=[],this.code=31480,this.description="Temporarily Unavailable (SIP)",this.explanation="The callee is currently unavailable.",this.name="TemporarilyUnavailable",this.solutions=[],Object.setPrototypeOf(this,e.TemporarilyUnavailable.prototype);const h=typeof c=="string"?c:this.explanation,f=typeof c=="object"?c:d;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=f}}e.TemporarilyUnavailable=n;class a extends dt{constructor(c,d){super(c,d),this.causes=[],this.code=31486,this.description="Busy Here (SIP)",this.explanation="The callee is busy.",this.name="BusyHere",this.solutions=[],Object.setPrototypeOf(this,e.BusyHere.prototype);const h=typeof c=="string"?c:this.explanation,f=typeof c=="object"?c:d;this.message=`${this.name} (${this.code}): ${h}`,this.originalError=f}}e.BusyHere=a})(zl||(zl={}));var qv;(function(e){class t extends dt{constructor(n,a){super(n,a),this.causes=[],this.code=31603,this.description="Decline (SIP)",this.explanation="The callee does not wish to participate in the call.",this.name="Decline",this.solutions=[],Object.setPrototypeOf(this,e.Decline.prototype);const l=typeof n=="string"?n:this.explanation,c=typeof n=="object"?n:a;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.Decline=t})(qv||(qv={}));var Sn;(function(e){class t extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31e3,this.description="Unknown Error",this.explanation="An unknown error has occurred. See error details for more information.",this.name="UnknownError",this.solutions=[],Object.setPrototypeOf(this,e.UnknownError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.UnknownError=t;class r extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31001,this.description="Application Not Found",this.explanation="",this.name="ApplicationNotFoundError",this.solutions=[],Object.setPrototypeOf(this,e.ApplicationNotFoundError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.ApplicationNotFoundError=r;class n extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31002,this.description="Connection Declined",this.explanation="",this.name="ConnectionDeclinedError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionDeclinedError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.ConnectionDeclinedError=n;class a extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31003,this.description="Connection Timeout",this.explanation="The server could not produce a response within a suitable amount of time.",this.name="ConnectionTimeoutError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionTimeoutError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.ConnectionTimeoutError=a;class l extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31005,this.description="Connection error",this.explanation="A connection error occurred during the call",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.ConnectionError=l;class c extends dt{constructor(f,m){super(f,m),this.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],this.code=31008,this.description="Call cancelled",this.explanation="Unable to answer because the call has ended",this.name="CallCancelledError",this.solutions=[],Object.setPrototypeOf(this,e.CallCancelledError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.CallCancelledError=c;class d extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31009,this.description="Transport error",this.explanation="No transport available to send or receive messages",this.name="TransportError",this.solutions=[],Object.setPrototypeOf(this,e.TransportError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.TransportError=d})(Sn||(Sn={}));var Wa;(function(e){class t extends dt{constructor(f,m){super(f,m),this.causes=["Invalid content or MessageType passed to sendMessage method."],this.code=31100,this.description="The request had malformed syntax.",this.explanation="The request could not be understood due to malformed syntax.",this.name="MalformedRequestError",this.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(this,e.MalformedRequestError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.MalformedRequestError=t;class r extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31101,this.description="Missing parameter array in request",this.explanation="",this.name="MissingParameterArrayError",this.solutions=[],Object.setPrototypeOf(this,e.MissingParameterArrayError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.MissingParameterArrayError=r;class n extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31102,this.description="Authorization token missing in request.",this.explanation="",this.name="AuthorizationTokenMissingError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationTokenMissingError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.AuthorizationTokenMissingError=n;class a extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31103,this.description="Maximum parameter length has been exceeded.",this.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",this.name="MaxParameterLengthExceededError",this.solutions=[],Object.setPrototypeOf(this,e.MaxParameterLengthExceededError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.MaxParameterLengthExceededError=a;class l extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31104,this.description="Invalid bridge token",this.explanation="",this.name="InvalidBridgeTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidBridgeTokenError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.InvalidBridgeTokenError=l;class c extends dt{constructor(f,m){super(f,m),this.causes=["Client name contains invalid characters."],this.code=31105,this.description="Invalid client name",this.explanation="Client name should not contain control, space, delims, or unwise characters.",this.name="InvalidClientNameError",this.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(this,e.InvalidClientNameError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.InvalidClientNameError=c;class d extends dt{constructor(f,m){super(f,m),this.causes=[],this.code=31107,this.description="The reconnect parameter is invalid",this.explanation="",this.name="ReconnectParameterInvalidError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectParameterInvalidError.prototype);const g=typeof f=="string"?f:this.explanation,x=typeof f=="object"?f:m;this.message=`${this.name} (${this.code}): ${g}`,this.originalError=x}}e.ReconnectParameterInvalidError=d})(Wa||(Wa={}));(function(e){class t extends dt{constructor(g,x){super(g,x),this.causes=[],this.code=31201,this.description="Authorization error",this.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",this.name="AuthorizationError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.AuthorizationError=t;class r extends dt{constructor(g,x){super(g,x),this.causes=[],this.code=31203,this.description="No valid account",this.explanation="",this.name="NoValidAccountError",this.solutions=[],Object.setPrototypeOf(this,e.NoValidAccountError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.NoValidAccountError=r;class n extends dt{constructor(g,x){super(g,x),this.causes=[],this.code=31204,this.description="Invalid JWT token",this.explanation="",this.name="InvalidJWTTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidJWTTokenError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.InvalidJWTTokenError=n;class a extends dt{constructor(g,x){super(g,x),this.causes=[],this.code=31205,this.description="JWT token expired",this.explanation="",this.name="JWTTokenExpiredError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpiredError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.JWTTokenExpiredError=a;class l extends dt{constructor(g,x){super(g,x),this.causes=["Rate limit exceeded."],this.code=31206,this.description="Rate exceeded authorized limit.",this.explanation="The request performed exceeds the authorized limit.",this.name="RateExceededError",this.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(this,e.RateExceededError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.RateExceededError=l;class c extends dt{constructor(g,x){super(g,x),this.causes=[],this.code=31207,this.description="JWT token expiration too long",this.explanation="",this.name="JWTTokenExpirationTooLongError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpirationTooLongError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.JWTTokenExpirationTooLongError=c;class d extends dt{constructor(g,x){super(g,x),this.causes=[],this.code=31209,this.description="Reconnect attempt is not authorized.",this.explanation="",this.name="ReconnectAttemptError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectAttemptError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.ReconnectAttemptError=d;class h extends dt{constructor(g,x){super(g,x),this.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],this.code=31210,this.description="Call Message Event Type is invalid.",this.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",this.name="CallMessageEventTypeInvalidError",this.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(this,e.CallMessageEventTypeInvalidError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.CallMessageEventTypeInvalidError=h;class f extends dt{constructor(g,x){super(g,x),this.causes=["The payload size of Call Message Event exceeds the authorized limit."],this.code=31212,this.description="Call Message Event Payload size exceeded authorized limit.",this.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",this.name="PayloadSizeExceededError",this.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(this,e.PayloadSizeExceededError.prototype);const b=typeof g=="string"?g:this.explanation,j=typeof g=="object"?g:x;this.message=`${this.name} (${this.code}): ${b}`,this.originalError=j}}e.PayloadSizeExceededError=f})(Hr||(Hr={}));var bc;(function(e){class t extends dt{constructor(a,l){super(a,l),this.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],this.code=31401,this.description="UserMedia Permission Denied Error",this.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",this.name="PermissionDeniedError",this.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(this,e.PermissionDeniedError.prototype);const c=typeof a=="string"?a:this.explanation,d=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.PermissionDeniedError=t;class r extends dt{constructor(a,l){super(a,l),this.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],this.code=31402,this.description="UserMedia Acquisition Failed Error",this.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",this.name="AcquisitionFailedError",this.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(this,e.AcquisitionFailedError.prototype);const c=typeof a=="string"?a:this.explanation,d=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.AcquisitionFailedError=r})(bc||(bc={}));var $s;(function(e){class t extends dt{constructor(a,l){super(a,l),this.causes=[],this.code=53e3,this.description="Signaling connection error",this.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const c=typeof a=="string"?a:this.explanation,d=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.ConnectionError=t;class r extends dt{constructor(a,l){super(a,l),this.causes=["The device running your application lost its Internet connection."],this.code=53001,this.description="Signaling connection disconnected",this.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",this.name="ConnectionDisconnected",this.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(this,e.ConnectionDisconnected.prototype);const c=typeof a=="string"?a:this.explanation,d=typeof a=="object"?a:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.ConnectionDisconnected=r})($s||($s={}));var xa;(function(e){class t extends dt{constructor(l,c){super(l,c),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],this.code=53400,this.description="Client is unable to create or apply a local media description",this.explanation="Raised whenever a Client is unable to create or apply a local media description.",this.name="ClientLocalDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientLocalDescFailed.prototype);const d=typeof l=="string"?l:this.explanation,h=typeof l=="object"?l:c;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=h}}e.ClientLocalDescFailed=t;class r extends dt{constructor(l,c){super(l,c),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],this.code=53402,this.description="Client is unable to apply a remote media description",this.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",this.name="ClientRemoteDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientRemoteDescFailed.prototype);const d=typeof l=="string"?l:this.explanation,h=typeof l=="object"?l:c;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=h}}e.ClientRemoteDescFailed=r;class n extends dt{constructor(l,c){super(l,c),this.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],this.code=53405,this.description="Media connection failed",this.explanation="Raised by the Client or Server whenever a media connection fails.",this.name="ConnectionError",this.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(this,e.ConnectionError.prototype);const d=typeof l=="string"?l:this.explanation,h=typeof l=="object"?l:c;this.message=`${this.name} (${this.code}): ${d}`,this.originalError=h}}e.ConnectionError=n})(xa||(xa={}));const Cw=new Map([[20101,Hr.AccessTokenInvalid],[20104,Hr.AccessTokenExpired],[20151,Hr.AuthenticationFailed],[31202,Bv.AccessTokenSignatureValidationFailed],[31400,zl.BadRequest],[31404,zl.NotFound],[31480,zl.TemporarilyUnavailable],[31486,zl.BusyHere],[31603,qv.Decline],[31e3,Sn.UnknownError],[31001,Sn.ApplicationNotFoundError],[31002,Sn.ConnectionDeclinedError],[31003,Sn.ConnectionTimeoutError],[31005,Sn.ConnectionError],[31008,Sn.CallCancelledError],[31009,Sn.TransportError],[31100,Wa.MalformedRequestError],[31101,Wa.MissingParameterArrayError],[31102,Wa.AuthorizationTokenMissingError],[31103,Wa.MaxParameterLengthExceededError],[31104,Wa.InvalidBridgeTokenError],[31105,Wa.InvalidClientNameError],[31107,Wa.ReconnectParameterInvalidError],[31201,Hr.AuthorizationError],[31203,Hr.NoValidAccountError],[31204,Hr.InvalidJWTTokenError],[31205,Hr.JWTTokenExpiredError],[31206,Hr.RateExceededError],[31207,Hr.JWTTokenExpirationTooLongError],[31209,Hr.ReconnectAttemptError],[31210,Hr.CallMessageEventTypeInvalidError],[31212,Hr.PayloadSizeExceededError],[31401,bc.PermissionDeniedError],[31402,bc.AcquisitionFailedError],[53e3,$s.ConnectionError],[53001,$s.ConnectionDisconnected],[53400,xa.ClientLocalDescFailed],[53402,xa.ClientRemoteDescFailed],[53405,xa.ConnectionError]]);Object.freeze(Cw);const KU=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function Fv(e,t){if(!(typeof t!="number"||!XU(t)||!(e||!KU.has(t))))return YU(t)}class zt extends Error{constructor(t){super(t),this.name="InvalidArgumentError"}}class Ks extends Error{constructor(t){super(t),this.name="InvalidStateError"}}class nn extends Error{constructor(t){super(t),this.name="NotSupportedError"}}function YU(e){const t=Cw.get(e);if(!t)throw new zt(`Error code ${e} not found`);return t}function XU(e){return Cw.has(e)}const qA="@twilio/voice-sdk",dc="2.17.0",Ew="https://sdk.twilio.com/js/client/sounds/releases/1.0.0",JU=`${Ew}/cowbell.mp3?cache=${dc}`,QU=2e4;class Wr{static getLogLevelInstance(t){if(!Wr.loglevelInstance)try{Wr.loglevelInstance=(t&&t.LogLevelModule?t.LogLevelModule:GU).getLogger(qA)}catch{console.warn("Cannot create custom logger"),Wr.loglevelInstance=console}return Wr.loglevelInstance}constructor(t,r){this._log=Wr.getLogLevelInstance(r),this._prefix=`[TwilioVoice][${t}]`}debug(...t){this._log.debug(this._prefix,...t)}error(...t){this._log.error(this._prefix,...t)}info(...t){this._log.info(this._prefix,...t)}setDefaultLevel(t){this._log.setDefaultLevel?this._log.setDefaultLevel(t):console.warn("Logger cannot setDefaultLevel")}warn(...t){this._log.warn(this._prefix,...t)}}Wr.levels=lu.levels;Wr.getLogLevelInstance();const ZU=`${Ew}/outgoing.mp3`;class Q2{constructor(t,r,n,a){this._name=t,this._availableDevices=r,this._beforeChange=n,this._isSupported=a,this._activeDevices=new Set,this._log=new Wr("OutputDeviceCollection")}delete(t){this._log.debug(".delete",t);const r=!!this._activeDevices.delete(t),n=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&n&&this._activeDevices.add(n);const a=Array.from(this._activeDevices.values()).map(l=>l.deviceId);return this._beforeChange(this._name,a),!!r}get(){return this._activeDevices}set(t){if(this._log.debug(".set",t),!this._isSupported)return Promise.reject(new nn("This browser does not support audio output selection"));const r=Array.isArray(t)?t:[t];if(!r.length)return Promise.reject(new zt("Must specify at least one device to set"));const n=[],a=r.map(l=>{const c=this._availableDevices.get(l);return c||n.push(l),c});return n.length?Promise.reject(new zt(`Devices not found: ${n.join(", ")}`)):new Promise(l=>{l(this._beforeChange(this._name,r))}).then(()=>{this._activeDevices.clear(),a.forEach(this._activeDevices.add,this._activeDevices)})}test(t=ZU){return this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(r=>{let n;return new Promise(a=>{n=new Audio(t),n.oncanplay=a}).then(()=>n.setSinkId(r.deviceId).then(()=>n.play()))})):Promise.reject(new Ks("No active output devices to test")):Promise.reject(new nn("This browser does not support audio output selection"))}}class eB{constructor(t){Object.defineProperties(this,{deviceId:{get(){return t.deviceId}},groupId:{get(){return t.groupId}},kind:{get(){return t.kind}},label:{get(){return t.label}}})}}function w0(e){if(!(this instanceof w0))return new w0(e);this.message=e}w0.prototype.toString=function(){return`Twilio.Exception: ${this.message}`};function eu(e){return e&&e.length?e.reduce((t,r)=>t+r)/e.length:0}function Aw(e,t,r){r=r||(a=>a);const n=new Set(t.map(r));return e.filter(a=>!n.has(r(a)))}function FA(e){return!!e.userAgent.match("Electron")}function Tw(e,t){const r=!!t.userAgent.match("CriOS"),n=!!t.userAgent.match("HeadlessChrome"),a=typeof e.chrome<"u"&&t.vendor==="Google Inc."&&t.userAgent.indexOf("OPR")===-1&&t.userAgent.indexOf("Edge")===-1;return r||FA(t)||a||n}function tB(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/firefox|fxios/i.test(e.userAgent)}function jm(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/edge\/\d+/i.test(e.userAgent)}function rB(e){return!!e.vendor&&e.vendor.indexOf("Apple")!==-1&&e.userAgent&&e.userAgent.indexOf("CriOS")===-1&&e.userAgent.indexOf("FxiOS")===-1}function HA(e){return e?e.split("&").reduce((t,r)=>{const n=r.split("="),a=n[0],l=decodeURIComponent((n[1]||"").replace(/\+/g,"%20"));return a&&(t[a]=l),t},{}):""}function Hv(e,t){const r=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||(n=>n),r.reduce((n,a)=>{const l=t(a);return n.concat(l)},[])}function Vv(e,t,r){return new Promise((n,a)=>{function l(){e.removeListener(r,c),n()}function c(){e.removeListener(t,l),a()}e.once(t,l),e.once(r,c)})}function VA(e,t){const r=t.map(n=>"audio/"+n.toLowerCase());return e.sort((n,a)=>{const l=r.indexOf(n.mimeType.toLowerCase()),c=r.indexOf(a.mimeType.toLowerCase()),d=l>=0?l:Number.MAX_VALUE,h=c>=0?c:Number.MAX_VALUE;return d-h})}const nB=w0,WA=Object.freeze(Object.defineProperty({__proto__:null,Exception:nB,average:eu,difference:Aw,flatMap:Hv,isChrome:Tw,isElectron:FA,isFirefox:tB,isLegacyEdge:jm,isSafari:rB,promisifyEvents:Vv,queryToJson:HA,sortByMimeTypes:VA},Symbol.toStringTag,{value:"Module"})),sB={audioinput:"Audio Input",audiooutput:"Audio Output"};class Wv extends Ls.EventEmitter{get audioConstraints(){return this._audioConstraints}get inputDevice(){return this._inputDevice}get inputStream(){return this._localProcessedStream||this._selectedInputDeviceStream}get processedStream(){return this._log.warn("AudioHelper#processedStream is deprecated. Please use AudioHelper#localProcessedStream instead."),this._localProcessedStream}get localProcessedStream(){return this._localProcessedStream}get remoteProcessedStream(){return this._remoteProcessedStream}constructor(t,r,n){super(),this.availableInputDevices=new Map,this.availableOutputDevices=new Map,this._audioConstraints=null,this._defaultInputDeviceStream=null,this._enabledSounds={[Ie.SoundName.Disconnect]:!0,[Ie.SoundName.Incoming]:!0,[Ie.SoundName.Outgoing]:!0},this._inputDevice=null,this._inputDevicePromise=null,this._isPollingInputVolume=!1,this._log=new Wr("AudioHelper"),this._localProcessedStream=null,this._remoteProcessedStream=null,this._selectedInputDeviceStream=null,this._unknownDeviceIndexes={audioinput:{},audiooutput:{}},this._updateAvailableDevices=()=>!this._mediaDevices||!this._enumerateDevices?Promise.reject("Enumeration not supported"):this._enumerateDevices().then(d=>{this._updateDevices(d.filter(f=>f.kind==="audiooutput"),this.availableOutputDevices,this._removeLostOutput),this._updateDevices(d.filter(f=>f.kind==="audioinput"),this.availableInputDevices,this._removeLostInput);const h=this.availableOutputDevices.get("default")||Array.from(this.availableOutputDevices.values())[0];[this.speakerDevices,this.ringtoneDevices].forEach(f=>{!f.get().size&&this.availableOutputDevices.size&&this.isOutputSelectionSupported&&f.set(h.deviceId).catch(m=>{this._log.warn(`Unable to set audio output devices. ${m}`)})})}),this._removeLostInput=d=>{if(!this.inputDevice||this.inputDevice.deviceId!==d.deviceId)return!1;this._destroyLocalProcessedStream(),this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume();const h=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return h&&this.setInputDevice(h.deviceId),!0},this._removeLostOutput=d=>{const h=this.speakerDevices.delete(d),f=this.ringtoneDevices.delete(d);return h||f},n=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},n),this._beforeSetInputDevice=n.beforeSetInputDevice||(()=>Promise.resolve()),this._updateUserOptions(n),this._audioProcessorEventObserver=n.audioProcessorEventObserver,this._mediaDevices=n.mediaDevices||navigator.mediaDevices,this._onActiveInputChanged=r,this._enumerateDevices=typeof n.enumerateDevices=="function"?n.enumerateDevices:this._mediaDevices&&this._mediaDevices.enumerateDevices.bind(this._mediaDevices);const a=!!(n.AudioContext||n.audioContext),l=!!this._enumerateDevices;n.enabledSounds&&(this._enabledSounds=n.enabledSounds);const c=typeof n.setSinkId=="function";this.isOutputSelectionSupported=l&&c,this.isVolumeSupported=a,this.isVolumeSupported&&(this._audioContext=n.audioContext||n.AudioContext&&new n.AudioContext,this._audioContext&&(this._inputVolumeAnalyser=this._audioContext.createAnalyser(),this._inputVolumeAnalyser.fftSize=32,this._inputVolumeAnalyser.smoothingTimeConstant=.3)),this.ringtoneDevices=new Q2("ringtone",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.speakerDevices=new Q2("speaker",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.addListener("newListener",d=>{d==="inputVolume"&&this._maybeStartPollingVolume()}),this.addListener("removeListener",d=>{d==="inputVolume"&&this._maybeStopPollingVolume()}),this.once("newListener",()=>{this.isOutputSelectionSupported||this._log.warn("Warning: This browser does not support audio output selection."),this.isVolumeSupported||this._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),l&&this._initializeEnumeration(),navigator&&navigator.permissions&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"microphone"}).then(d=>{if(d.state!=="granted"){const h=()=>{this._updateAvailableDevices(),this._stopMicrophonePermissionListener()};d.addEventListener("change",h),this._microphonePermissionStatus=d,this._onMicrophonePermissionStatusChanged=h}}).catch(d=>this._log.warn(`Warning: unable to listen for microphone permission changes. ${d}`)):this._log.warn("Warning: current browser does not support permissions API.")}_destroy(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyLocalProcessedStream(),this._destroyRemoteProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()}_destroyRemoteProcessedStream(){if(this._remoteProcessor&&this._remoteProcessedStream){this._log.info("destroying remote processed stream");const t=this._remoteProcessedStream;this._remoteProcessedStream.getTracks().forEach(r=>r.stop()),this._remoteProcessedStream=null,this._remoteProcessor.destroyProcessedStream(t),this._audioProcessorEventObserver.emit("destroy",!0)}}_getInputDevicePromise(){return this._inputDevicePromise}_getAudioProcessorEventObserver(){return this._audioProcessorEventObserver}_maybeCreateRemoteProcessedStream(t){return this._remoteProcessor?(this._log.info("Creating remote processed stream"),this._remoteProcessor.createProcessedStream(t).then(r=>(this._remoteProcessedStream=r,this._audioProcessorEventObserver.emit("create",!0),this._remoteProcessedStream))):Promise.resolve(t)}_maybeStartPollingVolume(){if(!this.isVolumeSupported||!this.inputStream||(this._updateVolumeSource(),this._isPollingInputVolume||!this._inputVolumeAnalyser))return;const t=this._inputVolumeAnalyser.frequencyBinCount,r=new Uint8Array(t);this._isPollingInputVolume=!0;const n=()=>{if(this._isPollingInputVolume){if(this._inputVolumeAnalyser){this._inputVolumeAnalyser.getByteFrequencyData(r);const a=eu(r);this.emit("inputVolume",a/255)}requestAnimationFrame(n)}};requestAnimationFrame(n)}_maybeStopPollingVolume(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))}_openDefaultDeviceWithConstraints(t){return this._log.info("Opening default device with constraints",t),this._getUserMedia(t).then(r=>(this._log.info("Opened default device. Updating available devices."),this._updateAvailableDevices().catch(n=>{this._log.warn("Unable to updateAvailableDevices after gUM call",n)}),this._defaultInputDeviceStream=r,this._maybeCreateLocalProcessedStream(r)))}_stopDefaultInputDeviceStream(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(t=>t.stop()),this._defaultInputDeviceStream=null,this._destroyLocalProcessedStream())}_unbind(){var t;!((t=this._mediaDevices)===null||t===void 0)&&t.removeEventListener&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)}_updateUserOptions(t){typeof t.enumerateDevices=="function"&&(this._enumerateDevices=t.enumerateDevices),typeof t.getUserMedia=="function"&&(this._getUserMedia=t.getUserMedia)}addProcessor(t,r=!1){if(this._log.debug(".addProcessor"),this._localProcessor&&!r)throw new nn("Can only have one Local AudioProcessor at a time.");if(this._remoteProcessor&&r)throw new nn("Can only have one Remote AudioProcessor at a time.");if(typeof t!="object"||t===null)throw new zt("Missing AudioProcessor argument.");if(typeof t.createProcessedStream!="function")throw new zt("Missing createProcessedStream() method.");if(typeof t.destroyProcessedStream!="function")throw new zt("Missing destroyProcessedStream() method.");return r?(this._remoteProcessor=t,this._audioProcessorEventObserver.emit("add",!0),Promise.resolve()):(this._localProcessor=t,this._audioProcessorEventObserver.emit("add",!1),this._restartInputStreams())}disconnect(t){return this._log.debug(".disconnect",t),this._maybeEnableSound(Ie.SoundName.Disconnect,t)}incoming(t){return this._log.debug(".incoming",t),this._maybeEnableSound(Ie.SoundName.Incoming,t)}outgoing(t){return this._log.debug(".outgoing",t),this._maybeEnableSound(Ie.SoundName.Outgoing,t)}removeProcessor(t,r=!1){if(this._log.debug(".removeProcessor"),typeof t!="object"||t===null)throw new zt("Missing AudioProcessor argument.");if(this._localProcessor!==t&&!r)throw new zt("Cannot remove a Local AudioProcessor that has not been previously added.");if(this._remoteProcessor!==t&&r)throw new zt("Cannot remove a Remote AudioProcessor that has not been previously added.");return r?(this._destroyRemoteProcessedStream(),this._remoteProcessor=null,this._audioProcessorEventObserver.emit("remove",!0),Promise.resolve()):(this._destroyLocalProcessedStream(),this._localProcessor=null,this._audioProcessorEventObserver.emit("remove",!1),this._restartInputStreams())}setAudioConstraints(t){return this._log.debug(".setAudioConstraints",t),this._audioConstraints=Object.assign({},t),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}setInputDevice(t){return this._log.debug(".setInputDevice",t),this._setInputDevice(t,!1)}unsetAudioConstraints(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}unsetInputDevice(){return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyLocalProcessedStream(),this._onActiveInputChanged(null).then(()=>{this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume()})):Promise.resolve()}_destroyLocalProcessedStream(){if(this._localProcessor&&this._localProcessedStream){this._log.info("destroying local processed stream");const t=this._localProcessedStream;this._localProcessedStream.getTracks().forEach(r=>r.stop()),this._localProcessedStream=null,this._localProcessor.destroyProcessedStream(t),this._audioProcessorEventObserver.emit("destroy",!1)}}_getUnknownDeviceIndex(t){const r=t.deviceId,n=t.kind;let a=this._unknownDeviceIndexes[n][r];return a||(a=Object.keys(this._unknownDeviceIndexes[n]).length+1,this._unknownDeviceIndexes[n][r]=a),a}_initializeEnumeration(){if(!this._mediaDevices||!this._enumerateDevices)throw new nn("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(()=>{this.isOutputSelectionSupported&&Promise.all([this.speakerDevices.set("default"),this.ringtoneDevices.set("default")]).catch(t=>{this._log.warn(`Warning: Unable to set audio output devices. ${t}`)})})}_maybeCreateLocalProcessedStream(t){return this._localProcessor?(this._log.info("Creating local processed stream"),this._localProcessor.createProcessedStream(t).then(r=>(this._localProcessedStream=r,this._audioProcessorEventObserver.emit("create",!1),this._localProcessedStream))):Promise.resolve(t)}_maybeEnableSound(t,r){return typeof r<"u"&&(this._enabledSounds[t]=r),this._enabledSounds[t]}_replaceStream(t){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=t}_restartInputStreams(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){const t=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(t.deviceId,!0)}return Promise.resolve()}_setInputDevice(t,r){return ke(this,void 0,void 0,function*(){const n=()=>ke(this,void 0,void 0,function*(){if(yield this._beforeSetInputDevice(),typeof t!="string")return Promise.reject(new zt("Must specify the device to set"));const a=this.availableInputDevices.get(t);if(!a)return Promise.reject(new zt(`Device not found: ${t}`));if(this._log.info("Setting input device. ID: "+t),this._inputDevice&&this._inputDevice.deviceId===t&&this._selectedInputDeviceStream){if(!r)return Promise.resolve();this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}this._stopDefaultInputDeviceStream();const l={audio:Object.assign({deviceId:{exact:t}},this.audioConstraints)};return this._log.info("setInputDevice: getting new tracks."),this._getUserMedia(l).then(c=>(this._destroyLocalProcessedStream(),this._maybeCreateLocalProcessedStream(c).then(d=>(this._log.info("setInputDevice: invoking _onActiveInputChanged."),this._onActiveInputChanged(d).then(()=>{this._replaceStream(c),this._inputDevice=a,this._maybeStartPollingVolume()})))))});return this._inputDevicePromise=n().finally(()=>{this._inputDevicePromise=null})})}_stopMicrophonePermissionListener(){var t;!((t=this._microphonePermissionStatus)===null||t===void 0)&&t.removeEventListener&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)}_stopSelectedInputDeviceStream(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(t=>t.stop()))}_updateDevices(t,r,n){const a=t.map(f=>f.deviceId),l=Array.from(r.values()).map(f=>f.deviceId),c=[],d=Aw(l,a);d.forEach(f=>{const m=r.get(f);m&&(r.delete(f),n(m)&&c.push(m))});let h=!1;if(t.forEach(f=>{const m=r.get(f.deviceId),g=this._wrapMediaDeviceInfo(f);(!m||m.label!==g.label)&&(r.set(f.deviceId,g),h=!0)}),h||d.length){const f="default",m=this.inputDevice&&this.inputDevice.deviceId===f,g=this._defaultInputDeviceStream&&this.availableInputDevices.get(f);(m||g)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(()=>{this._setInputDevice(f,!0)},0)),this._log.debug("#deviceChange",c),this.emit("deviceChange",c)}}_updateVolumeSource(){if(!(!this.inputStream||!this._audioContext||!this._inputVolumeAnalyser)){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(t){this._log.warn("Unable to update volume source",t),delete this._inputVolumeSource}}}_wrapMediaDeviceInfo(t){const r={deviceId:t.deviceId,groupId:t.groupId,kind:t.kind,label:t.label};if(!r.label)if(r.deviceId==="default")r.label="Default";else{const n=this._getUnknownDeviceIndex(t);r.label=`Unknown ${sB[r.kind]} Device ${n}`}return new eB(r)}}Wv||(Wv={});var aB=Wv;class iB extends Ls.EventEmitter{constructor(){super(),this._log=new Wr("AudioProcessorEventObserver"),this._log.info("Creating AudioProcessorEventObserver instance"),this.on("enabled",t=>this._reEmitEvent("enabled",t)),this.on("add",t=>this._reEmitEvent("add",t)),this.on("remove",t=>this._reEmitEvent("remove",t)),this.on("create",t=>this._reEmitEvent("create-processed-stream",t)),this.on("destroy",t=>this._reEmitEvent("destroy-processed-stream",t))}destroy(){this.removeAllListeners()}_reEmitEvent(t,r){this._log.info(`${r?"Remote":"Local"} AudioProcessor:${t}`),this.emit("event",{name:t,group:"audio-processor",isRemote:r})}}const lB={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]};class oB{constructor(t){this._context=t,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(r=>{r.connect(this._context.destination),r.gain.value=.1,this._gainNodes.push(r)})}cleanup(){this._gainNodes.forEach(t=>{t.disconnect()})}play(t){const r=lB[t];if(!r)throw new zt("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach((a,l)=>{a.type="sine",a.frequency.value=r[l],a.connect(this._gainNodes[l]),a.start(),a.stop(this._context.currentTime+.1),a.addEventListener("ended",()=>a.disconnect())})}}function cB(e,t,r){const n=JSON.stringify(t.body||{}),a=new Headers;t.headers=t.headers||[],Object.entries(t.headers).forEach(([l,c])=>a.append(l,c)),fetch(t.url,{body:n,headers:a,method:e}).then(l=>l.text(),r).then(l=>r(null,l),r)}const Ow=cB;Ow.get=function(t,r){return new this("GET",t,r)};Ow.post=function(t,r){return new this("POST",t,r)};class Rn extends Ls.EventEmitter{constructor(t,r,n){if(super(),!(this instanceof Rn))return new Rn(t,r,n);n=Object.assign({defaultPayload(){return{}}},n);let a=n.defaultPayload;typeof a!="function"&&(a=()=>Object.assign({},n.defaultPayload));let l=!0;const c=Object.assign({app_name:void 0,app_version:void 0},n.metadata);Object.defineProperties(this,{_defaultPayload:{value:a},_host:{value:n.host,writable:!0},_isEnabled:{get(){return l},set(d){l=d}},_log:{value:new Wr("EventPublisher")},_request:{value:n.request||Ow,writable:!0},_token:{value:r,writable:!0},isEnabled:{enumerable:!0,get(){return l}},metadata:{enumerable:!0,get(){return c}},productName:{enumerable:!0,value:t},token:{enumerable:!0,get(){return this._token}}})}}Rn.prototype._post=function(t,r,n,a,l,c,d){if(!this.isEnabled&&!d||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:d,host:this._host})),Promise.resolve();if(!c||(!c.parameters||!c.parameters.CallSid)&&!c.outboundConnectionId)return c?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:c.outboundConnectionId,parameters:c.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();const h={group:n,level:r.toUpperCase(),name:a,payload:l&&l.forEach?l.slice(0):Object.assign(this._defaultPayload(c),l),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:new Date().toISOString()};this.metadata&&(h.publisher_metadata=this.metadata),t==="EndpointEvents"&&this._log.debug("Publishing insights",JSON.stringify({endpointName:t,event:h,force:d,host:this._host}));const f={body:h,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:`https://${this._host}/v4/${t}`};return new Promise((m,g)=>{this._request.post(f,x=>{x?(this.emit("error",x),g(x)):m()})}).catch(m=>{this._log.error(`Unable to post ${n} ${a} event to Insights. Received error: ${m}`)})};Rn.prototype.post=function(t,r,n,a,l,c){return this._post("EndpointEvents",t,r,n,a,l,c)};Rn.prototype.debug=function(t,r,n,a){return this.post("debug",t,r,n,a)};Rn.prototype.info=function(t,r,n,a){return this.post("info",t,r,n,a)};Rn.prototype.warn=function(t,r,n,a){return this.post("warning",t,r,n,a)};Rn.prototype.error=function(t,r,n,a){return this.post("error",t,r,n,a)};Rn.prototype.postMetrics=function(t,r,n,a,l){return new Promise(c=>{const d=n.map(dB).map(h=>Object.assign(h,a));c(this._post("EndpointMetrics","info",t,r,d,l))})};Rn.prototype.setHost=function(t){this._host=t};Rn.prototype.setToken=function(t){this._token=t};Rn.prototype.enable=function(){this._isEnabled=!0};Rn.prototype.disable=function(){this._isEnabled=!1};function dB(e){return{audio_codec:e.codecName,audio_level_in:e.audioInputLevel,audio_level_out:e.audioOutputLevel,bytes_received:e.bytesReceived,bytes_sent:e.bytesSent,call_volume_input:e.inputVolume,call_volume_output:e.outputVolume,jitter:e.jitter,mos:e.mos&&Math.round(e.mos*100)/100,packets_lost:e.packetsLost,packets_lost_fraction:e.packetsLostFraction&&Math.round(e.packetsLostFraction*100)/100,packets_received:e.packetsReceived,rtt:e.rtt,timestamp:new Date(e.timestamp).toISOString(),total_bytes_received:e.totals.bytesReceived,total_bytes_sent:e.totals.bytesSent,total_packets_lost:e.totals.packetsLost,total_packets_received:e.totals.packetsReceived,total_packets_sent:e.totals.packetsSent}}const Z2=32767,eS=typeof window<"u"?window.RTCStatsReport:void 0;function Zs(e){if(!(this instanceof Zs))return new Zs(e);const t=this;Object.defineProperties(this,{_map:{value:e},size:{enumerable:!0,get(){return t._map.size}}}),this[Symbol.iterator]=e[Symbol.iterator]}eS&&(Zs.prototype=Object.create(eS.prototype),Zs.prototype.constructor=Zs);["entries","forEach","get","has","keys","values"].forEach(e=>{Zs.prototype[e]=function(...t){return this._map[e](...t)}});Zs.fromArray=function(t){return new Zs(t.reduce((r,n)=>(r.set(n.id,n),r),new Map))};Zs.fromRTCStatsResponse=function(t){let r;const n=new Map,a=t.result().reduce((l,c)=>{const d=c.id;switch(c.type){case"googCertificate":l.set(d,gB(c));break;case"datachannel":l.set(d,xB(c));break;case"googCandidatePair":KA(c,"googActiveConnection")&&(r=d),l.set(d,pB(c));break;case"localcandidate":l.set(d,rS(c,!1));break;case"remotecandidate":l.set(d,rS(c,!0));break;case"ssrc":Vl(c,"packetsReceived")?l.set(`rtp-${d}`,fB(c)):l.set(`rtp-${d}`,mB(c)),l.set(`track-${d}`,hB(c)),l.set(`codec-${d}`,uB(c));break;case"googComponent":const h=tS(c);n.set(h.selectedCandidatePairId,d),l.set(d,tS(c));break}return l},new Map);if(r){const l=n.get(r);l&&(a.get(l).dtlsState="connected")}return new Zs(a)};function tS(e){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:e.id,localCertificateId:e.stat("localCertificateId"),remoteCertificateId:e.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:e.stat("selectedCandidatePairId"),timestamp:Date.parse(e.timestamp),type:"transport"}}function uB(e){return{channels:void 0,clockRate:void 0,id:e.id,implementation:void 0,mimeType:`${e.stat("mediaType")}/${e.stat("googCodecName")}`,payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(e.timestamp),type:"codec"}}function hB(e){return{audioLevel:Vl(e,"audioOutputLevel")?Ht(e,"audioOutputLevel")/Z2:(Ht(e,"audioInputLevel")||0)/Z2,detached:void 0,echoReturnLoss:Kv(e,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:Kv(e,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:Vl(e,"googFrameHeightReceived")?Ht(e,"googFrameHeightReceived"):Ht(e,"googFrameHeightSent"),frameWidth:Vl(e,"googFrameWidthReceived")?Ht(e,"googFrameWidthReceived"):Ht(e,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:Ht(e,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:Ht(e,"framesEncoded"),fullFramesLost:void 0,id:e.id,kind:e.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(e.timestamp),trackIdentifier:e.stat("googTrackId"),type:"track"}}function GA(e,t){return{associateStatsId:void 0,codecId:`codec-${e.id}`,firCount:t?Ht(e,"googFirsSent"):void 0,id:e.id,isRemote:void 0,mediaType:e.stat("mediaType"),nackCount:t?Ht(e,"googNacksSent"):Ht(e,"googNacksReceived"),pliCount:t?Ht(e,"googPlisSent"):Ht(e,"googPlisReceived"),qpSum:Ht(e,"qpSum"),sliCount:void 0,ssrc:e.stat("ssrc"),timestamp:Date.parse(e.timestamp),trackId:`track-${e.id}`,transportId:e.stat("transportId")}}function fB(e){const t=GA(e,!0);return Object.assign(t,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:Ht(e,"bytesReceived"),fractionLost:void 0,framesDecoded:Ht(e,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:Gv(e.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:Ht(e,"packetsLost"),packetsReceived:Ht(e,"packetsReceived"),packetsRepaired:void 0,roundTripTime:Gv(e.stat("googRtt")),type:"inbound-rtp"}),t}function mB(e){const t=GA(e,!1);return Object.assign(t,{bytesSent:Ht(e,"bytesSent"),framesEncoded:Ht(e,"framesEncoded"),packetsSent:Ht(e,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),t}function rS(e,t){return{candidateType:bB(e.stat("candidateType")),deleted:void 0,id:e.id,ip:e.stat("ipAddress"),isRemote:t,port:Ht(e,"portNumber"),priority:Kv(e,"priority"),protocol:e.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(e.timestamp),transportId:void 0,type:t?"remote-candidate":"local-candidate",url:void 0}}function pB(e){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:Ht(e,"bytesReceived"),bytesSent:Ht(e,"bytesSent"),consentRequestsSent:Ht(e,"consentRequestsSent"),currentRoundTripTime:Gv(e.stat("googRtt")),id:e.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:e.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:e.stat("remoteCandidateId"),requestsReceived:Ht(e,"requestsReceived"),requestsSent:Ht(e,"requestsSent"),responsesReceived:Ht(e,"responsesReceived"),responsesSent:Ht(e,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(e.timestamp),totalRoundTripTime:void 0,transportId:e.stat("googChannelId"),type:"candidate-pair",writable:KA(e,"googWritable")}}function gB(e){return{base64Certificate:e.stat("googDerBase64"),fingerprint:e.stat("googFingerprint"),fingerprintAlgorithm:e.stat("googFingerprintAlgorithm"),id:e.id,issuerCertificateId:e.stat("googIssuerId"),timestamp:Date.parse(e.timestamp),type:"certificate"}}function xB(e){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:e.stat("datachannelid"),id:e.id,label:e.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:e.stat("protocol"),state:e.stat("state"),timestamp:Date.parse(e.timestamp),transportId:e.stat("transportId"),type:"data-channel"}}function Gv(e){return isNaN(e)||e===""?void 0:parseInt(e,10)/1e3}function bB(e){switch(e){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return e}}function Ht(e,t){const r=e.stat(t);return Vl(e,t)?parseInt(r,10):void 0}function Kv(e,t){const r=e.stat(t);return Vl(e,t)?parseFloat(r):void 0}function KA(e,t){const r=e.stat(t);return Vl(e,t)?r==="true"||r===!0:void 0}function Vl(e,t){const r=e.stat(t);return typeof r<"u"&&r!==""}const vB="PeerConnection is null",yB="WebRTC statistics are unsupported";function Go(e,t){return typeof e.get=="function"?e.get(t):e.find(r=>r.id===t)}function YA(e){if(!e)return Promise.reject(new zt(vB));if(typeof e.getStats!="function")return Promise.reject(new nn(yB));let t;try{t=e.getStats()}catch{t=new Promise(n=>e.getStats(n)).then(Zs.fromRTCStatsResponse)}return t}function wB(e,t){return t=Object.assign({createRTCSample:kB},t),YA(e).then(t.createRTCSample)}function jB(e){return YA(e).then(t=>{const{candidatePairs:r,localCandidates:n,remoteCandidates:a,transport:l}=Array.from(t.values()).reduce((h,f)=>{switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(m=>{h[m]||(h[m]=[])}),f.type){case"candidate-pair":h.candidatePairs.push(f);break;case"local-candidate":h.localCandidates.push(f);break;case"remote-candidate":h.remoteCandidates.push(f);break;case"transport":f.selectedCandidatePairId&&(h.transport=f);break}return h},{}),c=r.find(h=>h.selected||l&&h.id===l.selectedCandidatePairId);let d;return c&&(d={localCandidate:n.find(h=>h.id===c.localCandidateId),remoteCandidate:a.find(h=>h.id===c.remoteCandidateId)}),{iceCandidateStats:[...n,...a],selectedIceCandidatePairStats:d}})}function _B(){}function kB(e){let t=null;const r=new _B;let n;Array.from(e.values()).forEach(h=>{if(h.isRemote)return;const f=h.type.replace("-","");if(n=n||h.timestamp,h.remoteId){const m=Go(e,h.remoteId);m&&m.roundTripTime&&(r.rtt=m.roundTripTime*1e3)}switch(f){case"inboundrtp":r.timestamp=r.timestamp||h.timestamp,r.jitter=h.jitter*1e3,r.packetsLost=h.packetsLost,r.packetsReceived=h.packetsReceived,r.bytesReceived=h.bytesReceived;break;case"outboundrtp":if(r.timestamp=h.timestamp,r.packetsSent=h.packetsSent,r.bytesSent=h.bytesSent,h.codecId){const m=Go(e,h.codecId);r.codecName=m?m.mimeType&&m.mimeType.match(/(.*\/)?(.*)/)[2]:h.codecId}break;case"transport":t=h.id;break}}),r.timestamp||(r.timestamp=n);const a=Go(e,t);if(!a)return r;const l=Go(e,a.selectedCandidatePairId);if(!l)return r;const c=Go(e,l.localCandidateId),d=Go(e,l.remoteCandidateId);return r.rtt||(r.rtt=l&&l.currentRoundTripTime*1e3),Object.assign(r,{localAddress:c&&(c.address||c.ip),remoteAddress:d&&(d.address||d.ip)}),r}class ur extends Ls.EventEmitter{constructor(t,r){super(),this._hasInsightsErrored=!1,this._log=new Wr("PreflightTest"),this._networkTiming={},this._options={codecPreferences:[Re.Codec.PCMU,Re.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},this._status=ur.Status.Connecting,Object.assign(this._options,r),this._samples=[],this._warnings=[],this._startTime=Date.now(),this._initDevice(t,Object.assign(Object.assign({},this._options),{fileInputStream:this._options.fakeMicInput?this._getStreamFromFile():void 0}));const n=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],a=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if(typeof r=="object"){const l=Object.assign({},r);Object.keys(l).forEach(c=>{!n.includes(c)&&!a.includes(c)&&delete l[c],a.includes(c)&&(l[c]=!0)}),this._log.debug(".constructor",JSON.stringify(l))}}stop(){this._log.debug(".stop");const t=new Sn.CallCancelledError;this._device?(this._device.once(Ie.EventName.Unregistered,()=>this._onFailed(t)),this._device.destroy()):this._onFailed(t)}_emitWarning(t,r,n){const a={name:t,description:r};n&&(a.rtcWarning=n),this._warnings.push(a),this._log.debug(`#${ur.Events.Warning}`,JSON.stringify(a)),this.emit(ur.Events.Warning,a)}_getCallQuality(t){return t>4.2?ur.CallQuality.Excellent:t>=4.1&&t<=4.2?ur.CallQuality.Great:t>=3.7&&t<=4?ur.CallQuality.Good:t>=3.1&&t<=3.6?ur.CallQuality.Fair:ur.CallQuality.Degraded}_getReport(){var t,r,n;const a=this._getRTCStats(),l={start:this._startTime};this._endTime&&(l.end=this._endTime,l.duration=this._endTime-this._startTime);const c={callSid:this._callSid,edge:this._edge,iceCandidateStats:(r=(t=this._rtcIceCandidateStatsReport)===null||t===void 0?void 0:t.iceCandidateStats)!==null&&r!==void 0?r:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:a,testTiming:l,totals:this._getRTCSampleTotals(),warnings:this._warnings},d=(n=this._rtcIceCandidateStatsReport)===null||n===void 0?void 0:n.selectedIceCandidatePairStats;return d&&(c.selectedIceCandidatePairStats=d,c.isTurnRequired=d.localCandidate.candidateType==="relay"||d.remoteCandidate.candidateType==="relay"),a&&(c.callQuality=this._getCallQuality(a.mos.average)),c}_getRTCSampleTotals(){if(this._latestSample)return Object.assign({},this._latestSample.totals)}_getRTCStats(){const t=this._samples.findIndex(n=>typeof n.mos=="number"&&n.mos>0),r=t>=0?this._samples.slice(t):[];if(!(!r||!r.length))return["jitter","mos","rtt"].reduce((n,a)=>{const l=r.map(c=>c[a]);return Object.assign(Object.assign({},n),{[a]:{average:Number((l.reduce((c,d)=>c+d)/l.length).toPrecision(5)),max:Math.max(...l),min:Math.min(...l)}})},{})}_getStreamFromFile(){const t=this._options.audioContext;if(!t)throw new nn("Cannot fake input audio stream: AudioContext is not supported by this browser.");const r=new Audio(JU);r.addEventListener("canplaythrough",()=>r.play()),typeof r.setAttribute=="function"&&r.setAttribute("crossorigin","anonymous");const n=t.createMediaElementSource(r),a=t.createMediaStreamDestination();return n.connect(a),a.stream}_initDevice(t,r){try{this._device=new(r.deviceFactory||Ie)(t,{chunderw:r.chunderw,codecPreferences:r.codecPreferences,edge:r.edge,eventgw:r.eventgw,fileInputStream:r.fileInputStream,logLevel:r.logLevel,preflight:!0}),this._device.once(Ie.EventName.Registered,()=>{this._onDeviceRegistered()}),this._device.once(Ie.EventName.Error,n=>{this._onDeviceError(n)}),this._device.register()}catch(n){setTimeout(()=>{this._onFailed(n)});return}this._signalingTimeoutTimer=setTimeout(()=>{this._onDeviceError(new $s.ConnectionError("WebSocket Connection Timeout"))},r.signalingTimeoutMs)}_onDeviceError(t){this._device.destroy(),this._onFailed(t)}_onDeviceRegistered(){return ke(this,void 0,void 0,function*(){if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._call=yield this._device.connect({rtcConfiguration:this._options.rtcConfiguration}),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(()=>this._device.disconnectAll(),QU);const r=this._device.audio;r&&(r.disconnect(!1),r.outgoing(!1))}this._call.once("disconnect",()=>{this._device.once(Ie.EventName.Unregistered,()=>this._onUnregistered()),this._device.destroy()}),this._call._publisher.on("error",()=>{this._hasInsightsErrored||this._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),this._hasInsightsErrored=!0})})}_onFailed(t){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=ur.Status.Failed,this._log.debug(`#${ur.Events.Failed}`,t),this.emit(ur.Events.Failed,t)}_onUnregistered(){setTimeout(()=>{this._status!==ur.Status.Failed&&(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=ur.Status.Completed,this._report=this._getReport(),this._log.debug(`#${ur.Events.Completed}`,JSON.stringify(this._report)),this.emit(ur.Events.Completed,this._report))},10)}_releaseHandlers(){[this._device,this._call].forEach(t=>{t&&t.eventNames().forEach(r=>t.removeAllListeners(r))})}_setupCallHandlers(t){this._options.fakeMicInput&&t.once("volume",()=>{t._mediaHandler.outputs.forEach(r=>r.audio.muted=!0)}),t.on("warning",(r,n)=>{this._emitWarning(r,"Received an RTCWarning. See .rtcWarning for the RTCWarning",n)}),t.once("accept",()=>{this._callSid=t._mediaHandler.callSid,this._status=ur.Status.Connected,this._log.debug(`#${ur.Events.Connected}`),this.emit(ur.Events.Connected)}),t.on("sample",r=>ke(this,void 0,void 0,function*(){this._latestSample||(this._rtcIceCandidateStatsReport=yield(this._options.getRTCIceCandidateStatsReport||jB)(t._mediaHandler.version.pc)),this._latestSample=r,this._samples.push(r),this._log.debug(`#${ur.Events.Sample}`,JSON.stringify(r)),this.emit(ur.Events.Sample,r)})),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(({type:r,reportLabel:n})=>{const a=`on${r}statechange`,l=t._mediaHandler[a];t._mediaHandler[a]=c=>{const d=this._networkTiming[n]=this._networkTiming[n]||{start:0};c==="connecting"||c==="checking"?d.start=Date.now():(c==="connected"||c==="stable")&&!d.duration&&(d.end=Date.now(),d.duration=d.end-d.start),l(c)}})}get callSid(){return this._callSid}get endTime(){return this._endTime}get latestSample(){return this._latestSample}get report(){return this._report}get startTime(){return this._startTime}get status(){return this._status}}(function(e){(function(t){t.Excellent="excellent",t.Great="great",t.Good="good",t.Fair="fair",t.Degraded="degraded"})(e.CallQuality||(e.CallQuality={})),(function(t){t.Completed="completed",t.Connected="connected",t.Failed="failed",t.Sample="sample",t.Warning="warning"})(e.Events||(e.Events={})),(function(t){t.Connecting="connecting",t.Connected="connected",t.Completed="completed",t.Failed="failed"})(e.Status||(e.Status={}))})(ur||(ur={}));const ec=globalThis.WebSocket,NB=1e4,SB=5e3,nS=15e3,CB=15e3,EB=1/0,AB=1e3,TB=2e4;var cs;(function(e){e.Connecting="connecting",e.Closed="closed",e.Open="open"})(cs||(cs={}));class _m extends Ls.EventEmitter{constructor(t,r={}){super(),this.state=cs.Closed,this._backoffStartTime={preferred:null,primary:null},this._connectedUri=null,this._log=new Wr("WSTransport"),this._shouldFallback=!1,this._uriIndex=0,this._moveUriIndex=()=>{this._uriIndex++,this._uriIndex>=this._uris.length&&(this._uriIndex=0)},this._onSocketClose=n=>{if(this._log.error(`Received websocket close event code: ${n.code}. Reason: ${n.reason}`),n.code===1006||n.code===1015){this.emit("error",{code:31005,message:n.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new $s.ConnectionError});const a=this.state===cs.Open||this._previousState===cs.Open;(this._shouldFallback||!a)&&this._moveUriIndex(),this._shouldFallback=!0}this._closeSocket()},this._onSocketError=n=>{this._log.error(`WebSocket received error: ${n.message}`),this.emit("error",{code:31e3,message:n.message||"WSTransport socket error",twilioError:new $s.ConnectionDisconnected})},this._onSocketMessage=n=>{if(this._setHeartbeatTimeout(),this._socket&&n.data===`
`){this._socket.send(`
`),this._log.debug("heartbeat");return}n&&typeof n.data=="string"&&this._log.debug(`Received: ${n.data}`),this.emit("message",n)},this._onSocketOpen=()=>{this._log.info("WebSocket opened successfully."),this._timeOpened=Date.now(),this._shouldFallback=!1,this._setState(cs.Open),clearTimeout(this._connectTimeout),this._resetBackoffs(),this._setHeartbeatTimeout(),this.emit("open")},this._options=Object.assign(Object.assign({},_m.defaultConstructorOptions),r),this._uris=t,this._backoff=this._setupBackoffs()}close(){this._log.info("WSTransport.close() called..."),this._close()}open(){if(this._log.info("WSTransport.open() called..."),this._socket&&(this._socket.readyState===ec.CONNECTING||this._socket.readyState===ec.OPEN)){this._log.info("WebSocket already open.");return}this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex])}send(t){if(this._log.debug(`Sending: ${t}`),!this._socket||this._socket.readyState!==ec.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(t)}catch(r){return this._log.error("Error while sending message:",r.message),this._closeSocket(),!1}return!0}updatePreferredURI(t){this._preferredUri=t}updateURIs(t){typeof t=="string"&&(t=[t]),this._uris=t,this._uriIndex=0}_close(){this._setState(cs.Closed),this._closeSocket()}_closeSocket(){if(clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),!this._socket){this._log.info("No WebSocket to clean up.");return}this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===ec.CONNECTING||this._socket.readyState===ec.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>NB&&this._resetBackoffs(),this.state!==cs.Closed&&this._performBackoff(),delete this._socket,this.emit("close")}_connect(t,r){this._log.info(typeof r=="number"?`Attempting to reconnect (retry #${r})...`:"Attempting to connect..."),this._closeSocket(),this._setState(cs.Connecting),this._connectedUri=t;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(n){this._log.error("Could not connect to endpoint:",n.message),this._close(),this.emit("error",{code:31e3,message:n.message||`Could not connect to ${this._connectedUri}`,twilioError:new $s.ConnectionDisconnected});return}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(()=>{this._log.info("WebSocket connection attempt timed out."),this._moveUriIndex(),this._closeSocket()},this._options.connectTimeoutMs)}_performBackoff(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())}_resetBackoffs(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null}_setHeartbeatTimeout(){clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(()=>{this._log.info(`No messages received in ${nS/1e3} seconds. Reconnecting...`),this._shouldFallback=!0,this._closeSocket()},nS)}_setState(t){this._previousState=this.state,this.state=t}_setupBackoffs(){const t={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",t);const r=new Uv(t);r.on("backoff",(l,c)=>{if(this.state===cs.Closed){this._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect Websocket to preferred URI in ${c}ms`),l===0&&(this._backoffStartTime.preferred=Date.now(),this._log.info(`Preferred backoff start; ${this._backoffStartTime.preferred}`))}),r.on("ready",(l,c)=>{if(this.state===cs.Closed){this._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.preferred===null){this._log.info("Preferred backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.preferred>this._options.maxPreferredDurationMs){this._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}if(typeof this._preferredUri!="string"){this._log.info("Preferred URI cleared; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}this._connect(this._preferredUri,l+1)});const n={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(Math.random()*4001)+1e3:100};this._log.info("Initializing primary transport backoff using config: ",n);const a=new Uv(n);return a.on("backoff",(l,c)=>{if(this.state===cs.Closed){this._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect WebSocket in ${c}ms`),l===0&&(this._backoffStartTime.primary=Date.now(),this._log.info(`Primary backoff start; ${this._backoffStartTime.primary}`))}),a.on("ready",(l,c)=>{if(this.state===cs.Closed){this._log.info("Primary backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.primary===null){this._log.info("Primary backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.primary>this._options.maxPrimaryDurationMs){this._log.info("Max primary backoff attempt time exceeded; not attempting a connection.");return}this._connect(this._uris[this._uriIndex],l+1)}),{preferred:r,primary:a}}get uri(){return this._connectedUri}}_m.defaultConstructorOptions={WebSocket:ec,connectTimeoutMs:SB,maxPreferredDelayMs:AB,maxPreferredDurationMs:CB,maxPrimaryDelayMs:TB,maxPrimaryDurationMs:EB};const OB="1.6",PB=30;class tr extends Ls.EventEmitter{constructor(t,r,n){if(super(),!(this instanceof tr))return new tr(t,r,n);const a={TransportFactory:_m};n=n||{};for(const c in a)c in n||(n[c]=a[c]);this.options=n,this.token=t||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._preferredUri=null,this._uris=r,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=new Wr("PStream"),this.on("error",()=>{this._log.warn("Unexpected error handled in pstream")});const l=this;return this.addListener("ready",()=>{l.status="ready"}),this.addListener("offline",()=>{l.status="offline"}),this.addListener("close",()=>{l._log.info('Received "close" from server. Destroying PStream...'),l._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs,maxPreferredDurationMs:this.options.maxPreferredDurationMs}),Object.defineProperties(this,{uri:{enumerable:!0,get(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}}tr.prototype._handleTransportClose=function(){this.emit("transportClose"),this.status!=="disconnected"&&(this.status!=="offline"&&this.emit("offline",this),this.status="disconnected")};tr.prototype._handleTransportError=function(e){if(!e){this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new $s.ConnectionDisconnected}});return}this.emit("error",typeof e.code<"u"?{error:e}:e)};tr.prototype._handleTransportMessage=function(e){if(!e||!e.data||typeof e.data!="string")return;const{type:t,payload:r={}}=JSON.parse(e.data);this.gateway=r.gateway||this.gateway,this.region=r.region||this.region,t==="error"&&r.error&&(r.error.twilioError=new $s.ConnectionError),this.emit(t,r)};tr.prototype._handleTransportOpen=function(){this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(t=>this._publish(...t))};tr.toString=()=>"[Twilio.PStream class]";tr.prototype.toString=()=>"[Twilio.PStream instance]";tr.prototype.setToken=function(e){this._log.info("Setting token and publishing listen"),this.token=e;let t=0;const r=this.options.maxPreferredDurationMs;this._log.info(`maxPreferredDurationMs:${r}`),typeof r=="number"&&r>=0&&(t=Math.min(Math.ceil(r/1e3),PB)),this._log.info(`reconnectTimeout:${t}`);const n={browserinfo:DB(),reconnectTimeout:t,token:e};this._publish("listen",n)};tr.prototype.sendMessage=function(e,t,r="application/json",n,a){const l={callsid:e,content:t,contenttype:r,messagetype:n,voiceeventsid:a};this._publish("message",l,!0)};tr.prototype.register=function(e){const t={media:e};this._publish("register",t,!0)};tr.prototype.invite=function(e,t,r){const n={callsid:t,sdp:e,twilio:r?{params:r}:{}};this._publish("invite",n,!0)};tr.prototype.reconnect=function(e,t,r){const n={callsid:t,reconnect:r,sdp:e,twilio:{}};this._publish("invite",n,!0)};tr.prototype.answer=function(e,t){this._publish("answer",{sdp:e,callsid:t},!0)};tr.prototype.dtmf=function(e,t){this._publish("dtmf",{callsid:e,dtmf:t},!0)};tr.prototype.hangup=function(e,t){const r=t?{callsid:e,message:t}:{callsid:e};this._publish("hangup",r,!0)};tr.prototype.reject=function(e){this._publish("reject",{callsid:e},!0)};tr.prototype.reinvite=function(e,t){this._publish("reinvite",{sdp:e,callsid:t},!1)};tr.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)};tr.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this};tr.prototype.updatePreferredURI=function(e){this._preferredUri=e,this.transport.updatePreferredURI(e)};tr.prototype.updateURIs=function(e){this._uris=e,this.transport.updateURIs(this._uris)};tr.prototype.publish=function(e,t){return this._publish(e,t,!0)};tr.prototype._publish=function(e,t,r){const n=JSON.stringify({payload:t,type:e,version:OB});!!this.transport.send(n)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new Sn.TransportError}}),r&&this._messageQueue.push([e,t,!0]))};function DB(){const e=typeof navigator<"u"?navigator:{};return{browser:{platform:e.platform||"unknown",userAgent:e.userAgent||"unknown"},p:"browser",plugin:"rtc",v:dc}}var pr;(function(e){e.Sydney="sydney",e.SaoPaulo="sao-paulo",e.Dublin="dublin",e.Frankfurt="frankfurt",e.Tokyo="tokyo",e.Singapore="singapore",e.Ashburn="ashburn",e.Umatilla="umatilla",e.Roaming="roaming",e.AshburnIx="ashburn-ix",e.SanJoseIx="san-jose-ix",e.LondonIx="london-ix",e.FrankfurtIx="frankfurt-ix",e.SingaporeIx="singapore-ix",e.SydneyIx="sydney-ix",e.TokyoIx="tokyo-ix"})(pr||(pr={}));var Lt;(function(e){e.Au1="au1",e.Au1Ix="au1-ix",e.Br1="br1",e.De1="de1",e.De1Ix="de1-ix",e.Gll="gll",e.Ie1="ie1",e.Ie1Ix="ie1-ix",e.Ie1Tnx="ie1-tnx",e.Jp1="jp1",e.Jp1Ix="jp1-ix",e.Sg1="sg1",e.Sg1Ix="sg1-ix",e.Sg1Tnx="sg1-tnx",e.Us1="us1",e.Us1Ix="us1-ix",e.Us1Tnx="us1-tnx",e.Us2="us2",e.Us2Ix="us2-ix",e.Us2Tnx="us2-tnx"})(Lt||(Lt={}));const MB={ASIAPAC_SINGAPORE:Lt.Sg1,ASIAPAC_SYDNEY:Lt.Au1,ASIAPAC_TOKYO:Lt.Jp1,EU_FRANKFURT:Lt.De1,EU_IRELAND:Lt.Ie1,SOUTH_AMERICA_SAO_PAULO:Lt.Br1,US_EAST_VIRGINIA:Lt.Us1,US_WEST_OREGON:Lt.Us2},RB={[Lt.Au1]:pr.Sydney,[Lt.Br1]:pr.SaoPaulo,[Lt.Ie1]:pr.Dublin,[Lt.De1]:pr.Frankfurt,[Lt.Jp1]:pr.Tokyo,[Lt.Sg1]:pr.Singapore,[Lt.Us1]:pr.Ashburn,[Lt.Us2]:pr.Umatilla,[Lt.Gll]:pr.Roaming,[Lt.Us1Ix]:pr.AshburnIx,[Lt.Us2Ix]:pr.SanJoseIx,[Lt.Ie1Ix]:pr.LondonIx,[Lt.De1Ix]:pr.FrankfurtIx,[Lt.Sg1Ix]:pr.SingaporeIx,[Lt.Au1Ix]:pr.SydneyIx,[Lt.Jp1Ix]:pr.TokyoIx,[Lt.Us1Tnx]:pr.AshburnIx,[Lt.Us2Tnx]:pr.AshburnIx,[Lt.Ie1Tnx]:pr.LondonIx,[Lt.Sg1Tnx]:pr.SingaporeIx},IB=pr.Roaming,$B="eventgw.twilio.com";function sS(e){return`voice-js.${e}.twilio.com`}function aS(e){return e?`eventgw.${e}.twilio.com`:$B}function iS(e){return`wss://${e}/signal`}function lS(e){if(e&&typeof e!="string"&&!Array.isArray(e))throw new zt("If `edge` is provided, it must be of type `string` or an array of strings.");let t;return e?t=(Array.isArray(e)?e:[e]).map(n=>sS(n)):t=[sS(IB)],t}function LB(e){return MB[e]||null}const oS={0:"PCMU",8:"PCMA"},zB=111,UB=51e4,BB=6e3;function qB(e){const[,t,r]=/a=rtpmap:(\d+) (\S+)/m.exec(e)||[null,"",""],n=new RegExp(`a=fmtp:${t} (\\S+)`,"m"),[,a]=n.exec(e)||[null,""];return{codecName:r,codecParams:a}}function FB(e){return Tw(window,window.navigator)?e.split(`
`).filter(t=>t.indexOf("a=ice-lite")===-1).join(`
`):e}function XA(e,t){if(typeof t!="number"||t<BB||t>UB)return e;const r=/a=rtpmap:(\d+) opus/m.exec(e),n=r&&r.length?r[1]:zB,a=new RegExp(`a=fmtp:${n}`);return e.split(`
`).map(c=>a.test(c)?c+`;maxaveragebitrate=${t}`:c).join(`
`)}function JA(e,t){const r=HB(e);return[e.split(`\r
m=`)[0]].concat(r.map(a=>{if(!/^m=(audio|video)/.test(a))return a;const l=a.match(/^m=(audio|video)/)[1],c=VB(a),d=WB(c,t),h=GB(d,a),f=c.get("pcma")||[],m=c.get("pcmu")||[];return(l==="audio"?new Set(f.concat(m)):new Set).has(d[0])?h.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):h})).join(`\r
`)}function HB(e,t,r){return e.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(n=>`m=${n}`).filter(n=>{const a=new RegExp("m=.*","gm"),l=new RegExp("a=.*","gm");return a.test(n)&&l.test(n)})}function VB(e){return Array.from(KB(e)).reduce((t,r)=>{const n=r[0],a=r[1],l=t.get(a)||[];return t.set(a,l.concat(n))},new Map)}function WB(e,t){t=t.map(l=>l.toLowerCase());const r=Hv(t,l=>e.get(l)||[]),n=Aw(Array.from(e.keys()),t),a=Hv(n,l=>e.get(l));return r.concat(a)}function GB(e,t){const r=t.split(`\r
`);let n=r[0];const a=r.slice(1);return n=n.replace(/([0-9]+\s?)+$/,e.join(" ")),[n].concat(a).join(`\r
`)}function KB(e){return YB(e).reduce((t,r)=>{const n=new RegExp(`a=rtpmap:${r} ([^/]+)`),a=e.match(n),l=a?a[1].toLowerCase():oS[r]?oS[r].toLowerCase():"";return t.set(r,l)},new Map)}function YB(e){const r=e.split(`\r
`)[0].match(/([0-9]+)/g);return r?r.slice(1).map(n=>parseInt(n,10)):[]}function bs(e){if(this.log=new Wr("RTCPC"),typeof window>"u"){this.log.info("No RTCPeerConnection implementation available. The window object was not found.");return}e&&e.RTCPeerConnection?this.RTCPeerConnection=e.RTCPeerConnection:typeof window.RTCPeerConnection=="function"?this.RTCPeerConnection=window.RTCPeerConnection:typeof window.webkitRTCPeerConnection=="function"?this.RTCPeerConnection=webkitRTCPeerConnection:typeof window.mozRTCPeerConnection=="function"?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}bs.prototype.create=function(e){this.pc=new this.RTCPeerConnection(e)};bs.prototype.createModernConstraints=e=>{if(typeof e>"u")return null;const t=Object.assign({},e);return typeof webkitRTCPeerConnection<"u"&&!jm()?(t.mandatory={},typeof e.audio<"u"&&(t.mandatory.OfferToReceiveAudio=e.audio),typeof e.video<"u"&&(t.mandatory.OfferToReceiveVideo=e.video)):(typeof e.audio<"u"&&(t.offerToReceiveAudio=e.audio),typeof e.video<"u"&&(t.offerToReceiveVideo=e.video)),delete t.audio,delete t.video,t};bs.prototype.createOffer=function(e,t,r,n){return t=this.createModernConstraints(t),ZA(this.pc.createOffer,this.pc)(t).then(a=>{if(!this.pc)return Promise.resolve();const l=XA(a.sdp,e);return km(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:l,type:"offer"}))}).then(r,n)};bs.prototype.createAnswer=function(e,t,r,n){return t=this.createModernConstraints(t),ZA(this.pc.createAnswer,this.pc)(t).then(a=>{if(!this.pc)return Promise.resolve();const l=XA(a.sdp,e);return km(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:l,type:"answer"}))}).then(r,n)};bs.prototype.processSDP=function(e,t,r,n,a,l){r=JA(r,t);const c=new RTCSessionDescription({sdp:r,type:"offer"});return km(this.pc.setRemoteDescription,this.pc)(c).then(()=>{this.createAnswer(e,n,a,l)})};bs.prototype.getSDP=function(){return this.pc.localDescription.sdp};bs.prototype.processAnswer=function(e,t,r,n){return this.pc?(t=JA(t,e),km(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:t,type:"answer"})).then(r,n)):Promise.resolve()};bs.test=()=>{if(typeof navigator=="object"){const e=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(jm(navigator))return!1;if(e&&typeof window.RTCPeerConnection=="function")return!0;if(e&&typeof window.webkitRTCPeerConnection=="function")return!0;if(e&&typeof window.mozRTCPeerConnection=="function"){try{if(typeof new window.mozRTCPeerConnection().getLocalStreams!="function")return!1}catch{return!1}return!0}else if(typeof RTCIceGatherer<"u")return!0}return!1};function QA(e,t,r,n){return function(){const a=Array.prototype.slice.call(arguments);return new Promise(l=>{const c=e.apply(t,a);if(!n){l(c);return}if(typeof c=="object"&&typeof c.then=="function")l(c);else throw new Error}).catch(()=>new Promise((l,c)=>{e.apply(t,r?[l,c].concat(a):a.concat([l,c]))}))}}function ZA(e,t){return QA(e,t,!0,!0)}function km(e,t){return QA(e,t,!1,!1)}const XB=15e3,JB="none",QB="timeout",ZB="new",cS=50;function Je(e,t,r){if(!e||!t)throw new zt("Audiohelper, and pstream are required arguments");if(!(this instanceof Je))return new Je(e,t,r);this._log=new Wr("PeerConnection");function n(){this._log.warn("Unexpected noop call in peerconnection")}this.onaudio=n,this.onopen=n,this.onerror=n,this.onclose=n,this.ondisconnected=n,this.onfailed=n,this.onconnected=n,this.onreconnected=n,this.onsignalingstatechange=n,this.ondtlstransportstatechange=n,this.onicegatheringfailure=n,this.onicegatheringstatechange=n,this.oniceconnectionstatechange=n,this.onpcconnectionstatechange=n,this.onicecandidate=n,this.onselectedcandidatepairchange=n,this.onvolume=n,this.version=null,this.pstream=t,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;const a=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!a&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=a&&e._audioContext,this._audioHelper=e,this._audioProcessorEventObserver=e._getAudioProcessorEventObserver(),this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=n,this._onHangup=n,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=ZB,this.options=r=r||{},this.navigator=r.navigator||(typeof navigator<"u"?navigator:null),this.util=r.util||WA,this.codecPreferences=r.codecPreferences,this._onAudioProcessorAdded=l=>{this._handleAudioProcessorEvent(l,!0)},this._onAudioProcessorRemoved=l=>{this._handleAudioProcessorEvent(l,!1)},this._audioProcessorEventObserver.on("add",this._onAudioProcessorAdded),this._audioProcessorEventObserver.on("remove",this._onAudioProcessorRemoved),this}Je.prototype.uri=function(){return this._uri};Je.prototype.openDefaultDeviceWithConstraints=function(e){return this._audioHelper._openDefaultDeviceWithConstraints(e).then(this._setInputTracksFromStream.bind(this,!1))};Je.prototype.setInputTracksFromStream=function(e){const t=this;return this._setInputTracksFromStream(!0,e).then(()=>{t._shouldManageStream=!1})};Je.prototype._createAnalyser=(e,t)=>{t=Object.assign({fftSize:32,smoothingTimeConstant:.3},t);const r=e.createAnalyser();for(const n in t)r[n]=t[n];return r};Je.prototype._setVolumeHandler=function(e){this.onvolume=e};Je.prototype._startPollingVolume=function(){if(!this._audioContext||!this.stream||!this._remoteStream)return;const e=this._audioContext,r=(this._inputAnalyser=this._createAnalyser(e)).frequencyBinCount,n=new Uint8Array(r);this._inputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});const l=(this._outputAnalyser=this._createAnalyser(e)).frequencyBinCount,c=new Uint8Array(l);this._outputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);const d=this;setTimeout(function h(){if(d._audioContext){if(d.status==="closed"){d._inputAnalyser.disconnect(),d._outputAnalyser.disconnect(),d._inputAnalyser2.disconnect(),d._outputAnalyser2.disconnect();return}}else return;d._inputAnalyser.getByteFrequencyData(n);const f=d.util.average(n);d._inputAnalyser2.getByteFrequencyData(n);const m=d.util.average(n);d._outputAnalyser.getByteFrequencyData(c);const g=d.util.average(c);d._outputAnalyser2.getByteFrequencyData(c);const x=d.util.average(c);d.onvolume(f/255,g/255,m,x),setTimeout(h,cS)},cS)};Je.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()};Je.prototype._updateInputStreamSource=function(e){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(e),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(t){this._log.warn("Unable to update input MediaStreamSource",t),this._inputStreamSource=null}};Je.prototype._updateOutputStreamSource=function(e){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(e),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(t){this._log.warn("Unable to update output MediaStreamSource",t),this._outputStreamSource=null}};Je.prototype._setInputTracksFromStream=function(e,t){if(!t)return Promise.reject(new zt("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new zt("Supplied input stream has no audio tracks"));const r=this.stream,n=()=>(this.mute(this.isMuted),Promise.resolve(this.stream));if(!r)this.stream=e?dS(t,this.options.MediaStream):t;else return this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(t.getAudioTracks()[0]).then(()=>(this._updateInputStreamSource(t),this.stream=e?dS(t,this.options.MediaStream):t,n()));return n()};Je.prototype._onInputDevicesChanged=function(){if(!this.stream)return;this.stream.getAudioTracks().every(t=>t.readyState==="ended")&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})};Je.prototype._onIceGatheringFailure=function(e){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(e)};Je.prototype._onMediaConnectionStateChange=function(e){const t=this._iceState;if(t===e||e!=="connected"&&e!=="disconnected"&&e!=="failed")return;this._iceState=e;let r;switch(e){case"connected":t==="disconnected"||t==="failed"?(r="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(r),this.onreconnected(r)):(r="Media connection established.",this._log.info(r),this.onconnected(r)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":r="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(r),this.ondisconnected(r);break;case"failed":r="Connection with Twilio was interrupted.",this._log.warn(r),this.onfailed(r);break}};Je.prototype._setSinkIds=function(e){return this._isSinkSupported?(this.sinkIds=new Set(e.forEach?e:[e]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new nn("Audio output selection is not supported by this browser"))};Je.prototype._startIceGatheringTimeout=function(){this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(()=>{this._onIceGatheringFailure(QB)},XB)};Je.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)};Je.prototype._updateAudioOutputs=function(){const t=Array.from(this.sinkIds).filter(function(l){return!this.outputs.has(l)},this),r=Array.from(this.outputs.keys()).filter(function(l){return!this.sinkIds.has(l)},this),n=this,a=t.map(this._createAudioOutput,this);return Promise.all(a).then(()=>Promise.all(r.map(n._removeAudioOutput,n)))};Je.prototype._createAudio=function(t){const r=new Audio(t);return this.onaudio(r),r};Je.prototype._createAudioOutput=function(t){let r=null;this._mediaStreamSource&&(r=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(r));const n=this._createAudio();Nm(n,r&&r.stream?r.stream:this.pcStream,this._audioHelper).catch(()=>this._log.error("Error attaching stream to element (_createAudioOutput)."));const a=this;return n.setSinkId(t).then(()=>n.play()).then(()=>{a.outputs.set(t,{audio:n,dest:r})})};Je.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)};Je.prototype._disableOutput=function(t,r){const n=t.outputs.get(r);n&&(n.audio&&(n.audio.pause(),n.audio.src=""),n.dest&&n.dest.disconnect())};Je.prototype._reassignMasterOutput=function(t,r){const n=t.outputs.get(r);t.outputs.delete(r);const a=this,l=Array.from(t.outputs.keys())[0],c=typeof l=="string"?l:"default";return n.audio.setSinkId(c).then(()=>{a._disableOutput(t,c),t.outputs.set(c,n),t._masterAudioDeviceId=c}).catch(function(){t.outputs.set(r,n),a._log.info("Could not reassign master output. Attempted to roll back.")})};Je.prototype._removeAudioOutput=function(t){return this._masterAudioDeviceId===t?this._reassignMasterOutput(this,t):(this._disableOutput(this,t),this.outputs.delete(t),Promise.resolve())};Je.prototype._onAddTrack=function(t,r){const n=t._masterAudio=this._createAudio();Nm(n,r,this._audioHelper).then(()=>n.play()).catch(()=>t._log.error("Error attaching stream to element (_onAddTrack)."));const a=Array.from(t.outputs.keys())[0],l=typeof a=="string"?a:"default";t._masterAudioDeviceId=l,t.outputs.set(l,{audio:n});try{t._mediaStreamSource=t._audioContext.createMediaStreamSource(r)}catch(c){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",c),this._mediaStreamSource=null}t.pcStream=r,t._updateAudioOutputs()};Je.prototype._fallbackOnAddTrack=function(t,r){const n=document&&document.createElement("audio");Nm(n,r,this._audioHelper).then(()=>n.play()).catch(()=>t._log.error("Error attaching stream to element (_fallbackOnAddTrack).")),t.outputs.set("default",{audio:n})};Je.prototype._setEncodingParameters=function(e){if(!e||!this._sender||typeof this._sender.getParameters!="function"||typeof this._sender.setParameters!="function")return;const t=this._sender.getParameters();!t.priority&&!(t.encodings&&t.encodings.length)||(t.priority="high",t.encodings&&t.encodings.length&&t.encodings.forEach(r=>{r.priority="high",r.networkPriority="high"}),this._sender.setParameters(t))};Je.prototype._setupPeerConnection=function(e){const t=this,r=new(this.options.rtcpcFactory||bs)({RTCPeerConnection:this.options.RTCPeerConnection});r.create(e),eq(r.pc,this.stream);const n=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",n,this.codecPreferences);const a=VA(n,this.codecPreferences),[l]=r.pc.getTransceivers();this._log.debug("setting sorted codecs",a),l.setCodecPreferences(a);const c="ontrack"in r.pc?"ontrack":"onaddstream";return r.pc[c]=d=>{const h=t._remoteStream=d.stream||d.streams[0];typeof r.pc.getSenders=="function"&&(this._sender=r.pc.getSenders()[0]),t._isSinkSupported?t._onAddTrack(t,h):t._fallbackOnAddTrack(t,h),t._startPollingVolume()},r};Je.prototype._maybeSetIceAggressiveNomination=function(e){return this.options.forceAggressiveIceNomination?FB(e):e};Je.prototype._setupChannel=function(){const e=this.version.pc;this.version.pc.onopen=()=>{this.status="open",this.onopen()},this.version.pc.onstatechange=()=>{this.version.pc&&this.version.pc.readyState==="stable"&&(this.status="open",this.onopen())},this.version.pc.onsignalingstatechange=()=>{const t=e.signalingState;this._log.info(`signalingState is "${t}"`),this.version.pc&&this.version.pc.signalingState==="stable"&&(this.status="open",this.onopen()),this.onsignalingstatechange(e.signalingState)},e.onconnectionstatechange=t=>{let r=e.connectionState;if(!r&&t&&t.target){const n=t.target;r=n.connectionState||n.connectionState_,this._log.info(`pc.connectionState not detected. Using target PC. State=${r}`)}r?this._log.info(`pc.connectionState is "${r}"`):this._log.warn(`onconnectionstatechange detected but state is "${r}"`),this.onpcconnectionstatechange(r),this._onMediaConnectionStateChange(r)},e.onicecandidate=t=>{const{candidate:r}=t;r&&(this._hasIceCandidates=!0,this.onicecandidate(r),this._setupRTCIceTransportListener()),this._log.info(`ICE Candidate: ${JSON.stringify(r)}`)},e.onicegatheringstatechange=()=>{const t=e.iceGatheringState;t==="gathering"?this._startIceGatheringTimeout():t==="complete"&&(this._stopIceGatheringTimeout(),this._hasIceCandidates||this._onIceGatheringFailure(JB),this._hasIceCandidates&&this._hasIceGatheringFailures&&this._startIceGatheringTimeout()),this._log.info(`pc.iceGatheringState is "${e.iceGatheringState}"`),this.onicegatheringstatechange(t)},e.oniceconnectionstatechange=()=>{this._log.info(`pc.iceConnectionState is "${e.iceConnectionState}"`),this.oniceconnectionstatechange(e.iceConnectionState),this._onMediaConnectionStateChange(e.iceConnectionState)}};Je.prototype._initializeMediaStream=function(e){return this.status==="open"?!1:this.pstream.status==="disconnected"?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new $s.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(e),this._setupChannel(),!0)};Je.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))};Je.prototype._setupRTCDtlsTransportListener=function(){const e=this.getRTCDtlsTransport();if(!e||e.onstatechange)return;const t=()=>{this._log.info(`dtlsTransportState is "${e.state}"`),this.ondtlstransportstatechange(e.state)};t(),e.onstatechange=t};Je.prototype._setupRTCIceTransportListener=function(){const e=this._getRTCIceTransport();!e||e.onselectedcandidatepairchange||(e.onselectedcandidatepairchange=()=>this.onselectedcandidatepairchange(e.getSelectedCandidatePair()))};Je.prototype.iceRestart=function(){this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(()=>{this._removeReconnectionListeners(),this._onAnswerOrRinging=e=>{if(this._removeReconnectionListeners(),!e.sdp||this.version.pc.signalingState!=="have-local-offer"){const r=`Invalid state or param during ICE Restart:hasSdp:${!!e.sdp}, signalingState:${this.version.pc.signalingState}`;this._log.warn(r);return}const t=this._maybeSetIceAggressiveNomination(e.sdp);this._answerSdp=t,this.status!=="closed"&&this.version.processAnswer(this.codecPreferences,t,null,r=>{const n=r&&r.message?r.message:r;this._log.error(`Failed to process answer during ICE Restart. Error: ${n}`)})},this._onHangup=()=>{this._log.info("Received hangup during ICE Restart"),this._removeReconnectionListeners()},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("hangup",this._onHangup),this.pstream.reinvite(this.version.getSDP(),this.callSid)}).catch(e=>{const t=e&&e.message?e.message:e;this._log.error(`Failed to createOffer during ICE Restart. Error: ${t}`),this.onfailed(t)})};Je.prototype.makeOutgoingCall=function(e,t,r,n,a){if(!this._initializeMediaStream(n))return;const l=this;this.callSid=r;function c(){l.options&&l._setEncodingParameters(l.options.dscp),a(l.version.pc)}function d(m){const g=m.message||m;l.onerror({info:{code:31e3,message:`Error processing answer: ${g}`,twilioError:new xa.ClientRemoteDescFailed}})}this._onAnswerOrRinging=m=>{if(!m.sdp)return;const g=this._maybeSetIceAggressiveNomination(m.sdp);l._answerSdp=g,l.status!=="closed"&&l.version.processAnswer(this.codecPreferences,g,c,d),l.pstream.removeListener("answer",l._onAnswerOrRinging),l.pstream.removeListener("ringing",l._onAnswerOrRinging)},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging);function h(){l.status!=="closed"&&(t?l.pstream.reconnect(l.version.getSDP(),l.callSid,t):l.pstream.invite(l.version.getSDP(),l.callSid,e),l._setupRTCDtlsTransportListener())}function f(m){const g=m.message||m;l.onerror({info:{code:31e3,message:`Error creating the offer: ${g}`,twilioError:new xa.ClientLocalDescFailed}})}this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},h,f)};Je.prototype.answerIncomingCall=function(e,t,r,n){if(!this._initializeMediaStream(r))return;t=this._maybeSetIceAggressiveNomination(t),this._answerSdp=t.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=e;const a=this;function l(){a.status!=="closed"&&(a.pstream.answer(a.version.getSDP(),e),a.options&&a._setEncodingParameters(a.options.dscp),n(a.version.pc),a._setupRTCDtlsTransportListener())}function c(d){const h=d.message||d;a.onerror({info:{code:31e3,message:`Error creating the answer: ${h}`,twilioError:new xa.ClientRemoteDescFailed}})}this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,t,{audio:!0},l,c)};Je.prototype.close=function(){this.version&&this.version.pc&&(this.version.pc.signalingState!=="closed"&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),this._audioHelper._destroyRemoteProcessedStream(),this._audioProcessorEventObserver.removeListener("add",this._onAudioProcessorAdded),this._audioProcessorEventObserver.removeListener("remove",this._onAudioProcessorRemoved),Promise.all(this._removeAudioOutputs()).catch(()=>{}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()};Je.prototype.reject=function(e){this.callSid=e};Je.prototype.ignore=function(e){this.callSid=e};Je.prototype.mute=function(e){this.isMuted=e,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!e:(typeof this.stream.getAudioTracks=="function"?this.stream.getAudioTracks():this.stream.audioTracks).forEach(r=>{r.enabled=!e}))};Je.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;const t=this,r=this.version.pc;if(!r)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if(typeof r.getSenders=="function"&&(typeof RTCDTMFSender=="function"||typeof RTCDtmfSender=="function")){const n=r.getSenders().find(a=>a.dtmf);if(n)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=n.dtmf,this._dtmfSender}if(typeof r.createDTMFSender=="function"&&typeof r.getLocalStreams=="function"){const n=r.getLocalStreams().map(a=>{const l=t._getAudioTracks(a);return l&&l[0]})[0];return n?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=r.createDTMFSender(n),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null};Je.prototype.getRTCDtlsTransport=function(){const t=this.version&&this.version.pc&&typeof this.version.pc.getSenders=="function"&&this.version.pc.getSenders()[0];return t&&t.transport||null};Je.prototype._canStopMediaStreamTrack=()=>typeof MediaStreamTrack.prototype.stop=="function";Je.prototype._getAudioTracks=e=>typeof e.getAudioTracks=="function"?e.getAudioTracks():e.audioTracks;Je.prototype._getRTCIceTransport=function(){const t=this.getRTCDtlsTransport();return t&&t.iceTransport||null};Je.protocol=bs.test()?new bs:null;Je.prototype._handleAudioProcessorEvent=function(e,t){if(!e||!this._remoteStream)return;let r=null;this._masterAudio?(this._log.info("Setting audio source for master audio."),r=this._masterAudio):(this._log.info("No master audio. Setting audio source for default audio output."),r=this.outputs.get("default").audio),Nm(r,this._remoteStream,this._audioHelper).then(()=>{const n=t?"Successfully updated audio source with processed stream":"Successfully reverted audio source to original stream";this._log.info(n),r.paused&&(this._log.info("Resuming audio playback"),r.play())}).catch(()=>{const n=t?"Failed to update audio source":"Failed to revert audio source";this._log.error(n)})};function eq(e,t){typeof e.addTrack=="function"?t.getAudioTracks().forEach(r=>{e.addTrack(r,t)}):e.addStream(t)}function dS(e,t){let r;return t?r=new t:typeof MediaStream<"u"?r=new MediaStream:r=new webkitMediaStream,e.getAudioTracks().forEach(r.addTrack,r),r}function Nm(e,t,r){return r._maybeCreateRemoteProcessedStream(t).then(n=>{if(typeof e.srcObject<"u")e.srcObject=n;else if(typeof e.mozSrcObject<"u")e.mozSrcObject=n;else if(typeof e.src<"u"){const a=e.options.window||window;e.src=(a.URL||a.webkitURL).createObjectURL(n)}else return Promise.reject();return Promise.resolve()})}Je.enabled=bs.test();function tq(){return bs.test()}function rq(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}function nq(e,t){return t=t||{},t.util=t.util||WA,t.navigator=t.navigator||(typeof navigator<"u"?navigator:null),new Promise((r,n)=>{if(!t.navigator)throw new nn("getUserMedia is not supported");switch("function"){case typeof(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia):return r(t.navigator.mediaDevices.getUserMedia(e));case typeof t.navigator.webkitGetUserMedia:return t.navigator.webkitGetUserMedia(e,r,n);case typeof t.navigator.mozGetUserMedia:return t.navigator.mozGetUserMedia(e,r,n);case typeof t.navigator.getUserMedia:return t.navigator.getUserMedia(e,r,n);default:throw new nn("getUserMedia is not supported")}}).catch(r=>{throw t.util.isFirefox()&&r.name==="NotReadableError"?new nn(`Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.
Related Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324`):r})}function sq(){if(typeof window!="object")throw new nn("This platform is not supported.");const{crypto:e}=window;if(typeof e!="object")throw new nn("The `crypto` module is not available on this platform.");if(typeof e.getRandomValues!="function")throw new nn("The function `crypto.getRandomValues` is not available on this platform.");if(typeof window.Uint8Array!="function")throw new nn("The `Uint8Array` module is not available on this platform.");return e.getRandomValues(new window.Uint8Array(16)).reduce((t,r)=>`${t}${r.toString(16).padStart(2,"0")}`,"")}function Yv(){return`KX${sq()}`}let aq=class{constructor(){this._promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}get promise(){return this._promise}reject(t){this._reject(t)}resolve(t){this._resolve(t)}};class iq{constructor(){this._operations=[]}enqueue(t){const r=!!this._operations.length,n=new aq;return this._operations.push({deferred:n,callback:t}),r||this._processQueue(),n.promise}_processQueue(){return ke(this,void 0,void 0,function*(){for(;this._operations.length;){const{deferred:t,callback:r}=this._operations[0];let n,a,l;try{n=yield r(),l=!0}catch(c){a=c}this._operations.shift(),l?t.resolve(n):t.reject(a)}})}}class lq{get reject(){return this._reject}get resolve(){return this._resolve}constructor(){this.promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}}class oq{constructor(){this._eventEmitter=new Ls.EventEmitter}addEventListener(t,r){return this._eventEmitter.addListener(t,r)}dispatchEvent(t,...r){return this._eventEmitter.emit(t,...r)}removeEventListener(t,r){return this._eventEmitter.removeListener(t,r)}}class uS extends oq{get destination(){return this._destination}get loop(){return this._loop}set loop(t){const r=this;function n(){r._audioNode.removeEventListener("ended",n),r.pause()}!t&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",n),this._loop=t}get muted(){return this._gainNode.gain.value===0}set muted(t){this._gainNode.gain.value=t?0:1}get paused(){return this._audioNode===null}get src(){return this._src}set src(t){this._load(t)}get srcObject(){return this._audioElement.srcObject}set srcObject(t){this._audioElement.srcObject=t}get sinkId(){return this._sinkId}constructor(t,r={},n={}){super(),this._audioNode=null,this._loop=!1,this._pendingPlayDeferreds=[],this._sinkId="default",this._src="",typeof r!="string"&&(n=r),this._audioContext=t,this._audioElement=new(n.AudioFactory||Audio),this._bufferPromise=this._createPlayDeferred().promise,this._destination=this._audioContext.destination,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(this._destination),this._XMLHttpRequest=n.XMLHttpRequestFactory||XMLHttpRequest,this.addEventListener("canplaythrough",()=>{this._resolvePlayDeferreds()}),typeof r=="string"&&(this.src=r)}load(){this._load(this._src)}pause(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}play(){return ke(this,void 0,void 0,function*(){if(!this.paused){if(yield this._bufferPromise,!this.paused)return;throw new Error("The play() request was interrupted by a call to pause().")}this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",()=>{this._audioNode&&this._audioNode.loop||this.dispatchEvent("ended")});const t=yield this._bufferPromise;if(this.paused)throw new Error("The play() request was interrupted by a call to pause().");if(this._audioNode.buffer=t,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject)return this._audioElement.play()})}setSinkId(t){return ke(this,void 0,void 0,function*(){if(typeof this._audioElement.setSinkId!="function")throw new Error("This browser does not support setSinkId.");if(t!==this.sinkId){if(t==="default"){this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=t;return}yield this._audioElement.setSinkId(t),!this._audioElement.srcObject&&(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=t,this._gainNode.connect(this._destination))}})}_createPlayDeferred(){const t=new lq;return this._pendingPlayDeferreds.push(t),t}_load(t){this._src&&this._src!==t&&this.pause(),this._src=t,this._bufferPromise=new Promise((r,n)=>ke(this,void 0,void 0,function*(){if(!t)return this._createPlayDeferred().promise;const a=yield cq(this._audioContext,this._XMLHttpRequest,t);this.dispatchEvent("canplaythrough"),r(a)}))}_rejectPlayDeferreds(t){const r=this._pendingPlayDeferreds;r.splice(0,r.length).forEach(({reject:n})=>n(t))}_resolvePlayDeferreds(t){const r=this._pendingPlayDeferreds;r.splice(0,r.length).forEach(({resolve:n})=>n(t))}}function cq(e,t,r){return ke(this,void 0,void 0,function*(){const n=new t;n.open("GET",r,!0),n.responseType="arraybuffer";const a=yield new Promise(l=>{n.addEventListener("load",l),n.send()});try{return e.decodeAudioData(a.target.response)}catch{return new Promise(c=>{e.decodeAudioData(a.target.response,c)})}})}function ni(e,t,r){if(!(this instanceof ni))return new ni(e,t,r);if(!e||!t)throw new zt("name and url are required arguments");r=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},r),r.AudioPlayer=r.audioContext?uS.bind(uS,r.audioContext):r.AudioFactory,Object.defineProperties(this,{_Audio:{value:r.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:r.AudioFactory!==null&&typeof r.AudioFactory.prototype.setSinkId=="function"},_maxDuration:{value:r.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new iq},_playPromise:{value:null,writable:!0},_shouldLoop:{value:r.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get(){return!!this._playPromise}},name:{enumerable:!0,value:e},url:{enumerable:!0,value:t}}),this._Audio&&this._play(!0,!1)}function eT(e){e&&(e.pause(),e.src="",e.srcObject=null,e.load())}ni.prototype._playAudioElement=function(t,r,n){const a=this._activeEls.get(t);if(!a)throw new zt(`sinkId: "${t}" doesn't have an audio element`);return a.muted=!!r,a.loop=!!n,a.play().then(()=>a).catch(l=>{throw eT(a),this._activeEls.delete(t),l})};ni.prototype._play=function(t,r){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),r=typeof r=="boolean"?r:this._shouldLoop;const n=this;return this._playPromise=Promise.all(this._sinkIds.map(function(c){if(!n._Audio)return Promise.resolve();let d=n._activeEls.get(c);return d?n._playAudioElement(c,t,r):(d=new n._Audio(n.url),typeof d.setAttribute=="function"&&d.setAttribute("crossorigin","anonymous"),new Promise(h=>{d.addEventListener("canplaythrough",h)}).then(()=>(n._isSinkSupported?d.setSinkId(c):Promise.resolve()).then(function(){return n._activeEls.set(c,d),n._playPromise?n._playAudioElement(c,t,r):Promise.resolve()})))}))};ni.prototype._stop=function(){this._activeEls.forEach((t,r)=>{this._sinkIds.includes(r)?(t.pause(),t.currentTime=0):(eT(t),this._activeEls.delete(r))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null};ni.prototype.setSinkIds=function(t){this._isSinkSupported&&(t=t.forEach?t:[t],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(t)))};ni.prototype.stop=function(){this._operations.enqueue(()=>(this._stop(),Promise.resolve()))};ni.prototype.play=function(){return this._operations.enqueue(()=>this._play())};const dq=3e4,uq=2e3,hq="twilio-js-sdk",fq='Parameter "token" must be of type "string".';class Ie extends Ls.EventEmitter{static get audioContext(){return Ie._audioContext}static get extension(){const t=typeof document<"u"?document.createElement("audio"):{canPlayType:!1};let r;try{r=t.canPlayType&&!!t.canPlayType("audio/mpeg").replace(/no/,"")}catch{r=!1}let n;try{n=t.canPlayType&&!!t.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{n=!1}return n&&!r?"ogg":"mp3"}static get isSupported(){return tq()}static get packageName(){return qA}static runPreflight(t,r){return new ur(t,Object.assign({audioContext:Ie._getOrCreateAudioContext()},r))}static toString(){return"[Twilio.Device class]"}static get version(){return dc}static _getOrCreateAudioContext(){return Ie._audioContext||(typeof AudioContext<"u"?Ie._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(Ie._audioContext=new webkitAudioContext)),Ie._audioContext}constructor(t,r={}){if(super(),this._activeCall=null,this._audio=null,this._audioProcessorEventObserver=null,this._callInputStream=null,this._calls=[],this._callSinkIds=["default"],this._chunderURIs=[],this._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[Re.Codec.PCMU,Re.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:lu.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:Yv},this._edge=null,this._home=null,this._identity=null,this._log=new Wr("Device"),this._makeCallPromise=null,this._options={},this._preferredURI=null,this._publisher=null,this._region=null,this._regTimer=null,this._shouldReRegister=!1,this._soundcache=new Map,this._state=Ie.State.Unregistered,this._stateEventMapping={[Ie.State.Destroyed]:Ie.EventName.Destroyed,[Ie.State.Unregistered]:Ie.EventName.Unregistered,[Ie.State.Registering]:Ie.EventName.Registering,[Ie.State.Registered]:Ie.EventName.Registered},this._stream=null,this._streamConnectedPromise=null,this._tokenWillExpireTimeout=null,this._createDefaultPayload=l=>{const c={aggressive_nomination:this._options.forceAggressiveIceNomination,browser_extension:this._isBrowserExtension,dscp:!!this._options.dscp,ice_restart_enabled:!0,platform:rq(),sdk_version:dc};function d(h,f){f&&(c[h]=f)}if(l){const h=l.parameters.CallSid;d("call_sid",/^TJ/.test(h)?void 0:h),d("temp_call_sid",l.outboundConnectionId),d("audio_codec",l.codec),c.direction=l.direction}return d("gateway",this._stream&&this._stream.gateway),d("region",this._stream&&this._stream.region),c},this._onSignalingClose=()=>{this._stream=null,this._streamConnectedPromise=null},this._onSignalingConnected=l=>{var c;const d=LB(l.region);if(this._edge=l.edge||RB[d]||l.region,this._region=d||l.region,this._home=l.home,(c=this._publisher)===null||c===void 0||c.setHost(aS(l.home)),l.token&&(this._identity=l.token.identity,typeof l.token.ttl=="number"&&typeof this._options.tokenRefreshMs=="number")){const f=l.token.ttl*1e3,m=Math.max(0,f-this._options.tokenRefreshMs);this._tokenWillExpireTimeout=setTimeout(()=>{this._log.debug("#tokenWillExpire"),this.emit("tokenWillExpire",this),this._tokenWillExpireTimeout&&(clearTimeout(this._tokenWillExpireTimeout),this._tokenWillExpireTimeout=null)},m)}const h=this._getChunderws()||lS(this._edge);if(h.length>0){const[f]=h;this._preferredURI=iS(f)}else this._log.warn("Could not parse a preferred URI from the stream#connected event.");this._shouldReRegister&&this.register()},this._onSignalingError=l=>{if(typeof l!="object"){this._log.warn("Invalid signaling error payload",l);return}const{error:c,callsid:d,voiceeventsid:h}=l;if(typeof c!="object"||h){this._log.warn("Ignoring signaling error payload",{originalError:c,voiceeventsid:h});return}const f=typeof d=="string"&&this._findCall(d)||void 0,{code:m,message:g}=c;let{twilioError:x}=c;if(typeof m=="number")if(m===31201)x=new Hr.AuthenticationFailed(c);else if(m===31204)x=new Hr.AccessTokenInvalid(c);else if(m===31205)this._stopRegistrationTimer(),x=new Hr.AccessTokenExpired(c);else{const b=Fv(!!this._options.enableImprovedSignalingErrorPrecision,m);typeof b<"u"&&(x=new b(c))}x||(this._log.error("Unknown signaling error: ",c),x=new Sn.UnknownError(g,c)),this._log.error("Received error: ",x),this._log.debug("#error",c),this.emit(Ie.EventName.Error,x,f)},this._onSignalingInvite=l=>ke(this,void 0,void 0,function*(){var c;const d=!!this._activeCall;if(d&&!this._options.allowIncomingWhileBusy){this._log.info("Device busy; ignoring incoming invite");return}if(!l.callsid||!l.sdp){this._log.debug("#error",l),this.emit(Ie.EventName.Error,new zl.BadRequest("Malformed invite from gateway"));return}const h=l.parameters||{};h.CallSid=h.CallSid||l.callsid;const f=Object.assign({},HA(h.Params));this._makeCallPromise=this._makeCall(f,{callParameters:h,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:l.sdp,reconnectToken:l.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator});let m;try{m=yield this._makeCallPromise}finally{this._makeCallPromise=null}this._calls.push(m),m.once("accept",()=>{this._soundcache.get(Ie.SoundName.Incoming).stop(),this._publishNetworkChange()});const g=!((c=this._audio)===null||c===void 0)&&c.incoming()&&!d?()=>this._soundcache.get(Ie.SoundName.Incoming).play():()=>Promise.resolve();this._showIncomingCall(m,g)}),this._onSignalingOffline=()=>{this._log.info("Stream is offline"),this._edge=null,this._region=null,this._shouldReRegister=this.state!==Ie.State.Unregistered,this._setState(Ie.State.Unregistered)},this._onSignalingReady=()=>{this._log.info("Stream is ready"),this._setState(Ie.State.Registered)},this._publishNetworkChange=()=>{this._activeCall&&this._networkInformation&&this._publisher.info("network-information","network-change",{connection_type:this._networkInformation.type,downlink:this._networkInformation.downlink,downlinkMax:this._networkInformation.downlinkMax,effective_type:this._networkInformation.effectiveType,rtt:this._networkInformation.rtt},this._activeCall)},this._updateInputStream=l=>{const c=this._activeCall;return c&&!l?Promise.reject(new Ks("Cannot unset input device while a call is in progress.")):(this._callInputStream=l,c?c._setInputTracksFromStream(l):Promise.resolve())},this._updateSinkIds=(l,c)=>(l==="ringtone"?this._updateRingtoneSinkIds(c):this._updateSpeakerSinkIds(c)).then(()=>{this._publisher.info("audio",`${l}-devices-set`,{audio_device_ids:c},this._activeCall)},h=>{throw this._publisher.error("audio",`${l}-devices-set-failed`,{audio_device_ids:c,message:h.message},this._activeCall),h}),this._setupLoglevel(r.logLevel),this._logOptions("constructor",r),this.updateToken(t),jm())throw new nn("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!Ie.isSupported&&r.ignoreBrowserSupport)throw window&&window.location&&window.location.protocol==="http:"?new nn("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new nn("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");const n=globalThis,a=n.msBrowser||n.browser||n.chrome;if(this._isBrowserExtension=!!a&&!!a.runtime&&!!a.runtime.id||!!n.safari&&!!n.safari.extension,this._isBrowserExtension&&this._log.info("Running as browser extension."),navigator){const l=navigator;this._networkInformation=l.connection||l.mozConnection||l.webkitConnection}this._networkInformation&&typeof this._networkInformation.addEventListener=="function"&&this._networkInformation.addEventListener("change",this._publishNetworkChange),Ie._getOrCreateAudioContext(),Ie._audioContext&&(Ie._dialtonePlayer||(Ie._dialtonePlayer=new oB(Ie._audioContext))),this._boundDestroy=this.destroy.bind(this),this._boundConfirmClose=this._confirmClose.bind(this),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",this._boundDestroy),window.addEventListener("pagehide",this._boundDestroy)),this.updateOptions(r)}get audio(){return this._audio}connect(){return ke(this,arguments,void 0,function*(t={}){if(this._log.debug(".connect",JSON.stringify(t)),this._throwIfDestroyed(),this._activeCall)throw new Ks("A Call is already active");let r,n,a;if(t.connectToken){try{const f=JSON.parse(decodeURIComponent(atob(t.connectToken)));r=f.customParameters,n=f.parameters,a=f.signalingReconnectToken}catch{throw new zt("Cannot parse connectToken")}if(!n||!n.CallSid||!a)throw new zt("Invalid connectToken")}let l=!1,c={};const d={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:t.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator};a&&n?(l=!0,d.callParameters=n,d.reconnectCallSid=n.CallSid,d.reconnectToken=a,c=r||c):c=t.params||c;let h;this._makeCallPromise=this._makeCall(c,d,l);try{h=this._activeCall=yield this._makeCallPromise}finally{this._makeCallPromise=null}return this._calls.splice(0).forEach(f=>f.ignore()),this._soundcache.get(Ie.SoundName.Incoming).stop(),h.accept({rtcConstraints:t.rtcConstraints}),this._publishNetworkChange(),h})}get calls(){return this._calls}destroy(){var t;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls"),this._calls.slice(0).forEach(n=>n.reject()),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),(t=this._audioProcessorEventObserver)===null||t===void 0||t.destroy(),this._destroyPublisher(),this._networkInformation&&typeof this._networkInformation.removeEventListener=="function"&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(Ie.State.Destroyed),Ls.EventEmitter.prototype.removeAllListeners.call(this)}disconnectAll(){this._log.debug(".disconnectAll"),this._calls.splice(0).forEach(r=>r.disconnect()),this._activeCall&&this._activeCall.disconnect()}get edge(){return this._edge}get home(){return this._home}get identity(){return this._identity}get isBusy(){return!!this._activeCall}register(){return ke(this,void 0,void 0,function*(){if(this._log.debug(".register"),this.state!==Ie.State.Unregistered)throw new Ks(`Attempt to register when device is in state "${this.state}". Must be "${Ie.State.Unregistered}".`);this._shouldReRegister=!1,this._setState(Ie.State.Registering),yield this._streamConnectedPromise||this._setupStream(),yield this._sendPresence(!0),yield Vv(this,Ie.State.Registered,Ie.State.Unregistered)})}get state(){return this._state}get token(){return this._token}toString(){return"[Twilio.Device instance]"}unregister(){return ke(this,void 0,void 0,function*(){if(this._log.debug(".unregister"),this.state!==Ie.State.Registered)throw new Ks(`Attempt to unregister when device is in state "${this.state}". Must be "${Ie.State.Registered}".`);this._shouldReRegister=!1;const t=yield this._streamConnectedPromise,r=new Promise(n=>{t.on("offline",n)});yield this._sendPresence(!1),yield r})}updateOptions(t={}){if(this._logOptions("updateOptions",t),this.state===Ie.State.Destroyed)throw new Ks(`Attempt to "updateOptions" when device is in state "${this.state}".`);this._options=Object.assign(Object.assign(Object.assign({},this._defaultOptions),this._options),t);const r=new Set(this._chunderURIs),n=this._chunderURIs=(this._getChunderws()||lS(this._options.edge)).map(iS);let a=r.size!==n.length;if(!a){for(const l of n)if(!r.has(l)){a=!0;break}}if(this.isBusy&&a)throw new Ks("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(const l of Object.keys(Ie._defaultSounds)){const c=Ie._defaultSounds[l],d=`${Ew}/${c.filename}.${Ie.extension}?cache=${dc}`,h=this._options.sounds&&this._options.sounds[l]||d,f=new(this._options.Sound||ni)(l,h,{audioContext:this._options.disableAudioContextSounds?null:Ie.audioContext,maxDuration:c.maxDuration,shouldLoop:c.shouldLoop});this._soundcache.set(l,f)}this._setupAudioHelper(),this._setupPublisher(),a&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&typeof window.addEventListener=="function"&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))}updateToken(t){if(this._log.debug(".updateToken"),this.state===Ie.State.Destroyed)throw new Ks(`Attempt to "updateToken" when device is in state "${this.state}".`);if(typeof t!="string")throw new zt(fq);this._token=t,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)}_confirmClose(t){if(!this._activeCall)return"";const r=this._options.closeProtection||!1,n=typeof r!="string"?"A call is currently in-progress. Leaving or reloading this page will end the call.":r;return(t||window.event).returnValue=n,n}_destroyAudioHelper(){this._audio&&(this._audio._destroy(),this._audio=null)}_destroyPublisher(){this._publisher&&(this._publisher=null)}_destroyStream(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null}_findCall(t){return this._calls.find(r=>r.parameters.CallSid===t||r.outboundConnectionId===t)||null}_getChunderws(){return typeof this._options.chunderw=="string"?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null}_logOptions(t,r={}){const n=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],a=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if(typeof r=="object"){const l=Object.assign({},r);Object.keys(l).forEach(c=>{!n.includes(c)&&!a.includes(c)&&delete l[c],a.includes(c)&&(l[c]=!0)}),this._log.debug(`.${t}`,JSON.stringify(l))}}_makeCall(t,r){return ke(this,arguments,void 0,function*(n,a,l=!1){var c;const d=(c=this._audio)===null||c===void 0?void 0:c._getInputDevicePromise();d&&(this._log.debug("inputDevicePromise detected, waiting..."),yield d,this._log.debug("inputDevicePromise resolved"));const h={audioHelper:this._audio,onIgnore:()=>{this._soundcache.get(Ie.SoundName.Incoming).stop()},pstream:yield this._streamConnectedPromise||this._setupStream(),publisher:this._publisher,soundcache:this._soundcache};a=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:g=>{!this._activeCall||this._activeCall===g||(this._activeCall.disconnect(),this._removeCall(this._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:Ie._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:()=>this._options.fileInputStream||this._callInputStream,getSinkIds:()=>this._callSinkIds,maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:()=>{var g;return(g=this._audio)===null||g===void 0?void 0:g.disconnect()},twimlParams:n,voiceEventSidGenerator:this._options.voiceEventSidGenerator},a);const f=()=>{if(!this._stream){this._log.warn("UnsetPreferredUri called without a stream");return}this._activeCall===null&&this._calls.length===0&&this._stream.updatePreferredURI(null)},m=new(this._options.Call||Re)(h,a);return this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},m),m.once("accept",()=>{var g,x,b,j,w;this._stream.updatePreferredURI(this._preferredURI),this._removeCall(m),this._activeCall=m,this._audio&&this._audio._maybeStartPollingVolume(),m.direction===Re.CallDirection.Outgoing&&(!((g=this._audio)===null||g===void 0)&&g.outgoing())&&!l&&this._soundcache.get(Ie.SoundName.Outgoing).play();const _={edge:this._edge||this._region};this._options.edge&&(_.selected_edge=Array.isArray(this._options.edge)?this._options.edge:[this._options.edge]),this._publisher.info("settings","edge",_,m),!((x=this._audio)===null||x===void 0)&&x.localProcessedStream&&((b=this._audioProcessorEventObserver)===null||b===void 0||b.emit("enabled",!1)),!((j=this._audio)===null||j===void 0)&&j.remoteProcessedStream&&((w=this._audioProcessorEventObserver)===null||w===void 0||w.emit("enabled",!0))}),m.addListener("error",g=>{m.status()==="closed"&&(this._removeCall(m),f()),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),m.once("cancel",()=>{this._log.info(`Canceled: ${m.parameters.CallSid}`),this._removeCall(m),f(),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),m.once("disconnect",()=>{this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(m),f(),this._maybeStopIncomingSound()}),m.once("reject",()=>{this._log.info(`Rejected: ${m.parameters.CallSid}`),this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(m),f(),this._maybeStopIncomingSound()}),m.on("transportClose",()=>{m.status()===Re.State.Pending&&(this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(m),this._maybeStopIncomingSound())}),m})}_maybeStopIncomingSound(){this._calls.length||this._soundcache.get(Ie.SoundName.Incoming).stop()}_removeCall(t){this._activeCall===t&&(this._activeCall=null,this._makeCallPromise=null);for(let r=this._calls.length-1;r>=0;r--)t===this._calls[r]&&this._calls.splice(r,1)}_sendPresence(t){return ke(this,void 0,void 0,function*(){const r=yield this._streamConnectedPromise;r&&(r.register({audio:t}),t?this._startRegistrationTimer():this._stopRegistrationTimer())})}_setState(t){if(t===this.state)return;this._state=t;const r=this._stateEventMapping[t];this._log.debug(`#${r}`),this.emit(r)}_setupAudioHelper(){this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new iB,this._audioProcessorEventObserver.on("event",({name:r,group:n,isRemote:a})=>{this._publisher.info(n,r,{is_remote:a},this._activeCall)}));const t={audioContext:Ie.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:()=>this._makeCallPromise?(this._log.debug("beforeSetInputDevice pause detected"),this._makeCallPromise):(this._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve()),enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||nq};if(this._audio){this._log.info("Found existing audio helper; updating options..."),this._audio._updateUserOptions(t);return}this._audio=new(this._options.AudioHelper||aB)(this._updateSinkIds,this._updateInputStream,t),this._audio.on("deviceChange",r=>{const n=this._activeCall,a=r.map(l=>l.deviceId);this._publisher.info("audio","device-change",{lost_active_device_ids:a},n),n&&n._mediaHandler._onInputDevicesChanged()})}_setupLoglevel(t){const r=typeof t=="number"||typeof t=="string"?t:lu.levels.ERROR;this._log.setDefaultLevel(r),this._log.info("Set logger default level to",r)}_setupPublisher(){this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());const t={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(t.host=this._options.eventgw),this._home&&(t.host=aS(this._home)),this._publisher=new(this._options.Publisher||Rn)(hq,this.token,t),this._options.publishEvents===!1?this._publisher.disable():this._publisher.on("error",r=>{this._log.warn("Cannot connect to insights.",r)}),this._publisher}_setupStream(){return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||tr)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=Vv(this._stream,"connected","close").then(()=>this._stream)}_showIncomingCall(t,r){let n;return Promise.race([r(),new Promise((a,l)=>{n=setTimeout(()=>{const c="Playing incoming ringtone took too long; it might not play. Continuing execution...";l(new Error(c))},uq)})]).catch(a=>{this._log.warn(a.message)}).then(()=>{clearTimeout(n),this._log.debug("#incoming",JSON.stringify({customParameters:t.customParameters,parameters:t.parameters})),this.emit(Ie.EventName.Incoming,t)})}_startRegistrationTimer(){this._stopRegistrationTimer(),this._regTimer=setTimeout(()=>{this._sendPresence(!0)},dq)}_stopRegistrationTimer(){this._regTimer&&clearTimeout(this._regTimer)}_throwIfDestroyed(){if(this.state===Ie.State.Destroyed)throw new Ks("Device has been destroyed.")}_updateRingtoneSinkIds(t){return Promise.resolve(this._soundcache.get(Ie.SoundName.Incoming).setSinkIds(t))}_updateSpeakerSinkIds(t){Array.from(this._soundcache.entries()).filter(n=>n[0]!==Ie.SoundName.Incoming).forEach(n=>n[1].setSinkIds(t)),this._callSinkIds=t;const r=this._activeCall;return r?r._setSinkIds(t):Promise.resolve()}}Ie._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}};(function(e){(function(t){t.Error="error",t.Incoming="incoming",t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered",t.TokenWillExpire="tokenWillExpire"})(e.EventName||(e.EventName={})),(function(t){t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered"})(e.State||(e.State={})),(function(t){t.Incoming="incoming",t.Outgoing="outgoing",t.Disconnect="disconnect",t.Dtmf0="dtmf0",t.Dtmf1="dtmf1",t.Dtmf2="dtmf2",t.Dtmf3="dtmf3",t.Dtmf4="dtmf4",t.Dtmf5="dtmf5",t.Dtmf6="dtmf6",t.Dtmf7="dtmf7",t.Dtmf8="dtmf8",t.Dtmf9="dtmf9",t.DtmfS="dtmfs",t.DtmfH="dtmfh"})(e.SoundName||(e.SoundName={}))})(Ie||(Ie={}));class Lx{constructor(t,r=!1){this.deleted=!1;let n;const a=t.candidate.split("network-cost ");a[1]&&(n=parseInt(a[1],10)),this.candidateType=t.type,this.ip=t.ip||t.address,this.isRemote=r,this.networkCost=n,this.port=t.port,this.priority=t.priority,this.protocol=t.protocol,this.relatedAddress=t.relatedAddress,this.relatedPort=t.relatedPort,this.tcpType=t.tcpType,this.transportId=t.sdpMid}toPayload(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}}}const hS=94.768;function mq(e,t,r){if(typeof e!="number"||typeof t!="number"||typeof r!="number"||!Xf(e)||!Xf(t)||!Xf(r))return null;const n=e+t*2+10;let a=0;switch(!0){case n<160:a=hS-n/40;break;case n<1e3:a=hS-(n-120)/10;break}switch(!0){case r<=a/2.5:a=Math.max(a-r*2.5,6.52);break;default:a=0;break}return 1+.035*a+7e-6*a*(a-60)*(100-a)}function Xf(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)&&e>=0}var pq={calculate:mq,isNonNegativeNumber:Xf};const gq=5,xq=0,bq=3,vq=1e3,yq=5*1e3,wq={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};function jq(e,t){return t.reduce((r,n)=>r+=n>e?1:0,0)}function _q(e,t){return t.reduce((r,n)=>r+=n<e?1:0,0)}function kq(e){if(e.length<=0)return null;const t=e.reduce((a,l)=>a+l,0)/e.length,r=e.map(a=>Math.pow(a-t,2));return Math.sqrt(r.reduce((a,l)=>a+l,0)/r.length)}function Nq(e){return e.reduce((t,r)=>[...t,...r],[])}class Sq extends Ls.EventEmitter{constructor(t){super(),this._activeWarnings=new Map,this._currentStreaks=new Map,this._inputVolumes=[],this._outputVolumes=[],this._sampleBuffer=[],this._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},this._warningsEnabled=!0,t=t||{},this._getRTCStats=t.getRTCStats||wB,this._mos=t.Mos||pq,this._peerConnection=t.peerConnection,this._thresholds=Object.assign(Object.assign({},wq),t.thresholds);const r=Object.values(this._thresholds).map(n=>n.sampleCount).filter(n=>!!n);this._maxSampleCount=Math.max(gq,...r),this._peerConnection&&this.enable(this._peerConnection)}addVolumes(t,r){this._inputVolumes.push(t),this._outputVolumes.push(r)}disable(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this}disableWarnings(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this}enable(t){if(t){if(this._peerConnection&&t!==this._peerConnection)throw new zt("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=t}if(!this._peerConnection)throw new zt("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),vq),this}enableWarnings(){return this._warningsEnabled=!0,this}hasActiveWarning(t,r){const n=`${t}:${r}`;return!!this._activeWarnings.get(n)}_addSample(t){const r=this._sampleBuffer;r.push(t),r.length>this._maxSampleCount&&r.splice(0,r.length-this._maxSampleCount)}_clearWarning(t,r,n){const a=`${t}:${r}`,l=this._activeWarnings.get(a);!l||Date.now()-l.timeRaised<yq||(this._activeWarnings.delete(a),this.emit("warning-cleared",Object.assign(Object.assign({},n),{name:t,threshold:{name:r,value:this._thresholds[t][r]}})))}_createSample(t,r){const n=r&&r.totals.bytesSent||0,a=r&&r.totals.bytesReceived||0,l=r&&r.totals.packetsSent||0,c=r&&r.totals.packetsReceived||0,d=r&&r.totals.packetsLost||0,h=t.bytesSent-n,f=t.bytesReceived-a,m=t.packetsSent-l,g=t.packetsReceived-c,x=t.packetsLost-d,b=g+x,j=b>0?x/b*100:0,w=t.packetsReceived+t.packetsLost,_=w>0?t.packetsLost/w*100:100,N=typeof t.rtt=="number"||!r?t.rtt:r.rtt,C=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(C);const E=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(E),{audioInputLevel:Math.round(eu(C)),audioOutputLevel:Math.round(eu(E)),bytesReceived:f,bytesSent:h,codecName:t.codecName,jitter:t.jitter,mos:this._mos.calculate(N,t.jitter,r&&j),packetsLost:x,packetsLostFraction:j,packetsReceived:g,packetsSent:m,rtt:N,timestamp:t.timestamp,totals:{bytesReceived:t.bytesReceived,bytesSent:t.bytesSent,packetsLost:t.packetsLost,packetsLostFraction:_,packetsReceived:t.packetsReceived,packetsSent:t.packetsSent}}}_fetchSample(){this._getSample().then(t=>{this._addSample(t),this._raiseWarnings(),this.emit("sample",t)}).catch(t=>{this.disable(),this.emit("error",t)})}_getSample(){return this._getRTCStats(this._peerConnection).then(t=>{let r=null;return this._sampleBuffer.length&&(r=this._sampleBuffer[this._sampleBuffer.length-1]),this._createSample(t,r)})}_raiseWarning(t,r,n){const a=`${t}:${r}`;if(this._activeWarnings.has(a))return;this._activeWarnings.set(a,{timeRaised:Date.now()});const l=this._thresholds[t];let c;if(Array.isArray(l)){const d=l.find(h=>r in h);d&&(c=d[r])}else c=this._thresholds[t][r];this.emit("warning",Object.assign(Object.assign({},n),{name:t,threshold:{name:r,value:c}}))}_raiseWarnings(){this._warningsEnabled&&Object.keys(this._thresholds).forEach(t=>this._raiseWarningsForStat(t))}_raiseWarningsForStat(t){(Array.isArray(this._thresholds[t])?this._thresholds[t]:[this._thresholds[t]]).forEach(n=>{const a=this._sampleBuffer,l=n.clearCount||xq,c=n.raiseCount||bq,d=n.sampleCount||this._maxSampleCount;let h=a.slice(-d);const f=h.map(x=>x[t]);if(f.some(x=>typeof x>"u"||x===null))return;let g;if(typeof n.max=="number"&&(g=jq(n.max,f),g>=c?this._raiseWarning(t,"max",{values:f,samples:h}):g<=l&&this._clearWarning(t,"max",{values:f,samples:h})),typeof n.min=="number"&&(g=_q(n.min,f),g>=c?this._raiseWarning(t,"min",{values:f,samples:h}):g<=l&&this._clearWarning(t,"min",{values:f,samples:h})),typeof n.maxDuration=="number"&&a.length>1){h=a.slice(-2);const x=h[0][t],b=h[1][t],j=this._currentStreaks.get(t)||0,w=x===b?j+1:0;this._currentStreaks.set(t,w),w>=n.maxDuration?this._raiseWarning(t,"maxDuration",{value:w}):w===0&&this._clearWarning(t,"maxDuration",{value:j})}if(typeof n.minStandardDeviation=="number"){const x=this._supplementalSampleBuffers[t];if(!x||x.length<n.sampleCount)return;x.length>n.sampleCount&&x.splice(0,x.length-n.sampleCount);const b=Nq(x.slice(-d)),j=kq(b);if(typeof j!="number")return;j<n.minStandardDeviation?this._raiseWarning(t,"minStandardDeviation",{value:j}):this._clearWarning(t,"minStandardDeviation",{value:j})}[["maxAverage",(x,b)=>x>b],["minAverage",(x,b)=>x<b]].forEach(([x,b])=>{if(typeof n[x]=="number"&&f.length>=d){const j=eu(f);b(j,n[x])?this._raiseWarning(t,x,{values:f,samples:h}):b(j,n.clearValue||n[x])||this._clearWarning(t,x,{values:f,samples:h})}})})}}const fS={factor:1.1,jitter:.5,max:3e4,min:1},Cq=70,Eq=500,Aq=160,Tq=10,Oq=5e3,mS={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new xa.ConnectionError}},pS={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},gS={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},Pq={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"};class Re extends Ls.EventEmitter{get direction(){return this._direction}get codec(){return this._codec}get connectToken(){const t=this._signalingReconnectToken,r=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!t||!r)return;const n=this.customParameters&&typeof this.customParameters.keys=="function"?Array.from(this.customParameters.keys()).reduce((l,c)=>(l[c]=this.customParameters.get(c),l),{}):{},a=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:n,parameters:a,signalingReconnectToken:t})))}constructor(t,r){super(),this.parameters={},this._inputVolumeStreak=0,this._isAnswered=!1,this._isCancelled=!1,this._isRejected=!1,this._latestInputVolume=0,this._latestOutputVolume=0,this._log=new Wr("Call"),this._mediaStatus=Re.State.Pending,this._messages=new Map,this._metricsSamples=[],this._options={MediaHandler:Je,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:()=>!0,voiceEventSidGenerator:Yv},this._outputVolumeStreak=0,this._shouldSendHangup=!0,this._signalingStatus=Re.State.Pending,this._soundcache=new Map,this._status=Re.State.Pending,this._wasConnected=!1,this.toString=()=>"[Twilio.Call instance]",this._emitWarning=(c,d,h,f,m,g)=>{const b=`${c}warning${m?"-cleared":"-raised"}`;if(d==="constant-audio-input-level"&&this.isMuted())return;let j=m?"info":"warning";d==="constant-audio-output-level"&&(j="info");const w={threshold:h};if(f&&(f instanceof Array?w.values=f.map(_=>typeof _=="number"?Math.round(_*100)/100:f):w.value=f),this._publisher.post(j,b,d,{data:w},this),d!=="constant-audio-output-level"){const _=m?"warning-cleared":"warning";this._log.debug(`#${_}`,d),this.emit(_,d,g&&!m?g:null)}},this._onAck=c=>{const{acktype:d,callsid:h,voiceeventsid:f}=c;if(this.parameters.CallSid!==h){this._log.warn(`Received ack from a different callsid: ${h}`);return}d==="message"&&this._onMessageSent(f)},this._onAnswer=c=>{typeof c.reconnect=="string"&&(this._signalingReconnectToken=c.reconnect),!(this._isAnswered&&this._status!==Re.State.Reconnecting)&&(this._setCallSid(c),this._isAnswered=!0,this._maybeTransitionToOpen())},this._onCancel=c=>{const d=c.callsid;this.parameters.CallSid===d&&(this._isCancelled=!0,this._publisher.info("connection","cancel",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=Re.State.Closed,this._log.debug("#cancel"),this.emit("cancel"),this._pstream.removeListener("cancel",this._onCancel))},this._onConnected=()=>{this._log.info("Received connected from pstream"),this._signalingReconnectToken&&this._mediaHandler.version&&this._pstream.reconnect(this._mediaHandler.version.getSDP(),this.parameters.CallSid,this._signalingReconnectToken)},this._onHangup=c=>{if(this.status()!==Re.State.Closed){if(c.callsid&&(this.parameters.CallSid||this.outboundConnectionId)){if(c.callsid!==this.parameters.CallSid&&c.callsid!==this.outboundConnectionId)return}else if(c.callsid)return;if(this._log.info("Received HANGUP from gateway"),c.error){const d=c.error.code,h=Fv(this._options.enableImprovedSignalingErrorPrecision,d),f=typeof h<"u"?new h(c.error.message):new Sn.ConnectionError("Error sent from gateway in HANGUP",c.error);this._log.error("Received an error from the gateway:",f),this._log.debug("#error",f),this.emit("error",f)}this._shouldSendHangup=!1,this._publisher.info("connection","disconnected-by-remote",null,this),this._disconnect(null,!0),this._cleanupEventListeners()}},this._onMediaFailure=c=>{const{ConnectionDisconnected:d,ConnectionFailed:h,IceGatheringFailed:f,LowBytes:m}=Re.MediaFailure,g=c===h||c===f;if(!Tw(window,window.navigator)&&c===h)return this._mediaHandler.onerror(mS);if(this._mediaStatus===Re.State.Reconnecting){if(g){if(Date.now()-this._mediaReconnectStartTime>fS.max)return this._log.warn("Exceeded max ICE retries"),this._mediaHandler.onerror(mS);try{this._mediaReconnectBackoff.backoff()}catch(w){if(!(w.message&&w.message==="Backoff in progress."))throw w}}return}const x=this._mediaHandler.version.pc,b=x&&x.iceConnectionState==="disconnected",j=this._monitor.hasActiveWarning("bytesSent","min")||this._monitor.hasActiveWarning("bytesReceived","min");if(c===m&&b||c===d&&j||g){const w=new xa.ConnectionError("Media connection failed.");this._log.warn("ICE Connection disconnected."),this._publisher.warn("connection","error",w,this),this._publisher.info("connection","reconnecting",null,this),this._mediaReconnectStartTime=Date.now(),this._status=Re.State.Reconnecting,this._mediaStatus=Re.State.Reconnecting,this._mediaReconnectBackoff.reset(),this._mediaReconnectBackoff.backoff(),this._log.debug("#reconnecting"),this.emit("reconnecting",w)}},this._onMediaReconnected=()=>{this._mediaStatus===Re.State.Reconnecting&&(this._log.info("ICE Connection reestablished."),this._mediaStatus=Re.State.Open,this._signalingStatus===Re.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=Re.State.Open))},this._onMessageReceived=c=>{const{callsid:d,content:h,contenttype:f,messagetype:m,voiceeventsid:g}=c;if(this.parameters.CallSid!==d){this._log.warn(`Received a message from a different callsid: ${d}`);return}const x={content:h,contentType:f,messageType:m,voiceEventSid:g};this._publisher.info("call-message",m,{content_type:f,event_type:"received",voice_event_sid:g},this),this._log.debug("#messageReceived",JSON.stringify(x)),this.emit("messageReceived",x)},this._onMessageSent=c=>{if(!this._messages.has(c)){this._log.warn(`Received a messageSent with a voiceEventSid that doesn't exists: ${c}`);return}const d=this._messages.get(c);this._messages.delete(c),this._publisher.info("call-message",d==null?void 0:d.messageType,{content_type:d==null?void 0:d.contentType,event_type:"sent",voice_event_sid:c},this),this._log.debug("#messageSent",JSON.stringify(d)),this.emit("messageSent",d)},this._onRinging=c=>{if(this._setCallSid(c),this._status!==Re.State.Connecting&&this._status!==Re.State.Ringing)return;const d=!!c.sdp;this._status=Re.State.Ringing,this._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:d},this),this._log.debug("#ringing"),this.emit("ringing",d)},this._onRTCSample=c=>{const d=Object.assign(Object.assign({},c),{inputVolume:this._latestInputVolume,outputVolume:this._latestOutputVolume});this._codec=d.codecName,this._metricsSamples.push(d),this._metricsSamples.length>=Tq&&this._publishMetrics(),this.emit("sample",c)},this._onSignalingError=c=>{const{callsid:d,voiceeventsid:h,error:f}=c;if(this.parameters.CallSid!==d){this._log.warn(`Received an error from a different callsid: ${d}`);return}if(h&&this._messages.has(h)){this._messages.delete(h),this._log.warn("Received an error while sending a message.",c),this._publisher.error("call-message","error",{code:f.code,message:f.message,voice_event_sid:h},this);let m;const g=Fv(!!this._options.enableImprovedSignalingErrorPrecision,f.code);typeof g<"u"&&(m=new g(f)),m||(this._log.error("Unknown Call Message Error: ",f),m=new Sn.UnknownError(f.message,f)),this._log.debug("#error",f,m),this.emit("error",m)}},this._onSignalingReconnected=()=>{this._signalingStatus===Re.State.Reconnecting&&(this._log.info("Signaling Connection reestablished."),this._signalingStatus=Re.State.Open,this._mediaStatus===Re.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=Re.State.Open))},this._onTransportClose=()=>{this._log.error("Received transportClose from pstream"),this._log.debug("#transportClose"),this.emit("transportClose"),this._signalingReconnectToken?(this._status=Re.State.Reconnecting,this._signalingStatus=Re.State.Reconnecting,this._publisher.info("connection","reconnecting",null,this),this._log.debug("#reconnecting"),this.emit("reconnecting",new $s.ConnectionDisconnected)):(this._status=Re.State.Closed,this._signalingStatus=Re.State.Closed)},this._reemitWarning=(c,d)=>{const h=/^audio/.test(c.name)?"audio-level-":"network-quality-",f=Pq[c.threshold.name];let m;c.name in pS?m=pS[c.name][c.threshold.name]:c.name in gS&&(m=gS[c.name]);const g=f+m;this._emitWarning(h,g,c.threshold.value,c.values||c.value,d,c)},this._reemitWarningCleared=c=>{this._reemitWarning(c,!0)},this._soundcache=t.soundcache,typeof t.onIgnore=="function"&&(this._onIgnore=t.onIgnore);const n=r&&r.twimlParams||{};this.customParameters=new Map(Object.entries(n).map(([c,d])=>[c,String(d)])),Object.assign(this._options,r),this._options.callParameters&&(this.parameters=this._options.callParameters),this._options.reconnectToken&&(this._signalingReconnectToken=this._options.reconnectToken),this._voiceEventSidGenerator=this._options.voiceEventSidGenerator||Yv,this._direction=this.parameters.CallSid&&!this._options.reconnectCallSid?Re.CallDirection.Incoming:Re.CallDirection.Outgoing,this.parameters?this.callerInfo=this.parameters.StirStatus?{isVerified:this.parameters.StirStatus==="TN-Validation-Passed-A"}:null:this.callerInfo=null,this._mediaReconnectBackoff=new Uv(fS),this._mediaReconnectBackoff.on("ready",()=>this._mediaHandler.iceRestart()),this.outboundConnectionId=Dq();const a=this._publisher=t.publisher;this._direction===Re.CallDirection.Incoming?a.info("connection","incoming",null,this):a.info("connection","outgoing",{preflight:this._options.preflight,reconnect:!!this._options.reconnectCallSid},this);const l=this._monitor=new(this._options.StatsMonitor||Sq);l.on("sample",this._onRTCSample),l.disableWarnings(),setTimeout(()=>l.enableWarnings(),Oq),l.on("warning",(c,d)=>{(c.name==="bytesSent"||c.name==="bytesReceived")&&this._onMediaFailure(Re.MediaFailure.LowBytes),this._reemitWarning(c,d)}),l.on("warning-cleared",c=>{this._reemitWarningCleared(c)}),this._mediaHandler=new this._options.MediaHandler(t.audioHelper,t.pstream,{MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,codecPreferences:this._options.codecPreferences,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,maxAverageBitrate:this._options.maxAverageBitrate}),this.on("volume",(c,d)=>{this._inputVolumeStreak=this._checkVolume(c,this._inputVolumeStreak,this._latestInputVolume,"input"),this._outputVolumeStreak=this._checkVolume(d,this._outputVolumeStreak,this._latestOutputVolume,"output"),this._latestInputVolume=c,this._latestOutputVolume=d}),this._mediaHandler.onaudio=c=>{this._log.debug("#audio"),this.emit("audio",c)},this._mediaHandler.onvolume=(c,d,h,f)=>{l.addVolumes(h/255*32767,f/255*32767),this.emit("volume",c,d)},this._mediaHandler.ondtlstransportstatechange=c=>{const d=c==="failed"?"error":"debug";this._publisher.post(d,"dtls-transport-state",c,null,this)},this._mediaHandler.onpcconnectionstatechange=c=>{let d="debug";const h=this._mediaHandler.getRTCDtlsTransport();c==="failed"&&(d=h&&h.state==="failed"?"error":"warning"),this._publisher.post(d,"pc-connection-state",c,null,this)},this._mediaHandler.onicecandidate=c=>{const d=new Lx(c).toPayload();this._publisher.debug("ice-candidate","ice-candidate",d,this)},this._mediaHandler.onselectedcandidatepairchange=c=>{const d=new Lx(c.local).toPayload(),h=new Lx(c.remote,!0).toPayload();this._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:d,remote_candidate:h},this)},this._mediaHandler.oniceconnectionstatechange=c=>{const d=c==="failed"?"error":"debug";this._publisher.post(d,"ice-connection-state",c,null,this)},this._mediaHandler.onicegatheringfailure=c=>{this._publisher.warn("ice-gathering-state",c,null,this),this._onMediaFailure(Re.MediaFailure.IceGatheringFailed)},this._mediaHandler.onicegatheringstatechange=c=>{this._publisher.debug("ice-gathering-state",c,null,this)},this._mediaHandler.onsignalingstatechange=c=>{this._publisher.debug("signaling-state",c,null,this)},this._mediaHandler.ondisconnected=c=>{this._log.warn(c),this._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:c},this),this._log.debug("#warning","ice-connectivity-lost"),this.emit("warning","ice-connectivity-lost"),this._onMediaFailure(Re.MediaFailure.ConnectionDisconnected)},this._mediaHandler.onfailed=c=>{this._onMediaFailure(Re.MediaFailure.ConnectionFailed)},this._mediaHandler.onconnected=()=>{this._status===Re.State.Reconnecting&&this._onMediaReconnected()},this._mediaHandler.onreconnected=c=>{this._log.info(c),this._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:c},this),this._log.debug("#warning-cleared","ice-connectivity-lost"),this.emit("warning-cleared","ice-connectivity-lost"),this._onMediaReconnected()},this._mediaHandler.onerror=c=>{c.disconnect===!0&&this._disconnect(c.info&&c.info.message);const d=c.info.twilioError||new Sn.UnknownError(c.info.message);this._log.error("Received an error from MediaStream:",c),this._log.debug("#error",d),this.emit("error",d)},this._mediaHandler.onopen=()=>{this._status===Re.State.Open||this._status===Re.State.Reconnecting||(this._status===Re.State.Ringing||this._status===Re.State.Connecting?(this.mute(this._mediaHandler.isMuted),this._mediaStatus=Re.State.Open,this._maybeTransitionToOpen()):this._mediaHandler.close())},this._mediaHandler.onclose=()=>{this._status=Re.State.Closed,this._options.shouldPlayDisconnect&&this._options.shouldPlayDisconnect()&&!this._isCancelled&&!this._isRejected&&this._soundcache.get(Ie.SoundName.Disconnect).play(),l.disable(),this._publishMetrics(),!this._isCancelled&&!this._isRejected&&(this._log.debug("#disconnect"),this.emit("disconnect",this))},this._pstream=t.pstream,this._pstream.on("ack",this._onAck),this._pstream.on("cancel",this._onCancel),this._pstream.on("error",this._onSignalingError),this._pstream.on("ringing",this._onRinging),this._pstream.on("transportClose",this._onTransportClose),this._pstream.on("connected",this._onConnected),this._pstream.on("message",this._onMessageReceived),this.on("error",c=>{this._publisher.error("connection","error",{code:c.code,message:c.message},this),this._pstream&&this._pstream.status==="disconnected"&&this._cleanupEventListeners()}),this.on("disconnect",()=>{this._cleanupEventListeners()})}_setInputTracksFromStream(t){return this._mediaHandler.setInputTracksFromStream(t)}_setSinkIds(t){return this._mediaHandler._setSinkIds(t)}accept(t){if(this._log.debug(".accept",t),this._status!==Re.State.Pending){this._log.debug(`.accept noop. status is '${this._status}'`);return}t=t||{};const r=t.rtcConfiguration||this._options.rtcConfiguration,n=t.rtcConstraints||this._options.rtcConstraints||{},a={audio:typeof n.audio<"u"?n.audio:!0};this._status=Re.State.Connecting;const l=()=>{if(this._status!==Re.State.Connecting){this._cleanupEventListeners(),this._mediaHandler.close();return}const h=m=>{const g=this._direction===Re.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";this._publisher.info("connection",g,null,this);const{codecName:x,codecParams:b}=qB(this._mediaHandler.version.getSDP());this._publisher.info("settings","codec",{codec_params:b,selected_codec:x},this),this._monitor.enable(m)},f=typeof this._options.getSinkIds=="function"&&this._options.getSinkIds();if(Array.isArray(f)&&this._mediaHandler._setSinkIds(f).catch(()=>{}),this._pstream.addListener("hangup",this._onHangup),this._direction===Re.CallDirection.Incoming)this._isAnswered=!0,this._pstream.on("answer",this._onAnswer),this._mediaHandler.answerIncomingCall(this.parameters.CallSid,this._options.offerSdp,r,h);else{const m=Array.from(this.customParameters.entries()).map(g=>`${encodeURIComponent(g[0])}=${encodeURIComponent(g[1])}`).join("&");this._pstream.on("answer",this._onAnswer),this._mediaHandler.makeOutgoingCall(m,this._signalingReconnectToken,this._options.reconnectCallSid||this.outboundConnectionId,r,h)}};this._options.beforeAccept&&this._options.beforeAccept(this);const c=typeof this._options.getInputStream=="function"&&this._options.getInputStream();(c?this._mediaHandler.setInputTracksFromStream(c):this._mediaHandler.openDefaultDeviceWithConstraints(a)).then(()=>{this._publisher.info("get-user-media","succeeded",{data:{audioConstraints:a}},this),l()},h=>{let f;h.code===31208||["PermissionDeniedError","NotAllowedError"].indexOf(h.name)!==-1?(f=new bc.PermissionDeniedError,this._publisher.error("get-user-media","denied",{data:{audioConstraints:a,error:h}},this)):(f=new bc.AcquisitionFailedError,this._publisher.error("get-user-media","failed",{data:{audioConstraints:a,error:h}},this)),this._disconnect(),this._log.debug("#error",h),this.emit("error",f)})}disconnect(){this._log.debug(".disconnect"),this._disconnect()}getLocalStream(){return this._mediaHandler&&this._mediaHandler.stream}getRemoteStream(){return this._mediaHandler&&this._mediaHandler._remoteStream}ignore(){if(this._log.debug(".ignore"),this._status!==Re.State.Pending){this._log.debug(`.ignore noop. status is '${this._status}'`);return}this._status=Re.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()}isMuted(){return this._mediaHandler.isMuted}mute(t=!0){this._log.debug(".mute",t);const r=this._mediaHandler.isMuted;this._mediaHandler.mute(t);const n=this._mediaHandler.isMuted;r!==n&&(this._publisher.info("connection",n?"muted":"unmuted",null,this),this._log.debug("#mute",n),this.emit("mute",n,this))}postFeedback(t,r){if(typeof t>"u"||t===null)return this._postFeedbackDeclined();if(!Object.values(Re.FeedbackScore).includes(t))throw new zt(`Feedback score must be one of: ${Object.values(Re.FeedbackScore)}`);if(typeof r<"u"&&r!==null&&!Object.values(Re.FeedbackIssue).includes(r))throw new zt(`Feedback issue must be one of: ${Object.values(Re.FeedbackIssue)}`);return this._publisher.info("feedback","received",{issue_name:r,quality_score:t},this,!0)}reject(){if(this._log.debug(".reject"),this._status!==Re.State.Pending){this._log.debug(`.reject noop. status is '${this._status}'`);return}this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=Re.State.Closed,this._log.debug("#reject"),this.emit("reject")}sendDigits(t){if(this._log.debug(".sendDigits",t),t.match(/[^0-9*#w]/))throw new zt("Illegal character passed into sendDigits");const r=this._options.customSounds||{},n=[];t.split("").forEach(d=>{let h=d!=="w"?`dtmf${d}`:"";h==="dtmf*"&&(h="dtmfs"),h==="dtmf#"&&(h="dtmfh"),n.push(h)});const a=()=>{const d=n.shift();d&&(this._options.dialtonePlayer&&!r[d]?this._options.dialtonePlayer.play(d):this._soundcache.get(d).play()),n.length&&setTimeout(()=>a(),200)};a();const l=this._mediaHandler.getOrCreateDTMFSender();function c(d){if(!d.length)return;const h=d.shift();h&&h.length&&l.insertDTMF(h,Aq,Cq),setTimeout(c.bind(null,d),Eq)}if(l){if(!("canInsertDTMF"in l)||l.canInsertDTMF){this._log.info("Sending digits using RTCDTMFSender"),c(t.split("w"));return}this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),this._pstream!==null&&this._pstream.status!=="disconnected")this._pstream.dtmf(this.parameters.CallSid,t);else{const d=new Sn.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",d),this.emit("error",d)}}sendMessage(t){this._log.debug(".sendMessage",JSON.stringify(t));const{content:r,contentType:n,messageType:a}=t;if(typeof r>"u"||r===null)throw new zt("`content` is empty");if(typeof a!="string")throw new zt("`messageType` must be a string.");if(a.length===0)throw new zt("`messageType` must be a non-empty string.");if(this._pstream===null)throw new Ks("Could not send CallMessage; Signaling channel is disconnected");const l=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new Ks("Could not send CallMessage; Call has no CallSid");const c=this._voiceEventSidGenerator();return this._messages.set(c,{content:r,contentType:n,messageType:a,voiceEventSid:c}),this._pstream.sendMessage(l,r,n,a,c),c}status(){return this._status}_checkVolume(t,r,n,a){const l=r>=10;let c=0;return n===t&&(c=r),c>=10?this._emitWarning("audio-level-",`constant-audio-${a}-level`,10,c,!1):l&&this._emitWarning("audio-level-",`constant-audio-${a}-level`,10,c,!0),c}_cleanupEventListeners(){const t=()=>{this._pstream&&(this._pstream.removeListener("ack",this._onAck),this._pstream.removeListener("answer",this._onAnswer),this._pstream.removeListener("cancel",this._onCancel),this._pstream.removeListener("error",this._onSignalingError),this._pstream.removeListener("hangup",this._onHangup),this._pstream.removeListener("ringing",this._onRinging),this._pstream.removeListener("transportClose",this._onTransportClose),this._pstream.removeListener("connected",this._onConnected),this._pstream.removeListener("message",this._onMessageReceived))};t(),setTimeout(t,0)}_createMetricPayload(){const t={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:dc};return this._options.gateway&&(t.gateway=this._options.gateway),t.direction=this._direction,t}_disconnect(t,r){if(t=typeof t=="string"?t:null,!(this._status!==Re.State.Open&&this._status!==Re.State.Connecting&&this._status!==Re.State.Reconnecting&&this._status!==Re.State.Ringing)){if(this._log.info("Disconnecting..."),this._pstream!==null&&this._pstream.status!=="disconnected"&&this._shouldSendHangup){const n=this.parameters.CallSid||this.outboundConnectionId;n&&this._pstream.hangup(n,t)}this._cleanupEventListeners(),this._mediaHandler.close(),r||this._publisher.info("connection","disconnected-by-local",null,this)}}_maybeTransitionToOpen(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=Re.State.Open,this._mediaHandler&&this._mediaHandler.status==="open"&&(this._status=Re.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))}_postFeedbackDeclined(){return this._publisher.info("feedback","received-none",null,this,!0)}_publishMetrics(){this._metricsSamples.length!==0&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(t=>{this._log.warn("Unable to post metrics to Insights. Received error:",t)})}_setCallSid(t){const r=t.callsid;r&&(this.parameters.CallSid=r,this._mediaHandler.callSid=r)}}Re.toString=()=>"[Twilio.Call class]";(function(e){(function(t){t.Closed="closed",t.Connecting="connecting",t.Open="open",t.Pending="pending",t.Reconnecting="reconnecting",t.Ringing="ringing"})(e.State||(e.State={})),(function(t){t.AudioLatency="audio-latency",t.ChoppyAudio="choppy-audio",t.DroppedCall="dropped-call",t.Echo="echo",t.NoisyCall="noisy-call",t.OneWayAudio="one-way-audio"})(e.FeedbackIssue||(e.FeedbackIssue={})),(function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"})(e.FeedbackScore||(e.FeedbackScore={})),(function(t){t.Incoming="INCOMING",t.Outgoing="OUTGOING"})(e.CallDirection||(e.CallDirection={})),(function(t){t.Opus="opus",t.PCMU="pcmu"})(e.Codec||(e.Codec={})),(function(t){t.None="none",t.Timeout="timeout"})(e.IceGatheringFailureReason||(e.IceGatheringFailureReason={})),(function(t){t.ConnectionDisconnected="ConnectionDisconnected",t.ConnectionFailed="ConnectionFailed",t.IceGatheringFailed="IceGatheringFailed",t.LowBytes="LowBytes"})(e.MediaFailure||(e.MediaFailure={}))})(Re||(Re={}));function Dq(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const tT=v.createContext(null),Sm=()=>{const e=v.useContext(tT);if(!e)throw new Error("useCall must be used within a CallProvider");return e},Mq=({children:e})=>{const[t,r]=v.useState(null),[n,a]=v.useState(null),[l,c]=v.useState("disconnected"),[d,h]=v.useState(()=>typeof window<"u"?localStorage.getItem("activeLeadId"):null),f=Ae=>{console.log("[CallContext] setActiveLeadId:",Ae),h(Ae),Ae?localStorage.setItem("activeLeadId",Ae):localStorage.removeItem("activeLeadId")},[m,g]=v.useState("idle"),[x,b]=v.useState(!1),[j,w]=v.useState(!1),[_,N]=v.useState(!1),[C,E]=v.useState(0),[A,S]=v.useState(!1),[T,D]=v.useState("pending"),[P,I]=v.useState(null),[$,M]=v.useState(null),[R,q]=v.useState({isActive:!1,isPaused:!1,queue:[],currentIndex:0,previewCountdown:0,isInPreview:!1}),[H,W]=v.useState([]),L=v.useRef(R),B=v.useRef(null);v.useEffect(()=>{L.current=R},[R]);const[G,ce]=v.useState([]),[ge,U]=v.useState({}),V=v.useRef({});v.useEffect(()=>{V.current=ge},[ge]);const te=(Ae,Ee)=>{let He=Ae==="agent"?"agent":"customer";return typeof window<"u"&&localStorage.getItem("forceSwapRoles")==="1"&&(He=He==="agent"?"customer":"agent",console.log(`[UI-RoleNorm] FORCE_SWAP active: ${Ae} -> ${He}`)),He};v.useEffect(()=>{const Ae=Ee=>{if(Ee.ctrlKey&&Ee.shiftKey&&Ee.key==="R"){Ee.preventDefault();const He=localStorage.getItem("forceSwapRoles")||"0",Z=He==="1"?"0":"1";localStorage.setItem("forceSwapRoles",Z),console.log(`[UI-RoleSwap] Toggled forceSwapRoles: ${He} -> ${Z}`),alert(`Role Swap: ${Z==="1"?"ENABLED":"DISABLED"}

Refresh the page to see changes in new calls.`)}};return window.addEventListener("keydown",Ae),()=>window.removeEventListener("keydown",Ae)},[]);const[he,ye]=v.useState({score:50,stage:"",insight:"  ..."}),[Ne,ve]=v.useState([]),[je,Q]=v.useState(null),_e=v.useRef(null),de=v.useRef(null),Y=v.useRef(null),[we,Oe]=v.useState(0),[lt,ut]=v.useState(!1),Ct=v.useRef(Date.now()),rr=async()=>{try{if(l==="ready")return;c("connecting"),console.log("[Twilio] Fetching token...");const Ae=await fetch("/api/token");if(!Ae.ok){const Z=await Ae.text();throw console.error("[Twilio] Token fetch failed:",Ae.status,Z),new Error(`Token fetch failed: ${Ae.status}`)}const Ee=await Ae.json();console.log("[Twilio] Token received, initializing device...");const He=new Ie(Ee.token,{codecPreferences:["opus","pcmu"]});He.on("registered",()=>{console.log("[Twilio] Device Registered successfully"),b(!0),c("ready")}),He.on("error",Z=>{var Le;const Ue=Z.callSid||((Le=n==null?void 0:n.parameters)==null?void 0:Le.CallSid);console.error("[Twilio] Device Error:",{code:Z.code,message:Z.message,twilioError:Z.twilioError,originalError:Z.originalError,callSid:Ue}),Ue&&(console.info(` Twilio Debugger Link: https://console.twilio.com/us1/monitor/logs/call/${Ue}`),console.info(" General Debugger: https://console.twilio.com/us1/monitor/logs/debugger")),Z.code===31401?console.error("[Twilio] Permission Denied - Check microphone access"):Z.code===31005||Z.code===31009?console.error("[Twilio] WebSocket/Transport Error (31005/31009) - Check network / firewall / region"):Z.code===31e3&&console.error("[Twilio] Unknown Error - See details above"),c("error"),b(!1)}),He.on("unregistered",()=>{console.log("[Twilio] Device Unregistered"),c("disconnected"),b(!1)}),await He.register(),r(He),console.log("[Twilio] Device registered and ready")}catch(Ae){console.error("[Twilio] Device Init Error:",Ae),c("error"),b(!1)}};v.useEffect(()=>(m==="connected"?de.current=setInterval(()=>{E(Ae=>Ae+1)},1e3):de.current&&clearInterval(de.current),()=>{de.current&&clearInterval(de.current)}),[m]);const[_r,It]=v.useState([]),[oe,Ce]=v.useState([]),Qe=v.useRef({});v.useEffect(()=>{(async()=>{var Ee,He;if(!d){It([]);return}Qe.current[d]?(console.log("[CallContext] Cache hit for lead:",d),It(Qe.current[d])):It([]),console.log("[CallContext] Fetching history for lead:",d);try{const{data:{session:Z}}=await me.auth.getSession(),Ue=Z==null?void 0:Z.access_token,Le=await fetch(`/api/calls/lead/${d}`,{headers:{Authorization:`Bearer ${Ue}`}}),bt=await Le.json();if(!Le.ok||!bt.success){console.error("[CallContext] History fetch error:",bt.error),Le.status===403&&(console.warn("[CallContext] Access Forbidden. Clearing active lead."),f(null),localStorage.removeItem("activeLeadId"));return}const nt=[];(Ee=bt.calls)==null||Ee.forEach(Dt=>{Dt.transcript&&Object.entries(Dt.transcript).forEach(([Ut,nr])=>{Array.isArray(nr)&&nr.forEach((Zn,Or)=>{nt.push({id:`${Dt.id}-${Ut}-${Or}`,speaker:Ut,text:Zn.text,timestamp:new Date(Zn.timestamp||Dt.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isFinal:!0})})})}),nt.sort((Dt,Ut)=>Dt.timestamp.localeCompare(Ut.timestamp)),console.log("[CallContext] Loaded history:",nt.length,"messages from",(He=bt.calls)==null?void 0:He.length,"calls"),Qe.current[d]=nt,It(nt),Ce(bt.calls||[])}catch(Z){console.error("[CallContext] History fetch error:",Z)}})()},[d]);const tt=Ae=>{var Ue;if(((Ue=_e.current)==null?void 0:Ue.readyState)===WebSocket.OPEN){console.log("[WS] Already connected");return}const He=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws/coach?callSid=${Ae}`;console.log(`[WS] Connecting to: ${He} (attempt ${we+1})`);const Z=new WebSocket(He);_e.current=Z,Z.onopen=()=>{console.log("[WS]  Connected successfully"),ut(!1),Oe(0),we>0&&Z.send(JSON.stringify({type:"sync_request",since:Ct.current}))},Z.onmessage=Le=>{var bt;try{const nt=JSON.parse(Le.data);if(Ct.current=Date.now(),nt.type==="transcript"){const Dt=nt.isFinal===!0,Ut=te(nt.role,nt.track),nr=nt.segmentId||`${Ut}-${Math.floor(Date.now()/3e3)}`,Or=new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(console.log(`[WS-msg] role=${nt.role} normalized=${Ut} isFinal=${Dt} text="${nt.text.substring(0,20)}..." track=${nt.track} segmentId=${nr}`),!Dt)U(on=>{const sr=on[Ut];let Ze=nt.text;if(sr&&sr.text){const cr=sr.text;Ze.startsWith(cr)||(cr.startsWith(Ze)&&cr.length>Ze.length?Ze=cr:Ze=Ze)}return{...on,[Ut]:{id:`draft-${Ut}`,speaker:Ut,text:Ze,timestamp:Or,isFinal:!1}}});else{const on=V.current[Ut];let sr=nt.text;on&&on.text&&on.text.length>sr.length&&on.text.startsWith(sr)&&(console.log(`[UI-Debug] Monotonic Rescue: Final "${sr}" rejected. Kept "${on.text}"`),sr=on.text),sr=(cr=>{const Pr=cr.split(/\s+/),X=[];let Se=0;for(;Se<Pr.length;){let Pe=!1;for(let Ye=Math.min(10,Math.floor((Pr.length-Se)/2));Ye>=3;Ye--){const at=Pr.slice(Se,Se+Ye).join(" "),St=Pr.slice(Se+Ye,Se+Ye*2).join(" ");if(at===St&&at.length>=10){X.push(...Pr.slice(Se,Se+Ye)),Se+=Ye*2,Pe=!0,console.log(`[UI-Dedup] Removed duplicate phrase: "${at}"`);break}}Pe||(X.push(Pr[Se]),Se++)}return X.join(" ")})(sr),console.log(`[UI-Debug] role=${Ut} isFinal=true newLen=${nt.text.length} draftLen=${(bt=on==null?void 0:on.text)==null?void 0:bt.length} commitLen=${sr.length} text="${sr.substring(0,10)}..."`),ce(cr=>{const Pr=cr[cr.length-1],X=[...cr],Se=(Pe,Ye)=>{const at=Math.min(Pe.length,Ye.length,50);for(let St=at;St>3;St--)if(Pe.endsWith(Ye.substring(0,St)))return St;return 0};if(Pr&&Pr.speaker===Ut){const Pe=Pr.text||"";if(Pe.includes(sr))return cr;if(sr.includes(Pe))return X[cr.length-1]={...Pr,text:sr,timestamp:Or},X;const Ye=Se(Pe,sr);if(Ye>0){const at=Pe+sr.substring(Ye);return console.log(`[UI-Overlap] Found ${Ye} char overlap, merging`),X[cr.length-1]={...Pr,text:at,timestamp:Or},X}return X[cr.length-1]={...Pr,text:`${Pr.text} ${sr}`,timestamp:Or},X}else return[...cr,{id:Date.now().toString(),speaker:Ut,text:sr,timestamp:Or,isFinal:!0}]}),U(cr=>({...cr,[Ut]:null}))}}nt.type==="coaching"&&(ye(Dt=>({...Dt,score:nt.score??Dt.score,stage:nt.stage??Dt.stage,insight:nt.message??Dt.insight,suggestion:nt.suggested_reply,signals:nt.signals||Dt.signals||[]})),ve(Dt=>Dt.some(nr=>nr.message===nt.message&&Math.abs(nr.timestamp-Date.now())<5e3)?Dt:[...Dt,{type:"coaching",message:nt.message,severity:nt.severity||"info",timestamp:Date.now()}])),nt.type==="call_summary"&&(console.log("[Summary] Received via WS, summaryStatus=ready",nt.data),Q(nt.data),D("ready"))}catch(nt){console.error("WS Parse Error",nt)}},Z.onerror=Le=>{console.error("[WS]  Error:",Le)},Z.onclose=Le=>{if(console.log(`[WS]  Closed (${Le.code}: ${Le.reason||"No reason"})`),!Le.wasClean&&we<10&&j){const bt=Math.min(1e3*Math.pow(2,we),3e4);console.log(`[WS]  Reconnecting in ${bt}ms (attempt ${we+1})`),ut(!0),Y.current=setTimeout(()=>{Oe(nt=>nt+1),tt(Ae)},bt)}else we>=10&&(console.error("[WS]  Max reconnection attempts reached"),alert("  .    ."),ut(!1))}};v.useEffect(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);const xe=async(Ae,Ee,He)=>{if(t)try{g("dialing"),w(!0),E(0),ce([]),ve([]),Q(null),ye({score:50,stage:"",insight:" ..."});let Z=Ae.replace(/\D/g,"");if(Z.startsWith("0")?Z="+972"+Z.substring(1):Z.startsWith("+")||Z.startsWith("972")&&(Z="+"+Z),Ae.startsWith("+")&&!Z.startsWith("+")&&(Z="+"+Z),console.log("[CallContext] Starting call trigger:",{formattedPhone:Z,deviceStatus:!!t,readyState:t==null?void 0:t.state}),!t){console.error("[CallContext] Start Call Failed: Device not initialized"),alert("   .    .");return}console.log("[CallContext] Starting call to:",Z);try{await navigator.mediaDevices.getUserMedia({audio:!0})}catch(Le){console.error("[CallContext] Mic Permission Denied",Le),alert(" .     ."),g("idle"),w(!1);return}const Ue=await t.connect({params:{target_number:Z,agent_id:Ee||"unknown",lead_id:He||"unknown"}});Ue.on("accept",()=>{console.log("Call Accepted"),g("connected"),a(Ue);const Le=Ue.parameters.CallSid;I(Le),console.log("[Summary] callSessionId stored:",Le),tt(Le)}),Ue.on("disconnect",async()=>{var nt,Dt,Ut;console.log("Call Disconnected"),w(!1),g("idle"),a(null);const Le=C,bt=d;if(bt&&Le<15){console.log("[AutoRetry] Short call detected, scheduling retry:",{leadId:bt,duration:Le});try{const{data:{session:nr}}=await me.auth.getSession();let Zn=(Dt=(nt=nr==null?void 0:nr.user)==null?void 0:nt.user_metadata)==null?void 0:Dt.organization_id;if(!Zn&&((Ut=nr==null?void 0:nr.user)!=null&&Ut.id)){const{data:Or}=await me.from("profiles").select("organization_id").eq("id",nr.user.id).single();Zn=Or==null?void 0:Or.organization_id}Zn&&(await fetch(`/api/leads/${bt}/record-attempt`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({disposition:"no_answer",organizationId:Zn})}),console.log("[AutoRetry]  Retry scheduled for lead:",bt))}catch(nr){console.warn("[AutoRetry] Failed to schedule retry:",nr)}}console.log("[Summary] modalOpened, summaryStatus=generating"),D("generating"),S(!0),setTimeout(()=>{D(nr=>nr==="generating"?(console.log("[Summary] Timeout - marking as ready with available data"),"ready"):nr)},15e3)}),Ue.on("error",Le=>{console.error("Call Error:",{name:Le.name,message:Le.message,code:Le.code,originalError:Le.originalError,info:Le.toString()}),g("idle"),w(!1)})}catch(Z){console.error("Start Call Error",Z),g("idle"),w(!1)}},Be=()=>{n?n.disconnect():t&&t.disconnectAll(),g("idle")},pt=()=>Q(null),se=()=>{if(n){const Ae=!_;n.mute(Ae),N(Ae),console.log(`[CallContext] Mute toggled: ${Ae?"MUTED":"UNMUTED"}`)}else console.warn("[CallContext] Cannot toggle mute - no active call")},Te=()=>{(je||G.length>0)&&M({leadId:d,summary:je,transcripts:[...G],coachingTips:Ne,duration:C}),S(!1),D("pending"),I(null),console.log("[Summary] Modal dismissed, states reset")},Ge=async()=>{if(H.length===0){console.log("[CallContext] Queue empty, cannot dial next.");return}const Ae=H[0],Ee=H.slice(1);console.log(" Dialing Next Lead:",Ae.name),W(Ee),f(Ae.id),S(!1),Ae.phone?setTimeout(()=>{xe(Ae.phone,void 0,Ae.id)},500):(console.warn("Next lead has no phone:",Ae),alert("     "))},ht=()=>{$&&(Q($.summary),S(!0),D($.summary?"ready":"pending"),console.log("[Summary] Re-showing last call summary"))},xt=$!==null,$t=Ae=>{if(console.log("[PowerDialer] Starting with",Ae.length,"leads"),Ae.length===0){console.warn("[PowerDialer] No leads provided");return}q({isActive:!0,isPaused:!1,queue:Ae,currentIndex:0,previewCountdown:0,isInPreview:!1})},wt=()=>{console.log("[PowerDialer] Stopped"),B.current&&(clearInterval(B.current),B.current=null),q({isActive:!1,isPaused:!1,queue:[],currentIndex:0,previewCountdown:0,isInPreview:!1})},ft=()=>{console.log("[PowerDialer] Paused"),B.current&&(clearInterval(B.current),B.current=null),q(Ae=>({...Ae,isPaused:!0,isInPreview:!1,previewCountdown:0}))},gt=()=>{console.log("[PowerDialer] Resumed"),q(Ae=>({...Ae,isPaused:!1})),Ln()},En=()=>{console.log("[PowerDialer] Skipping to next lead"),B.current&&(clearInterval(B.current),B.current=null),q(Ae=>{const Ee=Ae.currentIndex+1;return Ee>=Ae.queue.length?(console.log("[PowerDialer] No more leads, stopping"),{...Ae,isActive:!1,isInPreview:!1}):{...Ae,currentIndex:Ee,isInPreview:!1,previewCountdown:0}}),setTimeout(()=>Ln(),100)},Ln=()=>{const Ae=L.current;if(!(!Ae.isActive||Ae.isPaused)){if(Ae.currentIndex>=Ae.queue.length){console.log("[PowerDialer] Queue complete"),wt();return}console.log("[PowerDialer] Starting 5 second preview"),q(Ee=>({...Ee,isInPreview:!0,previewCountdown:5})),B.current=setInterval(()=>{q(Ee=>{if(!Ee.isActive||Ee.isPaused)return B.current&&clearInterval(B.current),Ee;if(Ee.previewCountdown<=1){B.current&&clearInterval(B.current);const He=Ee.queue[Ee.currentIndex];return He&&(console.log("[PowerDialer] Auto-calling lead:",He.name),xe(He.phone,void 0,He.id)),{...Ee,isInPreview:!1,previewCountdown:0}}return{...Ee,previewCountdown:Ee.previewCountdown-1}})},1e3)}};v.useEffect(()=>{!A&&L.current.isActive&&!L.current.isPaused&&m==="idle"&&(q(Ae=>{const Ee=Ae.currentIndex+1;return Ee>=Ae.queue.length?(console.log("[PowerDialer] All leads called, stopping"),{...Ae,isActive:!1}):{...Ae,currentIndex:Ee}}),setTimeout(()=>Ln(),500))},[A,m]);const jn=[...G,...Object.values(ge).filter(Boolean)];return s.jsx(tT.Provider,{value:{device:t,activeCall:n,connectionStatus:l,callStatus:m,isReady:x,isOnCall:j,isMuted:_,callDuration:C,transcripts:jn,coachingData:he,activeLeadId:d,setActiveLeadId:f,callSummary:je,historyCalls:oe||[],showSummaryModal:A,summaryStatus:T,callSessionId:P,dismissSummaryModal:Te,hasLastCall:xt,showLastSummary:ht,initDevice:rr,startCall:xe,hangup:Be,clearSummary:pt,toggleMute:se,powerDialer:R,startPowerDialer:$t,stopPowerDialer:wt,pausePowerDialer:ft,resumePowerDialer:gt,skipToNextLead:En,smartQueue:H,setSmartQueue:W,dialNextLead:Ge},children:e})},Rq=e=>{const t=e.toLowerCase();return t.includes("")||t.includes("intro")?["  ( + )",'  ("   ?")','  ("  ...")',"   (Hook)"]:t.includes("")||t.includes("discovery")||t.includes("")?["   ?","   ?","    ?","      ?","   ?"]:t.includes("")||t.includes("demo")||t.includes("")?["   "," ROI /  ","    (Social Proof)",'  ("     ?")']:t.includes("")||t.includes("objection")?["  ( )",' (" ...")','  (" ...")'," ",'  ("   ?")']:t.includes("")||t.includes("closing")?[" ","  ",'  (" ?")',"   (Next Steps)"]:[" ","  ","","  "]},Iq=({stages:e,currentStageIdx:t,setStageIdx:r,suggestions:n})=>{const[a,l]=v.useState(null),c=e.length>0?e:[" "," "," "," ",""],d=Math.min(t,c.length-1),h=Rq(c[d]),f=[{id:"price",label:" ",response:"  ,  .    -ROI      ."},{id:"send_info",label:" ",response:".      ,      ?"},{id:"competitor",label:"  ",response:"!      ?    ..."},{id:"busy",label:"  ",response:" .   30     ,    . ?"}];return s.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-slate-900 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-950/50",children:[s.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3",children:" "}),s.jsxs("div",{className:"relative flex justify-between items-center z-0",children:[s.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-slate-200 dark:bg-slate-800 -z-10"}),c.map((m,g)=>{const x=g===d,b=g<d;return s.jsxs("button",{onClick:()=>r(g),className:`relative group flex flex-col items-center focus:outline-none transition-all duration-300 ${x?"scale-110":""}`,title:m,children:[s.jsx("div",{className:`
                  w-6 h-6 rounded-full flex items-center justify-center border-2 transition-colors duration-300 bg-white dark:bg-slate-900
                  ${x?"border-brand-500 text-brand-500 shadow-[0_0_10px_rgba(168,85,247,0.3)]":b?"border-emerald-500 text-emerald-500":"border-slate-300 dark:border-slate-600 text-slate-300"}
                `,children:b?s.jsx(At,{className:"w-3.5 h-3.5"}):s.jsx("div",{className:`w-2 h-2 rounded-full ${x?"bg-brand-500":"bg-transparent"}`})}),x&&s.jsx("span",{className:"absolute top-8 text-[10px] font-bold text-brand-600 dark:text-brand-400 whitespace-nowrap bg-brand-50 dark:bg-brand-900/30 px-2 py-0.5 rounded-full animate-in fade-in slide-in-from-top-1",children:m})]},g)})]}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white transition-all duration-300",children:c[d]})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[s.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 animate-in slide-in-from-top-4 duration-500",children:s.jsx("div",{className:"space-y-3",children:h.map((m,g)=>s.jsxs("div",{className:"flex items-start gap-3 group cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800/50 p-2 rounded-lg transition-colors",children:[s.jsx("div",{className:"mt-0.5 w-5 h-5 rounded border border-slate-300 dark:border-slate-600 flex items-center justify-center group-hover:border-brand-400 transition-colors",children:s.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-transparent group-hover:bg-brand-100 dark:group-hover:bg-brand-900/50"})}),s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white transition-colors",children:m})]},g))})}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(jr,{className:"w-4 h-4 text-purple-500"}),s.jsx("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"  "})]}),s.jsx("div",{className:"space-y-3",children:n.length===0?s.jsx("div",{className:"text-center py-6 text-slate-400 text-xs italic bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-dashed border-slate-200 dark:border-slate-800",children:"  ..."}):n.map(m=>s.jsxs("div",{className:"flex gap-3 items-start animate-in slide-in-from-bottom-2 duration-300 bg-purple-50 dark:bg-purple-900/10 border border-purple-100 dark:border-purple-900/30 p-3 rounded-xl shadow-sm",children:[s.jsx("div",{className:`
                                w-5 h-5 rounded-md flex items-center justify-center flex-shrink-0 mt-0.5
                                ${m.type==="warning"?"text-amber-600 dark:text-amber-400":m.type==="tip"?"text-brand-600 dark:text-brand-400":"text-slate-500 dark:text-slate-400"}
                            `,children:s.jsx(jr,{className:"w-3.5 h-3.5"})}),s.jsx("div",{className:"flex flex-col gap-1",children:s.jsx("span",{className:"text-sm font-medium text-slate-800 dark:text-slate-200 leading-snug",children:m.text})})]},m.id))})]})]}),s.jsxs("div",{className:"mt-auto bg-slate-50 dark:bg-slate-950 border-t border-slate-200 dark:border-slate-800",children:[s.jsx("div",{className:"p-2 border-b border-slate-200 dark:border-slate-800 px-4 py-2",children:s.jsxs("h3",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1",children:[s.jsx(gm,{className:"w-3 h-3"}),"  "]})}),s.jsx("div",{className:"max-h-48 overflow-y-auto",children:f.map(m=>{const g=a===m.id;return s.jsxs("div",{className:"border-b border-slate-100 dark:border-slate-800 last:border-0",children:[s.jsxs("button",{onClick:()=>l(g?null:m.id),className:`w-full text-right px-4 py-3 flex items-center justify-between text-sm transition-colors
                                ${g?"bg-amber-50 dark:bg-amber-900/10 text-amber-900 dark:text-amber-100 font-medium":"text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-900"}
                            `,children:[s.jsx("span",{children:m.label}),g?s.jsx(Yl,{className:"w-3.5 h-3.5 opacity-50"}):s.jsx(Et,{className:"w-3.5 h-3.5 opacity-50"})]}),g&&s.jsx("div",{className:"px-4 py-3 bg-amber-50/50 dark:bg-amber-900/5 text-sm text-slate-700 dark:text-slate-200 leading-relaxed animate-in slide-in-from-top-1",children:m.response})]},m.id)})})]})]})},Pw=e=>{const[t,r]=v.useState(null),[n,a]=v.useState(!0),[l,c]=v.useState(null),d=[{id:"New",label:" ",color:"#3B82F6"},{id:"Discovery",label:" ",color:"#8B5CF6"},{id:"Proposal",label:" ",color:"#10B981"},{id:"Negotiation",label:" ",color:"#EC4899"},{id:"Follow Up",label:"",color:"#F59E0B"},{id:"Closed",label:" - ",color:"#059669"},{id:"Lost",label:" - ",color:"#EF4444"}];return v.useEffect(()=>{if(!e){a(!1);return}(async()=>{try{a(!0);const{data:m,error:g}=await me.from("organization_settings").select("*").eq("organization_id",e).single();if(g)console.warn("Fetching org settings info (using defaults):",g.message),r({id:"default_fallback",organization_id:e,pipeline_statuses:d});else{const x=m.pipeline_statuses||d;r({...m,pipeline_statuses:x})}}catch(m){console.error("Unexpected error in useOrganizationSettings:",m),c("Failed to load settings"),r({id:"error_fallback",organization_id:e,pipeline_statuses:d})}finally{a(!1)}})()},[e]),{settings:t,loading:n,error:l,updateSettings:async f=>{if(!e)return{success:!1,error:"Missing Organization ID"};try{const{count:m}=await me.from("organization_settings").select("id",{count:"exact",head:!0}).eq("organization_id",e);let g;if(m===0?g=await me.from("organization_settings").insert({organization_id:e,...f,calls_config:{},stages_config:[]}):g=await me.from("organization_settings").update(f).eq("organization_id",e),g.error)throw g.error;return r(x=>x?{...x,...f}:null),{success:!0}}catch(m){return console.error("Error updating settings details:",m),{success:!1,error:m.message||"Update failed"}}}}},$q=({transcript:e,coachSuggestions:t,onEndCall:r,orgId:n})=>{const{isMuted:a,toggleMute:l,callDuration:c,activeCall:d}=Sm(),{settings:h}=Pw(n),f=v.useRef(null),[m,g]=v.useState(!0),[x,b]=v.useState(!1),[j,w]=v.useState(0),_=$=>{const M=Math.floor($/60),R=$%60;return`${M.toString().padStart(2,"0")}:${R.toString().padStart(2,"0")}`},N=()=>{b(!x),d&&d.mute(!x),console.log(`[ActiveCallPanel] Hold toggled: ${x?"RESUMED":"ON HOLD"}`)},[C,E]=v.useState(!1),[A,S]=v.useState(""),[T,D]=v.useState([{id:"welcome",sender:"ai",text:"     ."}]),P=v.useRef(null);v.useEffect(()=>{m&&f.current&&(f.current.scrollTop=f.current.scrollHeight)},[e,m]),v.useEffect(()=>{C&&P.current&&(P.current.scrollTop=P.current.scrollHeight)},[T,C]);const I=()=>{if(!A.trim())return;const $={id:Date.now().toString(),sender:"user",text:A};D(M=>[...M,$]),S(""),C||E(!0),setTimeout(()=>{D(M=>[...M,{id:(Date.now()+1).toString(),sender:"ai",text:".     ..."}])},1e3)};return s.jsxs("div",{className:"flex flex-col flex-1 bg-white dark:bg-slate-950 min-w-0 relative overflow-hidden h-full",children:[s.jsxs("div",{className:"h-16 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between px-6 bg-white/90 dark:bg-slate-900/90 backdrop-blur-sm z-20 flex-shrink-0 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`flex items-center justify-center gap-2 px-3 py-1 rounded-full ${x?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"} transition-colors`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${x?"bg-amber-500":"bg-rose-500"} animate-pulse`}),s.jsx("span",{className:"font-mono font-medium text-sm",children:_(c)})]}),s.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400 font-medium",children:x?" ":" "})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(be,{onClick:N,variant:"ghost",size:"icon",className:`${x?"text-amber-500 bg-amber-50 dark:bg-amber-900/20":"text-slate-400 hover:text-slate-600"}`,title:x?" ":" ",children:x?s.jsx(y3,{className:"w-5 h-5"}):s.jsx(lw,{className:"w-5 h-5"})}),s.jsx(be,{onClick:l,variant:"ghost",size:"icon",className:`${a?"text-rose-500 bg-rose-50 dark:bg-rose-900/20":"text-slate-400 hover:text-slate-600"}`,title:a?" ":" ",children:a?s.jsx(S9,{className:"w-5 h-5"}):s.jsx(E9,{className:"w-5 h-5"})}),s.jsxs(be,{onClick:()=>r&&r(),variant:"danger",size:"sm",className:"bg-rose-600 hover:bg-rose-700 text-white border-0 shadow-md hover:shadow-lg transition-all",children:[s.jsx(P3,{className:"w-4 h-4 ml-2"})," "]})]})]}),s.jsxs("div",{className:"flex-1 flex min-h-0 relative",children:[s.jsx("div",{className:"w-96 border-e border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex flex-col z-10 shadow-lg",children:s.jsx(Iq,{stages:(h==null?void 0:h.stages_config)||[],currentStageIdx:j,setStageIdx:w,suggestions:t})}),s.jsxs("div",{className:"flex-1 bg-slate-50/50 dark:bg-slate-950/50 relative flex flex-col min-w-0",children:[s.jsxs("div",{ref:f,onScroll:$=>{const M=$.target,R=Math.abs(M.scrollHeight-M.scrollTop-M.clientHeight)<50;g(!!R)},className:"flex-1 overflow-y-auto p-8 space-y-6 scroll-smooth",children:[e.map($=>s.jsxs("div",{className:`flex flex-col ${$.speaker==="agent"?"items-end":"items-start"} max-w-3xl mx-auto w-full group`,children:[s.jsxs("div",{className:"flex items-baseline gap-2 mb-1.5 px-1 opacity-70 group-hover:opacity-100 transition-opacity",children:[s.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${$.speaker==="agent"?"text-brand-600 dark:text-brand-400":"text-slate-500"}`,children:$.speaker==="agent"?" ()":""}),s.jsx("span",{className:"text-[10px] text-slate-300 dark:text-slate-600 font-mono",children:$.timestamp})]}),s.jsx("div",{className:`
                  relative max-w-[90%] md:max-w-[85%] px-6 py-4 rounded-2xl text-base leading-relaxed shadow-sm transition-all duration-200
                  ${$.speaker==="agent"?"bg-white border border-brand-100 dark:bg-slate-900 dark:border-brand-900/30 text-slate-800 dark:text-slate-200 rounded-tl-none hover:border-brand-300":"bg-white border border-slate-200 dark:bg-slate-800 dark:border-slate-700 text-slate-700 dark:text-slate-300 rounded-tr-none hover:border-slate-300"}
                  ${$.highlight?"ring-2 ring-amber-100 dark:ring-amber-900/30 bg-amber-50/50 dark:bg-amber-900/10":""}
                  ${$.isFinal===!1?"opacity-70 animate-pulse":""}
                `,children:$.text})]},$.id)),s.jsx("div",{className:"h-12"})]}),!m&&s.jsx("button",{onClick:()=>g(!0),className:"absolute bottom-6 left-1/2 -translate-x-1/2 bg-slate-800 text-white text-xs px-4 py-2 rounded-full shadow-lg hover:bg-slate-700 transition-all z-20 animate-in fade-in slide-in-from-bottom-2",children:"  "})]})]}),!C&&s.jsxs("button",{onClick:()=>E(!0),className:"absolute bottom-4 left-6 z-30 p-3 bg-purple-600 text-white rounded-full shadow-lg hover:bg-purple-700 hover:scale-105 transition-all flex items-center gap-2",title:" ",children:[s.jsx(w2,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-bold pr-1",children:"' "})]}),s.jsxs("div",{className:`absolute bottom-0 left-6 w-80 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 shadow-2xl rounded-t-xl transition-all duration-300 ease-in-out z-40 flex flex-col
        ${C?"h-[400px] opacity-100 translate-y-0":"h-0 opacity-0 translate-y-10 pointer-events-none"}
        `,children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-100 dark:border-slate-800 bg-purple-50/50 dark:bg-purple-900/10 rounded-t-xl",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(w2,{className:"w-4 h-4 text-purple-600"}),s.jsx("span",{className:"text-sm font-bold text-purple-900 dark:text-purple-100",children:"' "})]}),s.jsx("button",{onClick:()=>E(!1),className:"text-slate-400 hover:text-slate-600",children:s.jsx(Et,{className:"w-4 h-4"})})]}),s.jsx("div",{ref:P,className:"flex-1 overflow-y-auto p-4 space-y-3 bg-white dark:bg-slate-900",children:T.map($=>s.jsx("div",{className:`flex ${$.sender==="user"?"justify-start":"justify-end"}`,children:s.jsx("div",{className:`max-w-[85%] p-2.5 rounded-xl text-xs leading-relaxed ${$.sender==="user"?"bg-purple-100 text-purple-900 rounded-br-none":"bg-slate-100 text-slate-700 rounded-bl-none"}`,children:$.text})},$.id))}),s.jsx("div",{className:"p-3 border-t border-slate-100 dark:border-slate-800",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-800 border-none rounded-lg text-sm focus:ring-2 focus:ring-purple-500 outline-none",placeholder:" ...",value:A,onChange:$=>S($.target.value),onKeyDown:$=>$.key==="Enter"&&I()}),s.jsx("button",{onClick:I,className:"absolute left-1 top-1/2 -translate-y-1/2 p-1.5 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:s.jsx(mc,{className:"w-3 h-3"})})]})})]})]})},Lq=({transcripts:e,coachingData:t,callDuration:r,currentLead:n,onEndCall:a,formatTime:l})=>{var f,m,g,x;const[c,d]=v.useState(!1),h=v.useRef(null);return v.useEffect(()=>{e.length&&h.current&&(h.current.scrollTop=h.current.scrollHeight)},[e]),s.jsxs("div",{className:"flex flex-col h-full p-3 md:p-4 lg:p-6 gap-4 overflow-y-auto lg:overflow-hidden bg-[#F7F8FC]",children:[s.jsxs("div",{className:"w-full bg-white rounded-2xl border border-[#E7EAF2] shadow-sm p-4 flex flex-col md:flex-row justify-between items-center gap-3 shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs font-bold text-rose-600",children:""})]}),s.jsx("span",{className:"font-mono text-xl font-bold text-[#0B1220]",children:l(r)}),n&&s.jsxs("span",{className:"text-sm text-slate-500",children:[" ",n.name]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>d(!c),className:`p-2 rounded-lg border transition-colors ${c?"bg-brand-50 border-brand-200 text-brand-600":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,title:" ",children:s.jsx(gs,{className:"w-5 h-5"})}),s.jsx("button",{className:"p-2 rounded-lg bg-slate-50 border border-slate-200 text-slate-600 hover:bg-slate-100 transition-colors",children:s.jsx(lw,{className:"w-5 h-5"})}),s.jsxs("button",{onClick:a,className:"px-4 py-2 rounded-lg bg-[#FFF1F2] border border-[#FECDD3] text-[#E11D48] font-bold hover:bg-[#FFE4E6] transition-colors text-sm flex items-center justify-center gap-2",children:[s.jsx(P3,{className:"w-4 h-4"}),s.jsx("span",{children:" "})]})]})]}),s.jsx(BA,{leadPhone:n==null?void 0:n.phone,leadName:n==null?void 0:n.name,leadEmail:n==null?void 0:n.email,className:"bg-white rounded-xl border border-slate-200 p-3",callTranscript:e.map(b=>`${b.speaker}: ${b.text}`).join(`
`),callSummary:t}),s.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row gap-4 min-h-0",children:[s.jsxs("div",{className:"flex-1 bg-white rounded-2xl border border-[#E7EAF2] shadow-sm flex flex-col overflow-hidden min-h-[400px]",children:[s.jsx("div",{className:"p-4 border-b border-[#E7EAF2]",children:s.jsx("h3",{className:"font-bold text-slate-800",children:"Transcript"})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 bg-white space-y-4",ref:h,children:[e.length===0&&s.jsx("div",{className:"text-center text-slate-400 mt-10",children:"Waiting for call to start..."}),e.map((b,j)=>s.jsxs("div",{className:`flex flex-col ${b.speaker==="agent"?"items-end":"items-start"} max-w-[85%] w-full ${b.speaker==="agent"?"mr-auto":"ml-auto"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5 px-1",children:[s.jsx("span",{className:"text-[10px] text-[#98A2B3] font-medium font-mono",children:"Now"}),s.jsx("span",{className:"text-xs font-bold text-[#667085]",children:b.speaker==="agent"?"":""})]}),s.jsx("div",{className:`
                        relative px-4 py-3 text-sm leading-relaxed shadow-sm
                        ${b.speaker==="agent"?"bg-[#EFF4FF] text-[#1E3A8A] rounded-2xl rounded-tl-none border border-blue-100/50":"bg-white text-[#344054] rounded-2xl rounded-tr-none border border-[#E7EAF2]"}
                        ${b.isFinal===!1?"opacity-70 animate-pulse":""}
                     `,children:b.text})]},j))]})]}),s.jsxs("div",{className:"w-full lg:w-96 bg-white rounded-2xl border border-[#E7EAF2] shadow-sm flex flex-col overflow-hidden shrink-0 max-h-[calc(100vh-200px)]",children:[s.jsxs("div",{className:"p-4 border-b border-[#E7EAF2] bg-gradient-to-r from-[#6366f1]/5 to-white flex items-center justify-between",children:[s.jsxs("h3",{className:"text-sm font-bold text-[#0B1220] flex items-center gap-2",children:[s.jsx(jr,{className:"w-4 h-4 text-purple-600 fill-purple-600"})," AI  Sales Coach"]}),s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-emerald-50 rounded-full",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-[10px] font-bold text-emerald-700",children:"Live"})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-[#6366f1] to-[#4f46e5] rounded-xl p-4 text-white relative overflow-hidden shadow-lg",children:[s.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full blur-2xl -mr-8 -mt-8"}),s.jsxs("h4",{className:"text-xs font-bold uppercase tracking-wider mb-2 flex items-center gap-1.5 opacity-90",children:[s.jsx(el,{className:"w-3.5 h-3.5"})," "]}),s.jsx("p",{className:"text-sm leading-relaxed font-medium",children:(t==null?void 0:t.insight)||" ..."}),(t==null?void 0:t.suggestion)&&s.jsxs("div",{className:"mt-3 p-3 bg-white/15 backdrop-blur rounded-lg border border-white/20",children:[s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide opacity-80",children:" :"}),s.jsxs("p",{className:"text-sm mt-1 leading-relaxed",children:['"',t.suggestion,'"']})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-rose-50 border border-rose-100 rounded-xl p-3",children:[s.jsxs("h5",{className:"text-[10px] font-bold text-rose-700 uppercase tracking-wide mb-2 flex items-center gap-1",children:[s.jsx(vn,{className:"w-3 h-3"}),""]}),(f=t==null?void 0:t.signals)!=null&&f.pains&&t.signals.pains.length>0?s.jsx("ul",{className:"space-y-1.5",children:t.signals.pains.slice(0,3).map((b,j)=>s.jsxs("li",{className:"text-xs text-rose-800 flex items-start gap-1.5",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 ${b.severity==="high"?"bg-rose-600":b.severity==="medium"?"bg-rose-400":"bg-rose-300"}`}),b.text]},j))}):s.jsx("p",{className:"text-[10px] text-rose-400 italic",children:"  "})]}),s.jsxs("div",{className:"bg-amber-50 border border-amber-100 rounded-xl p-3",children:[s.jsxs("h5",{className:"text-[10px] font-bold text-amber-700 uppercase tracking-wide mb-2 flex items-center gap-1",children:[s.jsx(gm,{className:"w-3 h-3"}),""]}),(m=t==null?void 0:t.signals)!=null&&m.objections&&t.signals.objections.length>0?s.jsx("ul",{className:"space-y-1.5",children:t.signals.objections.slice(0,3).map((b,j)=>s.jsxs("li",{className:`text-xs flex items-start gap-1.5 ${b.status==="handled"?"text-emerald-700 line-through opacity-60":"text-amber-800"}`,children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 ${b.status==="handled"?"bg-emerald-500":"bg-amber-500"}`}),b.text]},j))}):s.jsx("p",{className:"text-[10px] text-amber-400 italic",children:"  "})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-3",children:[s.jsxs("h5",{className:"text-[10px] font-bold text-blue-700 uppercase tracking-wide mb-2 flex items-center gap-1",children:[s.jsx(K$,{className:"w-3 h-3"}),""]}),(g=t==null?void 0:t.signals)!=null&&g.gaps&&t.signals.gaps.length>0?s.jsx("ul",{className:"space-y-1.5",children:t.signals.gaps.slice(0,3).map((b,j)=>s.jsxs("li",{className:"text-xs text-blue-800 flex items-start gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 bg-blue-500"}),b.text]},j))}):s.jsx("p",{className:"text-[10px] text-blue-400 italic",children:"  "})]}),s.jsxs("div",{className:"bg-purple-50 border border-purple-100 rounded-xl p-3",children:[s.jsxs("h5",{className:"text-[10px] font-bold text-purple-700 uppercase tracking-wide mb-2 flex items-center gap-1",children:[s.jsx(Ar,{className:"w-3 h-3"})," "]}),(x=t==null?void 0:t.signals)!=null&&x.vision&&t.signals.vision.length>0?s.jsx("ul",{className:"space-y-1.5",children:t.signals.vision.slice(0,3).map((b,j)=>s.jsxs("li",{className:"text-xs text-purple-800 flex items-start gap-1.5",children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0 bg-purple-500"}),b.text]},j))}):s.jsx("p",{className:"text-[10px] text-purple-400 italic",children:"  "})]})]}),(t==null?void 0:t.stage)&&s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-xl border border-slate-100",children:[s.jsx("span",{className:"text-xs text-slate-500",children:" :"}),s.jsx("span",{className:"text-xs font-bold text-slate-800 px-2 py-1 bg-white rounded-lg border border-slate-200",children:t.stage})]})]})]})]})]})},zq=({onStartCall:e,onEndCall:t,currentUserId:r,orgId:n})=>{var Pr;const[a,l]=v.useState("leads"),[c,d]=v.useState("followup"),[h,f]=v.useState(""),m=v.useRef(null),[g,x]=v.useState(!1),[b,j]=v.useState(!1),[w,_]=v.useState(!1),[N,C]=v.useState([]),[E,A]=v.useState([]),[S,T]=v.useState(!0),[D,P]=v.useState(!0),[I,$]=v.useState(""),[M,R]=v.useState([]),[q,H]=v.useState(null),[W,L]=v.useState(null),[B,G]=v.useState(!0),[ce,ge]=v.useState([]),[U,V]=v.useState(!0),[te,he]=v.useState(null),[ye,Ne]=v.useState(null),[ve,je]=v.useState(null),[Q,_e]=v.useState(""),[de,Y]=v.useState("10:00"),[we,Oe]=v.useState(""),[lt,ut]=v.useState(!1),[Ct,rr]=v.useState(()=>{try{return localStorage.getItem("sales_coach_view_mode")||"copilot"}catch{return"copilot"}});v.useEffect(()=>{try{localStorage.setItem("sales_coach_view_mode",Ct)}catch{console.warn("Failed to save view mode preference")}},[Ct]);const{callStatus:_r,callDuration:It,transcripts:oe,coachingData:Ce,startCall:Qe,connectionStatus:tt,isReady:xe,initDevice:Be,activeLeadId:pt,setActiveLeadId:se,runDiagnostics:Te,hasLastCall:Ge,showLastSummary:ht,historyCalls:xt,powerDialer:$t,startPowerDialer:wt,stopPowerDialer:ft,pausePowerDialer:gt,resumePowerDialer:En,skipToNextLead:Ln,smartQueue:jn,setSmartQueue:Ae,dialNextLead:Ee}=Sm(),[He,Z]=v.useState(!1),Ue=async()=>{if(n){Z(!0);try{const{data:{session:X}}=await me.auth.getSession(),Pe=await(await fetch("/api/leads/smart-queue",{headers:{Authorization:`Bearer ${X==null?void 0:X.access_token}`}})).json();Pe.success&&Ae(Pe.queue)}catch(X){console.error("Failed to fetch smart queue",X)}finally{Z(!1)}}},Le=async()=>{jn.length>0?(x(!0),console.log("[PowerSession] Starting with queue size:",jn.length),await Ee(),e(),x(!1)):(console.warn("[PowerSession] Cannot start: Queue is empty"),H("    "))},bt=_r==="connected"||_r==="dialing",nt=X=>{if(!X)return null;switch(X){case"Website":return"";case"LinkedIn":return"";case"Facebook Ads":return"";case"Instagram":return"";case"Referral":return"";case"Webinar":return"";case"Social Media":return"";case"Manual":return"";default:return X}},Dt=X=>{if(!X)return null;switch(X){case"New":return" ";case"Discovery":return" ";case"Negotiation":return" ";case"Proposal":return" ";case"Contacted":return" ";case"In Progress":return"";case"Qualified":return" ";case"Lost":return"";case"Deal":return"";case"Closed":return"";default:return X}},Ut=X=>{switch(X){case"completed":return"";case"missed":return" ";case"rejected":return"";case"busy":return"";case"no-answer":return" ";case"failed":return"";default:return X}},nr=X=>{const Se=Math.floor(X/60),Pe=X%60;return`${Se.toString().padStart(2,"0")}:${Pe.toString().padStart(2,"0")}`};v.useEffect(()=>{const X=async()=>{if(n){T(!0);try{const{data:Pe,error:Ye}=await me.from("leads").select("id, name, phone, company, status, priority, source, created_at").eq("organization_id",n).order("created_at",{ascending:!1}).limit(100);if(Ye)throw Ye;C(Pe||[])}catch(Pe){console.error("[Leads] Fetch error:",Pe),H("  : "+Pe.message)}finally{T(!1)}}};X();const Se=me.channel("leads-changes").on("postgres_changes",{event:"*",schema:"public",table:"leads",filter:`organization_id=eq.${n}`},()=>{console.log("[Leads] Realtime update detected, refreshing..."),X()}).subscribe();return()=>{me.removeChannel(Se)}},[n]),v.useEffect(()=>{Ue()},[n]),v.useEffect(()=>{(async()=>{if(n)try{const Se=new Date;Se.setHours(23,59,59,999);const{data:Pe,error:Ye}=await me.from("leads").select("id, name, phone, follow_up_at, follow_up_notes").eq("organization_id",n).not("follow_up_at","is",null).lte("follow_up_at",Se.toISOString()).order("follow_up_at",{ascending:!0}).limit(20);if(Ye)throw Ye;R((Pe||[]).map(at=>({id:at.id,lead_id:at.id,lead_name:at.name,lead_phone:at.phone,follow_up_at:at.follow_up_at,notes:at.follow_up_notes})))}catch(Se){console.error("[FollowUp] Fetch error:",Se)}})()},[n]),v.useEffect(()=>{(async()=>{if(n){P(!0);try{const{data:Se,error:Pe}=await me.from("calls").select("id, agent_id, lead_id, status, duration, created_at, recording_url, transcript, leads(name, phone, company)").eq("organization_id",n).order("created_at",{ascending:!1}).limit(20);if(Pe)throw Pe;A(Se||[])}catch(Se){console.error("[Calls] Fetch error:",Se)}finally{P(!1)}}})()},[n]),v.useEffect(()=>{(async()=>{G(!0);try{const Pe=await(await fetch("/api/stats/daily")).json();Pe.success&&L(Pe.stats)}catch(Se){console.error("[Stats] Fetch error:",Se)}finally{G(!1)}})()},[]),v.useEffect(()=>{(async()=>{var Se;V(!0);try{const{data:{session:Pe}}=await me.auth.getSession();if(!((Se=Pe==null?void 0:Pe.user)!=null&&Se.id))return;const{data:Ye}=await me.from("profiles").select("organization_id").eq("id",Pe.user.id).single();if(!(Ye!=null&&Ye.organization_id))return;const St=await(await fetch(`/api/campaigns?organizationId=${Ye.organization_id}`,{headers:{Authorization:`Bearer ${Pe.access_token}`}})).json();St.success&&ge(St.campaigns||[])}catch(Pe){console.error("[Campaigns] Fetch error:",Pe)}finally{V(!1)}})()},[]),v.useEffect(()=>{oe.length&&m.current&&(bt?m.current.scrollTop=m.current.scrollHeight:m.current.scrollTop=0)},[oe,bt]),v.useEffect(()=>{!xe&&tt==="disconnected"&&(console.log("[Dialer] Initializing Twilio Device..."),Be())},[xe,tt]),v.useEffect(()=>{if(q){const X=setTimeout(()=>H(null),5e3);return()=>clearTimeout(X)}},[q]);const Zn=async X=>{console.log("[Dialer] Lead clicked:",{id:X.id,name:X.name,phone:X.phone}),se(X.id)},Or=async X=>{var Se;if(console.log("[Dialer] Starting call to lead:",{id:X.id,phone:X.phone}),!X.phone){H("    ");return}if(!xe){console.warn("[Dialer] Device not ready, attempting init..."),H(" ...    "),await Be();return}if(tt==="error"){H("   .   .");return}try{const{data:{session:Pe}}=await me.auth.getSession(),Ye=((Se=Pe==null?void 0:Pe.user)==null?void 0:Se.id)||r||"unknown";console.log("[Dialer] Calling via Twilio:",{phone:X.phone,agentId:Ye,leadId:X.id}),await Qe(X.phone,Ye,X.id)}catch(Pe){console.error("[Dialer] Call error:",Pe),Pe.code===31401?H(" :   "):Pe.code===31005||Pe.code===31009?H(" :   "):H("  : "+(Pe.message||"Unknown error"))}},on=async()=>{var _i,Sa,kr;if(console.log("[SmartDialer] Starting smart campaign dialer:",{campaign:h,campaignsCount:ce.length}),!h){H("    ");return}const X=ce.find(st=>st.id===h);if(!X){H("   ");return}const{data:{session:Se}}=await me.auth.getSession();let Ye=(Sa=(_i=Se==null?void 0:Se.user)==null?void 0:_i.user_metadata)==null?void 0:Sa.organization_id;if(!Ye&&((kr=Se==null?void 0:Se.user)!=null&&kr.id)){const{data:st}=await me.from("profiles").select("organization_id").eq("id",Se.user.id).single();Ye=st==null?void 0:st.organization_id}console.log("[SmartDialer] Organization ID:",Ye),console.log("[SmartDialer] Selected campaign:",{name:X.name,source:X.source_filter});let at=[],St=[];if(Ye)try{const[st,oo]=await Promise.all([fetch(`/api/follow-ups/due?organizationId=${Ye}`),fetch(`/api/leads/ready-for-retry?organizationId=${Ye}&campaignId=${h}`)]),es=await st.json(),Ca=await oo.json();es.success&&(at=es.followUps||[],console.log("[SmartDialer]  Follow-ups due:",at.length)),Ca.success&&(St=Ca.leads||[],console.log("[SmartDialer]  Retry leads:",St.length))}catch(st){console.warn("[SmartDialer] Failed to fetch priority leads, continuing with regular leads:",st)}const ol=N.filter(st=>{const oo=(st.source||"").toLowerCase().trim(),es=(X.source_filter||"").toLowerCase().trim();return es===""||oo===es}).filter(st=>st.status!=="Won"&&st.status!=="Lost");console.log("[SmartDialer]  Regular campaign leads:",ol.length);const js=new Set,zn=[];for(const st of at)js.has(st.id)||(zn.push({...st,_priority:"follow_up",_priorityLabel:" "}),js.add(st.id));for(const st of St)js.has(st.id)||(zn.push({...st,_priority:"retry",_priorityLabel:"  "}),js.add(st.id));for(const st of ol)js.has(st.id)||(zn.push({...st,_priority:"regular",_priorityLabel:" "}),js.add(st.id));if(zn.length===0){H(`    "${X.name}"`);return}console.log("[SmartDialer]  Smart Queue built:",{total:zn.length,followUps:zn.filter(st=>st._priority==="follow_up").length,retries:zn.filter(st=>st._priority==="retry").length,regular:zn.filter(st=>st._priority==="regular").length});const ji=zn.map(st=>({id:st.id,name:st.name||st.full_name,phone:st.phone||"",source:st.source,status:st.status,company:st.company,priority:st._priority,priorityLabel:st._priorityLabel}));wt(ji);const ca=zn[0];console.log("[SmartDialer]  Starting first call:",{name:ca.name,priority:ca._priorityLabel}),await Or(ca)},sr=async()=>{if(!(!Ze||!Q))try{const X=new Date(`${Q}T${de}:00`).toISOString();if(!(await fetch(`/api/leads/${Ze.id}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"follow_up",followUpAt:X,notes:we||null})})).ok)throw new Error("Failed to schedule follow-up");console.log("[History] Follow-up scheduled successfully"),je(null),_e(""),Y("10:00"),Oe("")}catch(X){console.error("[History] Follow-up failed:",X),H("  ")}},Ze=pt?N.find(X=>X.id===pt):null,cr=I?N.filter(X=>{var Se,Pe,Ye;return((Se=X.name)==null?void 0:Se.toLowerCase().includes(I.toLowerCase()))||((Pe=X.phone)==null?void 0:Pe.includes(I))||((Ye=X.company)==null?void 0:Ye.toLowerCase().includes(I.toLowerCase()))}):N;return s.jsxs("div",{className:"flex w-full h-full bg-[#F7F8FC] font-sans overflow-hidden text-[#0B1220] relative",children:[q&&s.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[100] animate-in fade-in slide-in-from-top-2",children:s.jsxs("div",{className:"bg-rose-600 text-white px-4 py-3 rounded-xl shadow-lg flex items-center gap-3",children:[s.jsx(ru,{className:"w-5 h-5 shrink-0"}),s.jsx("span",{className:"text-sm font-medium",children:q}),s.jsx("button",{onClick:()=>H(null),className:"p-1 hover:bg-white/20 rounded",children:s.jsx(Rt,{className:"w-4 h-4"})})]})}),$t.isActive&&s.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[99] animate-in fade-in slide-in-from-top-2",children:s.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-brand-700 text-white px-6 py-4 rounded-2xl shadow-2xl flex items-center gap-6 min-w-[400px]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(iL,{className:"w-5 h-5 animate-spin-slow"}),s.jsx("span",{className:"font-bold",children:"Power Dialer"})]}),s.jsx("div",{className:"flex items-center gap-2 bg-white/20 px-3 py-1 rounded-lg",children:s.jsxs("span",{className:"text-sm font-medium",children:[" ",$t.currentIndex+1,"/",$t.queue.length]})}),$t.isInPreview&&$t.queue[$t.currentIndex]&&s.jsxs("div",{className:"flex items-center gap-3 bg-white/10 px-3 py-1 rounded-lg",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs opacity-75",children:" :"}),s.jsx("p",{className:"font-medium text-sm",children:$t.queue[$t.currentIndex].name})]}),s.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center font-bold text-lg",children:$t.previewCountdown})]}),s.jsxs("div",{className:"flex items-center gap-2 mr-auto",children:[$t.isPaused?s.jsx("button",{onClick:En,className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",title:"",children:s.jsx(y3,{className:"w-5 h-5"})}):s.jsx("button",{onClick:gt,className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",title:" ",children:s.jsx(lw,{className:"w-5 h-5"})}),s.jsx("button",{onClick:Ln,className:"p-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",title:" ",children:s.jsx(gL,{className:"w-5 h-5"})}),s.jsx("button",{onClick:ft,className:"p-2 bg-rose-500/80 hover:bg-rose-500 rounded-lg transition-colors",title:"",children:s.jsx(NL,{className:"w-5 h-5 fill-current"})})]})]})}),s.jsx(BU,{isVisible:lt&&bt,onClose:()=>ut(!1),campaignName:(Pr=ce.find(X=>X.id===h))==null?void 0:Pr.name,leadName:Ze==null?void 0:Ze.name}),(b||w)&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/50 z-40 xl:hidden backdrop-blur-sm transition-opacity",onClick:()=>{j(!1),_(!1)}}),s.jsxs("div",{className:`
        fixed inset-y-0 right-0 z-50 w-80 bg-white border-l border-[#E7EAF2] h-full flex flex-col shadow-2xl transition-transform duration-300 ease-in-out
        xl:relative xl:translate-x-0 xl:shadow-[4px_0_24px_rgba(0,0,0,0.01)] xl:z-auto xl:flex-shrink-0
        ${b?"translate-x-0":"translate-x-full xl:translate-x-0"}
      `,children:[s.jsx("button",{onClick:()=>j(!1),className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 xl:hidden z-10",children:s.jsx(Rt,{className:"w-5 h-5"})}),s.jsxs("div",{className:"p-4 border-b border-[#E7EAF2] flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"font-bold text-[#0B1220] text-base",children:" "}),s.jsxs("span",{className:"text-[11px] font-medium text-[#667085] bg-slate-50 border border-[#E7EAF2] px-2 py-0.5 rounded-full",children:[cr.length," "]})]}),s.jsxs("div",{className:"flex bg-[#F0F2F5] p-1 rounded-xl mb-3",children:[s.jsxs("button",{onClick:()=>l("leads"),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-all border border-transparent
                        ${a==="leads"?"bg-white shadow-[0_1px_2px_rgba(0,0,0,0.05)] text-[#0B1220]":"text-[#667085] hover:text-[#0B1220]"}`,children:[" (",N.length,")"]}),s.jsxs("button",{onClick:()=>l("history"),className:`flex-1 py-1.5 text-xs font-bold rounded-lg transition-all
                        ${a==="history"?"bg-white shadow-[0_1px_2px_rgba(0,0,0,0.05)] text-[#0B1220]":"text-[#667085] hover:text-[#0B1220]"}`,children:[" (",E.length,")"]})]}),s.jsxs("div",{className:"relative group",children:[s.jsx(ta,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-[#98A2B3] group-focus-within:text-brand-500 transition-colors"}),s.jsx("input",{type:"text",value:I,onChange:X=>$(X.target.value),placeholder:"...",className:"w-full pl-3 pr-9 py-2 bg-white border border-[#E7EAF2] rounded-xl text-sm outline-none focus:border-brand-500 focus:ring-2 focus:ring-brand-500/10 transition-all placeholder-[#98A2B3]"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:a==="leads"?S?s.jsx("div",{className:"space-y-3",children:[1,2,3].map(X=>s.jsx("div",{className:"h-20 bg-slate-50 rounded-2xl animate-pulse"},X))}):cr.length===0?s.jsx("div",{className:"text-center py-10 text-slate-400 text-sm",children:"  "}):cr.map(X=>s.jsxs("div",{onClick:()=>Zn(X),onDoubleClick:()=>Or(X),className:`
                              p-4 rounded-2xl border cursor-pointer transition-all relative group
                              ${pt===X.id?"bg-gradient-to-l from-brand-50 to-white border-brand-200 shadow-md shadow-brand-500/10":"bg-white border-slate-100 hover:bg-slate-50/80 hover:border-slate-200 hover:shadow-sm"}
                           `,children:[pt===X.id&&s.jsx("div",{className:"absolute right-0 top-3 bottom-3 w-1.5 bg-gradient-to-b from-brand-500 to-indigo-600 rounded-l-full"}),s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:`font-bold text-[14px] block ${pt===X.id?"text-brand-900":"text-[#0B1220]"}`,children:X.name}),s.jsx("span",{className:"text-[11px] text-slate-400",children:X.company||""})]}),X.priority==="Hot"&&s.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 bg-rose-50 rounded-md border border-rose-200",children:[s.jsx(su,{className:"w-3 h-3 text-rose-500"}),s.jsx("span",{className:"text-[10px] font-bold text-rose-600",children:""})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:`text-[10px] px-2.5 py-1 rounded-lg font-bold border ${X.status==="New"?"bg-indigo-50 text-indigo-600 border-indigo-200":X.status==="Discovery"?"bg-purple-50 text-purple-600 border-purple-200":X.status==="Proposal"?"bg-pink-50 text-pink-600 border-pink-200":X.status==="Negotiation"?"bg-amber-50 text-amber-600 border-amber-200":X.status==="Closed"?"bg-emerald-50 text-emerald-600 border-emerald-200":"bg-slate-50 text-slate-500 border-slate-200"}`,children:Dt(X.status)||" "}),X.source&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-md bg-slate-100 text-slate-500",children:nt(X.source)})]}),s.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-slate-400",children:[s.jsx(mt,{className:"w-3 h-3"}),s.jsx("span",{dir:"ltr",className:"font-medium",children:X.phone})]}),s.jsx("button",{onClick:Se=>{Se.stopPropagation(),Or(X)},className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-all bg-gradient-to-r from-brand-600 to-indigo-600 hover:from-brand-700 hover:to-indigo-700 text-white p-2.5 rounded-xl shadow-lg shadow-brand-500/30 hover:shadow-xl hover:scale-105",title:"",children:s.jsx(mt,{className:"w-4 h-4"})})]},X.id)):D?s.jsx("div",{className:"flex items-center justify-center py-10",children:s.jsx(rt,{className:"w-6 h-6 animate-spin text-brand-500"})}):E.length===0?s.jsx("div",{className:"text-center py-10 text-slate-400 text-sm",children:"  "}):E.map(X=>{var Se;return s.jsxs("div",{className:"rounded-2xl border bg-white border-slate-100 overflow-hidden transition-all",children:[s.jsxs("div",{onClick:()=>he(te===X.id?null:X.id),className:"p-3.5 cursor-pointer hover:bg-slate-50 transition-colors flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-semibold text-sm truncate text-[#0B1220]",children:((Se=X.leads)==null?void 0:Se.name)||"( )"}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-md font-medium ${X.status==="completed"?"bg-emerald-50 text-emerald-600":"bg-slate-50 text-slate-500"}`,children:Ut(X.status)})]}),s.jsxs("div",{className:"flex items-center gap-3 text-[11px] text-[#98A2B3]",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3"}),X.duration?`${Math.floor(X.duration/60)}:${(X.duration%60).toString().padStart(2,"0")}`:"--:--"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[new Date(X.created_at).toLocaleDateString("he-IL"),"  ",new Date(X.created_at).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 transition-transform ${te===X.id?"rotate-180":""}`})]}),te===X.id&&s.jsxs("div",{className:"border-t border-slate-100 p-3.5 bg-slate-50/50 space-y-3 animate-in slide-in-from-top-2",children:[X.recording_url&&!X.recording_url.startsWith("sid:")&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold text-slate-500 flex items-center gap-1.5",children:[s.jsx(Hl,{className:"w-3 h-3"})," "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("audio",{controls:!0,className:"flex-1 h-8",src:X.recording_url,children:"     "}),s.jsx("a",{href:X.recording_url,download:!0,className:"p-2 rounded-lg bg-white border border-slate-200 hover:bg-slate-100 transition-colors",title:" ",children:s.jsx(Nu,{className:"w-4 h-4 text-slate-500"})})]})]}),X.transcript?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold text-slate-500 flex items-center gap-1.5",children:[s.jsx(gs,{className:"w-3 h-3"})," "]}),s.jsx("div",{className:"text-xs text-slate-600 max-h-40 overflow-y-auto p-2 bg-white rounded-lg border border-slate-100 whitespace-pre-wrap",children:X.transcript})]}):s.jsx("p",{className:"text-xs text-slate-400 italic",children:"    "}),X.summary&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"text-xs font-bold text-slate-500 flex items-center gap-1.5",children:[s.jsx(jr,{className:"w-3 h-3"})," AI"]}),s.jsx("div",{className:"text-xs text-slate-600 p-2 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-100",children:X.summary})]})]})]},X.id)})}),Ze&&!bt&&s.jsx("div",{className:"p-3 border-t border-[#E7EAF2]",children:s.jsxs("button",{onClick:()=>Or(Ze),disabled:!xe||tt==="error",className:`w-full py-3 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all
                        ${xe?"bg-brand-600 text-white hover:bg-brand-700 shadow-lg shadow-brand-500/25":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:[s.jsx(mt,{className:"w-4 h-4"}),xe?` ${Ze.name}`:"..."]})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-[#F7F8FC] relative h-full overflow-hidden",children:[s.jsxs("div",{className:"h-12 px-4 flex items-center justify-between xl:hidden border-b border-[#E7EAF2] bg-white shrink-0 shadow-sm z-20",children:[s.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 text-xs font-bold text-slate-600 hover:text-brand-600 transition-colors",children:[s.jsx(z9,{className:"w-4 h-4"})," "]}),s.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 text-xs font-bold text-slate-600 hover:text-brand-600 transition-colors",children:["",s.jsx($9,{className:"w-4 h-4"})]})]}),tt==="connecting"&&s.jsxs("div",{className:"bg-amber-100 border-b border-amber-200 px-4 py-2 flex items-center justify-center gap-2",children:[s.jsx(rt,{className:"w-4 h-4 animate-spin text-amber-600"}),s.jsx("span",{className:"text-sm font-medium text-amber-700",children:"  ..."})]}),tt==="error"&&s.jsxs("div",{className:"bg-rose-100 border-b border-rose-200 px-4 py-2 flex items-center justify-center gap-2",children:[s.jsx(ru,{className:"w-4 h-4 text-rose-600"}),s.jsx("span",{className:"text-sm font-medium text-rose-700",children:"  -   "}),s.jsx("button",{onClick:Be,className:"text-xs bg-rose-600 text-white px-2 py-1 rounded hover:bg-rose-700",children:" "})]}),Ge&&!bt&&s.jsxs("div",{className:"bg-gradient-to-l from-brand-50 to-purple-50 border-b border-brand-200 px-4 py-2 flex items-center justify-center gap-3",children:[s.jsx(gs,{className:"w-4 h-4 text-brand-600"}),s.jsx("span",{className:"text-sm font-medium text-brand-700",children:"      "}),s.jsx("button",{onClick:ht,className:"text-xs bg-brand-600 text-white px-3 py-1.5 rounded-lg hover:bg-brand-700 font-medium shadow-sm transition-all hover:shadow",children:" "})]}),bt?(()=>{var Se,Pe,Ye;const X=[];return Ce!=null&&Ce.insight&&X.push({id:"insight-"+Date.now(),type:"tip",text:Ce.insight}),Ce!=null&&Ce.suggestion&&X.push({id:"sugg-"+Date.now(),type:"tip",text:` : ${Ce.suggestion}`}),(Se=Ce==null?void 0:Ce.signals)!=null&&Se.pains&&Ce.signals.pains.forEach((at,St)=>{X.push({id:`pain-${St}`,type:"warning",text:`  : ${at.text}`})}),(Pe=Ce==null?void 0:Ce.signals)!=null&&Pe.objections&&Ce.signals.objections.forEach((at,St)=>{X.push({id:`obj-${St}`,type:"warning",text:` : ${at.text}`})}),(Ye=Ce==null?void 0:Ce.signals)!=null&&Ye.vision&&Ce.signals.vision.forEach((at,St)=>{X.push({id:`vis-${St}`,type:"tip",text:` : ${at.text}`})}),s.jsxs("div",{className:"relative h-full flex flex-col min-h-0 bg-white",children:[s.jsx("div",{className:"absolute top-24 left-4 z-[50]",children:s.jsx("button",{onClick:()=>rr(at=>at==="copilot"?"legacy":"copilot"),className:"bg-slate-800 text-white p-2 rounded-full shadow-xl hover:bg-slate-700 transition-colors border border-slate-600",title:Ct==="copilot"?"Switch to Legacy View":"Switch to New View",children:s.jsx(B9,{className:"w-5 h-5"})})}),Ct==="copilot"?s.jsx($q,{transcript:oe.map((at,St)=>({id:at.id||`msg-${St}`,speaker:at.speaker||"unknown",text:at.text||"",timestamp:at.timestamp||new Date().toISOString(),isFinal:at.isFinal})),coachSuggestions:X,onEndCall:t,orgId:n}):s.jsx(Lq,{transcripts:oe,coachingData:Ce,callDuration:It,currentLead:Ze,onEndCall:t,formatTime:nr})]})})():S?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx(rt,{className:"w-8 h-8 animate-spin text-brand-500"})}):s.jsx("div",{className:"flex-1 flex flex-col h-full overflow-hidden",children:Ze?s.jsxs("div",{className:"flex-1 flex flex-col h-full relative",children:[s.jsxs("div",{className:"bg-gradient-to-l from-white via-white to-brand-50/30 border-b border-[#E7EAF2] p-5 flex items-center justify-between shadow-sm z-10",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-brand-500 to-indigo-600 rounded-full flex items-center justify-center text-xl font-bold text-white shadow-lg shadow-brand-500/20",children:Ze.name.charAt(0)}),Ze.priority==="Hot"&&s.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-rose-500 rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:s.jsx(su,{className:"w-3 h-3 text-white"})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h2",{className:"text-xl font-bold text-[#0B1220]",children:Ze.name}),s.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-semibold border ${Ze.status==="New"?"bg-indigo-50 text-indigo-600 border-indigo-200":Ze.status==="Discovery"?"bg-purple-50 text-purple-600 border-purple-200":Ze.status==="Proposal"?"bg-pink-50 text-pink-600 border-pink-200":Ze.status==="Negotiation"?"bg-amber-50 text-amber-600 border-amber-200":Ze.status==="Contacted"?"bg-sky-50 text-sky-600 border-sky-200":Ze.status==="Qualified"?"bg-teal-50 text-teal-600 border-teal-200":Ze.status==="Deal"||Ze.status==="Closed"?"bg-emerald-50 text-emerald-600 border-emerald-200":Ze.status==="Lost"?"bg-slate-100 text-slate-500 border-slate-200":"bg-slate-100 text-slate-600 border-slate-200"}`,children:Dt(Ze.status)||" "})]}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-[#667085]",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(ja,{className:"w-3.5 h-3.5 text-slate-400"}),Ze.company||""]}),s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx(mt,{className:"w-3.5 h-3.5 text-slate-400"}),s.jsx("span",{dir:"ltr",children:Ze.phone})]}),Ze.source&&s.jsx("span",{className:"px-2 py-0.5 rounded-md bg-slate-100 text-slate-500 text-xs font-medium",children:nt(Ze.source)})]})]})]}),s.jsxs("button",{onClick:()=>Or(Ze),disabled:!xe,className:`h-11 px-7 rounded-xl font-bold text-sm flex items-center gap-2.5 transition-all shadow-xl hover:-translate-y-0.5 hover:shadow-2xl
                                 ${xe?"bg-gradient-to-r from-brand-600 to-indigo-600 text-white hover:from-brand-700 hover:to-indigo-700 shadow-brand-500/30":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none"}`,children:[s.jsx(mt,{className:"w-4 h-4"})," "]}),s.jsx(BA,{leadPhone:Ze==null?void 0:Ze.phone,leadName:Ze==null?void 0:Ze.name,leadEmail:Ze==null?void 0:Ze.email,className:"hidden md:flex"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 bg-[#F7F8FC] space-y-6",ref:m,children:xt.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center opacity-60",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(jr,{className:"w-8 h-8 text-slate-300"})}),s.jsx("p",{className:"text-slate-500 text-sm",children:"    "}),s.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"    "})]}):xt.map((X,Se)=>{var Pe,Ye;return s.jsxs("div",{className:"bg-white rounded-2xl border border-[#E7EAF2] overflow-hidden shadow-sm",children:[s.jsxs("div",{onClick:()=>Ne(ye===X.id?null:X.id),className:"bg-slate-50/50 p-3 border-b border-[#E7EAF2] flex justify-between items-center cursor-pointer hover:bg-slate-100/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`p-1.5 rounded-lg ${X.status==="completed"?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-500"}`,children:s.jsx(mt,{className:"w-3.5 h-3.5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-bold text-[#0B1220]",children:[new Date(X.created_at).toLocaleDateString("he-IL"),"  ",new Date(X.created_at).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})]}),s.jsxs("div",{className:"text-[10px] text-slate-500 font-medium flex gap-2",children:[s.jsxs("span",{children:[": ",X.duration?`${Math.floor(X.duration/60)}:${(X.duration%60).toString().padStart(2,"0")}`:"00:00"]}),s.jsx("span",{children:""}),s.jsx("span",{children:Ut(X.status)})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[((Pe=X.summary)==null?void 0:Pe.score)&&s.jsxs(fr,{variant:X.summary.score>=80?"success":"warning",size:"sm",children:[" AI: ",X.summary.score]}),s.jsx(Et,{className:`w-5 h-5 text-slate-400 transition-transform ${ye===X.id?"rotate-180":""}`})]})]}),ye===X.id&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 space-y-3 bg-white max-h-80 overflow-y-auto",children:!X.transcript||Object.keys(X.transcript).length===0?s.jsx("div",{className:"text-center text-xs text-slate-400 py-2",children:"    "}):(()=>{const at=[];return X.transcript&&Object.entries(X.transcript).forEach(([St,Na])=>{Array.isArray(Na)&&Na.forEach(ol=>at.push({...ol,role:St}))}),at.sort((St,Na)=>new Date(St.timestamp).getTime()-new Date(Na.timestamp).getTime()).map((St,Na)=>s.jsxs("div",{className:`flex flex-col ${St.role==="agent"?"items-end":"items-start"} max-w-[90%] w-full ${St.role==="agent"?"mr-auto":"ml-auto"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 px-1",children:[s.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:new Date(St.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),s.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:St.role==="agent"?"":""})]}),s.jsx("div",{className:`
                                                                relative px-3 py-2 text-sm leading-relaxed rounded-xl
                                                                ${St.role==="agent"?"bg-[#EFF4FF] text-[#1E3A8A] rounded-tl-none":"bg-[#F9FAFB] text-[#344054] rounded-tr-none border border-slate-100"}
                                                             `,children:St.text})]},Na))})()}),((Ye=X.summary)==null?void 0:Ye.summary)&&s.jsxs("div",{className:"p-3 bg-slate-50 border-t border-[#E7EAF2] text-xs text-slate-600 leading-relaxed",children:[s.jsx("span",{className:"font-bold block mb-1",children:" :"}),X.summary.summary]}),s.jsxs("div",{className:"p-3 bg-white border-t border-[#E7EAF2] flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:at=>{at.stopPropagation(),je(X.id)},className:"flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-xs font-medium rounded-lg hover:from-blue-600 hover:to-indigo-600 transition-all shadow-sm",children:[s.jsx(On,{className:"w-3.5 h-3.5"}),"  "]}),s.jsxs("button",{onClick:at=>{at.stopPropagation(),Ne(null)},className:"flex items-center gap-1.5 px-3 py-2 bg-slate-100 text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-200 transition-all",children:[s.jsx(Rt,{className:"w-3.5 h-3.5"}),""]})]})]})]},X.id||Se)})})]}):s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 md:p-8 overflow-y-auto",children:[s.jsxs("div",{className:"bg-white rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.04)] border border-[#E7EAF2] p-6 md:p-10 max-w-lg w-full text-center relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-400 to-purple-500"}),s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-brand-50/50 rounded-full blur-3xl -mr-32 -mt-32 pointer-events-none"}),s.jsx("div",{className:"w-20 h-20 bg-brand-50 rounded-2xl flex items-center justify-center mx-auto mb-6 relative z-10 shadow-sm border border-brand-100",children:s.jsx(mt,{className:"w-9 h-9 text-brand-600"})}),s.jsx("h2",{className:"text-xl md:text-2xl font-bold text-[#0B1220] mb-2 relative z-10",children:"  "}),s.jsx("p",{className:"text-[#667085] text-sm mb-8 max-w-xs mx-auto leading-relaxed relative z-10",children:"           ."}),s.jsxs("div",{className:"space-y-3 relative z-10",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:h,onChange:X=>f(X.target.value),className:"w-full h-12 pl-4 pr-10 bg-[#FAFAFC] border border-[#E7EAF2] rounded-xl text-sm font-medium text-[#0B1220] outline-none focus:border-brand-500 focus:ring-2 focus:ring-brand-500/10 appearance-none cursor-pointer transition-all",disabled:U,children:[s.jsx("option",{value:"",disabled:!0,children:U?" ...":ce.length===0?"  -   ":" ..."}),ce.map(X=>s.jsx("option",{value:X.id,children:X.name},X.id))]}),s.jsx(Et,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-[#98A2B3] pointer-events-none"})]}),s.jsxs("button",{onClick:on,disabled:!h||!xe,className:`w-full h-12 rounded-xl font-bold text-sm flex items-center justify-center gap-2 transition-all shadow-lg hover:-translate-y-0.5
                                   ${h&&xe?"bg-brand-600 text-white hover:bg-brand-700 shadow-brand-500/25":"bg-slate-100 text-slate-400 cursor-not-allowed shadow-none border border-slate-200"}`,children:[s.jsx(Hl,{className:"w-4 h-4 fill-current"})," "]})]})]}),s.jsxs("div",{className:"mt-8 flex flex-col items-center gap-2",children:[s.jsxs("p",{className:"text-xs text-[#98A2B3] font-medium flex items-center gap-2",children:[s.jsx(jr,{className:"w-3 h-3 text-purple-500"}),"AI Coach    ",xe&&s.jsx("span",{className:"text-emerald-500",children:" "})]}),s.jsx("button",{onClick:Te,className:"text-[10px] text-slate-400 hover:text-brand-500 underline",children:"  (Preflight)"})]})]})})]}),s.jsxs("div",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-[#F7F8FC] border-r border-[#E7EAF2] h-full flex flex-col shadow-2xl transition-transform duration-300 ease-in-out
        xl:relative xl:translate-x-0 xl:shadow-[inset_4px_0_24px_rgba(0,0,0,0.01)] xl:z-auto xl:flex-shrink-0
        ${w?"translate-x-0":"-translate-x-full xl:translate-x-0"}
      `,children:[s.jsx("div",{className:"p-4 border-b border-[#E7EAF2]",children:s.jsx("h2",{className:"font-bold text-[#0B1220]",children:" "})}),s.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800 px-4",children:[s.jsx("button",{onClick:()=>d("followup"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${c==="followup"?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:" "}),s.jsx("button",{onClick:()=>d("queue"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${c==="queue"?"border-brand-500 text-brand-600 dark:text-brand-400":"border-transparent text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(jr,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:" "})]})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[c==="queue"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-brand-50 dark:bg-brand-900/20 p-4 rounded-xl border border-brand-100 dark:border-brand-800/50",children:[s.jsx("h3",{className:"font-bold text-brand-900 dark:text-brand-100 mb-1",children:"Power Dialer "}),s.jsxs("p",{className:"text-xs text-brand-700 dark:text-brand-300 mb-3",children:["   ",jn.length,"  .     ."]}),s.jsxs("button",{onClick:Le,disabled:g,className:`w-full py-2 bg-brand-600 hover:bg-brand-700 text-white rounded-lg text-sm font-medium shadow-sm shadow-brand-200 dark:shadow-none transition-all active:scale-[0.98] flex items-center justify-center gap-2 ${g?"opacity-70 cursor-not-allowed":""}`,children:[g?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):s.jsx(Hl,{className:"w-4 h-4 fill-current"}),g?" ...":"  "]})]}),He?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(rt,{className:"w-6 h-6 animate-spin text-slate-400"})}):jn.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:" !   "}):s.jsx("div",{className:"space-y-2",children:jn.map((X,Se)=>s.jsxs("div",{className:"group bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-3 rounded-lg hover:border-brand-300 dark:hover:border-brand-700 transition-colors cursor-pointer relative",children:[s.jsxs("div",{className:"absolute top-2 left-2 text-[10px] font-bold text-slate-300",children:["#",Se+1]}),s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-white truncate max-w-[140px]",children:X.name}),s.jsx(fr,{variant:X.priorityReason==="High AI Score"?"success":"neutral",className:"text-[10px] px-1.5 py-0",children:X.priorityReason})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{children:X.phone}),s.jsx("span",{children:X.status})]})]},X.id))})]}),c==="followup"&&s.jsx("div",{className:"space-y-3",children:M.length===0?s.jsxs("div",{className:"text-center py-10 text-slate-400",children:[s.jsx(Br,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"   "}),s.jsx("p",{className:"text-xs mt-1",children:"     "})]}):M.map(X=>s.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-3 hover:border-brand-300 transition-colors cursor-pointer",onClick:()=>{se(X.lead_id)},children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("span",{className:"font-medium text-slate-900 truncate",children:X.lead_name}),s.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${new Date(X.follow_up_at)<new Date?"bg-rose-100 text-rose-700":"bg-blue-100 text-blue-700"}`,children:new Date(X.follow_up_at)<new Date?"":""})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[s.jsx(Br,{className:"w-3 h-3"}),s.jsx("span",{children:new Date(X.follow_up_at).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})}),X.notes&&s.jsxs("span",{className:"truncate",children:[" ",X.notes]})]})]},X.id))})]}),s.jsx("div",{className:"p-4 border-b border-slate-200",children:s.jsx(qU,{userId:r,orgId:n,compact:!0})}),s.jsx("div",{className:"p-4 space-y-3",children:B?s.jsx("div",{className:"text-center text-slate-400 py-8",children:" ..."}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-orange-50",children:[s.jsx(At,{className:"w-5 h-5 text-orange-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:""}),s.jsxs("p",{className:"font-bold text-slate-800",children:[(W==null?void 0:W.calls.answered)||0," / ",(W==null?void 0:W.calls.total)||0]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-emerald-50",children:[s.jsx(w3,{className:"w-5 h-5 text-emerald-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:""}),s.jsx("p",{className:"font-bold text-slate-800",children:(W==null?void 0:W.deals)||0})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-purple-50",children:[s.jsx(bw,{className:"w-5 h-5 text-purple-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:" "}),s.jsx("p",{className:"font-bold text-slate-800",children:(W==null?void 0:W.newLeads)||0})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-100",children:[s.jsx(DL,{className:"w-5 h-5 text-slate-600"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"  "}),s.jsx("p",{className:"font-bold text-slate-800",children:nr((W==null?void 0:W.avgCallTime)||0)})]})]})]})})]}),ve&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[99999]",onClick:()=>je(null),children:s.jsxs("div",{onClick:X=>X.stopPropagation(),className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 mb-4 flex items-center gap-2",children:[s.jsx(On,{className:"w-5 h-5 text-brand-500"}),"  "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsx("input",{type:"date",value:Q,min:new Date().toISOString().split("T")[0],onChange:X=>_e(X.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl bg-slate-50 text-slate-900 outline-none focus:ring-2 focus:ring-brand-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:""}),s.jsx("input",{type:"time",value:de,min:Q===new Date().toISOString().split("T")[0]?new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):void 0,onChange:X=>Y(X.target.value),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl bg-slate-50 text-slate-900 outline-none focus:ring-2 focus:ring-brand-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:" ()"}),s.jsx("textarea",{value:we,onChange:X=>Oe(X.target.value),placeholder:"    ?",className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl bg-slate-50 text-slate-900 outline-none focus:ring-2 focus:ring-brand-500 resize-none h-20"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>je(null),className:"flex-1 px-4 py-2.5 bg-slate-100 text-slate-600 font-medium rounded-xl hover:bg-slate-200 transition-all",children:""}),s.jsx("button",{onClick:sr,disabled:!Q,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-brand-600 to-indigo-600 text-white font-medium rounded-xl hover:from-brand-700 hover:to-indigo-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:" "})]})]})})]})};function j0(e,t){const r=t.split(".");let n=e;for(const a of r){if(typeof n=="boolean"||typeof n=="string")return n;if(n==null||typeof n!="object")return;n=n[a]}return n}function Uq(e){const{theme:t,clearTheme:r,applyTheme:n,...a}=e;return a}function rT(e,t){let r=Uq(e);return t&&(r={...t,...e}),r}const al={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")};al.defaultMerge;function Bq(e,t){return t}function qq(e,t){return e.filter(r=>r!==void 0)}var xS;(function(e){e[e.NOT=0]="NOT",e[e.RECORD=1]="RECORD",e[e.ARRAY=2]="ARRAY",e[e.SET=3]="SET",e[e.MAP=4]="MAP",e[e.OTHER=5]="OTHER"})(xS||(xS={}));function bS(e){return typeof e!="object"||e===null?0:Array.isArray(e)?2:Vq(e)?1:e instanceof Set?3:e instanceof Map?4:5}function Fq(e){const t=new Set;for(const r of e)for(const n of[...Object.keys(r),...Object.getOwnPropertySymbols(r)])t.add(n);return t}function Hq(e,t){return typeof e=="object"&&Object.prototype.propertyIsEnumerable.call(e,t)}function nT(e){var n;let t=0,r=(n=e[0])==null?void 0:n[Symbol.iterator]();return{[Symbol.iterator](){return{next(){var a;do{if(r===void 0)return{done:!0,value:void 0};const l=r.next();if(l.done===!0){t+=1,r=(a=e[t])==null?void 0:a[Symbol.iterator]();continue}return{done:!1,value:l.value}}while(!0)}}}}}const vS=["[object Object]","[object Module]"];function Vq(e){if(!vS.includes(Object.prototype.toString.call(e)))return!1;const{constructor:t}=e;if(t===void 0)return!0;const r=t.prototype;return!(r===null||typeof r!="object"||!vS.includes(Object.prototype.toString.call(r))||!r.hasOwnProperty("isPrototypeOf"))}function Wq(e,t,r){const n={};for(const a of Fq(e)){const l=[];for(const h of e)Hq(h,a)&&l.push(h[a]);if(l.length===0)continue;const c=t.metaDataUpdater(r,{key:a,parents:e}),d=aT(l,t,c);d!==al.skip&&(a==="__proto__"?Object.defineProperty(n,a,{value:d,configurable:!0,enumerable:!0,writable:!0}):n[a]=d)}return n}function Gq(e){return e.flat()}function Kq(e){return new Set(nT(e))}function Yq(e){return new Map(nT(e))}function Xq(e){return e.at(-1)}const jf={mergeRecords:Wq,mergeArrays:Gq,mergeSets:Kq,mergeMaps:Yq,mergeOthers:Xq};function Jq(...e){return sT({})(...e)}function sT(e,t){const r=Qq(e,n);function n(...a){return aT(a,r,t)}return n}function Qq(e,t){return{defaultMergeFunctions:jf,mergeFunctions:{...jf,...Object.fromEntries(Object.entries(e).filter(([r,n])=>Object.hasOwn(jf,r)).map(([r,n])=>n===!1?[r,jf.mergeOthers]:[r,n]))},metaDataUpdater:e.metaDataUpdater??Bq,deepmerge:t,useImplicitDefaultMerging:e.enableImplicitDefaultMerging??!1,filterValues:e.filterValues===!1?void 0:e.filterValues??qq,actions:al}}function aT(e,t,r){var l;const n=((l=t.filterValues)==null?void 0:l.call(t,e,r))??e;if(n.length===0)return;if(n.length===1)return zx(n,t,r);const a=bS(n[0]);if(a!==0&&a!==5){for(let c=1;c<n.length;c++)if(bS(n[c])!==a)return zx(n,t,r)}switch(a){case 1:return Zq(n,t,r);case 2:return eF(n,t,r);case 3:return tF(n,t,r);case 4:return rF(n,t,r);default:return zx(n,t,r)}}function Zq(e,t,r){const n=t.mergeFunctions.mergeRecords(e,t,r);return n===al.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeRecords!==t.defaultMergeFunctions.mergeRecords?t.defaultMergeFunctions.mergeRecords(e,t,r):n}function eF(e,t,r){const n=t.mergeFunctions.mergeArrays(e,t,r);return n===al.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeArrays!==t.defaultMergeFunctions.mergeArrays?t.defaultMergeFunctions.mergeArrays(e):n}function tF(e,t,r){const n=t.mergeFunctions.mergeSets(e,t,r);return n===al.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeSets!==t.defaultMergeFunctions.mergeSets?t.defaultMergeFunctions.mergeSets(e):n}function rF(e,t,r){const n=t.mergeFunctions.mergeMaps(e,t,r);return n===al.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeMaps!==t.defaultMergeFunctions.mergeMaps?t.defaultMergeFunctions.mergeMaps(e):n}function zx(e,t,r){const n=t.mergeFunctions.mergeOthers(e,t,r);return n===al.defaultMerge||t.useImplicitDefaultMerging&&n===void 0&&t.mergeFunctions.mergeOthers!==t.defaultMergeFunctions.mergeOthers?t.defaultMergeFunctions.mergeOthers(e):n}function Jf(e){var t,r,n;if(Array.isArray(e)){for(r=Array(t=e.length);t--;)r[t]=(n=e[t])&&typeof n=="object"?Jf(n):n;return r}if(Object.prototype.toString.call(e)==="[object Object]"){r={};for(t in e)t==="__proto__"?Object.defineProperty(r,t,{value:Jf(e[t]),configurable:!0,enumerable:!0,writable:!0}):r[t]=(n=e[t])&&typeof n=="object"?Jf(n):n;return r}return e}const Dw={dark:void 0,prefix:void 0,version:void 0};function nF(){return Dw.dark}function iT(){return Dw.prefix}function lT(){return Dw.version}function sF(e){return sT({mergeOthers:(t,r)=>{if(t.some(n=>typeof n=="string")){const n=t.filter(c=>typeof c=="string"),a=new Set,l=[];for(const c of n){const d=[...new Set(c.split(/\s+/))];l.push(d.filter(h=>!a.has(h)).join(" "));for(const h of d)a.add(h)}return e(l)}return r.actions.defaultMerge}})}function Xv(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e))return e.length!==t.length?!1:e.every((n,a)=>Xv(n,t[a]));if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();const r=Object.keys(e);return r.length!==Object.keys(t).length?!1:r.every(n=>Object.prototype.hasOwnProperty.call(t,n)&&Xv(e[n],t[n]))}return e!==e&&t!==t}const Mw="-",aF=e=>{const t=lF(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:c=>{const d=c.split(Mw);return d[0]===""&&d.length!==1&&d.shift(),oT(d,t)||iF(c)},getConflictingClassGroupIds:(c,d)=>{const h=r[c]||[];return d&&n[c]?[...h,...n[c]]:h}}},oT=(e,t)=>{var c;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?oT(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const l=e.join(Mw);return(c=t.validators.find(({validator:d})=>d(l)))==null?void 0:c.classGroupId},yS=/^\[(.+)\]$/,iF=e=>{if(yS.test(e)){const t=yS.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},lF=e=>{const{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(const a in r)Jv(r[a],n,a,t);return n},Jv=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const l=a===""?t:wS(t,a);l.classGroupId=r;return}if(typeof a=="function"){if(oF(a)){Jv(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([l,c])=>{Jv(c,wS(t,l),r,n)})})},wS=(e,t)=>{let r=e;return t.split(Mw).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},oF=e=>e.isThemeGetter,cF=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(l,c)=>{r.set(l,c),t++,t>e&&(t=0,n=r,r=new Map)};return{get(l){let c=r.get(l);if(c!==void 0)return c;if((c=n.get(l))!==void 0)return a(l,c),c},set(l,c){r.has(l)?r.set(l,c):a(l,c)}}},Qv="!",Zv=":",dF=Zv.length,uF=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=a=>{const l=[];let c=0,d=0,h=0,f;for(let j=0;j<a.length;j++){let w=a[j];if(c===0&&d===0){if(w===Zv){l.push(a.slice(h,j)),h=j+dF;continue}if(w==="/"){f=j;continue}}w==="["?c++:w==="]"?c--:w==="("?d++:w===")"&&d--}const m=l.length===0?a:a.substring(h),g=hF(m),x=g!==m,b=f&&f>h?f-h:void 0;return{modifiers:l,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:b}};if(t){const a=t+Zv,l=n;n=c=>c.startsWith(a)?l(c.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(r){const a=n;n=l=>r({className:l,parseClassName:a})}return n},hF=e=>e.endsWith(Qv)?e.substring(0,e.length-1):e.startsWith(Qv)?e.substring(1):e,fF=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const a=[];let l=[];return n.forEach(c=>{c[0]==="["||t[c]?(a.push(...l.sort(),c),l=[]):l.push(c)}),a.push(...l.sort()),a}},mF=e=>({cache:cF(e.cacheSize),parseClassName:uF(e),sortModifiers:fF(e),...aF(e)}),pF=/\s+/,gF=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:l}=t,c=[],d=e.trim().split(pF);let h="";for(let f=d.length-1;f>=0;f-=1){const m=d[f],{isExternal:g,modifiers:x,hasImportantModifier:b,baseClassName:j,maybePostfixModifierPosition:w}=r(m);if(g){h=m+(h.length>0?" "+h:h);continue}let _=!!w,N=n(_?j.substring(0,w):j);if(!N){if(!_){h=m+(h.length>0?" "+h:h);continue}if(N=n(j),!N){h=m+(h.length>0?" "+h:h);continue}_=!1}const C=l(x).join(":"),E=b?C+Qv:C,A=E+N;if(c.includes(A))continue;c.push(A);const S=a(N,_);for(let T=0;T<S.length;++T){const D=S[T];c.push(E+D)}h=m+(h.length>0?" "+h:h)}return h};function xF(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=cT(t))&&(n&&(n+=" "),n+=r);return n}const cT=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=cT(e[n]))&&(r&&(r+=" "),r+=t);return r};function jS(e,...t){let r,n,a,l=c;function c(h){const f=t.reduce((m,g)=>g(m),e());return r=mF(f),n=r.cache.get,a=r.cache.set,l=d,d(h)}function d(h){const f=n(h);if(f)return f;const m=gF(h,r);return a(h,m),m}return function(){return l(xF.apply(null,arguments))}}const Zr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},dT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,uT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,bF=/^\d+\/\d+$/,vF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,yF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,jF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,_F=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ko=e=>bF.test(e),kt=e=>!!e&&!Number.isNaN(Number(e)),Cl=e=>!!e&&Number.isInteger(Number(e)),_S=e=>e.endsWith("%")&&kt(e.slice(0,-1)),Gi=e=>vF.test(e),kF=()=>!0,NF=e=>yF.test(e)&&!wF.test(e),Rw=()=>!1,SF=e=>jF.test(e),CF=e=>_F.test(e),EF=e=>!De(e)&&!Me(e),AF=e=>Rc(e,mT,Rw),De=e=>dT.test(e),El=e=>Rc(e,pT,NF),Ux=e=>Rc(e,UF,kt),TF=e=>Rc(e,hT,Rw),OF=e=>Rc(e,fT,CF),PF=e=>Rc(e,Rw,SF),Me=e=>uT.test(e),_f=e=>Ic(e,pT),DF=e=>Ic(e,BF),MF=e=>Ic(e,hT),RF=e=>Ic(e,mT),IF=e=>Ic(e,fT),$F=e=>Ic(e,qF,!0),Rc=(e,t,r)=>{const n=dT.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Ic=(e,t,r=!1)=>{const n=uT.exec(e);return n?n[1]?t(n[1]):r:!1},hT=e=>e==="position",LF=new Set(["image","url"]),fT=e=>LF.has(e),zF=new Set(["length","size","percentage"]),mT=e=>zF.has(e),pT=e=>e==="length",UF=e=>e==="number",BF=e=>e==="family-name",qF=e=>e==="shadow",kS=()=>{const e=Zr("color"),t=Zr("font"),r=Zr("text"),n=Zr("font-weight"),a=Zr("tracking"),l=Zr("leading"),c=Zr("breakpoint"),d=Zr("container"),h=Zr("spacing"),f=Zr("radius"),m=Zr("shadow"),g=Zr("inset-shadow"),x=Zr("drop-shadow"),b=Zr("blur"),j=Zr("perspective"),w=Zr("aspect"),_=Zr("ease"),N=Zr("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],A=()=>["auto","hidden","clip","visible","scroll"],S=()=>["auto","contain","none"],T=()=>[Ko,"px","full","auto",Me,De,h],D=()=>[Cl,"none","subgrid",Me,De],P=()=>["auto",{span:["full",Cl,Me,De]},Me,De],I=()=>[Cl,"auto",Me,De],$=()=>["auto","min","max","fr",Me,De],M=()=>[Me,De,h],R=()=>["start","end","center","between","around","evenly","stretch","baseline"],q=()=>["start","end","center","stretch"],H=()=>[Me,De,h],W=()=>["px",...H()],L=()=>["px","auto",...H()],B=()=>[Ko,"auto","px","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",Me,De,h],G=()=>[e,Me,De],ce=()=>[_S,El],ge=()=>["","none","full",f,Me,De],U=()=>["",kt,_f,El],V=()=>["solid","dashed","dotted","double"],te=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],he=()=>["","none",b,Me,De],ye=()=>["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Me,De],Ne=()=>["none",kt,Me,De],ve=()=>["none",kt,Me,De],je=()=>[kt,Me,De],Q=()=>[Ko,"full","px",Me,De,h];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Gi],breakpoint:[Gi],color:[kF],container:[Gi],"drop-shadow":[Gi],ease:["in","out","in-out"],font:[EF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Gi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Gi],shadow:[Gi],spacing:[kt],text:[Gi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ko,De,Me,w]}],container:["container"],columns:[{columns:[kt,De,Me,d]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...E(),De,Me]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:T()}],"inset-x":[{"inset-x":T()}],"inset-y":[{"inset-y":T()}],start:[{start:T()}],end:[{end:T()}],top:[{top:T()}],right:[{right:T()}],bottom:[{bottom:T()}],left:[{left:T()}],visibility:["visible","invisible","collapse"],z:[{z:[Cl,"auto",Me,De]}],basis:[{basis:[Ko,"full","auto",Me,De,d,h]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[kt,Ko,"auto","initial","none",De]}],grow:[{grow:["",kt,Me,De]}],shrink:[{shrink:["",kt,Me,De]}],order:[{order:[Cl,"first","last","none",Me,De]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":$()}],"auto-rows":[{"auto-rows":$()}],gap:[{gap:M()}],"gap-x":[{"gap-x":M()}],"gap-y":[{"gap-y":M()}],"justify-content":[{justify:[...R(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...R()]}],"align-items":[{items:[...q(),"baseline"]}],"align-self":[{self:["auto",...q(),"baseline"]}],"place-content":[{"place-content":R()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:W()}],px:[{px:W()}],py:[{py:W()}],ps:[{ps:W()}],pe:[{pe:W()}],pt:[{pt:W()}],pr:[{pr:W()}],pb:[{pb:W()}],pl:[{pl:W()}],m:[{m:L()}],mx:[{mx:L()}],my:[{my:L()}],ms:[{ms:L()}],me:[{me:L()}],mt:[{mt:L()}],mr:[{mr:L()}],mb:[{mb:L()}],ml:[{ml:L()}],"space-x":[{"space-x":H()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":H()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[d,"screen",...B()]}],"min-w":[{"min-w":[d,"screen","none",...B()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[c]},...B()]}],h:[{h:["screen",...B()]}],"min-h":[{"min-h":["screen","none",...B()]}],"max-h":[{"max-h":["screen",...B()]}],"font-size":[{text:["base",r,_f,El]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Me,Ux]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",_S,De]}],"font-family":[{font:[DF,De,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Me,De]}],"line-clamp":[{"line-clamp":[kt,"none",Me,Ux]}],leading:[{leading:[Me,De,l,h]}],"list-image":[{"list-image":["none",Me,De]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Me,De]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:G()}],"text-color":[{text:G()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:[kt,"from-font","auto",Me,El]}],"text-decoration-color":[{decoration:G()}],"underline-offset":[{"underline-offset":[kt,"auto",Me,De]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:["px",...H()]}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Me,De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Me,De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...E(),MF,TF]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:["auto","cover","contain",RF,AF]}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Cl,Me,De],radial:["",Me,De],conic:[Cl,Me,De]},IF,OF]}],"bg-color":[{bg:G()}],"gradient-from-pos":[{from:ce()}],"gradient-via-pos":[{via:ce()}],"gradient-to-pos":[{to:ce()}],"gradient-from":[{from:G()}],"gradient-via":[{via:G()}],"gradient-to":[{to:G()}],rounded:[{rounded:ge()}],"rounded-s":[{"rounded-s":ge()}],"rounded-e":[{"rounded-e":ge()}],"rounded-t":[{"rounded-t":ge()}],"rounded-r":[{"rounded-r":ge()}],"rounded-b":[{"rounded-b":ge()}],"rounded-l":[{"rounded-l":ge()}],"rounded-ss":[{"rounded-ss":ge()}],"rounded-se":[{"rounded-se":ge()}],"rounded-ee":[{"rounded-ee":ge()}],"rounded-es":[{"rounded-es":ge()}],"rounded-tl":[{"rounded-tl":ge()}],"rounded-tr":[{"rounded-tr":ge()}],"rounded-br":[{"rounded-br":ge()}],"rounded-bl":[{"rounded-bl":ge()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...V(),"hidden","none"]}],"divide-style":[{divide:[...V(),"hidden","none"]}],"border-color":[{border:G()}],"border-color-x":[{"border-x":G()}],"border-color-y":[{"border-y":G()}],"border-color-s":[{"border-s":G()}],"border-color-e":[{"border-e":G()}],"border-color-t":[{"border-t":G()}],"border-color-r":[{"border-r":G()}],"border-color-b":[{"border-b":G()}],"border-color-l":[{"border-l":G()}],"divide-color":[{divide:G()}],"outline-style":[{outline:[...V(),"none","hidden"]}],"outline-offset":[{"outline-offset":[kt,Me,De]}],"outline-w":[{outline:["",kt,_f,El]}],"outline-color":[{outline:[e]}],shadow:[{shadow:["","none",m,$F,PF]}],"shadow-color":[{shadow:G()}],"inset-shadow":[{"inset-shadow":["none",Me,De,g]}],"inset-shadow-color":[{"inset-shadow":G()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:G()}],"ring-offset-w":[{"ring-offset":[kt,El]}],"ring-offset-color":[{"ring-offset":G()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":G()}],opacity:[{opacity:[kt,Me,De]}],"mix-blend":[{"mix-blend":[...te(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":te()}],filter:[{filter:["","none",Me,De]}],blur:[{blur:he()}],brightness:[{brightness:[kt,Me,De]}],contrast:[{contrast:[kt,Me,De]}],"drop-shadow":[{"drop-shadow":["","none",x,Me,De]}],grayscale:[{grayscale:["",kt,Me,De]}],"hue-rotate":[{"hue-rotate":[kt,Me,De]}],invert:[{invert:["",kt,Me,De]}],saturate:[{saturate:[kt,Me,De]}],sepia:[{sepia:["",kt,Me,De]}],"backdrop-filter":[{"backdrop-filter":["","none",Me,De]}],"backdrop-blur":[{"backdrop-blur":he()}],"backdrop-brightness":[{"backdrop-brightness":[kt,Me,De]}],"backdrop-contrast":[{"backdrop-contrast":[kt,Me,De]}],"backdrop-grayscale":[{"backdrop-grayscale":["",kt,Me,De]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[kt,Me,De]}],"backdrop-invert":[{"backdrop-invert":["",kt,Me,De]}],"backdrop-opacity":[{"backdrop-opacity":[kt,Me,De]}],"backdrop-saturate":[{"backdrop-saturate":[kt,Me,De]}],"backdrop-sepia":[{"backdrop-sepia":["",kt,Me,De]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":H()}],"border-spacing-x":[{"border-spacing-x":H()}],"border-spacing-y":[{"border-spacing-y":H()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Me,De]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[kt,"initial",Me,De]}],ease:[{ease:["linear","initial",_,Me,De]}],delay:[{delay:[kt,Me,De]}],animate:[{animate:["none",N,Me,De]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[j,Me,De]}],"perspective-origin":[{"perspective-origin":ye()}],rotate:[{rotate:Ne()}],"rotate-x":[{"rotate-x":Ne()}],"rotate-y":[{"rotate-y":Ne()}],"rotate-z":[{"rotate-z":Ne()}],scale:[{scale:ve()}],"scale-x":[{"scale-x":ve()}],"scale-y":[{"scale-y":ve()}],"scale-z":[{"scale-z":ve()}],"scale-3d":["scale-3d"],skew:[{skew:je()}],"skew-x":[{"skew-x":je()}],"skew-y":[{"skew-y":je()}],transform:[{transform:[Me,De,"","none","gpu","cpu"]}],"transform-origin":[{origin:ye()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Q()}],"translate-x":[{"translate-x":Q()}],"translate-y":[{"translate-y":Q()}],"translate-z":[{"translate-z":Q()}],"translate-none":["translate-none"],accent:[{accent:G()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:G()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Me,De]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":H()}],"scroll-mx":[{"scroll-mx":H()}],"scroll-my":[{"scroll-my":H()}],"scroll-ms":[{"scroll-ms":H()}],"scroll-me":[{"scroll-me":H()}],"scroll-mt":[{"scroll-mt":H()}],"scroll-mr":[{"scroll-mr":H()}],"scroll-mb":[{"scroll-mb":H()}],"scroll-ml":[{"scroll-ml":H()}],"scroll-p":[{"scroll-p":H()}],"scroll-px":[{"scroll-px":H()}],"scroll-py":[{"scroll-py":H()}],"scroll-ps":[{"scroll-ps":H()}],"scroll-pe":[{"scroll-pe":H()}],"scroll-pt":[{"scroll-pt":H()}],"scroll-pr":[{"scroll-pr":H()}],"scroll-pb":[{"scroll-pb":H()}],"scroll-pl":[{"scroll-pl":H()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Me,De]}],fill:[{fill:["none",...G()]}],"stroke-w":[{stroke:[kt,_f,El,Ux]}],stroke:[{stroke:["none",...G()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["before","after","placeholder","file","marker","selection","first-line","first-letter","backdrop","*","**"]}},FF=(e,{cacheSize:t,prefix:r,experimentalParseClassName:n,extend:a={},override:l={}})=>(Yd(e,"cacheSize",t),Yd(e,"prefix",r),Yd(e,"experimentalParseClassName",n),kf(e.theme,l.theme),kf(e.classGroups,l.classGroups),kf(e.conflictingClassGroups,l.conflictingClassGroups),kf(e.conflictingClassGroupModifiers,l.conflictingClassGroupModifiers),Yd(e,"orderSensitiveModifiers",l.orderSensitiveModifiers),Nf(e.theme,a.theme),Nf(e.classGroups,a.classGroups),Nf(e.conflictingClassGroups,a.conflictingClassGroups),Nf(e.conflictingClassGroupModifiers,a.conflictingClassGroupModifiers),gT(e,a,"orderSensitiveModifiers"),e),Yd=(e,t,r)=>{r!==void 0&&(e[t]=r)},kf=(e,t)=>{if(t)for(const r in t)Yd(e,r,t[r])},Nf=(e,t)=>{if(t)for(const r in t)gT(e,t,r)},gT=(e,t,r)=>{const n=t[r];n!==void 0&&(e[r]=e[r]?e[r].concat(n):n)},HF=(e,...t)=>typeof e=="function"?jS(kS,e,...t):jS(()=>FF(kS(),e),...t),NS=new Map;function Gn(...e){const t=iT(),r=lT(),n=`${t}.${r}`,a=NS.get(n);if(a)return a(...e);const l=HF({extend:{classGroups:{"bg-image":["bg-arrow-down-icon","bg-check-icon","bg-dash-icon","bg-dot-icon"],shadow:["shadow-sm-light"]}},prefix:t});return NS.set(n,l),l(...e)}function xT(...e){return VF(()=>WF(...e),e)}function VF(e,t){const r=v.useRef(),n=v.useRef();return(!r.current||!Xv(r.current,t))&&(r.current=t,n.current=e()),n.current}function WF([e,...t],r,n){const a=nF(),l=iT(),c=lT(),d=t!=null&&t.length?t==null?void 0:t.filter(x=>x!==void 0):void 0,h=r!=null&&r.length?r==null?void 0:r.filter(x=>x!==void 0):void 0,f=n!=null&&n.length?n==null?void 0:n.filter(x=>x!==void 0):void 0,m=h!=null&&h.length||a===!1||c===4||l?Jf(e):e;if(h!=null&&h.length){const x=ey(m,!1);let b=!1;for(const j of h)j&&(b=!0),GF(x,j);b&&YF(m,x)}let g=m;if(d!=null&&d.length&&(g=sF(Gn)(m,...d)),f!=null&&f.length&&(d!=null&&d.length)){const x=ey(m,"merge");let b=!1;for(const j of f)j!=="merge"&&(b=!0),KF(x,j);b&&XF(g,Jq(m,...t),x)}return g}function GF(e,t){function r(n,a){if(typeof a=="boolean")if(typeof n=="object"&&n!==null)for(const l in n)n[l]=r(n[l],a);else return a;if(typeof a=="object"&&a!==null)for(const l in a)n[l]=r(n[l],a[l]);return n}r(e,t)}function KF(e,t){function r(n,a){if(typeof a=="string")if(typeof n=="object"&&n!==null)for(const l in n)n[l]=r(n[l],a);else return a;if(typeof a=="object"&&a!==null)for(const l in a)n[l]=r(n[l],a[l]);return n}r(e,t)}function YF(e,t){function r(n,a){if(a===!0)if(typeof n=="object"&&n!==null)for(const l in n)n[l]=r(n[l],a);else return"";if(typeof a=="object"&&a!==null)for(const l in a)n[l]=r(n[l],a[l]);return n}r(e,t)}function XF(e,t,r){function n(a,l,c){if(c==="replace")if(typeof a=="object"&&a!==null)for(const d in a)a[d]=n(a[d],l[d],c);else return l;if(typeof c=="object"&&c!==null)for(const d in c)a[d]=n(a[d],l[d],c[d]);return a}n(e,t,r)}function ey(e,t){if(e===null||typeof e!="object")return t;const r={};for(const n in e)r[n]=ey(e[n],t);return r}const JF=v.createContext(void 0);function bT(){return v.useContext(JF)??{}}var Cm=g3();const vT=ys(Cm),yT=v.forwardRef((e,t)=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",stroke:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",ref:t,...e,children:s.jsx("path",{fillRule:"evenodd",stroke:"none",d:"M9.707 16.707a1 1 0 0 1-1.414 0l-6-6a1 1 0 0 1 0-1.414l6-6a1 1 0 0 1 1.414 1.414L5.414 9H17a1 1 0 1 1 0 2H5.414l4.293 4.293a1 1 0 0 1 0 1.414z",clipRule:"evenodd"})}));yT.displayName="ArrowLeftIcon";const wT=v.forwardRef((e,t)=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",stroke:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",ref:t,...e,children:s.jsx("path",{fillRule:"evenodd",stroke:"none",d:"M10.293 3.293a1 1 0 0 1 1.414 0l6 6a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414L14.586 11H3a1 1 0 1 1 0-2h11.586l-4.293-4.293a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})}));wT.displayName="ArrowRightIcon";const jT=v.forwardRef((e,t)=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",stroke:"currentColor",strokeWidth:0,viewBox:"0 0 20 20",ref:t,...e,children:s.jsx("path",{fillRule:"evenodd",stroke:"none",d:"M6 2a1 1 0 0 0-1 1v1H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1V3a1 1 0 1 0-2 0v1H7V3a1 1 0 0 0-1-1zm0 5a1 1 0 0 0 0 2h8a1 1 0 1 0 0-2H6z",clipRule:"evenodd"})}));jT.displayName="CalendarIcon";const QF={base:"flex",addon:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-200 px-3 text-sm text-gray-900 dark:border-gray-600 dark:bg-gray-600 dark:text-gray-400",field:{base:"relative w-full",icon:{base:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},rightIcon:{base:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3",svg:"h-5 w-5 text-gray-500 dark:text-gray-400"},input:{base:"block w-full border focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50",sizes:{sm:"p-2 sm:text-xs",md:"p-2.5 text-sm",lg:"p-4 sm:text-base"},colors:{gray:"border-gray-300 bg-gray-50 text-gray-900 placeholder-gray-500 focus:border-primary-500 focus:ring-primary-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-primary-500 dark:focus:ring-primary-500",info:"border-cyan-500 bg-cyan-50 text-cyan-900 placeholder-cyan-700 focus:border-cyan-500 focus:ring-cyan-500 dark:border-cyan-400 dark:bg-cyan-100 dark:focus:border-cyan-500 dark:focus:ring-cyan-500",failure:"border-red-500 bg-red-50 text-red-900 placeholder-red-700 focus:border-red-500 focus:ring-red-500 dark:border-red-400 dark:bg-red-100 dark:focus:border-red-500 dark:focus:ring-red-500",warning:"border-yellow-500 bg-yellow-50 text-yellow-900 placeholder-yellow-700 focus:border-yellow-500 focus:ring-yellow-500 dark:border-yellow-400 dark:bg-yellow-100 dark:focus:border-yellow-500 dark:focus:ring-yellow-500",success:"border-green-500 bg-green-50 text-green-900 placeholder-green-700 focus:border-green-500 focus:ring-green-500 dark:border-green-400 dark:bg-green-100 dark:focus:border-green-500 dark:focus:ring-green-500"},withRightIcon:{on:"pr-10",off:""},withIcon:{on:"pl-10",off:""},withAddon:{on:"rounded-r-lg",off:"rounded-lg"},withShadow:{on:"shadow-sm dark:shadow-sm-light",off:""}}}},_T=v.forwardRef((e,t)=>{var b,j;const r=bT(),n=xT([QF,(b=r.theme)==null?void 0:b.textInput,e.theme],[j0(r.clearTheme,"textInput"),e.clearTheme],[j0(r.applyTheme,"textInput"),e.applyTheme]),{addon:a,className:l,color:c="gray",icon:d,rightIcon:h,shadow:f,sizing:m="md",type:g="text",...x}=rT(e,(j=r.props)==null?void 0:j.textInput);return s.jsxs("div",{className:Gn(n.base,l),children:[a&&s.jsx("span",{className:n.addon,children:a}),s.jsxs("div",{className:n.field.base,children:[d&&s.jsx("div",{className:n.field.icon.base,children:s.jsx(d,{className:n.field.icon.svg})}),h&&s.jsx("div",{"data-testid":"right-icon",className:n.field.rightIcon.base,children:s.jsx(h,{className:n.field.rightIcon.svg})}),s.jsx("input",{className:Gn(n.field.input.base,n.field.input.colors[c],n.field.input.sizes[m],n.field.input.withIcon[d?"on":"off"],n.field.input.withRightIcon[h?"on":"off"],n.field.input.withAddon[a?"on":"off"],n.field.input.withShadow[f?"on":"off"]),type:g,...x,ref:t})]})]})});_T.displayName="TextInput";const kT=v.createContext(void 0);function Em(){const e=v.useContext(kT);if(!e)throw new Error("useDatePickerContext should be used within the DatePickerContext provider!");return e}var Xt=(e=>(e[e.Days=0]="Days",e[e.Months=1]="Months",e[e.Years=2]="Years",e[e.Decades=3]="Decades",e))(Xt||{}),NT=(e=>(e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e))(NT||{});function vc(e,t,r){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();if(t&&r){const a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),l=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n>=a&&n<=l}if(t){const a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return n>=a}if(r){const a=new Date(r.getFullYear(),r.getMonth(),r.getDate()).getTime();return n<=a}return!0}function yc(e,t){return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e.getTime()===t.getTime()}function ZF(e){return yc(e,new Date)}function Sf(e,t,r){return vc(e,t,r)||(t&&e<t?e=t:r&&e>r&&(e=r)),e}function eH(e,t){const r=new Date(e.getFullYear(),e.getMonth(),1);let a=r.getDay()-t;return a<0&&(a+=7),Iw(r,-a)}function tH(e,t){const r=[],n=new Date(0);n.setDate(n.getDate()-n.getDay()+t);const a=new Intl.DateTimeFormat(e,{weekday:"short"});for(let l=0;l<7;l++)r.push(a.format(Iw(n,l)));return r}function Iw(e,t){const r=new Date(e);return r.setDate(r.getDate()+t),r}function rH(e,t){const r=new Date(e);return r.setMonth(r.getMonth()+t),r}function rc(e,t){const r=new Date(e);return r.setFullYear(r.getFullYear()+t),r}function nc(e,t,r){let n={day:"numeric",month:"long",year:"numeric"};return r&&(n=r),new Intl.DateTimeFormat(e,n).format(t)}function sc(e,t){const r=e.getFullYear();return Math.floor(r/t)*t}function nH(e,t){const r=e.getFullYear(),n=t+9;return r>=t&&r<=n}const sH={root:{base:"relative"},popup:{root:{base:"absolute top-10 z-50 block pt-2",inline:"relative top-0 z-auto",inner:"inline-block rounded-lg bg-white p-4 shadow-lg dark:bg-gray-700"},header:{base:"",title:"px-2 py-3 text-center font-semibold text-gray-900 dark:text-white",selectors:{base:"mb-2 flex justify-between",button:{base:"rounded-lg bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",prev:"",next:"",view:""}}},view:{base:"p-1"},footer:{base:"mt-2 flex space-x-2",button:{base:"w-full rounded-lg px-5 py-2 text-center text-sm font-medium focus:ring-4 focus:ring-primary-300",today:"bg-primary-700 text-white hover:bg-primary-800 dark:bg-primary-600 dark:hover:bg-primary-700",clear:"border border-gray-300 bg-white text-gray-900 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"}}},views:{days:{header:{base:"mb-1 grid grid-cols-7",title:"h-6 text-center text-sm font-medium leading-6 text-gray-500 dark:text-gray-400"},items:{base:"grid w-64 grid-cols-7",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-primary-700 text-white hover:bg-primary-600",disabled:"text-gray-500",today:""}}},months:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-primary-700 text-white hover:bg-primary-600",disabled:"text-gray-500"}}},years:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-primary-700 text-white hover:bg-primary-600",disabled:"text-gray-500"}}},decades:{items:{base:"grid w-64 grid-cols-4",item:{base:"block flex-1 cursor-pointer rounded-lg border-0 text-center text-sm font-semibold leading-9 text-gray-900 hover:bg-gray-100 dark:text-white dark:hover:bg-gray-600",selected:"bg-primary-700 text-white hover:bg-primary-600",disabled:"text-gray-500"}}}}};function ST(){const{theme:e,weekStart:t,minDate:r,maxDate:n,filterDate:a,viewDate:l,selectedDate:c,changeSelectedDate:d,language:h}=Em(),f=e.views.days,m=tH(h,t),g=eH(l,t);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:f.header.base,children:m.map((x,b)=>s.jsx("span",{className:f.header.title,children:x},b))}),s.jsx("div",{className:f.items.base,children:[...Array(42)].map((x,b)=>{const j=Iw(g,b),w=nc(h,j,{day:"numeric"}),_=c&&yc(c,j),N=!vc(j,r,n)||a&&!a(j,Xt.Days),C=ZF(j);return s.jsx("button",{disabled:N,type:"button",className:Gn(f.items.item.base,C&&f.items.item.today,_&&f.items.item.selected,N&&f.items.item.disabled),onClick:()=>{N||d(j,!0)},children:w},b)})})]})}ST.displayName="DatepickerViewsDays";function CT(){const{theme:e,viewDate:t,selectedDate:r,minDate:n,maxDate:a,filterDate:l,setViewDate:c,setView:d}=Em(),h=e.views.decades,f=sc(t,100);return s.jsx("div",{className:h.items.base,children:[...Array(12)].map((m,g)=>{const x=f-10+g*10,b=new Date(t.getTime());b.setFullYear(x+t.getFullYear()%10);const j=new Date(x,0,1),w=rc(j,9),_=r&&nH(r,x),N=!vc(j,n,a)&&!vc(w,n,a)||l&&!l(b,Xt.Decades);return s.jsx("button",{disabled:N,type:"button",className:Gn(h.items.item.base,_&&h.items.item.selected,N&&h.items.item.disabled),onClick:()=>{N||(r&&c(rc(t,x-r.getFullYear())),d(Xt.Years))},children:x},g)})})}CT.displayName="DatepickerViewsDecades";function ET(){const{theme:e,minDate:t,maxDate:r,filterDate:n,selectedDate:a,viewDate:l,language:c,setViewDate:d,setView:h}=Em(),f=e.views.months;return s.jsx("div",{className:f.items.base,children:[...Array(12)].map((m,g)=>{const x=new Date;x.setMonth(g,1),x.setFullYear(l.getFullYear());const b=nc(c,x,{month:"short"}),j=a&&yc(a,x),w=!vc(x,t,r)||n&&!n(x,Xt.Months);return s.jsx("button",{disabled:w,type:"button",className:Gn(f.items.item.base,j&&f.items.item.selected,w&&f.items.item.disabled),onClick:()=>{w||(d(x),h(Xt.Days))},children:b},g)})})}ET.displayName="DatepickerViewsMonth";function AT(){const{theme:e,selectedDate:t,minDate:r,maxDate:n,filterDate:a,viewDate:l,setViewDate:c,setView:d}=Em(),h=e.views.years;return s.jsx("div",{className:h.items.base,children:[...Array(12)].map((f,m)=>{const x=sc(l,10)+m,b=new Date(l.getTime());b.setFullYear(x);const j=t&&yc(t,b),w=!vc(b,r,n)||a&&!a(b,Xt.Years);return s.jsx("button",{disabled:w,type:"button",className:Gn(h.items.item.base,j&&h.items.item.selected,w&&h.items.item.disabled),onClick:()=>{w||(c(b),d(Xt.Months))},children:x},m)})})}AT.displayName="DatepickerViewsYears";const TT=v.forwardRef((e,t)=>{var Ne,ve;const r=bT(),n=xT([sH,(Ne=r.theme)==null?void 0:Ne.datepicker,e.theme],[j0(r.clearTheme,"datepicker"),e.clearTheme],[j0(r.applyTheme,"datepicker"),e.applyTheme]),{title:a,open:l,inline:c=!1,autoHide:d=!0,showClearButton:h=!0,labelClearButton:f="Clear",showTodayButton:m=!0,labelTodayButton:g="Today",defaultValue:x,minDate:b,maxDate:j,filterDate:w,language:_="en",weekStart:N=NT.Sunday,className:C,onChange:E,label:A,value:S,...T}=rT(e,(ve=r.props)==null?void 0:ve.datepicker),D=x?Sf(x,b,j):null,P=v.useMemo(()=>x?Sf(x,b,j):new Date,[]),[I,$]=v.useState(l),[M,R]=v.useState(Xt.Days),[q,H]=v.useState(S??D),[W,L]=v.useState(S??P),B=v.useRef(null),G=v.useRef(null);function ce(je,Q){H(je),(je===null||je)&&E&&E(je),d&&M===Xt.Days&&Q==!0&&!c&&$(!1)}function ge(){ce(D,!0),x&&L(x)}v.useImperativeHandle(t,()=>({focus(){var je;(je=B.current)==null||je.focus()},clear(){ge()}}));function U(je){switch(je){case Xt.Decades:return s.jsx(CT,{});case Xt.Years:return s.jsx(AT,{});case Xt.Months:return s.jsx(ET,{});case Xt.Days:default:return s.jsx(ST,{})}}function V(){switch(M){case Xt.Days:return Xt.Months;case Xt.Months:return Xt.Years;case Xt.Years:return Xt.Decades}return M}function te(){switch(M){case Xt.Decades:return`${sc(W,100)-10} - ${sc(W,100)+100}`;case Xt.Years:return`${sc(W,10)} - ${sc(W,10)+11}`;case Xt.Months:return nc(_,W,{year:"numeric"});case Xt.Days:default:return nc(_,W,{month:"long",year:"numeric"})}}function he(je,Q,_e){switch(je){case Xt.Days:return new Date(rH(Q,_e));case Xt.Months:return new Date(rc(Q,_e));case Xt.Years:return new Date(rc(Q,_e*10));case Xt.Decades:return new Date(rc(Q,_e*100));default:return new Date(rc(Q,_e*10))}}v.useEffect(()=>{const je=Q=>{var Y,we;const _e=(Y=G==null?void 0:G.current)==null?void 0:Y.contains(Q.target),de=(we=B==null?void 0:B.current)==null?void 0:we.contains(Q.target);!_e&&!de&&$(!1)};return document.addEventListener("mousedown",je),()=>{document.removeEventListener("mousedown",je)}},[B,G,$]),v.useEffect(()=>{const je=S&&Sf(new Date(S),b,j),Q=q&&Sf(new Date(q),b,j);Q&&je&&!yc(je,Q)&&H(je),q==null&&H(D)},[S,H,L,q]);const ye=S===null?A:nc(_,q||new Date);return s.jsx(kT.Provider,{value:{theme:n,language:_,minDate:b,maxDate:j,filterDate:w,weekStart:N,isOpen:I,setIsOpen:$,view:M,setView:R,viewDate:W,setViewDate:L,selectedDate:q,setSelectedDate:H,changeSelectedDate:ce},children:s.jsxs("div",{className:Gn(n.root.base,C),children:[!c&&s.jsx(_T,{theme:n.root.input,icon:jT,ref:B,onFocus:()=>{q&&!yc(W,q)&&L(q),$(!0)},value:ye,defaultValue:D?nc(_,D):A,readOnly:!0,...T}),(I||c)&&s.jsx("div",{ref:G,className:Gn(n.popup.root.base,c&&n.popup.root.inline),children:s.jsxs("div",{className:n.popup.root.inner,children:[s.jsxs("div",{className:n.popup.header.base,children:[a&&s.jsx("div",{className:n.popup.header.title,children:a}),s.jsxs("div",{className:n.popup.header.selectors.base,children:[s.jsx("button",{type:"button",className:Gn(n.popup.header.selectors.button.base,n.popup.header.selectors.button.prev),onClick:()=>L(he(M,W,-1)),children:s.jsx(yT,{})}),s.jsx("button",{type:"button",className:Gn(n.popup.header.selectors.button.base,n.popup.header.selectors.button.view),onClick:()=>R(V()),children:te()}),s.jsx("button",{type:"button",className:Gn(n.popup.header.selectors.button.base,n.popup.header.selectors.button.next),onClick:()=>L(he(M,W,1)),children:s.jsx(wT,{})})]})]}),s.jsx("div",{className:n.popup.view.base,children:U(M)}),(h||m)&&s.jsxs("div",{className:n.popup.footer.base,children:[m&&s.jsx("button",{type:"button",className:Gn(n.popup.footer.button.base,n.popup.footer.button.today),onClick:()=>{const je=new Date;ce(je,!0),L(je)},children:g}),h&&s.jsx("button",{type:"button",className:Gn(n.popup.footer.button.base,n.popup.footer.button.clear),onClick:()=>{ce(null,!0)},children:f})]})]})})]})})});TT.displayName="Datepicker";const OT=({value:e,onChange:t,minDate:r,maxDate:n,label:a,showTime:l=!1,className:c=""})=>{const[d,h]=Ur.useState("12:00"),[f,m]=Ur.useState(!1),[g,x]=Ur.useState(!1);Ur.useEffect(()=>{},[g,f]),Ur.useEffect(()=>{if(e){const C=e.getHours().toString().padStart(2,"0"),E=e.getMinutes().toString().padStart(2,"0");h(`${C}:${E}`)}},[e]);const b=C=>{if(C){if(l){const[E,A]=d.split(":").map(Number);C.setHours(E,A,0,0)}t(C),x(!1)}},j=Ur.useMemo(()=>{const C=[];let E=0;e&&r&&e.getFullYear()===r.getFullYear()&&e.getMonth()===r.getMonth()&&e.getDate()===r.getDate()&&(E=r.getHours()*60+r.getMinutes());for(let A=0;A<24;A++)for(let S=0;S<60;S+=30)A*60+S>=E&&C.push(`${A.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`);return C},[e,r]),w=C=>C?C.toLocaleDateString("he-IL",{day:"numeric",month:"long",year:"numeric"}):" ",_={root:{base:"relative w-full"},popup:{root:{base:"block",inline:"relative top-0 z-auto",inner:"inline-block rounded-xl bg-white p-4 shadow-xl dark:bg-slate-800 w-full max-w-[320px] mx-auto"},header:{base:"",title:"px-2 py-2 text-center font-bold text-lg text-slate-900 dark:text-white mb-2",selectors:{base:"mb-4 flex justify-between items-center rtl:flex-row-reverse",button:{base:"rounded-lg bg-white dark:bg-slate-700 px-3 py-1.5 text-sm font-semibold text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors border border-slate-200 dark:border-slate-600 shadow-sm",prev:"rotate-0",next:"rotate-0",view:""}}},view:{base:"p-1"},footer:{base:"mt-4 flex gap-2 rtl:flex-row-reverse",button:{base:"flex-1 rounded-lg px-4 py-2 text-center text-sm font-semibold transition-colors shadow-sm",today:"bg-brand-600 text-white hover:bg-brand-700",clear:"border border-slate-300 bg-white text-slate-700 hover:bg-slate-100 dark:border-slate-600 dark:bg-slate-700 dark:text-white dark:hover:bg-slate-600"}}},views:{days:{header:{base:"mb-2 grid grid-cols-7 rtl:flex-row-reverse",title:"h-6 text-center text-xs font-bold text-slate-500 dark:text-slate-400 flex items-center justify-center"},items:{base:"grid grid-cols-7 gap-1",item:{base:"flex items-center justify-center w-full aspect-square rounded-full border-0 text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 transition-colors",selected:"bg-brand-600 text-white hover:bg-brand-600 shadow-md",disabled:"text-slate-300 dark:text-slate-600 cursor-not-allowed hover:bg-transparent"}}},months:{items:{base:"grid grid-cols-4 gap-2",item:{base:"flex items-center justify-center w-full h-12 cursor-pointer rounded-lg border-0 text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 transition-colors",selected:"bg-brand-600 text-white hover:bg-brand-600",disabled:"text-slate-300 dark:text-slate-600"}}},years:{items:{base:"grid grid-cols-4 gap-2",item:{base:"flex items-center justify-center w-full h-12 cursor-pointer rounded-lg border-0 text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 transition-colors",selected:"bg-brand-600 text-white hover:bg-brand-600",disabled:"text-slate-300 dark:text-slate-600"}}},decades:{items:{base:"grid grid-cols-4 gap-2",item:{base:"flex items-center justify-center w-full h-12 cursor-pointer rounded-lg border-0 text-sm font-medium hover:bg-slate-100 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 transition-colors",selected:"bg-brand-600 text-white hover:bg-brand-600",disabled:"text-slate-300 dark:text-slate-600"}}}}},N="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 px-4 py-3 text-sm text-slate-900 dark:text-white flex items-center gap-3 hover:border-brand-300 dark:hover:border-brand-600 transition-colors cursor-pointer shadow-sm";return s.jsxs("div",{className:`flex flex-col gap-2 ${c}`,dir:"rtl",children:[a&&s.jsxs("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200 flex items-center gap-2",children:[s.jsx(On,{className:"w-4 h-4 text-brand-500"}),a]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 relative",children:[l&&s.jsxs("div",{className:"relative w-full sm:w-[130px] shrink-0",children:[s.jsxs("button",{type:"button",onClick:()=>m(!f),className:N,children:[s.jsx(Br,{className:"w-4 h-4 text-slate-400 shrink-0"}),s.jsx("span",{className:"font-medium flex-1 text-center",children:d}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 shrink-0 transition-transform ${f?"rotate-180":""}`})]}),f&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 z-50 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-2xl max-h-52 overflow-y-auto w-full",children:j.map(C=>s.jsx("button",{type:"button",onClick:()=>{if(h(C),m(!1),e){const E=new Date(e),[A,S]=C.split(":").map(Number);E.setHours(A,S,0,0),t(E)}},className:`w-full px-4 py-2.5 text-sm text-center transition-colors ${C===d?"bg-brand-50 dark:bg-brand-900/30 text-brand-600 dark:text-brand-400 font-semibold":"text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:C},C))})]})]}),s.jsxs("div",{className:"relative flex-1 min-w-0 w-full",children:[s.jsxs("button",{type:"button",onClick:()=>x(!g),className:N,children:[s.jsx(On,{className:"w-4 h-4 text-slate-400 shrink-0"}),s.jsx("span",{className:"font-medium flex-1 text-center",children:w(e)}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 shrink-0 transition-transform ${g?"rotate-180":""}`})]}),g&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:()=>x(!1),onScroll:C=>C.stopPropagation()}),s.jsx("div",{className:"absolute top-full right-0 left-0 sm:left-auto sm:right-auto sm:rtl:right-0 mt-2 z-50 flex justify-center sm:block",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-2xl overflow-hidden w-full max-w-[320px]",onClick:C=>C.stopPropagation(),children:s.jsx(TT,{inline:!0,value:e,onChange:b,minDate:r,maxDate:n,language:"he-IL",labelTodayButton:"",labelClearButton:"",weekStart:0,theme:_})})})]})]})]})]})},aH=({leadName:e,leadId:t,callDuration:r,transcripts:n,coachingTips:a=[]})=>{var de;const{showSummaryModal:l,dismissSummaryModal:c,summaryStatus:d,callSummary:h,callSessionId:f,smartQueue:m,dialNextLead:g}=Sm(),[x,b]=v.useState("summary"),[j,w]=v.useState(null),[_,N]=v.useState(()=>{const Y=new Date;return Y.setDate(Y.getDate()+1),Y.setHours(10,0,0,0),Y}),[C,E]=v.useState(""),[A,S]=v.useState(""),[T,D]=v.useState(!1),[P,I]=v.useState(!1),[$,M]=v.useState(!1),[R,q]=v.useState(null),[H,W]=v.useState(!1),[L,B]=v.useState(!1),[G,ce]=v.useState(null),[ge,U]=v.useState(!1),V=v.useRef(null),[te,he]=v.useState(e);v.useEffect(()=>{if(l){w(null),E(""),S(""),D(!1),I(!1),q(null),W(!1),B(!1),he(e);const Y=new Date;Y.setDate(Y.getDate()+1),Y.setHours(10,0,0,0),N(Y)}},[l]),v.useEffect(()=>{h!=null&&h.deal_amount&&typeof h.deal_amount=="number"&&q(h.deal_amount)},[h]),v.useEffect(()=>{(async()=>{if(t&&l){const{data:we,error:Oe}=await me.from("leads").select("name").eq("id",t).single();we!=null&&we.name&&!Oe&&he(we.name)}})()},[t,l]),v.useEffect(()=>{(async()=>{if(f&&l){const{data:we,error:Oe}=await me.from("calls").select("recording_url").eq("recording_url",`sid:${f}`).or("recording_url.ilike.https%").single();!Oe&&(we!=null&&we.recording_url)&&we.recording_url.startsWith("https")&&ce(we.recording_url)}})()},[f,l]);const ye=()=>{V.current&&(ge?V.current.pause():V.current.play(),U(!ge))};if(!l)return null;const Ne=Y=>{const we=Math.floor(Y/60),Oe=Y%60;return`${we.toString().padStart(2,"0")}:${Oe.toString().padStart(2,"0")}`},ve=[{id:"deal_closed",label:" ",icon:At,color:"bg-emerald-100 text-emerald-700 border-emerald-300 dark:bg-emerald-900/30 dark:text-emerald-400"},{id:"follow_up",label:" ",icon:Br,color:"bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/30 dark:text-blue-400"},{id:"not_relevant",label:" ",icon:N2,color:"bg-rose-100 text-rose-600 border-rose-300 dark:bg-rose-900/30 dark:text-rose-400"}],je=Y=>{w(Y),D(Y==="follow_up"),I(Y==="not_relevant")},Q=async()=>{if(j){M(!0),console.log("[Summary] Saving outcome:",j,{followUpDate:_,followUpNotes:C,callSessionId:f,leadId:t,dealAmount:R});try{const Y=await fetch(`/api/leads/${t}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:j,followUpAt:_?_.toISOString():null,notes:j==="not_relevant"?A:C||null,callSessionId:f,summaryJson:h,dealAmount:R})});Y.ok?console.log("[Activity] inserted:",{type:j,leadId:t,dealAmount:R}):console.error("[Summary] Failed to save:",await Y.text())}catch(Y){console.error("[Summary] Save error:",Y)}M(!1),c()}},_e=async()=>{if(j){M(!0),console.log("[Summary] Saving outcome and dialing next:",j,{dealAmount:R});try{const Y=await fetch(`/api/leads/${t}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:j,followUpAt:_?_.toISOString():null,notes:j==="not_relevant"?A:C||null,callSessionId:f,summaryJson:h,dealAmount:R})});Y.ok?console.log("[Activity] inserted:",{type:j,leadId:t,dealAmount:R}):console.error("[Summary] Failed to save:",await Y.text())}catch(Y){console.error("[Summary] Save error:",Y)}M(!1),await g()}};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:c}),s.jsxs("div",{className:"relative w-full max-w-2xl bg-white dark:bg-slate-950 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-300 border border-slate-200 dark:border-slate-800",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-5 border-b border-slate-100 dark:border-slate-800 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(At,{className:"w-6 h-6 text-emerald-500"})," "]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[" ",te,"  ",Ne(r)," "]})]}),d==="ready"&&(h==null?void 0:h.score)&&s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:" AI"}),s.jsxs("div",{className:"flex items-center gap-1 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 px-3 py-1 rounded-full shadow-sm",children:[s.jsx(jr,{className:"w-3.5 h-3.5 text-brand-500 fill-brand-500"}),s.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:h.score}),s.jsx("span",{className:"text-xs text-slate-400",children:"/ 100"})]})]}),G&&s.jsxs("button",{onClick:ye,className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-colors",title:" ",children:[ge?s.jsx(H9,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}):s.jsx(Hl,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),s.jsx(_v,{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400"}),s.jsx("span",{className:"text-xs font-medium text-emerald-700 dark:text-emerald-300",children:""})]}),s.jsx("audio",{ref:V,src:G||void 0,onEnded:()=>U(!1)}),s.jsx("button",{onClick:c,className:"p-1 hover:bg-slate-200 dark:hover:bg-slate-800 rounded-full",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]}),s.jsxs("div",{className:"flex border-b border-slate-200 dark:border-slate-800",children:[s.jsxs("button",{onClick:()=>b("summary"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${x==="summary"?"text-brand-600 border-b-2 border-brand-600 bg-brand-50/50 dark:bg-brand-900/10":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[s.jsx(jr,{className:"w-4 h-4"}),""]}),((de=h==null?void 0:h.key_moments)==null?void 0:de.length)>0&&s.jsxs("button",{onClick:()=>b("moments"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${x==="moments"?"text-brand-600 border-b-2 border-brand-600 bg-brand-50/50 dark:bg-brand-900/10":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[s.jsx(Ar,{className:"w-4 h-4"}),"  (",h.key_moments.length,")"]}),s.jsxs("button",{onClick:()=>b("transcript"),className:`flex-1 py-3 text-sm font-medium flex items-center justify-center gap-2 transition-colors ${x==="transcript"?"text-brand-600 border-b-2 border-brand-600 bg-brand-50/50 dark:bg-brand-900/10":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[s.jsx(Xn,{className:"w-4 h-4"})," (",n.length,")"]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-5",children:[x==="summary"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-brand-500 to-purple-600 rounded-xl opacity-20 group-hover:opacity-30 transition duration-500 blur"}),s.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-xl p-4 border border-slate-200 dark:border-slate-800",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("label",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center gap-1.5 uppercase tracking-wide",children:[s.jsx(jr,{className:"w-3 h-3"}),"  AI"]}),d==="generating"&&s.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[s.jsx(rt,{className:"w-3 h-3 animate-spin"})," ..."]})]}),d==="generating"?s.jsxs("div",{className:"space-y-2 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full"}),s.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-5/6"}),s.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-4/6"})]}):d==="ready"&&(h!=null&&h.summary)?s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:h.summary}):s.jsx("p",{className:"text-sm text-slate-400 italic",children:"    "})]})]}),a.length>0&&s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-xl p-4 border border-slate-200 dark:border-slate-800",children:[s.jsxs("h3",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(el,{className:"w-4 h-4 text-amber-500"}),"  "]}),s.jsx("div",{className:"space-y-3",children:a.map((Y,we)=>s.jsxs("div",{k:we,className:"flex gap-3 items-start relative animate-in slide-in-from-right-2 duration-300",style:{animationDelay:`${we*100}ms`},children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 ${Y.severity==="critical"?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400"}`,children:s.jsx(el,{className:"w-4 h-4"})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 text-sm shadow-sm flex-1",children:[s.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:Y.message}),s.jsx("span",{className:"text-xs text-slate-400 mt-1 block",children:new Date(Y.timestamp).toLocaleTimeString("he-IL",{minute:"2-digit",second:"2-digit"})})]})]}))})]}),d==="ready"&&(h==null?void 0:h.micro_lesson)&&s.jsxs("div",{className:"relative group",children:[s.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-amber-400 to-orange-500 rounded-xl opacity-20 group-hover:opacity-30 transition duration-500 blur"}),s.jsxs("div",{className:"relative bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 rounded-xl p-4 border border-amber-200 dark:border-amber-800",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-amber-500 to-orange-500 rounded-lg flex items-center justify-center",children:s.jsx(ku,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-amber-800 dark:text-amber-300",children:h.micro_lesson.title}),s.jsxs("span",{className:"text-xs text-amber-600 dark:text-amber-400",children:[": ",h.micro_lesson.weak_area]})]})]}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed mb-3",children:h.micro_lesson.tip}),h.micro_lesson.example_phrase&&s.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/70 rounded-lg p-3 border border-amber-200/50 dark:border-amber-700/30",children:[s.jsx("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 block mb-1",children:" :"}),s.jsxs("p",{className:"text-sm text-slate-800 dark:text-slate-200 italic",children:["",h.micro_lesson.example_phrase,""]})]}),H?s.jsxs("div",{className:"mt-3 w-full flex items-center justify-center gap-2 py-2.5 rounded-lg bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-bold text-sm border border-emerald-200 dark:border-emerald-800",children:[s.jsx(At,{className:"w-4 h-4"}),"+10 XP!"]}):s.jsxs("button",{onClick:async()=>{B(!0);try{const{data:{session:Y}}=await me.auth.getSession(),we=Y==null?void 0:Y.access_token,Oe=await fetch(`/api/debrief/${f}/complete`,{method:"POST",headers:{"Content-Type":"application/json",...we?{Authorization:`Bearer ${we}`}:{}},body:"{}"}),lt=await Oe.json();Oe.ok&&lt.xpAwarded>0&&W(!0)}catch(Y){console.error("[Debrief] XP error:",Y)}B(!1)},disabled:L,className:"mt-3 w-full flex items-center justify-center gap-2 py-2.5 rounded-lg bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white font-bold text-sm transition-all shadow-md hover:shadow-lg",children:[L?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):s.jsx(rl,{className:"w-4 h-4"}),",  (+10 XP)"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-bold text-slate-900 dark:text-white mb-3 block",children:" ?"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:ve.map(Y=>s.jsxs("button",{onClick:()=>je(Y.id),className:`flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${j===Y.id?`${Y.color} ring-2 ring-offset-2 ring-offset-white dark:ring-offset-slate-950 ring-brand-500`:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-600 dark:text-slate-300"}`,children:[s.jsx(Y.icon,{className:"w-6 h-6"}),s.jsx("span",{className:"font-bold text-sm text-center",children:Y.label})]},Y.id))})]}),(R!==null||j==="deal_closed")&&s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 rounded-xl p-5 border border-emerald-200 dark:border-emerald-800 space-y-3 animate-in slide-in-from-top-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center",children:s.jsx(w3,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-sm font-bold text-emerald-700 dark:text-emerald-300",children:" "}),(h==null?void 0:h.deal_amount)&&s.jsx("span",{className:"text-xs text-emerald-600 dark:text-emerald-400 bg-emerald-100 dark:bg-emerald-900/30 px-2 py-0.5 rounded-full",children:" "})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:R??"",onChange:Y=>q(Y.target.value?Number(Y.target.value):null),placeholder:"  ...",className:"w-full rounded-xl border-2 border-emerald-200 dark:border-emerald-700 p-3 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 outline-none transition-all text-right placeholder:text-slate-400 text-lg font-semibold"}),s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 text-sm",children:""})]}),s.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 flex items-start gap-1.5",children:[s.jsx(jr,{className:"w-3.5 h-3.5 shrink-0 mt-0.5"}),s.jsx("span",{children:"         "})]})]}),T&&s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-5 border border-blue-200 dark:border-blue-800 space-y-4 animate-in slide-in-from-top-2 pb-64",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:s.jsx(Br,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-sm font-bold text-blue-700 dark:text-blue-300",children:"  "})]}),s.jsx(OT,{value:_,onChange:N,minDate:new Date,label:" ",showTime:!0}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 mb-2 block flex items-center gap-1.5",children:[s.jsx(gs,{className:"w-3.5 h-3.5"}),"  "]}),s.jsx("textarea",{value:C,onChange:Y=>E(Y.target.value),placeholder:" ?     ?  ...",rows:3,className:"w-full rounded-xl border-2 border-slate-200 dark:border-slate-700 p-3 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all text-right placeholder:text-slate-400 resize-none text-sm"})]})]}),P&&s.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 rounded-xl p-4 border border-rose-200 dark:border-rose-800 space-y-3 animate-in slide-in-from-top-2",children:[s.jsx("label",{className:"text-xs font-bold text-rose-600 dark:text-rose-400 mb-1.5 block",children:"  ?"}),s.jsxs("div",{className:"flex items-start gap-2 bg-white dark:bg-slate-800 border border-rose-200 dark:border-rose-700 rounded-lg px-3 py-2",children:[s.jsx(N2,{className:"w-4 h-4 text-rose-400 mt-0.5"}),s.jsx("textarea",{value:A,onChange:Y=>S(Y.target.value),placeholder:":   ,   ,  ...",rows:2,className:"bg-transparent border-none text-sm w-full outline-none text-slate-900 dark:text-white resize-none"})]})]})]}),x==="moments"&&(h==null?void 0:h.key_moments)&&s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"relative pr-4",children:[s.jsx("div",{className:"absolute right-1.5 top-0 bottom-0 w-0.5 bg-slate-200 dark:bg-slate-700"}),h.key_moments.map((Y,we)=>{const Oe=Y.impact==="positive",lt=Oe?"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/40 dark:text-emerald-400 border-emerald-300 dark:border-emerald-700":"bg-rose-100 text-rose-600 dark:bg-rose-900/40 dark:text-rose-400 border-rose-300 dark:border-rose-700",ut=Oe?"border-emerald-200 dark:border-emerald-800/50":"border-rose-200 dark:border-rose-800/50";return s.jsxs("div",{className:"relative flex gap-3 items-start mb-4 last:mb-0 animate-in slide-in-from-right-3 duration-300",style:{animationDelay:`${we*120}ms`},children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 border ${lt} z-10`,children:Oe?s.jsx(Pc,{className:"w-4 h-4"}):s.jsx(vn,{className:"w-4 h-4"})}),s.jsxs("div",{className:`flex-1 bg-white dark:bg-slate-900 rounded-xl p-3.5 border ${ut} shadow-sm`,children:[s.jsx("div",{className:"flex items-center gap-2 mb-1",children:s.jsx("span",{className:`text-xs font-bold px-2 py-0.5 rounded-full ${Oe?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:Y.type==="turning_point"?" ":Y.type==="missed_opportunity"?" ":Y.type==="objection_handled"?" ":Y.type==="great_question"?" ":Y.type})}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:Y.description})]})]},we)})]})}),x==="transcript"&&s.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:n.length===0?s.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"  "}):n.map(Y=>s.jsxs("div",{className:`flex flex-col ${Y.speaker==="agent"?"items-end":"items-start"}`,children:[s.jsx("span",{className:`text-xs font-bold uppercase tracking-wider mb-1 ${Y.speaker==="agent"?"text-brand-600":"text-slate-500"}`,children:Y.speaker==="agent"?"":""}),s.jsx("div",{className:`max-w-[85%] px-4 py-2 rounded-xl text-sm ${Y.speaker==="agent"?"bg-brand-50 dark:bg-brand-900/20 text-slate-800 dark:text-slate-200":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300"}`,children:Y.text})]},Y.id))})]}),s.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-900/50 flex justify-between items-center gap-3",children:[s.jsx("button",{onClick:c,className:"text-sm text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 font-medium px-4",children:" "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(be,{onClick:Q,disabled:!j||$,variant:"secondary",className:"px-4",children:[$?s.jsx(rt,{className:"w-4 h-4 ml-2 animate-spin"}):s.jsx(sl,{className:"w-4 h-4 ml-2"}),""]}),m.length>0&&s.jsxs(be,{onClick:_e,disabled:!j||$,className:"px-6 shadow-lg shadow-brand-500/20 bg-gradient-to-r from-brand-600 to-purple-600 hover:from-brand-700 hover:to-purple-700",children:[$?s.jsx(rt,{className:"w-4 h-4 ml-2 animate-spin"}):s.jsx(el,{className:"w-4 h-4 ml-2 fill-current"}),"  "]})]})]})]})]})};/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var SS="popstate";function iH(e={}){function t(n,a){let{pathname:l,search:c,hash:d}=n.location;return ty("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:ou(a)}return oH(t,r,null,e)}function xr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function na(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lH(){return Math.random().toString(36).substring(2,10)}function CS(e,t){return{usr:e.state,key:e.key,idx:t}}function ty(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?$c(t):t,state:r,key:t&&t.key||n||lH()}}function ou({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $c(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function oH(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:l=!1}=n,c=a.history,d="POP",h=null,f=m();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function m(){return(c.state||{idx:null}).idx}function g(){d="POP";let _=m(),N=_==null?null:_-f;f=_,h&&h({action:d,location:w.location,delta:N})}function x(_,N){d="PUSH";let C=ty(w.location,_,N);f=m()+1;let E=CS(C,f),A=w.createHref(C);try{c.pushState(E,"",A)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;a.location.assign(A)}l&&h&&h({action:d,location:w.location,delta:1})}function b(_,N){d="REPLACE";let C=ty(w.location,_,N);f=m();let E=CS(C,f),A=w.createHref(C);c.replaceState(E,"",A),l&&h&&h({action:d,location:w.location,delta:0})}function j(_){return cH(_)}let w={get action(){return d},get location(){return e(a,c)},listen(_){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(SS,g),h=_,()=>{a.removeEventListener(SS,g),h=null}},createHref(_){return t(a,_)},createURL:j,encodeLocation(_){let N=j(_);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:b,go(_){return c.go(_)}};return w}function cH(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),xr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ou(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function PT(e,t,r="/"){return dH(e,t,r,!1)}function dH(e,t,r,n){let a=typeof t=="string"?$c(t):t,l=si(a.pathname||"/",r);if(l==null)return null;let c=DT(e);uH(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let f=jH(l);d=yH(c[h],f,n)}return d}function DT(e,t=[],r=[],n="",a=!1){let l=(c,d,h=a,f)=>{let m={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&h)return;xr(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let g=Qa([n,m.relativePath]),x=r.concat(m);c.children&&c.children.length>0&&(xr(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),DT(c.children,t,x,g,h)),!(c.path==null&&!c.index)&&t.push({path:g,score:bH(g,c.index),routesMeta:x})};return e.forEach((c,d)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))l(c,d);else for(let f of MT(c.path))l(c,d,!0,f)}),t}function MT(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),l=r.replace(/\?$/,"");if(n.length===0)return a?[l,""]:[l];let c=MT(n.join("/")),d=[];return d.push(...c.map(h=>h===""?l:[l,h].join("/"))),a&&d.push(...c),d.map(h=>e.startsWith("/")&&h===""?"/":h)}function uH(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:vH(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var hH=/^:[\w-]+$/,fH=3,mH=2,pH=1,gH=10,xH=-2,ES=e=>e==="*";function bH(e,t){let r=e.split("/"),n=r.length;return r.some(ES)&&(n+=xH),t&&(n+=mH),r.filter(a=>!ES(a)).reduce((a,l)=>a+(hH.test(l)?fH:l===""?pH:gH),n)}function vH(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function yH(e,t,r=!1){let{routesMeta:n}=e,a={},l="/",c=[];for(let d=0;d<n.length;++d){let h=n[d],f=d===n.length-1,m=l==="/"?t:t.slice(l.length)||"/",g=_0({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},m),x=h.route;if(!g&&f&&r&&!n[n.length-1].route.index&&(g=_0({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},m)),!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:Qa([l,g.pathname]),pathnameBase:CH(Qa([l,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(l=Qa([l,g.pathnameBase]))}return c}function _0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=wH(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:n.reduce((f,{paramName:m,isOptional:g},x)=>{if(m==="*"){let j=d[x]||"";c=l.slice(0,l.length-j.length).replace(/(.)\/+$/,"$1")}const b=d[x];return g&&!b?f[m]=void 0:f[m]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:e}}function wH(e,t=!1,r=!0){na(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h)=>(n.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function jH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return na(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function si(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var _H=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kH=e=>_H.test(e);function NH(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?$c(e):e,l;if(r)if(kH(r))l=r;else{if(r.includes("//")){let c=r;r=r.replace(/\/\/+/g,"/"),na(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${r}`)}r.startsWith("/")?l=AS(r.substring(1),"/"):l=AS(r,t)}else l=t;return{pathname:l,search:EH(n),hash:AH(a)}}function AS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Bx(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function SH(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function RT(e){let t=SH(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function IT(e,t,r,n=!1){let a;typeof e=="string"?a=$c(e):(a={...e},xr(!a.pathname||!a.pathname.includes("?"),Bx("?","pathname","search",a)),xr(!a.pathname||!a.pathname.includes("#"),Bx("#","pathname","hash",a)),xr(!a.search||!a.search.includes("#"),Bx("#","search","hash",a)));let l=e===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=r;else{let g=t.length-1;if(!n&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),g-=1;a.pathname=x.join("/")}d=g>=0?t[g]:"/"}let h=NH(a,d),f=c&&c!=="/"&&c.endsWith("/"),m=(l||c===".")&&r.endsWith("/");return!h.pathname.endsWith("/")&&(f||m)&&(h.pathname+="/"),h}var Qa=e=>e.join("/").replace(/\/\/+/g,"/"),CH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),EH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function TH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function OH(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var $T=["POST","PUT","PATCH","DELETE"];new Set($T);var PH=["GET",...$T];new Set(PH);var Lc=v.createContext(null);Lc.displayName="DataRouter";var Am=v.createContext(null);Am.displayName="DataRouterState";v.createContext(!1);var LT=v.createContext({isTransitioning:!1});LT.displayName="ViewTransition";var DH=v.createContext(new Map);DH.displayName="Fetchers";var MH=v.createContext(null);MH.displayName="Await";var la=v.createContext(null);la.displayName="Navigation";var Tu=v.createContext(null);Tu.displayName="Location";var ka=v.createContext({outlet:null,matches:[],isDataRoute:!1});ka.displayName="Route";var $w=v.createContext(null);$w.displayName="RouteError";function RH(e,{relative:t}={}){xr(Ou(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(la),{hash:a,pathname:l,search:c}=Pu(e,{relative:t}),d=l;return r!=="/"&&(d=l==="/"?r:Qa([r,l])),n.createHref({pathname:d,search:c,hash:a})}function Ou(){return v.useContext(Tu)!=null}function ro(){return xr(Ou(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Tu).location}var zT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UT(e){v.useContext(la).static||v.useLayoutEffect(e)}function Lw(){let{isDataRoute:e}=v.useContext(ka);return e?YH():IH()}function IH(){xr(Ou(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Lc),{basename:t,navigator:r}=v.useContext(la),{matches:n}=v.useContext(ka),{pathname:a}=ro(),l=JSON.stringify(RT(n)),c=v.useRef(!1);return UT(()=>{c.current=!0}),v.useCallback((h,f={})=>{if(na(c.current,zT),!c.current)return;if(typeof h=="number"){r.go(h);return}let m=IT(h,JSON.parse(l),a,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Qa([t,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[t,r,l,a,e])}v.createContext(null);function $H(){let{matches:e}=v.useContext(ka),t=e[e.length-1];return t?t.params:{}}function Pu(e,{relative:t}={}){let{matches:r}=v.useContext(ka),{pathname:n}=ro(),a=JSON.stringify(RT(r));return v.useMemo(()=>IT(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function LH(e,t){return BT(e,t)}function BT(e,t,r,n,a){var C;xr(Ou(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=v.useContext(la),{matches:c}=v.useContext(ka),d=c[c.length-1],h=d?d.params:{},f=d?d.pathname:"/",m=d?d.pathnameBase:"/",g=d&&d.route;{let E=g&&g.path||"";qT(f,!g||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let x=ro(),b;if(t){let E=typeof t=="string"?$c(t):t;xr(m==="/"||((C=E.pathname)==null?void 0:C.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${E.pathname}" was given in the \`location\` prop.`),b=E}else b=x;let j=b.pathname||"/",w=j;if(m!=="/"){let E=m.replace(/^\//,"").split("/");w="/"+j.replace(/^\//,"").split("/").slice(E.length).join("/")}let _=PT(e,{pathname:w});na(g||_!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),na(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=FH(_&&_.map(E=>Object.assign({},E,{params:Object.assign({},h,E.params),pathname:Qa([m,l.encodeLocation?l.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?m:Qa([m,l.encodeLocation?l.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),c,r,n,a);return t&&N?v.createElement(Tu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},N):N}function zH(){let e=KH(),t=TH(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:l},"ErrorBoundary")," or"," ",v.createElement("code",{style:l},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:a},r):null,c)}var UH=v.createElement(zH,null),BH=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(ka.Provider,{value:this.props.routeContext},v.createElement($w.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function qH({routeContext:e,match:t,children:r}){let n=v.useContext(Lc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(ka.Provider,{value:e},r)}function FH(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,c=r==null?void 0:r.errors;if(c!=null){let m=l.findIndex(g=>g.route.id&&(c==null?void 0:c[g.route.id])!==void 0);xr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,m+1))}let d=!1,h=-1;if(r)for(let m=0;m<l.length;m++){let g=l[m];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=m),g.route.id){let{loaderData:x,errors:b}=r,j=g.route.loader&&!x.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||j){d=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}let f=r&&n?(m,g)=>{var x,b;n(m,{location:r.location,params:((b=(x=r.matches)==null?void 0:x[0])==null?void 0:b.params)??{},unstable_pattern:OH(r.matches),errorInfo:g})}:void 0;return l.reduceRight((m,g,x)=>{let b,j=!1,w=null,_=null;r&&(b=c&&g.route.id?c[g.route.id]:void 0,w=g.route.errorElement||UH,d&&(h<0&&x===0?(qT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,_=null):h===x&&(j=!0,_=g.route.hydrateFallbackElement||null)));let N=t.concat(l.slice(0,x+1)),C=()=>{let E;return b?E=w:j?E=_:g.route.Component?E=v.createElement(g.route.Component,null):g.route.element?E=g.route.element:E=m,v.createElement(qH,{match:g,routeContext:{outlet:m,matches:N,isDataRoute:r!=null},children:E})};return r&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?v.createElement(BH,{location:r.location,revalidation:r.revalidation,component:w,error:b,children:C(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:f}):C()},null)}function zw(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HH(e){let t=v.useContext(Lc);return xr(t,zw(e)),t}function VH(e){let t=v.useContext(Am);return xr(t,zw(e)),t}function WH(e){let t=v.useContext(ka);return xr(t,zw(e)),t}function Uw(e){let t=WH(e),r=t.matches[t.matches.length-1];return xr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function GH(){return Uw("useRouteId")}function KH(){var n;let e=v.useContext($w),t=VH("useRouteError"),r=Uw("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function YH(){let{router:e}=HH("useNavigate"),t=Uw("useNavigate"),r=v.useRef(!1);return UT(()=>{r.current=!0}),v.useCallback(async(a,l={})=>{na(r.current,zT),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var TS={};function qT(e,t,r){!t&&!TS[e]&&(TS[e]=!0,na(!1,r))}v.memo(XH);function XH({routes:e,future:t,state:r,unstable_onError:n}){return BT(e,void 0,r,n,t)}function ry(e){xr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JH({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){xr(!Ou(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),h=v.useMemo(()=>({basename:d,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[d,a,l,c]);typeof r=="string"&&(r=$c(r));let{pathname:f="/",search:m="",hash:g="",state:x=null,key:b="default"}=r,j=v.useMemo(()=>{let w=si(f,d);return w==null?null:{location:{pathname:w,search:m,hash:g,state:x,key:b},navigationType:n}},[d,f,m,g,x,b,n]);return na(j!=null,`<Router basename="${d}"> is not able to match the URL "${f}${m}${g}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:v.createElement(la.Provider,{value:h},v.createElement(Tu.Provider,{children:t,value:j}))}function QH({children:e,location:t}){return LH(ny(e),t)}function ny(e,t=[]){let r=[];return v.Children.forEach(e,(n,a)=>{if(!v.isValidElement(n))return;let l=[...t,a];if(n.type===v.Fragment){r.push.apply(r,ny(n.props.children,l));return}xr(n.type===ry,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=ny(n.props.children,l)),r.push(c)}),r}var Qf="get",Zf="application/x-www-form-urlencoded";function Tm(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function ZH(e){return Tm(e)&&e.tagName.toLowerCase()==="button"}function eV(e){return Tm(e)&&e.tagName.toLowerCase()==="form"}function tV(e){return Tm(e)&&e.tagName.toLowerCase()==="input"}function rV(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nV(e,t){return e.button===0&&(!t||t==="_self")&&!rV(e)}var Cf=null;function sV(){if(Cf===null)try{new FormData(document.createElement("form"),0),Cf=!1}catch{Cf=!0}return Cf}var aV=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qx(e){return e!=null&&!aV.has(e)?(na(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Zf}"`),null):e}function iV(e,t){let r,n,a,l,c;if(eV(e)){let d=e.getAttribute("action");n=d?si(d,t):null,r=e.getAttribute("method")||Qf,a=qx(e.getAttribute("enctype"))||Zf,l=new FormData(e)}else if(ZH(e)||tV(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=e.getAttribute("formaction")||d.getAttribute("action");if(n=h?si(h,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||Qf,a=qx(e.getAttribute("formenctype"))||qx(d.getAttribute("enctype"))||Zf,l=new FormData(d,e),!sV()){let{name:f,type:m,value:g}=e;if(m==="image"){let x=f?`${f}.`:"";l.append(`${x}x`,"0"),l.append(`${x}y`,"0")}else f&&l.append(f,g)}}else{if(Tm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Qf,n=null,a=Zf,c=e}return l&&a==="text/plain"&&(c=l,l=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bw(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lV(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&si(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function oV(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function cV(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function dV(e,t,r){let n=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await oV(l,r);return c.links?c.links():[]}return[]}));return mV(n.flat(1).filter(cV).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function OS(e,t,r,n,a,l){let c=(h,f)=>r[f]?h.route.id!==r[f].route.id:!0,d=(h,f)=>{var m;return r[f].pathname!==h.pathname||((m=r[f].route.path)==null?void 0:m.endsWith("*"))&&r[f].params["*"]!==h.params["*"]};return l==="assets"?t.filter((h,f)=>c(h,f)||d(h,f)):l==="data"?t.filter((h,f)=>{var g;let m=n.routes[h.route.id];if(!m||!m.hasLoader)return!1;if(c(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let x=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((g=r[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function uV(e,t,{includeHydrateFallback:r}={}){return hV(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function hV(e){return[...new Set(e)]}function fV(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function mV(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let l=JSON.stringify(fV(a));return r.has(l)||(r.add(l),n.push({key:l,link:a})),n},[])}function FT(){let e=v.useContext(Lc);return Bw(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pV(){let e=v.useContext(Am);return Bw(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var qw=v.createContext(void 0);qw.displayName="FrameworkContext";function HT(){let e=v.useContext(qw);return Bw(e,"You must render this element inside a <HydratedRouter> element"),e}function gV(e,t){let r=v.useContext(qw),[n,a]=v.useState(!1),[l,c]=v.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:m,onTouchStart:g}=t,x=v.useRef(null);v.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let w=N=>{N.forEach(C=>{c(C.isIntersecting)})},_=new IntersectionObserver(w,{threshold:.5});return x.current&&_.observe(x.current),()=>{_.disconnect()}}},[e]),v.useEffect(()=>{if(n){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[n]);let b=()=>{a(!0)},j=()=>{a(!1),c(!1)};return r?e!=="intent"?[l,x,{}]:[l,x,{onFocus:Id(d,b),onBlur:Id(h,j),onMouseEnter:Id(f,b),onMouseLeave:Id(m,j),onTouchStart:Id(g,b)}]:[!1,x,{}]}function Id(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function xV({page:e,...t}){let{router:r}=FT(),n=v.useMemo(()=>PT(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(vV,{page:e,matches:n,...t}):null}function bV(e){let{manifest:t,routeModules:r}=HT(),[n,a]=v.useState([]);return v.useEffect(()=>{let l=!1;return dV(e,t,r).then(c=>{l||a(c)}),()=>{l=!0}},[e,t,r]),n}function vV({page:e,matches:t,...r}){let n=ro(),{manifest:a,routeModules:l}=HT(),{basename:c}=FT(),{loaderData:d,matches:h}=pV(),f=v.useMemo(()=>OS(e,t,h,a,n,"data"),[e,t,h,a,n]),m=v.useMemo(()=>OS(e,t,h,a,n,"assets"),[e,t,h,a,n]),g=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,w=!1;if(t.forEach(N=>{var E;let C=a.routes[N.route.id];!C||!C.hasLoader||(!f.some(A=>A.route.id===N.route.id)&&N.route.id in d&&((E=l[N.route.id])!=null&&E.shouldRevalidate)||C.hasClientLoader?w=!0:j.add(N.route.id))}),j.size===0)return[];let _=lV(e,c,"data");return w&&j.size>0&&_.searchParams.set("_routes",t.filter(N=>j.has(N.route.id)).map(N=>N.route.id).join(",")),[_.pathname+_.search]},[c,d,n,a,f,t,e,l]),x=v.useMemo(()=>uV(m,a),[m,a]),b=bV(m);return v.createElement(v.Fragment,null,g.map(j=>v.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>v.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),b.map(({key:j,link:w})=>v.createElement("link",{key:j,nonce:r.nonce,...w})))}function yV(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var VT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VT&&(window.__reactRouterVersion="7.10.1")}catch{}function wV({basename:e,children:t,unstable_useTransitions:r,window:n}){let a=v.useRef();a.current==null&&(a.current=iH({window:n,v5Compat:!0}));let l=a.current,[c,d]=v.useState({action:l.action,location:l.location}),h=v.useCallback(f=>{r===!1?d(f):v.startTransition(()=>d(f))},[r]);return v.useLayoutEffect(()=>l.listen(h),[l,h]),v.createElement(JH,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:r===!0})}var WT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GT=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:l,replace:c,state:d,target:h,to:f,preventScrollReset:m,viewTransition:g,...x},b){let{basename:j,unstable_useTransitions:w}=v.useContext(la),_=typeof f=="string"&&WT.test(f),N,C=!1;if(typeof f=="string"&&_&&(N=f,VT))try{let $=new URL(window.location.href),M=f.startsWith("//")?new URL($.protocol+f):new URL(f),R=si(M.pathname,j);M.origin===$.origin&&R!=null?f=R+M.search+M.hash:C=!0}catch{na(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=RH(f,{relative:a}),[A,S,T]=gV(n,x),D=NV(f,{replace:c,state:d,target:h,preventScrollReset:m,relative:a,viewTransition:g,unstable_useTransitions:w});function P($){t&&t($),$.defaultPrevented||D($)}let I=v.createElement("a",{...x,...T,href:N||E,onClick:C||l?t:P,ref:yV(b,S),target:h,"data-discover":!_&&r==="render"?"true":void 0});return A&&!_?v.createElement(v.Fragment,null,I,v.createElement(xV,{page:E})):I});GT.displayName="Link";var jV=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:l,to:c,viewTransition:d,children:h,...f},m){let g=Pu(c,{relative:f.relative}),x=ro(),b=v.useContext(Am),{navigator:j,basename:w}=v.useContext(la),_=b!=null&&TV(g)&&d===!0,N=j.encodeLocation?j.encodeLocation(g).pathname:g.pathname,C=x.pathname,E=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(C=C.toLowerCase(),E=E?E.toLowerCase():null,N=N.toLowerCase()),E&&w&&(E=si(E,w)||E);const A=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let S=C===N||!a&&C.startsWith(N)&&C.charAt(A)==="/",T=E!=null&&(E===N||!a&&E.startsWith(N)&&E.charAt(N.length)==="/"),D={isActive:S,isPending:T,isTransitioning:_},P=S?t:void 0,I;typeof n=="function"?I=n(D):I=[n,S?"active":null,T?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let $=typeof l=="function"?l(D):l;return v.createElement(GT,{...f,"aria-current":P,className:I,ref:m,style:$,to:c,viewTransition:d},typeof h=="function"?h(D):h)});jV.displayName="NavLink";var _V=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:l,method:c=Qf,action:d,onSubmit:h,relative:f,preventScrollReset:m,viewTransition:g,...x},b)=>{let{unstable_useTransitions:j}=v.useContext(la),w=EV(),_=AV(d,{relative:f}),N=c.toLowerCase()==="get"?"get":"post",C=typeof d=="string"&&WT.test(d),E=A=>{if(h&&h(A),A.defaultPrevented)return;A.preventDefault();let S=A.nativeEvent.submitter,T=(S==null?void 0:S.getAttribute("formmethod"))||c,D=()=>w(S||A.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:a,state:l,relative:f,preventScrollReset:m,viewTransition:g});j&&r!==!1?v.startTransition(()=>D()):D()};return v.createElement("form",{ref:b,method:N,action:_,onSubmit:n?h:E,...x,"data-discover":!C&&e==="render"?"true":void 0})});_V.displayName="Form";function kV(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KT(e){let t=v.useContext(Lc);return xr(t,kV(e)),t}function NV(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:l,viewTransition:c,unstable_useTransitions:d}={}){let h=Lw(),f=ro(),m=Pu(e,{relative:l});return v.useCallback(g=>{if(nV(g,t)){g.preventDefault();let x=r!==void 0?r:ou(f)===ou(m),b=()=>h(e,{replace:x,state:n,preventScrollReset:a,relative:l,viewTransition:c});d?v.startTransition(()=>b()):b()}},[f,h,m,r,n,t,e,a,l,c,d])}var SV=0,CV=()=>`__${String(++SV)}__`;function EV(){let{router:e}=KT("useSubmit"),{basename:t}=v.useContext(la),r=GH(),n=e.fetch,a=e.navigate;return v.useCallback(async(l,c={})=>{let{action:d,method:h,encType:f,formData:m,body:g}=iV(l,t);if(c.navigate===!1){let x=c.fetcherKey||CV();await n(x,r,c.action||d,{preventScrollReset:c.preventScrollReset,formData:m,body:g,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||d,{preventScrollReset:c.preventScrollReset,formData:m,body:g,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,a,t,r])}function AV(e,{relative:t}={}){let{basename:r}=v.useContext(la),n=v.useContext(ka);xr(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),l={...Pu(e||".",{relative:t})},c=ro();if(e==null){l.search=c.search;let d=new URLSearchParams(l.search),h=d.getAll("index");if(h.some(m=>m==="")){d.delete("index"),h.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();l.search=m?`?${m}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:Qa([r,l.pathname])),ou(l)}function TV(e,{relative:t}={}){let r=v.useContext(LT);xr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=KT("useViewTransitionState"),a=Pu(e,{relative:t});if(!r.isTransitioning)return!1;let l=si(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=si(r.nextLocation.pathname,n)||r.nextLocation.pathname;return _0(a.pathname,c)!=null||_0(a.pathname,l)!=null}function YT(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=YT(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function or(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=YT(e))&&(n&&(n+=" "),n+=t);return n}var OV=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Fw(e){if(typeof e!="string")return!1;var t=OV;return t.includes(e)}var PV=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],DV=new Set(PV);function XT(e){return typeof e!="string"?!1:DV.has(e)}function JT(e){return typeof e=="string"&&e.startsWith("data-")}function ai(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(XT(r)||JT(r))&&(t[r]=e[r]);return t}function Hw(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ai(t)}return typeof e=="object"&&!Array.isArray(e)?ai(e):null}function zs(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(XT(r)||JT(r)||Fw(r))&&(t[r]=e[r]);return t}var MV=["children","width","height","viewBox","className","style","title","desc"];function sy(){return sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sy.apply(null,arguments)}function RV(e,t){if(e==null)return{};var r,n,a=IV(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function IV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QT=v.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:l,className:c,style:d,title:h,desc:f}=e,m=RV(e,MV),g=l||{width:n,height:a,x:0,y:0},x=or("recharts-surface",c);return v.createElement("svg",sy({},zs(m),{className:x,width:n,height:a,style:d,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),v.createElement("title",null,h),v.createElement("desc",null,f),r)}),$V=["children","className"];function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ay.apply(null,arguments)}function LV(e,t){if(e==null)return{};var r,n,a=zV(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ii=v.forwardRef((e,t)=>{var{children:r,className:n}=e,a=LV(e,$V),l=or("recharts-layer",n);return v.createElement("g",ay({className:l},zs(a),{ref:t}),r)}),UV=v.createContext(null);function er(e){return function(){return e}}const ZT=Math.cos,k0=Math.sin,oa=Math.sqrt,N0=Math.PI,Om=2*N0,iy=Math.PI,ly=2*iy,Pl=1e-6,BV=ly-Pl;function eO(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function qV(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return eO;const r=10**t;return function(n){this._+=n[0];for(let a=1,l=n.length;a<l;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class FV{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?eO:qV(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,l,c){this._append`C${+t},${+r},${+n},${+a},${this._x1=+l},${this._y1=+c}`}arcTo(t,r,n,a,l){if(t=+t,r=+r,n=+n,a=+a,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,d=this._y1,h=n-t,f=a-r,m=c-t,g=d-r,x=m*m+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>Pl)if(!(Math.abs(g*h-f*m)>Pl)||!l)this._append`L${this._x1=t},${this._y1=r}`;else{let b=n-c,j=a-d,w=h*h+f*f,_=b*b+j*j,N=Math.sqrt(w),C=Math.sqrt(x),E=l*Math.tan((iy-Math.acos((w+x-_)/(2*N*C)))/2),A=E/C,S=E/N;Math.abs(A-1)>Pl&&this._append`L${t+A*m},${r+A*g}`,this._append`A${l},${l},0,0,${+(g*b>m*j)},${this._x1=t+S*h},${this._y1=r+S*f}`}}arc(t,r,n,a,l,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let d=n*Math.cos(a),h=n*Math.sin(a),f=t+d,m=r+h,g=1^c,x=c?a-l:l-a;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>Pl||Math.abs(this._y1-m)>Pl)&&this._append`L${f},${m}`,n&&(x<0&&(x=x%ly+ly),x>BV?this._append`A${n},${n},0,1,${g},${t-d},${r-h}A${n},${n},0,1,${g},${this._x1=f},${this._y1=m}`:x>Pl&&this._append`A${n},${n},0,${+(x>=iy)},${g},${this._x1=t+n*Math.cos(l)},${this._y1=r+n*Math.sin(l)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Vw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new FV(t)}function Ww(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tO(e){this._context=e}tO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Pm(e){return new tO(e)}function rO(e){return e[0]}function nO(e){return e[1]}function sO(e,t){var r=er(!0),n=null,a=Pm,l=null,c=Vw(d);e=typeof e=="function"?e:e===void 0?rO:er(e),t=typeof t=="function"?t:t===void 0?nO:er(t);function d(h){var f,m=(h=Ww(h)).length,g,x=!1,b;for(n==null&&(l=a(b=c())),f=0;f<=m;++f)!(f<m&&r(g=h[f],f,h))===x&&((x=!x)?l.lineStart():l.lineEnd()),x&&l.point(+e(g,f,h),+t(g,f,h));if(b)return l=null,b+""||null}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:er(+h),d):e},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:er(+h),d):t},d.defined=function(h){return arguments.length?(r=typeof h=="function"?h:er(!!h),d):r},d.curve=function(h){return arguments.length?(a=h,n!=null&&(l=a(n)),d):a},d.context=function(h){return arguments.length?(h==null?n=l=null:l=a(n=h),d):n},d}function Ef(e,t,r){var n=null,a=er(!0),l=null,c=Pm,d=null,h=Vw(f);e=typeof e=="function"?e:e===void 0?rO:er(+e),t=typeof t=="function"?t:er(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?nO:er(+r);function f(g){var x,b,j,w=(g=Ww(g)).length,_,N=!1,C,E=new Array(w),A=new Array(w);for(l==null&&(d=c(C=h())),x=0;x<=w;++x){if(!(x<w&&a(_=g[x],x,g))===N)if(N=!N)b=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),j=x-1;j>=b;--j)d.point(E[j],A[j]);d.lineEnd(),d.areaEnd()}N&&(E[x]=+e(_,x,g),A[x]=+t(_,x,g),d.point(n?+n(_,x,g):E[x],r?+r(_,x,g):A[x]))}if(C)return d=null,C+""||null}function m(){return sO().defined(a).curve(c).context(l)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:er(+g),n=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:er(+g),f):e},f.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:er(+g),f):n},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:er(+g),r=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:er(+g),f):t},f.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:er(+g),f):r},f.lineX0=f.lineY0=function(){return m().x(e).y(t)},f.lineY1=function(){return m().x(e).y(r)},f.lineX1=function(){return m().x(n).y(t)},f.defined=function(g){return arguments.length?(a=typeof g=="function"?g:er(!!g),f):a},f.curve=function(g){return arguments.length?(c=g,l!=null&&(d=c(l)),f):c},f.context=function(g){return arguments.length?(g==null?l=d=null:d=c(l=g),f):l},f}class aO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function HV(e){return new aO(e,!0)}function VV(e){return new aO(e,!1)}const Gw={draw(e,t){const r=oa(t/N0);e.moveTo(r,0),e.arc(0,0,r,0,Om)}},WV={draw(e,t){const r=oa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},iO=oa(1/3),GV=iO*2,KV={draw(e,t){const r=oa(t/GV),n=r*iO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},YV={draw(e,t){const r=oa(t),n=-r/2;e.rect(n,n,r,r)}},XV=.8908130915292852,lO=k0(N0/10)/k0(7*N0/10),JV=k0(Om/10)*lO,QV=-ZT(Om/10)*lO,ZV={draw(e,t){const r=oa(t*XV),n=JV*r,a=QV*r;e.moveTo(0,-r),e.lineTo(n,a);for(let l=1;l<5;++l){const c=Om*l/5,d=ZT(c),h=k0(c);e.lineTo(h*r,-d*r),e.lineTo(d*n-h*a,h*n+d*a)}e.closePath()}},Fx=oa(3),eW={draw(e,t){const r=-oa(t/(Fx*3));e.moveTo(0,r*2),e.lineTo(-Fx*r,-r),e.lineTo(Fx*r,-r),e.closePath()}},Ds=-.5,Ms=oa(3)/2,oy=1/oa(12),tW=(oy/2+1)*3,rW={draw(e,t){const r=oa(t/tW),n=r/2,a=r*oy,l=n,c=r*oy+r,d=-l,h=c;e.moveTo(n,a),e.lineTo(l,c),e.lineTo(d,h),e.lineTo(Ds*n-Ms*a,Ms*n+Ds*a),e.lineTo(Ds*l-Ms*c,Ms*l+Ds*c),e.lineTo(Ds*d-Ms*h,Ms*d+Ds*h),e.lineTo(Ds*n+Ms*a,Ds*a-Ms*n),e.lineTo(Ds*l+Ms*c,Ds*c-Ms*l),e.lineTo(Ds*d+Ms*h,Ds*h-Ms*d),e.closePath()}};function nW(e,t){let r=null,n=Vw(a);e=typeof e=="function"?e:er(e||Gw),t=typeof t=="function"?t:er(t===void 0?64:+t);function a(){let l;if(r||(r=l=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),l)return r=null,l+""||null}return a.type=function(l){return arguments.length?(e=typeof l=="function"?l:er(l),a):e},a.size=function(l){return arguments.length?(t=typeof l=="function"?l:er(+l),a):t},a.context=function(l){return arguments.length?(r=l??null,a):r},a}function S0(){}function C0(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function oO(e){this._context=e}oO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sW(e){return new oO(e)}function cO(e){this._context=e}cO.prototype={areaStart:S0,areaEnd:S0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aW(e){return new cO(e)}function dO(e){this._context=e}dO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:C0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iW(e){return new dO(e)}function uO(e){this._context=e}uO.prototype={areaStart:S0,areaEnd:S0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lW(e){return new uO(e)}function PS(e){return e<0?-1:1}function DS(e,t,r){var n=e._x1-e._x0,a=t-e._x1,l=(e._y1-e._y0)/(n||a<0&&-0),c=(r-e._y1)/(a||n<0&&-0),d=(l*a+c*n)/(n+a);return(PS(l)+PS(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(d))||0}function MS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Hx(e,t,r){var n=e._x0,a=e._y0,l=e._x1,c=e._y1,d=(l-n)/3;e._context.bezierCurveTo(n+d,a+d*t,l-d,c-d*r,l,c)}function E0(e){this._context=e}E0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hx(this,this._t0,MS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Hx(this,MS(this,r=DS(this,e,t)),r);break;default:Hx(this,this._t0,r=DS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function hO(e){this._context=new fO(e)}(hO.prototype=Object.create(E0.prototype)).point=function(e,t){E0.prototype.point.call(this,t,e)};function fO(e){this._context=e}fO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,l){this._context.bezierCurveTo(t,e,n,r,l,a)}};function oW(e){return new E0(e)}function cW(e){return new hO(e)}function mO(e){this._context=e}mO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=RS(e),a=RS(t),l=0,c=1;c<r;++l,++c)this._context.bezierCurveTo(n[0][l],a[0][l],n[1][l],a[1][l],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function RS(e){var t,r=e.length-1,n,a=new Array(r),l=new Array(r),c=new Array(r);for(a[0]=0,l[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,l[t]=4,c[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,l[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/l[t-1],l[t]-=n,c[t]-=n*c[t-1];for(a[r-1]=c[r-1]/l[r-1],t=r-2;t>=0;--t)a[t]=(c[t]-a[t+1])/l[t];for(l[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)l[t]=2*e[t+1]-a[t+1];return[a,l]}function dW(e){return new mO(e)}function Dm(e,t){this._context=e,this._t=t}Dm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function uW(e){return new Dm(e,.5)}function hW(e){return new Dm(e,0)}function fW(e){return new Dm(e,1)}function Xl(e,t){if((c=e.length)>1)for(var r=1,n,a,l=e[t[0]],c,d=l.length;r<c;++r)for(a=l,l=e[t[r]],n=0;n<d;++n)l[n][1]+=l[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function cy(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function mW(e,t){return e[t]}function pW(e){const t=[];return t.key=e,t}function gW(){var e=er([]),t=cy,r=Xl,n=mW;function a(l){var c=Array.from(e.apply(this,arguments),pW),d,h=c.length,f=-1,m;for(const g of l)for(d=0,++f;d<h;++d)(c[d][f]=[0,+n(g,c[d].key,f,l)]).data=g;for(d=0,m=Ww(t(c));d<h;++d)c[m[d]].index=d;return r(c,m),c}return a.keys=function(l){return arguments.length?(e=typeof l=="function"?l:er(Array.from(l)),a):e},a.value=function(l){return arguments.length?(n=typeof l=="function"?l:er(+l),a):n},a.order=function(l){return arguments.length?(t=l==null?cy:typeof l=="function"?l:er(Array.from(l)),a):t},a.offset=function(l){return arguments.length?(r=l??Xl,a):r},a}function xW(e,t){if((n=e.length)>0){for(var r,n,a=0,l=e[0].length,c;a<l;++a){for(c=r=0;r<n;++r)c+=e[r][a][1]||0;if(c)for(r=0;r<n;++r)e[r][a][1]/=c}Xl(e,t)}}function bW(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,l=n.length;r<l;++r){for(var c=0,d=0;c<a;++c)d+=e[c][r][1]||0;n[r][1]+=n[r][0]=-d/2}Xl(e,t)}}function vW(e,t){if(!(!((c=e.length)>0)||!((l=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,l,c;n<l;++n){for(var d=0,h=0,f=0;d<c;++d){for(var m=e[t[d]],g=m[n][1]||0,x=m[n-1][1]||0,b=(g-x)/2,j=0;j<d;++j){var w=e[t[j]],_=w[n][1]||0,N=w[n-1][1]||0;b+=_-N}h+=g,f+=b*g}a[n-1][1]+=a[n-1][0]=r,h&&(r-=f/h)}a[n-1][1]+=a[n-1][0]=r,Xl(e,t)}}var Vx={},Wx={},IS;function yW(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Wx)),Wx}var Gx={},$S;function pO(){return $S||($S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Gx)),Gx}var Kx={},LS;function Kw(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Kx)),Kx}var Yx={},Xx={},zS;function wW(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Xx)),Xx}var US;function Yw(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wW(),r=Kw();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const l=[],c=a.length;if(c===0)return l;let d=0,h="",f="",m=!1;for(a.charCodeAt(0)===46&&(l.push(""),d++);d<c;){const g=a[d];f?g==="\\"&&d+1<c?(d++,h+=a[d]):g===f?f="":h+=g:m?g==='"'||g==="'"?f=g:g==="]"?(m=!1,l.push(h),h=""):h+=g:g==="["?(m=!0,h&&(l.push(h),h="")):g==="."?h&&(l.push(h),h=""):h+=g,d++}return h&&l.push(h),l}e.toPath=n})(Yx)),Yx}var BS;function Xw(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yW(),r=pO(),n=Kw(),a=Yw();function l(d,h,f){if(d==null)return f;switch(typeof h){case"string":{if(t.isUnsafeProperty(h))return f;const m=d[h];return m===void 0?r.isDeepKey(h)?l(d,a.toPath(h),f):f:m}case"number":case"symbol":{typeof h=="number"&&(h=n.toKey(h));const m=d[h];return m===void 0?f:m}default:{if(Array.isArray(h))return c(d,h,f);if(Object.is(h==null?void 0:h.valueOf(),-0)?h="-0":h=String(h),t.isUnsafeProperty(h))return f;const m=d[h];return m===void 0?f:m}}}function c(d,h,f){if(h.length===0)return f;let m=d;for(let g=0;g<h.length;g++){if(m==null||t.isUnsafeProperty(h[g]))return f;m=m[h[g]]}return m===void 0?f:m}e.get=l})(Vx)),Vx}var Jx,qS;function jW(){return qS||(qS=1,Jx=Xw().get),Jx}var _W=jW();const wc=ys(_W);var kW=4;function Zi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kW,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function wr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((a,l,c)=>{var d=r[c-1];return typeof d=="string"?a+d+l:d!==void 0?a+Zi(d)+l:a+l},"")}var Kn=e=>e===0?0:e>0?1:-1,sa=e=>typeof e=="number"&&e!=+e,li=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ve=e=>(typeof e=="number"||e instanceof Number)&&!sa(e),va=e=>Ve(e)||typeof e=="string",NW=0,cu=e=>{var t=++NW;return"".concat(e||"").concat(t)},aa=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ve(t)&&typeof t!="string")return n;var l;if(li(t)){if(r==null)return n;var c=t.indexOf("%");l=r*parseFloat(t.slice(0,c))/100}else l=+t;return sa(l)&&(l=n),a&&r!=null&&l>r&&(l=r),l},gO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function xn(e,t,r){return Ve(e)&&Ve(t)?Zi(e+r*(t-e)):t}function SW(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):wc(n,t))===r)}var sn=e=>e===null||typeof e>"u",Du=e=>sn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function CW(e){return e!=null}function Mu(){}var EW=["type","size","sizeType"];function dy(){return dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dy.apply(null,arguments)}function FS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function HS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FS(Object(r),!0).forEach(function(n){AW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AW(e,t,r){return(t=TW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=OW(e,"string");return typeof t=="symbol"?t:t+""}function OW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PW(e,t){if(e==null)return{};var r,n,a=DW(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xO={symbolCircle:Gw,symbolCross:WV,symbolDiamond:KV,symbolSquare:YV,symbolStar:ZV,symbolTriangle:eW,symbolWye:rW},MW=Math.PI/180,RW=e=>{var t="symbol".concat(Du(e));return xO[t]||Gw},IW=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*MW;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},$W=(e,t)=>{xO["symbol".concat(Du(e))]=t},bO=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=PW(e,EW),l=HS(HS({},a),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var d=()=>{var x=RW(c),b=nW().type(x).size(IW(r,n,c)),j=b();if(j!==null)return j},{className:h,cx:f,cy:m}=l,g=zs(l);return Ve(f)&&Ve(m)&&Ve(r)?v.createElement("path",dy({},g,{className:or("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};bO.registerSymbol=$W;var vO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,LW=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{Fw(a)&&(n[a]=(l=>r[a](r,l)))}),n},zW=(e,t,r)=>n=>(e(t,r,n),null),Jw=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var l=e[a];Fw(a)&&typeof l=="function"&&(n||(n={}),n[a]=zW(l,t,r))}),n};function VS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UW(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VS(Object(r),!0).forEach(function(n){BW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BW(e,t,r){return(t=qW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qW(e){var t=FW(e,"string");return typeof t=="symbol"?t:t+""}function FW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ws(e,t){var r=UW({},e),n=t,a=Object.keys(t),l=a.reduce((c,d)=>(c[d]===void 0&&n[d]!==void 0&&(c[d]=n[d]),c),r);return l}var Qx={},Zx={},WS;function HW(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let l=0;l<r.length;l++){const c=r[l],d=n(c);a.has(d)||a.set(d,c)}return Array.from(a.values())}e.uniqBy=t})(Zx)),Zx}var eb={},GS;function yO(){return GS||(GS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(eb)),eb}var tb={},rb={},nb={},KS;function VW(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(nb)),nb}var YS;function Qw(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VW();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(rb)),rb}var sb={},XS;function WW(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(sb)),sb}var JS;function GW(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qw(),r=WW();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(tb)),tb}var ab={},ib={},QS;function KW(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xw();function r(n){return function(a){return t.get(a,n)}}e.property=r})(ib)),ib}var lb={},ob={},cb={},db={},ZS;function wO(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(db)),db}var ub={},e5;function jO(){return e5||(e5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(ub)),ub}var hb={},t5;function _O(){return t5||(t5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(hb)),hb}var r5;function YW(){return r5||(r5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wO(),r=jO(),n=_O();function a(m,g,x){return typeof x!="function"?a(m,g,()=>{}):l(m,g,function b(j,w,_,N,C,E){const A=x(j,w,_,N,C,E);return A!==void 0?!!A:l(j,w,b,E)},new Map)}function l(m,g,x,b){if(g===m)return!0;switch(typeof g){case"object":return c(m,g,x,b);case"function":return Object.keys(g).length>0?l(m,{...g},x,b):n.eq(m,g);default:return t.isObject(m)?typeof g=="string"?g==="":!0:n.eq(m,g)}}function c(m,g,x,b){if(g==null)return!0;if(Array.isArray(g))return h(m,g,x,b);if(g instanceof Map)return d(m,g,x,b);if(g instanceof Set)return f(m,g,x,b);const j=Object.keys(g);if(m==null||r.isPrimitive(m))return j.length===0;if(j.length===0)return!0;if(b!=null&&b.has(g))return b.get(g)===m;b==null||b.set(g,m);try{for(let w=0;w<j.length;w++){const _=j[w];if(!r.isPrimitive(m)&&!(_ in m)||g[_]===void 0&&m[_]!==void 0||g[_]===null&&m[_]!==null||!x(m[_],g[_],_,m,g,b))return!1}return!0}finally{b==null||b.delete(g)}}function d(m,g,x,b){if(g.size===0)return!0;if(!(m instanceof Map))return!1;for(const[j,w]of g.entries()){const _=m.get(j);if(x(_,w,j,m,g,b)===!1)return!1}return!0}function h(m,g,x,b){if(g.length===0)return!0;if(!Array.isArray(m))return!1;const j=new Set;for(let w=0;w<g.length;w++){const _=g[w];let N=!1;for(let C=0;C<m.length;C++){if(j.has(C))continue;const E=m[C];let A=!1;if(x(E,_,w,m,g,b)&&(A=!0),A){j.add(C),N=!0;break}}if(!N)return!1}return!0}function f(m,g,x,b){return g.size===0?!0:m instanceof Set?h([...m],[...g],x,b):!1}e.isMatchWith=a,e.isSetMatch=f})(cb)),cb}var n5;function kO(){return n5||(n5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YW();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(ob)),ob}var fb={},mb={},pb={},s5;function XW(){return s5||(s5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(pb)),pb}var gb={},a5;function NO(){return a5||(a5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(gb)),gb}var xb={},i5;function SO(){return i5||(i5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",l="[object Arguments]",c="[object Symbol]",d="[object Date]",h="[object Map]",f="[object Set]",m="[object Array]",g="[object Function]",x="[object ArrayBuffer]",b="[object Object]",j="[object Error]",w="[object DataView]",_="[object Uint8Array]",N="[object Uint8ClampedArray]",C="[object Uint16Array]",E="[object Uint32Array]",A="[object BigUint64Array]",S="[object Int8Array]",T="[object Int16Array]",D="[object Int32Array]",P="[object BigInt64Array]",I="[object Float32Array]",$="[object Float64Array]";e.argumentsTag=l,e.arrayBufferTag=x,e.arrayTag=m,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=A,e.booleanTag=a,e.dataViewTag=w,e.dateTag=d,e.errorTag=j,e.float32ArrayTag=I,e.float64ArrayTag=$,e.functionTag=g,e.int16ArrayTag=T,e.int32ArrayTag=D,e.int8ArrayTag=S,e.mapTag=h,e.numberTag=n,e.objectTag=b,e.regexpTag=t,e.setTag=f,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=C,e.uint32ArrayTag=E,e.uint8ArrayTag=_,e.uint8ClampedArrayTag=N})(xb)),xb}var bb={},l5;function JW(){return l5||(l5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(bb)),bb}var o5;function CO(){return o5||(o5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XW(),r=NO(),n=SO(),a=jO(),l=JW();function c(m,g){return d(m,void 0,m,new Map,g)}function d(m,g,x,b=new Map,j=void 0){const w=j==null?void 0:j(m,g,x,b);if(w!==void 0)return w;if(a.isPrimitive(m))return m;if(b.has(m))return b.get(m);if(Array.isArray(m)){const _=new Array(m.length);b.set(m,_);for(let N=0;N<m.length;N++)_[N]=d(m[N],N,x,b,j);return Object.hasOwn(m,"index")&&(_.index=m.index),Object.hasOwn(m,"input")&&(_.input=m.input),_}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const _=new RegExp(m.source,m.flags);return _.lastIndex=m.lastIndex,_}if(m instanceof Map){const _=new Map;b.set(m,_);for(const[N,C]of m)_.set(N,d(C,N,x,b,j));return _}if(m instanceof Set){const _=new Set;b.set(m,_);for(const N of m)_.add(d(N,void 0,x,b,j));return _}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(l.isTypedArray(m)){const _=new(Object.getPrototypeOf(m)).constructor(m.length);b.set(m,_);for(let N=0;N<m.length;N++)_[N]=d(m[N],N,x,b,j);return _}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const _=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return b.set(m,_),h(_,m,x,b,j),_}if(typeof File<"u"&&m instanceof File){const _=new File([m],m.name,{type:m.type});return b.set(m,_),h(_,m,x,b,j),_}if(typeof Blob<"u"&&m instanceof Blob){const _=new Blob([m],{type:m.type});return b.set(m,_),h(_,m,x,b,j),_}if(m instanceof Error){const _=new m.constructor;return b.set(m,_),_.message=m.message,_.name=m.name,_.stack=m.stack,_.cause=m.cause,h(_,m,x,b,j),_}if(m instanceof Boolean){const _=new Boolean(m.valueOf());return b.set(m,_),h(_,m,x,b,j),_}if(m instanceof Number){const _=new Number(m.valueOf());return b.set(m,_),h(_,m,x,b,j),_}if(m instanceof String){const _=new String(m.valueOf());return b.set(m,_),h(_,m,x,b,j),_}if(typeof m=="object"&&f(m)){const _=Object.create(Object.getPrototypeOf(m));return b.set(m,_),h(_,m,x,b,j),_}return m}function h(m,g,x=m,b,j){const w=[...Object.keys(g),...t.getSymbols(g)];for(let _=0;_<w.length;_++){const N=w[_],C=Object.getOwnPropertyDescriptor(m,N);(C==null||C.writable)&&(m[N]=d(g[N],N,x,b,j))}}function f(m){switch(r.getTag(m)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=d,e.copyProperties=h})(mb)),mb}var c5;function QW(){return c5||(c5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CO();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(fb)),fb}var d5;function ZW(){return d5||(d5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kO(),r=QW();function n(a){return a=r.cloneDeep(a),l=>t.isMatch(l,a)}e.matches=n})(lb)),lb}var vb={},yb={},wb={},u5;function eG(){return u5||(u5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CO(),r=SO();function n(a,l){return t.cloneDeepWith(a,(c,d,h,f)=>{const m=l==null?void 0:l(c,d,h,f);if(m!==void 0)return m;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(g,a),g}case r.argumentsTag:{const g={};return t.copyProperties(g,a),g.length=a.length,g[Symbol.iterator]=a[Symbol.iterator],g}default:return}})}e.cloneDeepWith=n})(wb)),wb}var h5;function tG(){return h5||(h5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eG();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(yb)),yb}var jb={},_b={},f5;function EO(){return f5||(f5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(_b)),_b}var kb={},m5;function rG(){return m5||(m5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NO();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(kb)),kb}var p5;function nG(){return p5||(p5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pO(),r=EO(),n=rG(),a=Yw();function l(c,d){let h;if(Array.isArray(d)?h=d:typeof d=="string"&&t.isDeepKey(d)&&(c==null?void 0:c[d])==null?h=a.toPath(d):h=[d],h.length===0)return!1;let f=c;for(let m=0;m<h.length;m++){const g=h[m];if((f==null||!Object.hasOwn(f,g))&&!((Array.isArray(f)||n.isArguments(f))&&r.isIndex(g)&&g<f.length))return!1;f=f[g]}return!0}e.has=l})(jb)),jb}var g5;function sG(){return g5||(g5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kO(),r=Kw(),n=tG(),a=Xw(),l=nG();function c(d,h){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return h=n.cloneDeep(h),function(f){const m=a.get(f,d);return m===void 0?l.has(f,d):h===void 0?m===void 0:t.isMatch(m,h)}}e.matchesProperty=c})(vb)),vb}var x5;function aG(){return x5||(x5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yO(),r=KW(),n=ZW(),a=sG();function l(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?a.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=l})(ab)),ab}var b5;function iG(){return b5||(b5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HW(),r=yO(),n=GW(),a=aG();function l(c,d=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),a.iteratee(d)):[]}e.uniqBy=l})(Qx)),Qx}var Nb,v5;function lG(){return v5||(v5=1,Nb=iG().uniqBy),Nb}var oG=lG();const y5=ys(oG);function cG(e,t,r){return t===!0?y5(e,r):typeof t=="function"?y5(e,t):e}var Sb={exports:{}},Cb={},Eb={exports:{}},Ab={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w5;function dG(){if(w5)return Ab;w5=1;var e=Oc();function t(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,l=e.useLayoutEffect,c=e.useDebugValue;function d(g,x){var b=x(),j=n({inst:{value:b,getSnapshot:x}}),w=j[0].inst,_=j[1];return l(function(){w.value=b,w.getSnapshot=x,h(w)&&_({inst:w})},[g,b,x]),a(function(){return h(w)&&_({inst:w}),g(function(){h(w)&&_({inst:w})})},[g]),c(b),b}function h(g){var x=g.getSnapshot;g=g.value;try{var b=x();return!r(g,b)}catch{return!0}}function f(g,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:d;return Ab.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Ab}var j5;function uG(){return j5||(j5=1,Eb.exports=dG()),Eb.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _5;function hG(){if(_5)return Cb;_5=1;var e=Oc(),t=uG();function r(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,l=e.useRef,c=e.useEffect,d=e.useMemo,h=e.useDebugValue;return Cb.useSyncExternalStoreWithSelector=function(f,m,g,x,b){var j=l(null);if(j.current===null){var w={hasValue:!1,value:null};j.current=w}else w=j.current;j=d(function(){function N(T){if(!C){if(C=!0,E=T,T=x(T),b!==void 0&&w.hasValue){var D=w.value;if(b(D,T))return A=D}return A=T}if(D=A,n(E,T))return D;var P=x(T);return b!==void 0&&b(D,P)?(E=T,D):(E=T,A=P)}var C=!1,E,A,S=g===void 0?null:g;return[function(){return N(m())},S===null?void 0:function(){return N(S())}]},[m,g,x,b]);var _=a(f,j[0],j[1]);return c(function(){w.hasValue=!0,w.value=_},[_]),h(_),_},Cb}var k5;function fG(){return k5||(k5=1,Sb.exports=hG()),Sb.exports}var mG=fG(),Zw=v.createContext(null),pG=e=>e,Tr=()=>{var e=v.useContext(Zw);return e?e.store.dispatch:pG},e0=()=>{},gG=()=>e0,xG=(e,t)=>e===t;function Ke(e){var t=v.useContext(Zw);return mG.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:gG,t?t.store.getState:e0,t?t.store.getState:e0,t?e:e0,xG)}function bG(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function vG(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function yG(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var N5=e=>Array.isArray(e)?e:[e];function wG(e){const t=Array.isArray(e[0])?e[0]:e;return yG(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function jG(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var _G=class{constructor(e){this.value=e}deref(){return this.value}},kG=typeof WeakRef<"u"?WeakRef:_G,NG=0,S5=1;function Af(){return{s:NG,v:void 0,o:null,p:null}}function AO(e,t={}){let r=Af();const{resultEqualityCheck:n}=t;let a,l=0;function c(){var g;let d=r;const{length:h}=arguments;for(let x=0,b=h;x<b;x++){const j=arguments[x];if(typeof j=="function"||typeof j=="object"&&j!==null){let w=d.o;w===null&&(d.o=w=new WeakMap);const _=w.get(j);_===void 0?(d=Af(),w.set(j,d)):d=_}else{let w=d.p;w===null&&(d.p=w=new Map);const _=w.get(j);_===void 0?(d=Af(),w.set(j,d)):d=_}}const f=d;let m;if(d.s===S5)m=d.v;else if(m=e.apply(null,arguments),l++,n){const x=((g=a==null?void 0:a.deref)==null?void 0:g.call(a))??a;x!=null&&n(x,m)&&(m=x,l!==0&&l--),a=typeof m=="object"&&m!==null||typeof m=="function"?new kG(m):m}return f.s=S5,f.v=m,m}return c.clearCache=()=>{r=Af(),c.resetResultsCount()},c.resultsCount=()=>l,c.resetResultsCount=()=>{l=0},c}function SG(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let l=0,c=0,d,h={},f=a.pop();typeof f=="object"&&(h=f,f=a.pop()),bG(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const m={...r,...h},{memoize:g,memoizeOptions:x=[],argsMemoize:b=AO,argsMemoizeOptions:j=[]}=m,w=N5(x),_=N5(j),N=wG(a),C=g(function(){return l++,f.apply(null,arguments)},...w),E=b(function(){c++;const S=jG(N,arguments);return d=C.apply(null,S),d},..._);return Object.assign(E,{resultFunc:f,memoizedResultFunc:C,dependencies:N,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>d,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:g,argsMemoize:b})};return Object.assign(n,{withTypes:()=>n}),n}var le=SG(AO),CG=Object.assign((e,t=le)=>{vG(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(l=>e[l]);return t(n,(...l)=>l.reduce((c,d,h)=>(c[r[h]]=d,c),{}))},{withTypes:()=>CG}),Tb={},Ob={},Pb={},C5;function EG(){return C5||(C5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,l)=>{if(n!==a){const c=t(n),d=t(a);if(c===d&&c===0){if(n<a)return l==="desc"?1:-1;if(n>a)return l==="desc"?-1:1}return l==="desc"?d-c:c-d}return 0};e.compareValues=r})(Pb)),Pb}var Db={},Mb={},E5;function TO(){return E5||(E5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Mb)),Mb}var A5;function AG(){return A5||(A5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TO(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(l,c){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||t.isSymbol(l)?!0:typeof l=="string"&&(n.test(l)||!r.test(l))||c!=null&&Object.hasOwn(c,l)}e.isKey=a})(Db)),Db}var T5;function TG(){return T5||(T5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EG(),r=AG(),n=Yw();function a(l,c,d,h){if(l==null)return[];d=h?void 0:d,Array.isArray(l)||(l=Object.values(l)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(b=>String(b));const f=(b,j)=>{let w=b;for(let _=0;_<j.length&&w!=null;++_)w=w[j[_]];return w},m=(b,j)=>j==null||b==null?j:typeof b=="object"&&"key"in b?Object.hasOwn(j,b.key)?j[b.key]:f(j,b.path):typeof b=="function"?b(j):Array.isArray(b)?f(j,b):typeof j=="object"?j[b]:j,g=c.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||r.isKey(b)?b:{key:b,path:n.toPath(b)}));return l.map(b=>({original:b,criteria:g.map(j=>m(j,b))})).slice().sort((b,j)=>{for(let w=0;w<g.length;w++){const _=t.compareValues(b.criteria[w],j.criteria[w],d[w]);if(_!==0)return _}return 0}).map(b=>b.original)}e.orderBy=a})(Ob)),Ob}var Rb={},O5;function OG(){return O5||(O5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],l=Math.floor(n),c=(d,h)=>{for(let f=0;f<d.length;f++){const m=d[f];Array.isArray(m)&&h<l?c(m,h+1):a.push(m)}};return c(r,0),a}e.flatten=t})(Rb)),Rb}var Ib={},P5;function OO(){return P5||(P5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EO(),r=Qw(),n=wO(),a=_O();function l(c,d,h){return n.isObject(h)&&(typeof d=="number"&&r.isArrayLike(h)&&t.isIndex(d)&&d<h.length||typeof d=="string"&&d in h)?a.eq(h[d],c):!1}e.isIterateeCall=l})(Ib)),Ib}var D5;function PG(){return D5||(D5=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TG(),r=OG(),n=OO();function a(l,...c){const d=c.length;return d>1&&n.isIterateeCall(l,c[0],c[1])?c=[]:d>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(l,r.flatten(c),["asc"])}e.sortBy=a})(Tb)),Tb}var $b,M5;function DG(){return M5||(M5=1,$b=PG().sortBy),$b}var MG=DG();const Mm=ys(MG);var PO=e=>e.legend.settings,RG=e=>e.legend.size,IG=e=>e.legend.payload;le([IG,PO],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Mm(n,r):n});var Tf=1;function $G(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(a=>{if(a!=null){var l=a.getBoundingClientRect(),c={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(c.height-t.height)>Tf||Math.abs(c.left-t.left)>Tf||Math.abs(c.top-t.top)>Tf||Math.abs(c.width-t.width)>Tf)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function pn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var LG=typeof Symbol=="function"&&Symbol.observable||"@@observable",R5=LG,Lb=()=>Math.random().toString(36).substring(7).split("").join("."),zG={INIT:`@@redux/INIT${Lb()}`,REPLACE:`@@redux/REPLACE${Lb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Lb()}`},A0=zG;function e1(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function DO(e,t,r){if(typeof e!="function")throw new Error(pn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(pn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(pn(1));return r(DO)(e,t)}let n=e,a=t,l=new Map,c=l,d=0,h=!1;function f(){c===l&&(c=new Map,l.forEach((_,N)=>{c.set(N,_)}))}function m(){if(h)throw new Error(pn(3));return a}function g(_){if(typeof _!="function")throw new Error(pn(4));if(h)throw new Error(pn(5));let N=!0;f();const C=d++;return c.set(C,_),function(){if(N){if(h)throw new Error(pn(6));N=!1,f(),c.delete(C),l=null}}}function x(_){if(!e1(_))throw new Error(pn(7));if(typeof _.type>"u")throw new Error(pn(8));if(typeof _.type!="string")throw new Error(pn(17));if(h)throw new Error(pn(9));try{h=!0,a=n(a,_)}finally{h=!1}return(l=c).forEach(C=>{C()}),_}function b(_){if(typeof _!="function")throw new Error(pn(10));n=_,x({type:A0.REPLACE})}function j(){const _=g;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(pn(11));function C(){const A=N;A.next&&A.next(m())}return C(),{unsubscribe:_(C)}},[R5](){return this}}}return x({type:A0.INIT}),{dispatch:x,subscribe:g,getState:m,replaceReducer:b,[R5]:j}}function UG(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:A0.INIT})>"u")throw new Error(pn(12));if(typeof r(void 0,{type:A0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(pn(13))})}function MO(e){const t=Object.keys(e),r={};for(let l=0;l<t.length;l++){const c=t[l];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let a;try{UG(r)}catch(l){a=l}return function(c={},d){if(a)throw a;let h=!1;const f={};for(let m=0;m<n.length;m++){const g=n[m],x=r[g],b=c[g],j=x(b,d);if(typeof j>"u")throw d&&d.type,new Error(pn(14));f[g]=j,h=h||j!==b}return h=h||n.length!==Object.keys(c).length,h?f:c}}function T0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function BG(...e){return t=>(r,n)=>{const a=t(r,n);let l=()=>{throw new Error(pn(15))};const c={getState:a.getState,dispatch:(h,...f)=>l(h,...f)},d=e.map(h=>h(c));return l=T0(...d)(a.dispatch),{...a,dispatch:l}}}function RO(e){return e1(e)&&"type"in e&&typeof e.type=="string"}var IO=Symbol.for("immer-nothing"),I5=Symbol.for("immer-draftable"),In=Symbol.for("immer-state");function Xs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ms=Object,jc=ms.getPrototypeOf,O0="constructor",Rm="prototype",uy="configurable",P0="enumerable",t0="writable",du="value",oi=e=>!!e&&!!e[In];function ia(e){var t;return e?$O(e)||Im(e)||!!e[I5]||!!((t=e[O0])!=null&&t[I5])||$m(e)||Lm(e):!1}var qG=ms[Rm][O0].toString(),$5=new WeakMap;function $O(e){if(!e||!t1(e))return!1;const t=jc(e);if(t===null||t===ms[Rm])return!0;const r=ms.hasOwnProperty.call(t,O0)&&t[O0];if(r===Object)return!0;if(!tc(r))return!1;let n=$5.get(r);return n===void 0&&(n=Function.toString.call(r),$5.set(r,n)),n===qG}function Ru(e,t,r=!0){Iu(e)===0?(r?Reflect.ownKeys(e):ms.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Iu(e){const t=e[In];return t?t.type_:Im(e)?1:$m(e)?2:Lm(e)?3:0}var L5=(e,t,r=Iu(e))=>r===2?e.has(t):ms[Rm].hasOwnProperty.call(e,t),hy=(e,t,r=Iu(e))=>r===2?e.get(t):e[t],D0=(e,t,r,n=Iu(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function FG(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Im=Array.isArray,$m=e=>e instanceof Map,Lm=e=>e instanceof Set,t1=e=>typeof e=="object",tc=e=>typeof e=="function",zb=e=>typeof e=="boolean",Ga=e=>e.copy_||e.base_,r1=e=>e.modified_?e.copy_:e.base_;function fy(e,t){if($m(e))return new Map(e);if(Lm(e))return new Set(e);if(Im(e))return Array[Rm].slice.call(e);const r=$O(e);if(t===!0||t==="class_only"&&!r){const n=ms.getOwnPropertyDescriptors(e);delete n[In];let a=Reflect.ownKeys(n);for(let l=0;l<a.length;l++){const c=a[l],d=n[c];d[t0]===!1&&(d[t0]=!0,d[uy]=!0),(d.get||d.set)&&(n[c]={[uy]:!0,[t0]:!0,[P0]:d[P0],[du]:e[c]})}return ms.create(jc(e),n)}else{const n=jc(e);if(n!==null&&r)return{...e};const a=ms.create(n);return ms.assign(a,e)}}function n1(e,t=!1){return zm(e)||oi(e)||!ia(e)||(Iu(e)>1&&ms.defineProperties(e,{set:Of,add:Of,clear:Of,delete:Of}),ms.freeze(e),t&&Ru(e,(r,n)=>{n1(n,!0)},!1)),e}function HG(){Xs(2)}var Of={[du]:HG};function zm(e){return e===null||!t1(e)?!0:ms.isFrozen(e)}var M0="MapSet",my="Patches",LO={};function _c(e){const t=LO[e];return t||Xs(0,e),t}var VG=e=>!!LO[e],uu,zO=()=>uu,WG=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:VG(M0)?_c(M0):void 0});function z5(e,t){t&&(e.patchPlugin_=_c(my),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function py(e){gy(e),e.drafts_.forEach(GG),e.drafts_=null}function gy(e){e===uu&&(uu=e.parent_)}var U5=e=>uu=WG(uu,e);function GG(e){const t=e[In];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function B5(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[In].modified_&&(py(t),Xs(4)),ia(e)&&(e=q5(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(r[In].base_,e,t)}else e=q5(t,r);return KG(t,e,!0),py(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==IO?e:void 0}function q5(e,t){if(zm(t))return t;const r=t[In];if(!r)return s1(t,e.handledSet_,e);if(!Um(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);qO(r,e)}return r.copy_}function KG(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&n1(t,r)}function UO(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Um=(e,t)=>e.scope_===t,YG=[];function BO(e,t,r,n){const a=Ga(e),l=e.type_;if(n!==void 0&&hy(a,n,l)===t){D0(a,n,r,l);return}if(!e.draftLocations_){const d=e.draftLocations_=new Map;Ru(a,(h,f)=>{if(oi(f)){const m=d.get(f)||[];m.push(h),d.set(f,m)}})}const c=e.draftLocations_.get(t)??YG;for(const d of c)D0(a,d,r,l)}function XG(e,t,r){e.callbacks_.push(function(a){var d;const l=t;if(!l||!Um(l,a))return;(d=a.mapSetPlugin_)==null||d.fixSetContents(l);const c=r1(l);BO(e,l.draft_??l,c,r),qO(l,a)})}function qO(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}UO(e)}}function JG(e,t,r){const{scope_:n}=e;if(oi(r)){const a=r[In];Um(a,n)&&a.callbacks_.push(function(){r0(e);const c=r1(a);BO(e,r,c,t)})}else ia(r)&&e.callbacks_.push(function(){const l=Ga(e);hy(l,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&s1(hy(e.copy_,t,e.type_),n.handledSet_,n)})}function s1(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||oi(e)||t.has(e)||!ia(e)||zm(e)||(t.add(e),Ru(e,(n,a)=>{if(oi(a)){const l=a[In];if(Um(l,r)){const c=r1(l);D0(e,n,c,e.type_),UO(l)}}else ia(a)&&s1(a,t,r)})),e}function QG(e,t){const r=Im(e),n={type_:r?1:0,scope_:t?t.scope_:zO(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,l=a1;r&&(a=[n],l=hu);const{revoke:c,proxy:d}=Proxy.revocable(a,l);return n.draft_=d,n.revoke_=c,[d,n]}var a1={get(e,t){if(t===In)return e;const r=Ga(e);if(!L5(r,t,e.type_))return ZG(e,r,t);const n=r[t];if(e.finalized_||!ia(n))return n;if(n===Ub(e.base_,t)){r0(e);const a=e.type_===1?+t:t,l=by(e.scope_,n,e,a);return e.copy_[a]=l}return n},has(e,t){return t in Ga(e)},ownKeys(e){return Reflect.ownKeys(Ga(e))},set(e,t,r){const n=FO(Ga(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Ub(Ga(e),t),l=a==null?void 0:a[In];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(FG(r,a)&&(r!==void 0||L5(e.base_,t,e.type_)))return!0;r0(e),xy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),JG(e,t,r)),!0},deleteProperty(e,t){return r0(e),Ub(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),xy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ga(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[t0]:!0,[uy]:e.type_!==1||t!=="length",[P0]:n[P0],[du]:r[t]}},defineProperty(){Xs(11)},getPrototypeOf(e){return jc(e.base_)},setPrototypeOf(){Xs(12)}},hu={};Ru(a1,(e,t)=>{hu[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});hu.deleteProperty=function(e,t){return hu.set.call(this,e,t,void 0)};hu.set=function(e,t,r){return a1.set.call(this,e[0],t,r,e[0])};function Ub(e,t){const r=e[In];return(r?Ga(r):e)[t]}function ZG(e,t,r){var a;const n=FO(t,r);return n?du in n?n[du]:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function FO(e,t){if(!(t in e))return;let r=jc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=jc(r)}}function xy(e){e.modified_||(e.modified_=!0,e.parent_&&xy(e.parent_))}function r0(e){e.copy_||(e.assigned_=new Map,e.copy_=fy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var eK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(tc(r)&&!tc(n)){const c=n;n=r;const d=this;return function(f=c,...m){return d.produce(f,g=>n.call(this,g,...m))}}tc(n)||Xs(6),a!==void 0&&!tc(a)&&Xs(7);let l;if(ia(r)){const c=U5(this),d=by(c,r,void 0);let h=!0;try{l=n(d),h=!1}finally{h?py(c):gy(c)}return z5(c,a),B5(l,c)}else if(!r||!t1(r)){if(l=n(r),l===void 0&&(l=r),l===IO&&(l=void 0),this.autoFreeze_&&n1(l,!0),a){const c=[],d=[];_c(my).generateReplacementPatches_(r,l,{patches_:c,inversePatches_:d}),a(c,d)}return l}else Xs(1,r)},this.produceWithPatches=(r,n)=>{if(tc(r))return(d,...h)=>this.produceWithPatches(d,f=>r(f,...h));let a,l;return[this.produce(r,n,(d,h)=>{a=d,l=h}),a,l]},zb(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),zb(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),zb(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ia(t)||Xs(8),oi(t)&&(t=ea(t));const r=U5(this),n=by(r,t,void 0);return n[In].isManual_=!0,gy(r),n}finishDraft(t,r){const n=t&&t[In];(!n||!n.isManual_)&&Xs(9);const{scope_:a}=n;return z5(a,r),B5(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const l=r[n];if(l.path.length===0&&l.op==="replace"){t=l.value;break}}n>-1&&(r=r.slice(n+1));const a=_c(my).applyPatches_;return oi(t)?a(t,r):this.produce(t,l=>a(l,r))}};function by(e,t,r,n){const[a,l]=$m(t)?_c(M0).proxyMap_(t,r):Lm(t)?_c(M0).proxySet_(t,r):QG(t,r);return((r==null?void 0:r.scope_)??zO()).drafts_.push(a),l.callbacks_=(r==null?void 0:r.callbacks_)??[],l.key_=n,r&&n!==void 0?XG(r,l,n):l.callbacks_.push(function(h){var m;(m=h.mapSetPlugin_)==null||m.fixSetContents(l);const{patchPlugin_:f}=h;l.modified_&&f&&f.generatePatches_(l,[],h)}),a}function ea(e){return oi(e)||Xs(10,e),HO(e)}function HO(e){if(!ia(e)||zm(e))return e;const t=e[In];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=fy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=fy(e,!0);return Ru(r,(a,l)=>{D0(r,a,HO(l))},n),t&&(t.finalized_=!1),r}var tK=new eK,VO=tK.produce;function WO(e){return({dispatch:r,getState:n})=>a=>l=>typeof l=="function"?l(r,n,e):a(l)}var rK=WO(),nK=WO,sK=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?T0:T0.apply(null,arguments)};function Us(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(ps(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>RO(n)&&n.type===e,r}var GO=class Xd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Xd.prototype)}static get[Symbol.species](){return Xd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Xd(...t[0].concat(this)):new Xd(...t.concat(this))}};function F5(e){return ia(e)?VO(e,()=>{}):e}function Pf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function aK(e){return typeof e=="boolean"}var iK=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=t??{};let c=new GO;return r&&(aK(r)?c.push(rK):c.push(nK(r.extraArgument))),c},KO="RTK_autoBatch",hr=()=>e=>({payload:e,meta:{[KO]:!0}}),H5=e=>t=>{setTimeout(t,e)},YO=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,l=!1,c=!1;const d=new Set,h=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:H5(10):e.type==="callback"?e.queueNotification:H5(e.timeout),f=()=>{c=!1,l&&(l=!1,d.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const g=()=>a&&m(),x=n.subscribe(g);return d.add(m),()=>{x(),d.delete(m)}},dispatch(m){var g;try{return a=!((g=m==null?void 0:m.meta)!=null&&g[KO]),l=!a,l&&(c||(c=!0,h(f))),n.dispatch(m)}finally{a=!0}}})},lK=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new GO(e);return n&&a.push(YO(typeof n=="object"?n:void 0)),a};function oK(e){const t=iK(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:l=void 0,enhancers:c=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(e1(r))d=MO(r);else throw new Error(ps(1));let h;typeof n=="function"?h=n(t):h=t();let f=T0;a&&(f=sK({trace:!1,...typeof a=="object"&&a}));const m=BG(...h),g=lK(m);let x=typeof c=="function"?c(g):g();const b=f(...x);return DO(d,l,b)}function XO(e){const t={},r=[];let n;const a={addCase(l,c){const d=typeof l=="string"?l:l.type;if(!d)throw new Error(ps(28));if(d in t)throw new Error(ps(29));return t[d]=c,a},addAsyncThunk(l,c){return c.pending&&(t[l.pending.type]=c.pending),c.rejected&&(t[l.rejected.type]=c.rejected),c.fulfilled&&(t[l.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:l.settled,reducer:c.settled}),a},addMatcher(l,c){return r.push({matcher:l,reducer:c}),a},addDefaultCase(l){return n=l,a}};return e(a),[t,r,n]}function cK(e){return typeof e=="function"}function dK(e,t){let[r,n,a]=XO(t),l;if(cK(e))l=()=>F5(e());else{const d=F5(e);l=()=>d}function c(d=l(),h){let f=[r[h.type],...n.filter(({matcher:m})=>m(h)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[a]),f.reduce((m,g)=>{if(g)if(oi(m)){const b=g(m,h);return b===void 0?m:b}else{if(ia(m))return VO(m,x=>g(x,h));{const x=g(m,h);if(x===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return m},d)}return c.getInitialState=l,c}var uK="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hK=(e=21)=>{let t="",r=e;for(;r--;)t+=uK[Math.random()*64|0];return t},fK=Symbol.for("rtk-slice-createasyncthunk");function mK(e,t){return`${e}/${t}`}function pK({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[fK];return function(a){const{name:l,reducerPath:c=l}=a;if(!l)throw new Error(ps(11));const d=(typeof a.reducers=="function"?a.reducers(xK()):a.reducers)||{},h=Object.keys(d),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(A,S){const T=typeof A=="string"?A:A.type;if(!T)throw new Error(ps(12));if(T in f.sliceCaseReducersByType)throw new Error(ps(13));return f.sliceCaseReducersByType[T]=S,m},addMatcher(A,S){return f.sliceMatchers.push({matcher:A,reducer:S}),m},exposeAction(A,S){return f.actionCreators[A]=S,m},exposeCaseReducer(A,S){return f.sliceCaseReducersByName[A]=S,m}};h.forEach(A=>{const S=d[A],T={reducerName:A,type:mK(l,A),createNotation:typeof a.reducers=="function"};vK(S)?wK(T,S,m,t):bK(T,S,m)});function g(){const[A={},S=[],T=void 0]=typeof a.extraReducers=="function"?XO(a.extraReducers):[a.extraReducers],D={...A,...f.sliceCaseReducersByType};return dK(a.initialState,P=>{for(let I in D)P.addCase(I,D[I]);for(let I of f.sliceMatchers)P.addMatcher(I.matcher,I.reducer);for(let I of S)P.addMatcher(I.matcher,I.reducer);T&&P.addDefaultCase(T)})}const x=A=>A,b=new Map,j=new WeakMap;let w;function _(A,S){return w||(w=g()),w(A,S)}function N(){return w||(w=g()),w.getInitialState()}function C(A,S=!1){function T(P){let I=P[A];return typeof I>"u"&&S&&(I=Pf(j,T,N)),I}function D(P=x){const I=Pf(b,S,()=>new WeakMap);return Pf(I,P,()=>{const $={};for(const[M,R]of Object.entries(a.selectors??{}))$[M]=gK(R,P,()=>Pf(j,P,N),S);return $})}return{reducerPath:A,getSelectors:D,get selectors(){return D(T)},selectSlice:T}}const E={name:l,reducer:_,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:N,...C(c),injectInto(A,{reducerPath:S,...T}={}){const D=S??c;return A.inject({reducerPath:D,reducer:_},T),{...E,...C(D,!0)}}};return E}}function gK(e,t,r,n){function a(l,...c){let d=t(l);return typeof d>"u"&&n&&(d=r()),e(d,...c)}return a.unwrapped=e,a}var Jn=pK();function xK(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function bK({type:e,reducerName:t,createNotation:r},n,a){let l,c;if("reducer"in n){if(r&&!yK(n))throw new Error(ps(17));l=n.reducer,c=n.prepare}else l=n;a.addCase(e,l).exposeCaseReducer(t,l).exposeAction(t,c?Us(e,c):Us(e))}function vK(e){return e._reducerDefinitionType==="asyncThunk"}function yK(e){return e._reducerDefinitionType==="reducerWithPrepare"}function wK({type:e,reducerName:t},r,n,a){if(!a)throw new Error(ps(18));const{payloadCreator:l,fulfilled:c,pending:d,rejected:h,settled:f,options:m}=r,g=a(e,l,m);n.exposeAction(t,g),c&&n.addCase(g.fulfilled,c),d&&n.addCase(g.pending,d),h&&n.addCase(g.rejected,h),f&&n.addMatcher(g.settled,f),n.exposeCaseReducer(t,{fulfilled:c||Df,pending:d||Df,rejected:h||Df,settled:f||Df})}function Df(){}var jK="task",JO="listener",QO="completed",i1="cancelled",_K=`task-${i1}`,kK=`task-${QO}`,vy=`${JO}-${i1}`,NK=`${JO}-${QO}`,Bm=class{constructor(e){_x(this,"name","TaskAbortError");_x(this,"message");this.code=e,this.message=`${jK} ${i1} (reason: ${e})`}},l1=(e,t)=>{if(typeof e!="function")throw new TypeError(ps(32))},R0=()=>{},ZO=(e,t=R0)=>(e.catch(t),e),e6=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Wl=e=>{if(e.aborted)throw new Bm(e.reason)};function t6(e,t){let r=R0;return new Promise((n,a)=>{const l=()=>a(new Bm(e.reason));if(e.aborted){l();return}r=e6(e,l),t.finally(()=>r()).then(n,a)}).finally(()=>{r=R0})}var SK=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Bm?"cancelled":"rejected",error:r}}finally{t==null||t()}},I0=e=>t=>ZO(t6(e,t).then(r=>(Wl(e),r))),r6=e=>{const t=I0(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:uc}=Object,V5={},qm="listenerMiddleware",CK=(e,t)=>{const r=n=>e6(e,()=>n.abort(e.reason));return(n,a)=>{l1(n);const l=new AbortController;r(l);const c=SK(async()=>{Wl(e),Wl(l.signal);const d=await n({pause:I0(l.signal),delay:r6(l.signal),signal:l.signal});return Wl(l.signal),d},()=>l.abort(kK));return a!=null&&a.autoJoin&&t.push(c.catch(R0)),{result:I0(e)(c),cancel(){l.abort(_K)}}}},EK=(e,t)=>{const r=async(n,a)=>{Wl(t);let l=()=>{};const d=[new Promise((h,f)=>{let m=e({predicate:n,effect:(g,x)=>{x.unsubscribe(),h([g,x.getState(),x.getOriginalState()])}});l=()=>{m(),f()}})];a!=null&&d.push(new Promise(h=>setTimeout(h,a,null)));try{const h=await t6(t,Promise.race(d));return Wl(t),h}finally{l()}};return(n,a)=>ZO(r(n,a))},n6=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:l}=e;if(t)a=Us(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(ps(21));return l1(l),{predicate:a,type:t,effect:l}},s6=uc(e=>{const{type:t,predicate:r,effect:n}=n6(e);return{id:hK(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ps(22))}}},{withTypes:()=>s6}),W5=(e,t)=>{const{type:r,effect:n,predicate:a}=n6(t);return Array.from(e.values()).find(l=>(typeof r=="string"?l.type===r:l.predicate===a)&&l.effect===n)},yy=e=>{e.pending.forEach(t=>{t.abort(vy)})},AK=(e,t)=>()=>{for(const r of t.keys())yy(r);e.clear()},G5=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},a6=uc(Us(`${qm}/add`),{withTypes:()=>a6}),TK=Us(`${qm}/removeAll`),i6=uc(Us(`${qm}/remove`),{withTypes:()=>i6}),OK=(...e)=>{console.error(`${qm}/error`,...e)},$u=(e={})=>{const t=new Map,r=new Map,n=b=>{const j=r.get(b)??0;r.set(b,j+1)},a=b=>{const j=r.get(b)??1;j===1?r.delete(b):r.set(b,j-1)},{extra:l,onError:c=OK}=e;l1(c);const d=b=>(b.unsubscribe=()=>t.delete(b.id),t.set(b.id,b),j=>{b.unsubscribe(),j!=null&&j.cancelActive&&yy(b)}),h=b=>{const j=W5(t,b)??s6(b);return d(j)};uc(h,{withTypes:()=>h});const f=b=>{const j=W5(t,b);return j&&(j.unsubscribe(),b.cancelActive&&yy(j)),!!j};uc(f,{withTypes:()=>f});const m=async(b,j,w,_)=>{const N=new AbortController,C=EK(h,N.signal),E=[];try{b.pending.add(N),n(b),await Promise.resolve(b.effect(j,uc({},w,{getOriginalState:_,condition:(A,S)=>C(A,S).then(Boolean),take:C,delay:r6(N.signal),pause:I0(N.signal),extra:l,signal:N.signal,fork:CK(N.signal,E),unsubscribe:b.unsubscribe,subscribe:()=>{t.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((A,S,T)=>{A!==N&&(A.abort(vy),T.delete(A))})},cancel:()=>{N.abort(vy),b.pending.delete(N)},throwIfCancelled:()=>{Wl(N.signal)}})))}catch(A){A instanceof Bm||G5(c,A,{raisedBy:"effect"})}finally{await Promise.all(E),N.abort(NK),a(b),b.pending.delete(N)}},g=AK(t,r);return{middleware:b=>j=>w=>{if(!RO(w))return j(w);if(a6.match(w))return h(w.payload);if(TK.match(w)){g();return}if(i6.match(w))return f(w.payload);let _=b.getState();const N=()=>{if(_===V5)throw new Error(ps(23));return _};let C;try{if(C=j(w),t.size>0){const E=b.getState(),A=Array.from(t.values());for(const S of A){let T=!1;try{T=S.predicate(w,E,_)}catch(D){T=!1,G5(c,D,{raisedBy:"predicate"})}T&&m(S,w,b,N)}}}finally{_=V5}return C},startListening:h,stopListening:f,clearListeners:g}};function ps(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var PK={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},l6=Jn({name:"chartLayout",initialState:PK,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,l;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(l=t.payload.left)!==null&&l!==void 0?l:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:DK,setLayout:MK,setChartSize:RK,setScale:IK}=l6.actions,$K=l6.reducer;function o6(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function br(e){return Number.isFinite(e)}function ya(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function K5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ac(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(r),!0).forEach(function(n){LK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LK(e,t,r){return(t=zK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=UK(e,"string");return typeof t=="symbol"?t:t+""}function UK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yn(e,t,r){return sn(e)||sn(t)?r:va(t)?wc(e,t,r):typeof t=="function"?t(e):r}var BK=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:l,verticalAlign:c,layout:d}=t;if((d==="vertical"||d==="horizontal"&&c==="middle")&&l!=="center"&&Ve(e[l]))return ac(ac({},e),{},{[l]:e[l]+(n||0)});if((d==="horizontal"||d==="vertical"&&l==="center")&&c!=="middle"&&Ve(e[c]))return ac(ac({},e),{},{[c]:e[c]+(a||0)})}return e},no=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",c6=(e,t,r,n)=>{if(n)return e.map(d=>d.coordinate);var a,l,c=e.map(d=>(d.coordinate===t&&(a=!0),d.coordinate===r&&(l=!0),d.coordinate));return a||c.push(t),l||c.push(r),c},d6=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:l,scale:c,realScaleType:d,isCategorical:h,categoricalDomain:f,tickCount:m,ticks:g,niceTicks:x,axisType:b}=e;if(!c)return null;var j=d==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,w=a==="category"&&c.bandwidth?c.bandwidth()/j:0;if(w=b==="angleAxis"&&l&&l.length>=2?Kn(l[0]-l[1])*2*w:w,g||x){var _=(g||x||[]).map((N,C)=>{var E=n?n.indexOf(N):N;return{coordinate:c(E)+w,value:N,offset:w,index:C}});return _.filter(N=>!sa(N.coordinate))}return h&&f?f.map((N,C)=>({coordinate:c(N)+w,value:N,index:C,offset:w})):c.ticks&&m!=null?c.ticks(m).map((N,C)=>({coordinate:c(N)+w,value:N,offset:w,index:C})):c.domain().map((N,C)=>({coordinate:c(N)+w,value:n?n[N]:N,index:C,offset:w}))},Y5=1e-4,qK=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Y5,l=Math.max(n[0],n[1])+Y5,c=e(t[0]),d=e(t[r-1]);(c<a||c>l||d<a||d>l)&&e.domain([t[0],t[r-1]])}},FK=(e,t)=>{if(!t||t.length!==2||!Ve(t[0])||!Ve(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Ve(e[0])||e[0]<r)&&(a[0]=r),(!Ve(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},HK=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var l=0,c=0,d=0;d<r;++d){var h=e[d],f=h==null?void 0:h[a];if(f!=null){var m=f[1],g=f[0],x=sa(m)?g:m;x>=0?(f[0]=l,f[1]=l+x,l=m):(f[0]=c,f[1]=c+x,c=m)}}}},VK=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var l=0,c=0;c<r;++c){var d=e[c],h=d==null?void 0:d[a];if(h!=null){var f=sa(h[1])?h[0]:h[1];f>=0?(h[0]=l,h[1]=l+f,l=h[1]):(h[0]=0,h[1]=0)}}}},WK={sign:HK,expand:xW,none:Xl,silhouette:bW,wiggle:vW,positive:VK},GK=(e,t,r)=>{var n,a=(n=WK[r])!==null&&n!==void 0?n:Xl,l=gW().keys(t).value((d,h)=>Number(yn(d,h,0))).order(cy).offset(a),c=l(e);return c.forEach((d,h)=>{d.forEach((f,m)=>{var g=yn(e[m],t[h],0);Array.isArray(g)&&g.length===2&&Ve(g[0])&&Ve(g[1])&&(f[0]=g[0],f[1]=g[1])})}),c};function KK(e){return e==null?void 0:String(e)}var X5=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:l,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var d=yn(l,t.dataKey,t.scale.domain()[c]);return sn(d)?null:t.scale(d)-a/2+n},YK=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},XK=e=>{var t=e.flat(2).filter(Ve);return[Math.min(...t),Math.max(...t)]},JK=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],QK=(e,t,r)=>{if(e!=null)return JK(Object.keys(e).reduce((n,a)=>{var l=e[a];if(!l)return n;var{stackedData:c}=l,d=c.reduce((h,f)=>{var m=o6(f,t,r),g=XK(m);return!br(g[0])||!br(g[1])?h:[Math.min(h[0],g[0]),Math.max(h[1],g[1])]},[1/0,-1/0]);return[Math.min(d[0],n[0]),Math.max(d[1],n[1])]},[1/0,-1/0]))},J5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Q5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$0=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Mm(t,m=>m.coordinate),l=1/0,c=1,d=a.length;c<d;c++){var h=a[c],f=a[c-1];l=Math.min(((h==null?void 0:h.coordinate)||0)-((f==null?void 0:f.coordinate)||0),l)}return l===1/0?0:l}return r?void 0:0};function Z5(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:l}=e;return ac(ac({},t),{},{dataKey:r,payload:n,value:a,name:l})}function u6(e,t){if(e)return String(e);if(typeof t=="string")return t}var ZK=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},eY=(e,t)=>t==="centric"?e.angle:e.radius,mi=e=>e.layout.width,pi=e=>e.layout.height,tY=e=>e.layout.scale,h6=e=>e.layout.margin,Fm=le(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Hm=le(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),rY="data-recharts-item-index",nY="data-recharts-item-id",Lu=60;function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(n){sY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sY(e,t,r){return(t=aY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aY(e){var t=iY(e,"string");return typeof t=="symbol"?t:t+""}function iY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lY=e=>e.brush.height;function oY(e){var t=Hm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Lu;return r+a}return r},0)}function cY(e){var t=Hm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Lu;return r+a}return r},0)}function dY(e){var t=Fm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function uY(e){var t=Fm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var an=le([mi,pi,h6,lY,oY,cY,dY,uY,PO,RG],(e,t,r,n,a,l,c,d,h,f)=>{var m={left:(r.left||0)+a,right:(r.right||0)+l},g={top:(r.top||0)+c,bottom:(r.bottom||0)+d},x=Mf(Mf({},g),m),b=x.bottom;x.bottom+=n,x=BK(x,h,f);var j=e-x.left-x.right,w=t-x.top-x.bottom;return Mf(Mf({brushBottom:b},x),{},{width:Math.max(j,0),height:Math.max(w,0)})}),hY=le(an,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),o1=le(mi,pi,(e,t)=>({x:0,y:0,width:e,height:t})),fY=v.createContext(null),Qn=()=>v.useContext(fY)!=null,Vm=e=>e.brush,Wm=le([Vm,an,h6],(e,t,r)=>({height:e.height,x:Ve(e.x)?e.x:t.left,y:Ve(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ve(e.width)?e.width:t.width})),Bb={},qb={},Fb={},tC;function mY(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:l}={}){let c,d=null;const h=l!=null&&l.includes("leading"),f=l==null||l.includes("trailing"),m=()=>{d!==null&&(r.apply(c,d),c=void 0,d=null)},g=()=>{f&&m(),w()};let x=null;const b=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,g()},n)},j=()=>{x!==null&&(clearTimeout(x),x=null)},w=()=>{j(),c=void 0,d=null},_=()=>{m()},N=function(...C){if(a!=null&&a.aborted)return;c=this,d=C;const E=x==null;b(),h&&E&&m()};return N.schedule=b,N.cancel=w,N.flush=_,a==null||a.addEventListener("abort",w,{once:!0}),N}e.debounce=t})(Fb)),Fb}var rC;function pY(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mY();function r(n,a=0,l={}){typeof l!="object"&&(l={});const{leading:c=!1,trailing:d=!0,maxWait:h}=l,f=Array(2);c&&(f[0]="leading"),d&&(f[1]="trailing");let m,g=null;const x=t.debounce(function(...w){m=n.apply(this,w),g=null},a,{edges:f}),b=function(...w){return h!=null&&(g===null&&(g=Date.now()),Date.now()-g>=h)?(m=n.apply(this,w),g=Date.now(),x.cancel(),x.schedule(),m):(x.apply(this,w),m)},j=()=>(x.flush(),m);return b.cancel=x.cancel,b.flush=j,b}e.debounce=r})(qb)),qb}var nC;function gY(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pY();function r(n,a=0,l={}){const{leading:c=!0,trailing:d=!0}=l;return t.debounce(n,a,{leading:c,maxWait:a,trailing:d})}e.throttle=r})(Bb)),Bb}var Hb,sC;function xY(){return sC||(sC=1,Hb=gY().throttle),Hb}var bY=xY();const vY=ys(bY);var L0=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),l=2;l<n;l++)a[l-2]=arguments[l];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>a[c++]))}},f6=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:l,maxHeight:c}=r,d=li(n)?e:Number(n),h=li(a)?t:Number(a);return l&&l>0&&(d?h=d/l:h&&(d=h*l),c&&h!=null&&h>c&&(h=c)),{calculatedWidth:d,calculatedHeight:h}},yY={width:0,height:0,overflow:"visible"},wY={width:0,overflowX:"visible"},jY={height:0,overflowY:"visible"},_Y={},kY=e=>{var{width:t,height:r}=e,n=li(t),a=li(r);return n&&a?yY:n?wY:a?jY:_Y};function NY(e){var{width:t,height:r,aspect:n}=e,a=t,l=r;return a===void 0&&l===void 0?(a="100%",l="100%"):a===void 0?a=n&&n>0?void 0:"100%":l===void 0&&(l=n&&n>0?void 0:"100%"),{width:a,height:l}}function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wy.apply(null,arguments)}function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){SY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SY(e,t,r){return(t=CY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CY(e){var t=EY(e,"string");return typeof t=="symbol"?t:t+""}function EY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m6=v.createContext({width:-1,height:-1});function AY(e){return ya(e.width)&&ya(e.height)}function p6(e){var{children:t,width:r,height:n}=e,a=v.useMemo(()=>({width:r,height:n}),[r,n]);return AY(a)?v.createElement(m6.Provider,{value:a},t):null}var c1=()=>v.useContext(m6),TY=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:l,minWidth:c=0,minHeight:d,maxHeight:h,children:f,debounce:m=0,id:g,className:x,onResize:b,style:j={}}=e,w=v.useRef(null),_=v.useRef();_.current=b,v.useImperativeHandle(t,()=>w.current);var[N,C]=v.useState({containerWidth:n.width,containerHeight:n.height}),E=v.useCallback((P,I)=>{C($=>{var M=Math.round(P),R=Math.round(I);return $.containerWidth===M&&$.containerHeight===R?$:{containerWidth:M,containerHeight:R}})},[]);v.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Mu;var P=R=>{var q,{width:H,height:W}=R[0].contentRect;E(H,W),(q=_.current)===null||q===void 0||q.call(_,H,W)};m>0&&(P=vY(P,m,{trailing:!0,leading:!1}));var I=new ResizeObserver(P),{width:$,height:M}=w.current.getBoundingClientRect();return E($,M),I.observe(w.current),()=>{I.disconnect()}},[E,m]);var{containerWidth:A,containerHeight:S}=N;L0(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:D}=f6(A,S,{width:a,height:l,aspect:r,maxHeight:h});return L0(T!=null&&T>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,D,a,l,c,d,r),v.createElement("div",{id:g?"".concat(g):void 0,className:or("recharts-responsive-container",x),style:iC(iC({},j),{},{width:a,height:l,minWidth:c,minHeight:d,maxHeight:h}),ref:w},v.createElement("div",{style:kY({width:a,height:l})},v.createElement(p6,{width:T,height:D},f)))}),g6=v.forwardRef((e,t)=>{var r=c1();if(ya(r.width)&&ya(r.height))return e.children;var{width:n,height:a}=NY({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:l,calculatedHeight:c}=f6(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Ve(l)&&Ve(c)?v.createElement(p6,{width:l,height:c},e.children):v.createElement(TY,wy({},e,{width:n,height:a,ref:t}))});function x6(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Gm=()=>{var e,t=Qn(),r=Ke(hY),n=Ke(Wm),a=(e=Ke(Vm))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},OY={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},b6=()=>{var e;return(e=Ke(an))!==null&&e!==void 0?e:OY},v6=()=>Ke(mi),y6=()=>Ke(pi),Vt=e=>e.layout.layoutType,zu=()=>Ke(Vt),PY=()=>{var e=zu();return e!==void 0},Km=e=>{var t=Tr(),r=Qn(),{width:n,height:a}=e,l=c1(),c=n,d=a;return l&&(c=l.width>0?l.width:n,d=l.height>0?l.height:a),v.useEffect(()=>{!r&&ya(c)&&ya(d)&&t(RK({width:c,height:d}))},[t,r,c,d]),null},w6=Symbol.for("immer-nothing"),lC=Symbol.for("immer-draftable"),vs=Symbol.for("immer-state");function Js(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fu=Object.getPrototypeOf;function kc(e){return!!e&&!!e[vs]}function Jl(e){var t;return e?j6(e)||Array.isArray(e)||!!e[lC]||!!((t=e.constructor)!=null&&t[lC])||Uu(e)||Xm(e):!1}var DY=Object.prototype.constructor.toString(),oC=new WeakMap;function j6(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=oC.get(r);return n===void 0&&(n=Function.toString.call(r),oC.set(r,n)),n===DY}function z0(e,t,r=!0){Ym(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Ym(e){const t=e[vs];return t?t.type_:Array.isArray(e)?1:Uu(e)?2:Xm(e)?3:0}function jy(e,t){return Ym(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _6(e,t,r){const n=Ym(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function MY(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Uu(e){return e instanceof Map}function Xm(e){return e instanceof Set}function Dl(e){return e.copy_||e.base_}function _y(e,t){if(Uu(e))return new Map(e);if(Xm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=j6(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[vs];let a=Reflect.ownKeys(n);for(let l=0;l<a.length;l++){const c=a[l],d=n[c];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(n[c]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[c]})}return Object.create(fu(e),n)}else{const n=fu(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function d1(e,t=!1){return Jm(e)||kc(e)||!Jl(e)||(Ym(e)>1&&Object.defineProperties(e,{set:Rf,add:Rf,clear:Rf,delete:Rf}),Object.freeze(e),t&&Object.values(e).forEach(r=>d1(r,!0))),e}function RY(){Js(2)}var Rf={value:RY};function Jm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var IY={};function Ql(e){const t=IY[e];return t||Js(0,e),t}var mu;function k6(){return mu}function $Y(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cC(e,t){t&&(Ql("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ky(e){Ny(e),e.drafts_.forEach(LY),e.drafts_=null}function Ny(e){e===mu&&(mu=e.parent_)}function dC(e){return mu=$Y(mu,e)}function LY(e){const t=e[vs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[vs].modified_&&(ky(t),Js(4)),Jl(e)&&(e=U0(t,e),t.parent_||B0(t,e)),t.patches_&&Ql("Patches").generateReplacementPatches_(r[vs].base_,e,t.patches_,t.inversePatches_)):e=U0(t,r,[]),ky(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==w6?e:void 0}function U0(e,t,r){if(Jm(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[vs];if(!a)return z0(t,(l,c)=>hC(e,a,t,l,c,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return B0(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const l=a.copy_;let c=l,d=!1;a.type_===3&&(c=new Set(l),l.clear(),d=!0),z0(c,(h,f)=>hC(e,a,l,h,f,r,d),n),B0(e,l,!1),r&&e.patches_&&Ql("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function hC(e,t,r,n,a,l,c){if(a==null||typeof a!="object"&&!c)return;const d=Jm(a);if(!(d&&!c)){if(kc(a)){const h=l&&t&&t.type_!==3&&!jy(t.assigned_,n)?l.concat(n):void 0,f=U0(e,a,h);if(_6(r,n,f),kc(f))e.canAutoFreeze_=!1;else return}else c&&r.add(a);if(Jl(a)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&d)return;U0(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Uu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&B0(e,a)}}}function B0(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&d1(t,r)}function zY(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:k6(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,l=u1;r&&(a=[n],l=pu);const{revoke:c,proxy:d}=Proxy.revocable(a,l);return n.draft_=d,n.revoke_=c,d}var u1={get(e,t){if(t===vs)return e;const r=Dl(e);if(!jy(r,t))return UY(e,r,t);const n=r[t];return e.finalized_||!Jl(n)?n:n===Vb(e.base_,t)?(Wb(e),e.copy_[t]=Cy(n,e)):n},has(e,t){return t in Dl(e)},ownKeys(e){return Reflect.ownKeys(Dl(e))},set(e,t,r){const n=N6(Dl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Vb(Dl(e),t),l=a==null?void 0:a[vs];if(l&&l.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(MY(r,a)&&(r!==void 0||jy(e.base_,t)))return!0;Wb(e),Sy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Vb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Wb(e),Sy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Dl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Js(11)},getPrototypeOf(e){return fu(e.base_)},setPrototypeOf(){Js(12)}},pu={};z0(u1,(e,t)=>{pu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});pu.deleteProperty=function(e,t){return pu.set.call(this,e,t,void 0)};pu.set=function(e,t,r){return u1.set.call(this,e[0],t,r,e[0])};function Vb(e,t){const r=e[vs];return(r?Dl(r):e)[t]}function UY(e,t,r){var a;const n=N6(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function N6(e,t){if(!(t in e))return;let r=fu(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=fu(r)}}function Sy(e){e.modified_||(e.modified_=!0,e.parent_&&Sy(e.parent_))}function Wb(e){e.copy_||(e.copy_=_y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var BY=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const l=r;r=t;const c=this;return function(h=l,...f){return c.produce(h,m=>r.call(this,m,...f))}}typeof r!="function"&&Js(6),n!==void 0&&typeof n!="function"&&Js(7);let a;if(Jl(t)){const l=dC(this),c=Cy(t,void 0);let d=!0;try{a=r(c),d=!1}finally{d?ky(l):Ny(l)}return cC(l,n),uC(a,l)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===w6&&(a=void 0),this.autoFreeze_&&d1(a,!0),n){const l=[],c=[];Ql("Patches").generateReplacementPatches_(t,a,l,c),n(l,c)}return a}else Js(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...d)=>this.produceWithPatches(c,h=>t(h,...d));let n,a;return[this.produce(t,r,(c,d)=>{n=c,a=d}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Jl(e)||Js(8),kc(e)&&(e=qY(e));const t=dC(this),r=Cy(e,void 0);return r[vs].isManual_=!0,Ny(t),r}finishDraft(e,t){const r=e&&e[vs];(!r||!r.isManual_)&&Js(9);const{scope_:n}=r;return cC(n,t),uC(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Ql("Patches").applyPatches_;return kc(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Cy(e,t){const r=Uu(e)?Ql("MapSet").proxyMap_(e,t):Xm(e)?Ql("MapSet").proxySet_(e,t):zY(e,t);return(t?t.scope_:k6()).drafts_.push(r),r}function qY(e){return kc(e)||Js(10,e),S6(e)}function S6(e){if(!Jl(e)||Jm(e))return e;const t=e[vs];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=_y(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=_y(e,!0);return z0(r,(a,l)=>{_6(r,a,S6(l))},n),t&&(t.finalized_=!1),r}var FY=new BY;FY.produce;var HY={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},C6=Jn({name:"legend",initialState:HY,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:hr()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ea(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:hr()},removeLegendPayload:{reducer(e,t){var r=ea(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:hr()}}}),{setLegendSize:$de,setLegendSettings:Lde,addLegendPayload:VY,replaceLegendPayload:WY,removeLegendPayload:GY}=C6.actions,KY=C6.reducer;function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ey.apply(null,arguments)}function fC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(r),!0).forEach(function(n){YY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YY(e,t,r){return(t=XY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XY(e){var t=JY(e,"string");return typeof t=="symbol"?t:t+""}function JY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QY(e){return Array.isArray(e)&&va(e[0])&&va(e[1])?e.join(" ~ "):e}var ZY=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:l,formatter:c,itemSorter:d,wrapperClassName:h,labelClassName:f,label:m,labelFormatter:g,accessibilityLayer:x=!1}=e,b=()=>{if(l&&l.length){var S={padding:0,margin:0},T=(d?Mm(l,d):l).map((D,P)=>{if(D.type==="none")return null;var I=D.formatter||c||QY,{value:$,name:M}=D,R=$,q=M;if(I){var H=I($,M,D,P,l);if(Array.isArray(H))[R,q]=H;else if(H!=null)R=H;else return null}var W=Gb({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:W},va(q)?v.createElement("span",{className:"recharts-tooltip-item-name"},q):null,va(q)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},R),v.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:S},T)}return null},j=Gb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=Gb({margin:0},a),_=!sn(m),N=_?m:"",C=or("recharts-default-tooltip",h),E=or("recharts-tooltip-label",f);_&&g&&l!==void 0&&l!==null&&(N=g(m,l));var A=x?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",Ey({className:C,style:j},A),v.createElement("p",{className:E,style:w},v.isValidElement(N)?N:"".concat(N)),b())},$d="recharts-tooltip-wrapper",eX={visibility:"hidden"};function tX(e){var{coordinate:t,translateX:r,translateY:n}=e;return or($d,{["".concat($d,"-right")]:Ve(r)&&t&&Ve(t.x)&&r>=t.x,["".concat($d,"-left")]:Ve(r)&&t&&Ve(t.x)&&r<t.x,["".concat($d,"-bottom")]:Ve(n)&&t&&Ve(t.y)&&n>=t.y,["".concat($d,"-top")]:Ve(n)&&t&&Ve(t.y)&&n<t.y})}function mC(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:l,reverseDirection:c,tooltipDimension:d,viewBox:h,viewBoxDimension:f}=e;if(l&&Ve(l[n]))return l[n];var m=r[n]-d-(a>0?a:0),g=r[n]+a;if(t[n])return c[n]?m:g;var x=h[n];if(x==null)return 0;if(c[n]){var b=m,j=x;return b<j?Math.max(g,x):Math.max(m,x)}if(f==null)return 0;var w=g+d,_=x+f;return w>_?Math.max(m,x):Math.max(g,x)}function rX(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function nX(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:h}=e,f,m,g;return c.height>0&&c.width>0&&r?(m=mC({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:l,tooltipDimension:c.width,viewBox:h,viewBoxDimension:h.width}),g=mC({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:l,tooltipDimension:c.height,viewBox:h,viewBoxDimension:h.height}),f=rX({translateX:m,translateY:g,useTranslate3d:d})):f=eX,{cssProperties:f,cssClasses:tX({translateX:m,translateY:g,coordinate:r})}}function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function If(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(n){Ay(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ay(e,t,r){return(t=sX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sX(e){var t=aX(e,"string");return typeof t=="symbol"?t:t+""}function aX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class iX extends v.PureComponent{constructor(){super(...arguments),Ay(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ay(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:l,coordinate:c,hasPayload:d,isAnimationActive:h,offset:f,position:m,reverseDirection:g,useTranslate3d:x,viewBox:b,wrapperStyle:j,lastBoundingBox:w,innerRef:_,hasPortalFromProps:N}=this.props,{cssClasses:C,cssProperties:E}=nX({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:f,position:m,reverseDirection:g,tooltipBox:{height:w.height,width:w.width},useTranslate3d:x,viewBox:b}),A=N?{}:If(If({transition:h&&t?"transform ".concat(n,"ms ").concat(a):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),S=If(If({},A),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},j);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:S,ref:_},l)}}var E6=()=>{var e;return(e=Ke(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ty.apply(null,arguments)}function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(n){lX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lX(e,t,r){return(t=oX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oX(e){var t=cX(e,"string");return typeof t=="symbol"?t:t+""}function cX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bC={curveBasisClosed:aW,curveBasisOpen:iW,curveBasis:sW,curveBumpX:HV,curveBumpY:VV,curveLinearClosed:lW,curveLinear:Pm,curveMonotoneX:oW,curveMonotoneY:cW,curveNatural:dW,curveStep:uW,curveStepAfter:fW,curveStepBefore:hW},q0=e=>br(e.x)&&br(e.y),vC=e=>e.base!=null&&q0(e.base)&&q0(e),Ld=e=>e.x,zd=e=>e.y,dX=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Du(e));return(r==="curveMonotone"||r==="curveBump")&&t?bC["".concat(r).concat(t==="vertical"?"Y":"X")]:bC[r]||Pm},uX=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:l=!1}=e,c=dX(t,a),d=l?r.filter(q0):r,h;if(Array.isArray(n)){var f=r.map((b,j)=>xC(xC({},b),{},{base:n[j]}));a==="vertical"?h=Ef().y(zd).x1(Ld).x0(b=>b.base.x):h=Ef().x(Ld).y1(zd).y0(b=>b.base.y);var m=h.defined(vC).curve(c),g=l?f.filter(vC):f;return m(g)}a==="vertical"&&Ve(n)?h=Ef().y(zd).x1(Ld).x0(n):Ve(n)?h=Ef().x(Ld).y1(zd).y0(n):h=sO().x(Ld).y(zd);var x=h.defined(q0).curve(c);return x(d)},A6=e=>{var{className:t,points:r,path:n,pathRef:a}=e,l=zu();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||l,connectNulls:e.connectNulls},d=r&&r.length?uX(c):n;return v.createElement("path",Ty({},ai(e),LW(e),{className:or("recharts-curve",t),d:d===null?void 0:d,ref:a}))},hX=["x","y","top","left","width","height","className"];function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(null,arguments)}function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){mX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mX(e,t,r){return(t=pX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=gX(e,"string");return typeof t=="symbol"?t:t+""}function gX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xX(e,t){if(e==null)return{};var r,n,a=bX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vX=(e,t,r,n,a,l)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(l,",").concat(t,"h").concat(r),yX=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:l=0,height:c=0,className:d}=e,h=xX(e,hX),f=fX({x:t,y:r,top:n,left:a,width:l,height:c},h);return!Ve(t)||!Ve(r)||!Ve(l)||!Ve(c)||!Ve(n)||!Ve(a)?null:v.createElement("path",Oy({},zs(f),{className:or("recharts-cross",d),d:vX(t,r,l,c,n,a)}))};function wX(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function wC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(r),!0).forEach(function(n){jX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jX(e,t,r){return(t=_X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _X(e){var t=kX(e,"string");return typeof t=="symbol"?t:t+""}function kX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NX=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),T6=(e,t,r)=>e.map(n=>"".concat(NX(n)," ").concat(t,"ms ").concat(r)).join(","),SX=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),gu=(e,t)=>Object.keys(t).reduce((r,n)=>jC(jC({},r),{},{[n]:e(n,t[n])}),{});function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(r),!0).forEach(function(n){CX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CX(e,t,r){return(t=EX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EX(e){var t=AX(e,"string");return typeof t=="symbol"?t:t+""}function AX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F0=(e,t,r)=>e+(t-e)*r,Py=e=>{var{from:t,to:r}=e;return t!==r},O6=(e,t,r)=>{var n=gu((a,l)=>{if(Py(l)){var[c,d]=e(l.from,l.to,l.velocity);return Vr(Vr({},l),{},{from:c,velocity:d})}return l},t);return r<1?gu((a,l)=>Py(l)&&n[a]!=null?Vr(Vr({},l),{},{velocity:F0(l.velocity,n[a].velocity,r),from:F0(l.from,n[a].from,r)}):l,t):O6(e,n,r-1)};function TX(e,t,r,n,a,l){var c,d=n.reduce((x,b)=>Vr(Vr({},x),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),h=()=>gu((x,b)=>b.from,d),f=()=>!Object.values(d).filter(Py).length,m=null,g=x=>{c||(c=x);var b=x-c,j=b/r.dt;d=O6(r,d,j),a(Vr(Vr(Vr({},e),t),h())),c=x,f()||(m=l.setTimeout(g))};return()=>(m=l.setTimeout(g),()=>{var x;(x=m)===null||x===void 0||x()})}function OX(e,t,r,n,a,l,c){var d=null,h=a.reduce((g,x)=>{var b=e[x],j=t[x];return b==null||j==null?g:Vr(Vr({},g),{},{[x]:[b,j]})},{}),f,m=g=>{f||(f=g);var x=(g-f)/n,b=gu((w,_)=>F0(..._,r(x)),h);if(l(Vr(Vr(Vr({},e),t),b)),x<1)d=c.setTimeout(m);else{var j=gu((w,_)=>F0(..._,r(1)),h);l(Vr(Vr(Vr({},e),t),j))}};return()=>(d=c.setTimeout(m),()=>{var g;(g=d)===null||g===void 0||g()})}const PX=(e,t,r,n,a,l)=>{var c=SX(e,t);return r==null?()=>(a(Vr(Vr({},e),t)),()=>{}):r.isStepper===!0?TX(e,t,r,c,a,l):OX(e,t,r,n,c,a,l)};var H0=1e-4,P6=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],D6=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),kC=(e,t)=>r=>{var n=P6(e,t);return D6(n,r)},DX=(e,t)=>r=>{var n=P6(e,t),a=[...n.map((l,c)=>l*c).slice(1),0];return D6(a,r)},MX=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var a=n.map(l=>parseFloat(l));return[a[0],a[1],a[2],a[3]]},RX=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=MX(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},IX=(e,t,r,n)=>{var a=kC(e,r),l=kC(t,n),c=DX(e,r),d=f=>f>1?1:f<0?0:f,h=f=>{for(var m=f>1?1:f,g=m,x=0;x<8;++x){var b=a(g)-m,j=c(g);if(Math.abs(b-m)<H0||j<H0)return l(g);g=d(g-b/j)}return l(g)};return h.isStepper=!1,h},NC=function(){return IX(...RX(...arguments))},$X=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,l=(c,d,h)=>{var f=-(c-d)*r,m=h*n,g=h+(f-m)*a/1e3,x=h*a/1e3+c;return Math.abs(x-d)<H0&&Math.abs(g)<H0?[d,0]:[x,g]};return l.isStepper=!0,l.dt=a,l},LX=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NC(e);case"spring":return $X();default:if(e.split("(")[0]==="cubic-bezier")return NC(e)}return typeof e=="function"?e:null};function zX(e){var t,r=()=>null,n=!1,a=null,l=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var d=c,[h,...f]=d;if(typeof h=="number"){a=e.setTimeout(l.bind(null,f),h);return}l(h),a=e.setTimeout(l.bind(null,f));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,a&&(a(),a=null),l(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class UX{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,l=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(l))};return a=requestAnimationFrame(l),()=>{a!=null&&cancelAnimationFrame(a)}}}function BX(){return zX(new UX)}var qX=v.createContext(BX);function FX(e,t){var r=v.useContext(qX);return v.useMemo(()=>t??r(e),[e,t,r])}var HX=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qm={isSsr:HX()},VX={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},SC={t:0},Kb={t:1};function h1(e){var t=ws(e,VX),{isActive:r,canBegin:n,duration:a,easing:l,begin:c,onAnimationEnd:d,onAnimationStart:h,children:f}=t,m=r==="auto"?!Qm.isSsr:r,g=FX(t.animationId,t.animationManager),[x,b]=v.useState(m?SC:Kb),j=v.useRef(null);return v.useEffect(()=>{m||b(Kb)},[m]),v.useEffect(()=>{if(!m||!n)return Mu;var w=PX(SC,Kb,LX(l),a,b,g.getTimeoutController()),_=()=>{j.current=w()};return g.start([h,c,_,a,d]),()=>{g.stop(),j.current&&j.current(),d()}},[m,n,a,l,c,h,d,g]),f(x.t)}function f1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(cu(t)),n=v.useRef(e);return n.current!==e&&(r.current=cu(t),n.current=e),r.current}var WX=["radius"],GX=["radius"],CC,EC,AC,TC,OC,PC,DC,MC,RC,IC;function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function LC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(n){KX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KX(e,t,r){return(t=YX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YX(e){var t=XX(e,"string");return typeof t=="symbol"?t:t+""}function XX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(null,arguments)}function zC(e,t){if(e==null)return{};var r,n,a=JX(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ma(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var UC=(e,t,r,n,a)=>{var l=Zi(r),c=Zi(n),d=Math.min(Math.abs(l)/2,Math.abs(c)/2),h=c>=0?1:-1,f=l>=0?1:-1,m=c>=0&&l>=0||c<0&&l<0?1:0,g;if(d>0&&a instanceof Array){for(var x=[0,0,0,0],b=0,j=4;b<j;b++)x[b]=a[b]>d?d:a[b];g=wr(CC||(CC=ma(["M",",",""])),e,t+h*x[0]),x[0]>0&&(g+=wr(EC||(EC=ma(["A ",",",",0,0,",",",",",""])),x[0],x[0],m,e+f*x[0],t)),g+=wr(AC||(AC=ma(["L ",",",""])),e+r-f*x[1],t),x[1]>0&&(g+=wr(TC||(TC=ma(["A ",",",",0,0,",`,
        `,",",""])),x[1],x[1],m,e+r,t+h*x[1])),g+=wr(OC||(OC=ma(["L ",",",""])),e+r,t+n-h*x[2]),x[2]>0&&(g+=wr(PC||(PC=ma(["A ",",",",0,0,",`,
        `,",",""])),x[2],x[2],m,e+r-f*x[2],t+n)),g+=wr(DC||(DC=ma(["L ",",",""])),e+f*x[3],t+n),x[3]>0&&(g+=wr(MC||(MC=ma(["A ",",",",0,0,",`,
        `,",",""])),x[3],x[3],m,e,t+n-h*x[3])),g+="Z"}else if(d>0&&a===+a&&a>0){var w=Math.min(d,a);g=wr(RC||(RC=ma(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+h*w,w,w,m,e+f*w,t,e+r-f*w,t,w,w,m,e+r,t+h*w,e+r,t+n-h*w,w,w,m,e+r-f*w,t+n,e+f*w,t+n,w,w,m,e,t+n-h*w)}else g=wr(IC||(IC=ma(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return g},BC={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},M6=e=>{var t=ws(e,BC),r=v.useRef(null),[n,a]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var B=r.current.getTotalLength();B&&a(B)}catch{}},[]);var{x:l,y:c,width:d,height:h,radius:f,className:m}=t,{animationEasing:g,animationDuration:x,animationBegin:b,isAnimationActive:j,isUpdateAnimationActive:w}=t,_=v.useRef(d),N=v.useRef(h),C=v.useRef(l),E=v.useRef(c),A=v.useMemo(()=>({x:l,y:c,width:d,height:h,radius:f}),[l,c,d,h,f]),S=f1(A,"rectangle-");if(l!==+l||c!==+c||d!==+d||h!==+h||d===0||h===0)return null;var T=or("recharts-rectangle",m);if(!w){var D=zs(t),{radius:P}=D,I=zC(D,WX);return v.createElement("path",V0({},I,{x:Zi(l),y:Zi(c),width:Zi(d),height:Zi(h),radius:typeof f=="number"?f:void 0,className:T,d:UC(l,c,d,h,f)}))}var $=_.current,M=N.current,R=C.current,q=E.current,H="0px ".concat(n===-1?1:n,"px"),W="".concat(n,"px 0px"),L=T6(["strokeDasharray"],x,typeof g=="string"?g:BC.animationEasing);return v.createElement(h1,{animationId:S,key:S,canBegin:n>0,duration:x,easing:g,isActive:w,begin:b},B=>{var G=xn($,d,B),ce=xn(M,h,B),ge=xn(R,l,B),U=xn(q,c,B);r.current&&(_.current=G,N.current=ce,C.current=ge,E.current=U);var V;j?B>0?V={transition:L,strokeDasharray:W}:V={strokeDasharray:H}:V={strokeDasharray:W};var te=zs(t),{radius:he}=te,ye=zC(te,GX);return v.createElement("path",V0({},ye,{radius:typeof f=="number"?f:void 0,className:T,d:UC(ge,U,G,ce,f),ref:r,style:LC(LC({},V),t.style)}))})};function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(n){QX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QX(e,t,r){return(t=ZX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZX(e){var t=eJ(e,"string");return typeof t=="symbol"?t:t+""}function eJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var W0=Math.PI/180,tJ=e=>e*180/Math.PI,bn=(e,t,r,n)=>({x:e+Math.cos(-W0*n)*r,y:t+Math.sin(-W0*n)*r}),rJ=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},nJ=(e,t)=>{var{x:r,y:n}=e,{x:a,y:l}=t;return Math.sqrt((r-a)**2+(n-l)**2)},sJ=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:l}=t,c=nJ({x:r,y:n},{x:a,y:l});if(c<=0)return{radius:c,angle:0};var d=(r-a)/c,h=Math.acos(d);return n>l&&(h=2*Math.PI-h),{radius:c,angle:tJ(h),angleInRadian:h}},aJ=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),l=Math.min(n,a);return{startAngle:t-l*360,endAngle:r-l*360}},iJ=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),l=Math.floor(n/360),c=Math.min(a,l);return e+c*360},lJ=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:l}=sJ({x:r,y:n},t),{innerRadius:c,outerRadius:d}=t;if(a<c||a>d||a===0)return null;var{startAngle:h,endAngle:f}=aJ(t),m=l,g;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}return g?FC(FC({},t),{},{radius:a,angle:iJ(m,t)}):null};function R6(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:l}=e,c=bn(t,r,n,a),d=bn(t,r,n,l);return{points:[c,d],cx:t,cy:r,radius:n,startAngle:a,endAngle:l}}var HC,VC,WC,GC,KC,YC,XC;function Dy(){return Dy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dy.apply(null,arguments)}function Ul(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var oJ=(e,t)=>{var r=Kn(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},$f=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:l,isExternal:c,cornerRadius:d,cornerIsExternal:h}=e,f=d*(c?1:-1)+n,m=Math.asin(d/f)/W0,g=h?a:a+l*m,x=bn(t,r,f,g),b=bn(t,r,n,g),j=h?a-l*m:a,w=bn(t,r,f*Math.cos(m*W0),j);return{center:x,circleTangency:b,lineTangency:w,theta:m}},I6=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:c}=e,d=oJ(l,c),h=l+d,f=bn(t,r,a,l),m=bn(t,r,a,h),g=wr(HC||(HC=Ul(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,a,a,+(Math.abs(d)>180),+(l>h),m.x,m.y);if(n>0){var x=bn(t,r,n,l),b=bn(t,r,n,h);g+=wr(VC||(VC=Ul(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),b.x,b.y,n,n,+(Math.abs(d)>180),+(l<=h),x.x,x.y)}else g+=wr(WC||(WC=Ul(["L ",","," Z"])),t,r);return g},cJ=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:l,forceCornerRadius:c,cornerIsExternal:d,startAngle:h,endAngle:f}=e,m=Kn(f-h),{circleTangency:g,lineTangency:x,theta:b}=$f({cx:t,cy:r,radius:a,angle:h,sign:m,cornerRadius:l,cornerIsExternal:d}),{circleTangency:j,lineTangency:w,theta:_}=$f({cx:t,cy:r,radius:a,angle:f,sign:-m,cornerRadius:l,cornerIsExternal:d}),N=d?Math.abs(h-f):Math.abs(h-f)-b-_;if(N<0)return c?wr(GC||(GC=Ul(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),x.x,x.y,l,l,l*2,l,l,-l*2):I6({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:h,endAngle:f});var C=wr(KC||(KC=Ul(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),x.x,x.y,l,l,+(m<0),g.x,g.y,a,a,+(N>180),+(m<0),j.x,j.y,l,l,+(m<0),w.x,w.y);if(n>0){var{circleTangency:E,lineTangency:A,theta:S}=$f({cx:t,cy:r,radius:n,angle:h,sign:m,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),{circleTangency:T,lineTangency:D,theta:P}=$f({cx:t,cy:r,radius:n,angle:f,sign:-m,isExternal:!0,cornerRadius:l,cornerIsExternal:d}),I=d?Math.abs(h-f):Math.abs(h-f)-S-P;if(I<0&&l===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+=wr(YC||(YC=Ul(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),D.x,D.y,l,l,+(m<0),T.x,T.y,n,n,+(I>180),+(m>0),E.x,E.y,l,l,+(m<0),A.x,A.y)}else C+=wr(XC||(XC=Ul(["L",",","Z"])),t,r);return C},dJ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$6=e=>{var t=ws(e,dJ),{cx:r,cy:n,innerRadius:a,outerRadius:l,cornerRadius:c,forceCornerRadius:d,cornerIsExternal:h,startAngle:f,endAngle:m,className:g}=t;if(l<a||f===m)return null;var x=or("recharts-sector",g),b=l-a,j=aa(c,b,0,!0),w;return j>0&&Math.abs(f-m)<360?w=cJ({cx:r,cy:n,innerRadius:a,outerRadius:l,cornerRadius:Math.min(j,b/2),forceCornerRadius:d,cornerIsExternal:h,startAngle:f,endAngle:m}):w=I6({cx:r,cy:n,innerRadius:a,outerRadius:l,startAngle:f,endAngle:m}),v.createElement("path",Dy({},zs(t),{className:x,d:w}))};function uJ(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(vO(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:l,outerRadius:c,angle:d}=t,h=bn(n,a,l,d),f=bn(n,a,c,d);return[{x:h.x,y:h.y},{x:f.x,y:f.y}]}return R6(t)}}var Yb={},Xb={},Jb={},JC;function hJ(){return JC||(JC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TO();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Jb)),Jb}var QC;function fJ(){return QC||(QC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hJ();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Xb)),Xb}var ZC;function mJ(){return ZC||(ZC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OO(),r=fJ();function n(a,l,c){c&&typeof c!="number"&&t.isIterateeCall(a,l,c)&&(l=c=void 0),a=r.toFinite(a),l===void 0?(l=a,a=0):l=r.toFinite(l),c=c===void 0?a<l?1:-1:r.toFinite(c);const d=Math.max(Math.ceil((l-a)/(c||1)),0),h=new Array(d);for(let f=0;f<d;f++)h[f]=a,a+=c;return h}e.range=n})(Yb)),Yb}var Qb,e4;function pJ(){return e4||(e4=1,Qb=mJ().range),Qb}var gJ=pJ();const L6=ys(gJ);function tl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xJ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function m1(e){let t,r,n;e.length!==2?(t=tl,r=(d,h)=>tl(e(d),h),n=(d,h)=>e(d)-h):(t=e===tl||e===xJ?e:bJ,r=e,n=e);function a(d,h,f=0,m=d.length){if(f<m){if(t(h,h)!==0)return m;do{const g=f+m>>>1;r(d[g],h)<0?f=g+1:m=g}while(f<m)}return f}function l(d,h,f=0,m=d.length){if(f<m){if(t(h,h)!==0)return m;do{const g=f+m>>>1;r(d[g],h)<=0?f=g+1:m=g}while(f<m)}return f}function c(d,h,f=0,m=d.length){const g=a(d,h,f,m-1);return g>f&&n(d[g-1],h)>-n(d[g],h)?g-1:g}return{left:a,center:c,right:l}}function bJ(){return 0}function z6(e){return e===null?NaN:+e}function*vJ(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const yJ=m1(tl),Bu=yJ.right;m1(z6).center;class t4 extends Map{constructor(t,r=_J){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(r4(this,t))}has(t){return super.has(r4(this,t))}set(t,r){return super.set(wJ(this,t),r)}delete(t){return super.delete(jJ(this,t))}}function r4({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function wJ({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function jJ({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function _J(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kJ(e=tl){if(e===tl)return U6;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function U6(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const NJ=Math.sqrt(50),SJ=Math.sqrt(10),CJ=Math.sqrt(2);function G0(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),l=n/Math.pow(10,a),c=l>=NJ?10:l>=SJ?5:l>=CJ?2:1;let d,h,f;return a<0?(f=Math.pow(10,-a)/c,d=Math.round(e*f),h=Math.round(t*f),d/f<e&&++d,h/f>t&&--h,f=-f):(f=Math.pow(10,a)*c,d=Math.round(e/f),h=Math.round(t/f),d*f<e&&++d,h*f>t&&--h),h<d&&.5<=r&&r<2?G0(e,t,r*2):[d,h,f]}function My(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,l,c]=n?G0(t,e,r):G0(e,t,r);if(!(l>=a))return[];const d=l-a+1,h=new Array(d);if(n)if(c<0)for(let f=0;f<d;++f)h[f]=(l-f)/-c;else for(let f=0;f<d;++f)h[f]=(l-f)*c;else if(c<0)for(let f=0;f<d;++f)h[f]=(a+f)/-c;else for(let f=0;f<d;++f)h[f]=(a+f)*c;return h}function Ry(e,t,r){return t=+t,e=+e,r=+r,G0(e,t,r)[2]}function Iy(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Ry(t,e,r):Ry(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function n4(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function s4(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function B6(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?U6:kJ(a);n>r;){if(n-r>600){const h=n-r+1,f=t-r+1,m=Math.log(h),g=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*g*(h-g)/h)*(f-h/2<0?-1:1),b=Math.max(r,Math.floor(t-f*g/h+x)),j=Math.min(n,Math.floor(t+(h-f)*g/h+x));B6(e,t,b,j,a)}const l=e[t];let c=r,d=n;for(Ud(e,r,t),a(e[n],l)>0&&Ud(e,r,n);c<d;){for(Ud(e,c,d),++c,--d;a(e[c],l)<0;)++c;for(;a(e[d],l)>0;)--d}a(e[r],l)===0?Ud(e,r,d):(++d,Ud(e,d,n)),d<=t&&(r=d+1),t<=d&&(n=d-1)}return e}function Ud(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function EJ(e,t,r){if(e=Float64Array.from(vJ(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return s4(e);if(t>=1)return n4(e);var n,a=(n-1)*t,l=Math.floor(a),c=n4(B6(e,l).subarray(0,l+1)),d=s4(e.subarray(l+1));return c+(d-c)*(a-l)}}function AJ(e,t,r=z6){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,l=Math.floor(a),c=+r(e[l],l,e),d=+r(e[l+1],l+1,e);return c+(d-c)*(a-l)}}function TJ(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,l=new Array(a);++n<a;)l[n]=e+n*r;return l}function qs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function gi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const $y=Symbol("implicit");function p1(){var e=new t4,t=[],r=[],n=$y;function a(l){let c=e.get(l);if(c===void 0){if(n!==$y)return n;e.set(l,c=t.push(l)-1)}return r[c%r.length]}return a.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new t4;for(const c of l)e.has(c)||e.set(c,t.push(c)-1);return a},a.range=function(l){return arguments.length?(r=Array.from(l),a):r.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return p1(t,r).unknown(n)},qs.apply(a,arguments),a}function g1(){var e=p1().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,l,c,d=!1,h=0,f=0,m=.5;delete e.unknown;function g(){var x=t().length,b=a<n,j=b?a:n,w=b?n:a;l=(w-j)/Math.max(1,x-h+f*2),d&&(l=Math.floor(l)),j+=(w-j-l*(x-h))*m,c=l*(1-h),d&&(j=Math.round(j),c=Math.round(c));var _=TJ(x).map(function(N){return j+l*N});return r(b?_.reverse():_)}return e.domain=function(x){return arguments.length?(t(x),g()):t()},e.range=function(x){return arguments.length?([n,a]=x,n=+n,a=+a,g()):[n,a]},e.rangeRound=function(x){return[n,a]=x,n=+n,a=+a,d=!0,g()},e.bandwidth=function(){return c},e.step=function(){return l},e.round=function(x){return arguments.length?(d=!!x,g()):d},e.padding=function(x){return arguments.length?(h=Math.min(1,f=+x),g()):h},e.paddingInner=function(x){return arguments.length?(h=Math.min(1,x),g()):h},e.paddingOuter=function(x){return arguments.length?(f=+x,g()):f},e.align=function(x){return arguments.length?(m=Math.max(0,Math.min(1,x)),g()):m},e.copy=function(){return g1(t(),[n,a]).round(d).paddingInner(h).paddingOuter(f).align(m)},qs.apply(g(),arguments)}function q6(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return q6(t())},e}function OJ(){return q6(g1.apply(null,arguments).paddingInner(1))}function x1(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function F6(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function qu(){}var xu=.7,K0=1/xu,hc="\\s*([+-]?\\d+)\\s*",bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ba="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PJ=/^#([0-9a-f]{3,8})$/,DJ=new RegExp(`^rgb\\(${hc},${hc},${hc}\\)$`),MJ=new RegExp(`^rgb\\(${ba},${ba},${ba}\\)$`),RJ=new RegExp(`^rgba\\(${hc},${hc},${hc},${bu}\\)$`),IJ=new RegExp(`^rgba\\(${ba},${ba},${ba},${bu}\\)$`),$J=new RegExp(`^hsl\\(${bu},${ba},${ba}\\)$`),LJ=new RegExp(`^hsla\\(${bu},${ba},${ba},${bu}\\)$`),a4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};x1(qu,vu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:i4,formatHex:i4,formatHex8:zJ,formatHsl:UJ,formatRgb:l4,toString:l4});function i4(){return this.rgb().formatHex()}function zJ(){return this.rgb().formatHex8()}function UJ(){return H6(this).formatHsl()}function l4(){return this.rgb().formatRgb()}function vu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=PJ.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?o4(t):r===3?new Yn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Lf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Lf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=DJ.exec(e))?new Yn(t[1],t[2],t[3],1):(t=MJ.exec(e))?new Yn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=RJ.exec(e))?Lf(t[1],t[2],t[3],t[4]):(t=IJ.exec(e))?Lf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$J.exec(e))?u4(t[1],t[2]/100,t[3]/100,1):(t=LJ.exec(e))?u4(t[1],t[2]/100,t[3]/100,t[4]):a4.hasOwnProperty(e)?o4(a4[e]):e==="transparent"?new Yn(NaN,NaN,NaN,0):null}function o4(e){return new Yn(e>>16&255,e>>8&255,e&255,1)}function Lf(e,t,r,n){return n<=0&&(e=t=r=NaN),new Yn(e,t,r,n)}function BJ(e){return e instanceof qu||(e=vu(e)),e?(e=e.rgb(),new Yn(e.r,e.g,e.b,e.opacity)):new Yn}function Ly(e,t,r,n){return arguments.length===1?BJ(e):new Yn(e,t,r,n??1)}function Yn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}x1(Yn,Ly,F6(qu,{brighter(e){return e=e==null?K0:Math.pow(K0,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xu:Math.pow(xu,e),new Yn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yn(Gl(this.r),Gl(this.g),Gl(this.b),Y0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:c4,formatHex:c4,formatHex8:qJ,formatRgb:d4,toString:d4}));function c4(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}`}function qJ(){return`#${Bl(this.r)}${Bl(this.g)}${Bl(this.b)}${Bl((isNaN(this.opacity)?1:this.opacity)*255)}`}function d4(){const e=Y0(this.opacity);return`${e===1?"rgb(":"rgba("}${Gl(this.r)}, ${Gl(this.g)}, ${Gl(this.b)}${e===1?")":`, ${e})`}`}function Y0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Bl(e){return e=Gl(e),(e<16?"0":"")+e.toString(16)}function u4(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Qs(e,t,r,n)}function H6(e){if(e instanceof Qs)return new Qs(e.h,e.s,e.l,e.opacity);if(e instanceof qu||(e=vu(e)),!e)return new Qs;if(e instanceof Qs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),l=Math.max(t,r,n),c=NaN,d=l-a,h=(l+a)/2;return d?(t===l?c=(r-n)/d+(r<n)*6:r===l?c=(n-t)/d+2:c=(t-r)/d+4,d/=h<.5?l+a:2-l-a,c*=60):d=h>0&&h<1?0:c,new Qs(c,d,h,e.opacity)}function FJ(e,t,r,n){return arguments.length===1?H6(e):new Qs(e,t,r,n??1)}function Qs(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}x1(Qs,FJ,F6(qu,{brighter(e){return e=e==null?K0:Math.pow(K0,e),new Qs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xu:Math.pow(xu,e),new Qs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Yn(Zb(e>=240?e-240:e+120,a,n),Zb(e,a,n),Zb(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Qs(h4(this.h),zf(this.s),zf(this.l),Y0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Y0(this.opacity);return`${e===1?"hsl(":"hsla("}${h4(this.h)}, ${zf(this.s)*100}%, ${zf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function h4(e){return e=(e||0)%360,e<0?e+360:e}function zf(e){return Math.max(0,Math.min(1,e||0))}function Zb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const b1=e=>()=>e;function HJ(e,t){return function(r){return e+r*t}}function VJ(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function WJ(e){return(e=+e)==1?V6:function(t,r){return r-t?VJ(t,r,e):b1(isNaN(t)?r:t)}}function V6(e,t){var r=t-e;return r?HJ(e,r):b1(isNaN(e)?t:e)}const f4=(function e(t){var r=WJ(t);function n(a,l){var c=r((a=Ly(a)).r,(l=Ly(l)).r),d=r(a.g,l.g),h=r(a.b,l.b),f=V6(a.opacity,l.opacity);return function(m){return a.r=c(m),a.g=d(m),a.b=h(m),a.opacity=f(m),a+""}}return n.gamma=e,n})(1);function GJ(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(l){for(a=0;a<r;++a)n[a]=e[a]*(1-l)+t[a]*l;return n}}function KJ(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function YJ(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),l=new Array(r),c;for(c=0;c<n;++c)a[c]=zc(e[c],t[c]);for(;c<r;++c)l[c]=t[c];return function(d){for(c=0;c<n;++c)l[c]=a[c](d);return l}}function XJ(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function X0(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function JJ(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=zc(e[a],t[a]):n[a]=t[a];return function(l){for(a in r)n[a]=r[a](l);return n}}var zy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ev=new RegExp(zy.source,"g");function QJ(e){return function(){return e}}function ZJ(e){return function(t){return e(t)+""}}function eQ(e,t){var r=zy.lastIndex=ev.lastIndex=0,n,a,l,c=-1,d=[],h=[];for(e=e+"",t=t+"";(n=zy.exec(e))&&(a=ev.exec(t));)(l=a.index)>r&&(l=t.slice(r,l),d[c]?d[c]+=l:d[++c]=l),(n=n[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,h.push({i:c,x:X0(n,a)})),r=ev.lastIndex;return r<t.length&&(l=t.slice(r),d[c]?d[c]+=l:d[++c]=l),d.length<2?h[0]?ZJ(h[0].x):QJ(t):(t=h.length,function(f){for(var m=0,g;m<t;++m)d[(g=h[m]).i]=g.x(f);return d.join("")})}function zc(e,t){var r=typeof t,n;return t==null||r==="boolean"?b1(t):(r==="number"?X0:r==="string"?(n=vu(t))?(t=n,f4):eQ:t instanceof vu?f4:t instanceof Date?XJ:KJ(t)?GJ:Array.isArray(t)?YJ:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?JJ:X0)(e,t)}function v1(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function tQ(e,t){t===void 0&&(t=e,e=zc);for(var r=0,n=t.length-1,a=t[0],l=new Array(n<0?0:n);r<n;)l[r]=e(a,a=t[++r]);return function(c){var d=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return l[d](c-d)}}function rQ(e){return function(){return e}}function J0(e){return+e}var m4=[0,1];function Pn(e){return e}function Uy(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:rQ(isNaN(t)?NaN:.5)}function nQ(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function sQ(e,t,r){var n=e[0],a=e[1],l=t[0],c=t[1];return a<n?(n=Uy(a,n),l=r(c,l)):(n=Uy(n,a),l=r(l,c)),function(d){return l(n(d))}}function aQ(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),l=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)a[c]=Uy(e[c],e[c+1]),l[c]=r(t[c],t[c+1]);return function(d){var h=Bu(e,d,1,n)-1;return l[h](a[h](d))}}function Fu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Zm(){var e=m4,t=m4,r=zc,n,a,l,c=Pn,d,h,f;function m(){var x=Math.min(e.length,t.length);return c!==Pn&&(c=nQ(e[0],e[x-1])),d=x>2?aQ:sQ,h=f=null,g}function g(x){return x==null||isNaN(x=+x)?l:(h||(h=d(e.map(n),t,r)))(n(c(x)))}return g.invert=function(x){return c(a((f||(f=d(t,e.map(n),X0)))(x)))},g.domain=function(x){return arguments.length?(e=Array.from(x,J0),m()):e.slice()},g.range=function(x){return arguments.length?(t=Array.from(x),m()):t.slice()},g.rangeRound=function(x){return t=Array.from(x),r=v1,m()},g.clamp=function(x){return arguments.length?(c=x?!0:Pn,m()):c!==Pn},g.interpolate=function(x){return arguments.length?(r=x,m()):r},g.unknown=function(x){return arguments.length?(l=x,g):l},function(x,b){return n=x,a=b,m()}}function y1(){return Zm()(Pn,Pn)}function iQ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Q0(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Nc(e){return e=Q0(Math.abs(e)),e?e[1]:NaN}function lQ(e,t){return function(r,n){for(var a=r.length,l=[],c=0,d=e[0],h=0;a>0&&d>0&&(h+d+1>n&&(d=Math.max(1,n-h)),l.push(r.substring(a-=d,a+d)),!((h+=d+1)>n));)d=e[c=(c+1)%e.length];return l.reverse().join(t)}}function oQ(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var cQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yu(e){if(!(t=cQ.exec(e)))throw new Error("invalid format: "+e);var t;return new w1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}yu.prototype=w1.prototype;function w1(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}w1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dQ(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var W6;function uQ(e,t){var r=Q0(e,t);if(!r)return e+"";var n=r[0],a=r[1],l=a-(W6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=n.length;return l===c?n:l>c?n+new Array(l-c+1).join("0"):l>0?n.slice(0,l)+"."+n.slice(l):"0."+new Array(1-l).join("0")+Q0(e,Math.max(0,t+l-1))[0]}function p4(e,t){var r=Q0(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const g4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:iQ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>p4(e*100,t),r:p4,s:uQ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function x4(e){return e}var b4=Array.prototype.map,v4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function hQ(e){var t=e.grouping===void 0||e.thousands===void 0?x4:lQ(b4.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?x4:oQ(b4.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",h=e.nan===void 0?"NaN":e.nan+"";function f(g){g=yu(g);var x=g.fill,b=g.align,j=g.sign,w=g.symbol,_=g.zero,N=g.width,C=g.comma,E=g.precision,A=g.trim,S=g.type;S==="n"?(C=!0,S="g"):g4[S]||(E===void 0&&(E=12),A=!0,S="g"),(_||x==="0"&&b==="=")&&(_=!0,x="0",b="=");var T=w==="$"?r:w==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",D=w==="$"?n:/[%p]/.test(S)?c:"",P=g4[S],I=/[defgprs%]/.test(S);E=E===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function $(M){var R=T,q=D,H,W,L;if(S==="c")q=P(M)+q,M="";else{M=+M;var B=M<0||1/M<0;if(M=isNaN(M)?h:P(Math.abs(M),E),A&&(M=dQ(M)),B&&+M==0&&j!=="+"&&(B=!1),R=(B?j==="("?j:d:j==="-"||j==="("?"":j)+R,q=(S==="s"?v4[8+W6/3]:"")+q+(B&&j==="("?")":""),I){for(H=-1,W=M.length;++H<W;)if(L=M.charCodeAt(H),48>L||L>57){q=(L===46?a+M.slice(H+1):M.slice(H))+q,M=M.slice(0,H);break}}}C&&!_&&(M=t(M,1/0));var G=R.length+M.length+q.length,ce=G<N?new Array(N-G+1).join(x):"";switch(C&&_&&(M=t(ce+M,ce.length?N-q.length:1/0),ce=""),b){case"<":M=R+M+q+ce;break;case"=":M=R+ce+M+q;break;case"^":M=ce.slice(0,G=ce.length>>1)+R+M+q+ce.slice(G);break;default:M=ce+R+M+q;break}return l(M)}return $.toString=function(){return g+""},$}function m(g,x){var b=f((g=yu(g),g.type="f",g)),j=Math.max(-8,Math.min(8,Math.floor(Nc(x)/3)))*3,w=Math.pow(10,-j),_=v4[8+j/3];return function(N){return b(w*N)+_}}return{format:f,formatPrefix:m}}var Uf,j1,G6;fQ({thousands:",",grouping:[3],currency:["$",""]});function fQ(e){return Uf=hQ(e),j1=Uf.format,G6=Uf.formatPrefix,Uf}function mQ(e){return Math.max(0,-Nc(Math.abs(e)))}function pQ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nc(t)/3)))*3-Nc(Math.abs(e)))}function gQ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Nc(t)-Nc(e))+1}function K6(e,t,r,n){var a=Iy(e,t,r),l;switch(n=yu(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(l=pQ(a,c))&&(n.precision=l),G6(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(l=gQ(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=l-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(l=mQ(a))&&(n.precision=l-(n.type==="%")*2);break}}return j1(n)}function il(e){var t=e.domain;return e.ticks=function(r){var n=t();return My(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return K6(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,l=n.length-1,c=n[a],d=n[l],h,f,m=10;for(d<c&&(f=c,c=d,d=f,f=a,a=l,l=f);m-- >0;){if(f=Ry(c,d,r),f===h)return n[a]=c,n[l]=d,t(n);if(f>0)c=Math.floor(c/f)*f,d=Math.ceil(d/f)*f;else if(f<0)c=Math.ceil(c*f)/f,d=Math.floor(d*f)/f;else break;h=f}return e},e}function Y6(){var e=y1();return e.copy=function(){return Fu(e,Y6())},qs.apply(e,arguments),il(e)}function X6(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,J0),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return X6(e).unknown(t)},e=arguments.length?Array.from(e,J0):[0,1],il(r)}function J6(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],l=e[n],c;return l<a&&(c=r,r=n,n=c,c=a,a=l,l=c),e[r]=t.floor(a),e[n]=t.ceil(l),e}function y4(e){return Math.log(e)}function w4(e){return Math.exp(e)}function xQ(e){return-Math.log(-e)}function bQ(e){return-Math.exp(-e)}function vQ(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yQ(e){return e===10?vQ:e===Math.E?Math.exp:t=>Math.pow(e,t)}function wQ(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function j4(e){return(t,r)=>-e(-t,r)}function _1(e){const t=e(y4,w4),r=t.domain;let n=10,a,l;function c(){return a=wQ(n),l=yQ(n),r()[0]<0?(a=j4(a),l=j4(l),e(xQ,bQ)):e(y4,w4),t}return t.base=function(d){return arguments.length?(n=+d,c()):n},t.domain=function(d){return arguments.length?(r(d),c()):r()},t.ticks=d=>{const h=r();let f=h[0],m=h[h.length-1];const g=m<f;g&&([f,m]=[m,f]);let x=a(f),b=a(m),j,w;const _=d==null?10:+d;let N=[];if(!(n%1)&&b-x<_){if(x=Math.floor(x),b=Math.ceil(b),f>0){for(;x<=b;++x)for(j=1;j<n;++j)if(w=x<0?j/l(-x):j*l(x),!(w<f)){if(w>m)break;N.push(w)}}else for(;x<=b;++x)for(j=n-1;j>=1;--j)if(w=x>0?j/l(-x):j*l(x),!(w<f)){if(w>m)break;N.push(w)}N.length*2<_&&(N=My(f,m,_))}else N=My(x,b,Math.min(b-x,_)).map(l);return g?N.reverse():N},t.tickFormat=(d,h)=>{if(d==null&&(d=10),h==null&&(h=n===10?"s":","),typeof h!="function"&&(!(n%1)&&(h=yu(h)).precision==null&&(h.trim=!0),h=j1(h)),d===1/0)return h;const f=Math.max(1,n*d/t.ticks().length);return m=>{let g=m/l(Math.round(a(m)));return g*n<n-.5&&(g*=n),g<=f?h(m):""}},t.nice=()=>r(J6(r(),{floor:d=>l(Math.floor(a(d))),ceil:d=>l(Math.ceil(a(d)))})),t}function Q6(){const e=_1(Zm()).domain([1,10]);return e.copy=()=>Fu(e,Q6()).base(e.base()),qs.apply(e,arguments),e}function _4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function k4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function k1(e){var t=1,r=e(_4(t),k4(t));return r.constant=function(n){return arguments.length?e(_4(t=+n),k4(t)):t},il(r)}function Z6(){var e=k1(Zm());return e.copy=function(){return Fu(e,Z6()).constant(e.constant())},qs.apply(e,arguments)}function N4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function jQ(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _Q(e){return e<0?-e*e:e*e}function N1(e){var t=e(Pn,Pn),r=1;function n(){return r===1?e(Pn,Pn):r===.5?e(jQ,_Q):e(N4(r),N4(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},il(t)}function S1(){var e=N1(Zm());return e.copy=function(){return Fu(e,S1()).exponent(e.exponent())},qs.apply(e,arguments),e}function kQ(){return S1.apply(null,arguments).exponent(.5)}function S4(e){return Math.sign(e)*e*e}function NQ(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function eP(){var e=y1(),t=[0,1],r=!1,n;function a(l){var c=NQ(e(l));return isNaN(c)?n:r?Math.round(c):c}return a.invert=function(l){return e.invert(S4(l))},a.domain=function(l){return arguments.length?(e.domain(l),a):e.domain()},a.range=function(l){return arguments.length?(e.range((t=Array.from(l,J0)).map(S4)),a):t.slice()},a.rangeRound=function(l){return a.range(l).round(!0)},a.round=function(l){return arguments.length?(r=!!l,a):r},a.clamp=function(l){return arguments.length?(e.clamp(l),a):e.clamp()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return eP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},qs.apply(a,arguments),il(a)}function tP(){var e=[],t=[],r=[],n;function a(){var c=0,d=Math.max(1,t.length);for(r=new Array(d-1);++c<d;)r[c-1]=AJ(e,c/d);return l}function l(c){return c==null||isNaN(c=+c)?n:t[Bu(r,c)]}return l.invertExtent=function(c){var d=t.indexOf(c);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},l.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let d of c)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(tl),a()},l.range=function(c){return arguments.length?(t=Array.from(c),a()):t.slice()},l.unknown=function(c){return arguments.length?(n=c,l):n},l.quantiles=function(){return r.slice()},l.copy=function(){return tP().domain(e).range(t).unknown(n)},qs.apply(l,arguments)}function rP(){var e=0,t=1,r=1,n=[.5],a=[0,1],l;function c(h){return h!=null&&h<=h?a[Bu(n,h,0,r)]:l}function d(){var h=-1;for(n=new Array(r);++h<r;)n[h]=((h+1)*t-(h-r)*e)/(r+1);return c}return c.domain=function(h){return arguments.length?([e,t]=h,e=+e,t=+t,d()):[e,t]},c.range=function(h){return arguments.length?(r=(a=Array.from(h)).length-1,d()):a.slice()},c.invertExtent=function(h){var f=a.indexOf(h);return f<0?[NaN,NaN]:f<1?[e,n[0]]:f>=r?[n[r-1],t]:[n[f-1],n[f]]},c.unknown=function(h){return arguments.length&&(l=h),c},c.thresholds=function(){return n.slice()},c.copy=function(){return rP().domain([e,t]).range(a).unknown(l)},qs.apply(il(c),arguments)}function nP(){var e=[.5],t=[0,1],r,n=1;function a(l){return l!=null&&l<=l?t[Bu(e,l,0,n)]:r}return a.domain=function(l){return arguments.length?(e=Array.from(l),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(l){return arguments.length?(t=Array.from(l),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(l){var c=t.indexOf(l);return[e[c-1],e[c]]},a.unknown=function(l){return arguments.length?(r=l,a):r},a.copy=function(){return nP().domain(e).range(t).unknown(r)},qs.apply(a,arguments)}const tv=new Date,rv=new Date;function Kr(e,t,r,n){function a(l){return e(l=arguments.length===0?new Date:new Date(+l)),l}return a.floor=l=>(e(l=new Date(+l)),l),a.ceil=l=>(e(l=new Date(l-1)),t(l,1),e(l),l),a.round=l=>{const c=a(l),d=a.ceil(l);return l-c<d-l?c:d},a.offset=(l,c)=>(t(l=new Date(+l),c==null?1:Math.floor(c)),l),a.range=(l,c,d)=>{const h=[];if(l=a.ceil(l),d=d==null?1:Math.floor(d),!(l<c)||!(d>0))return h;let f;do h.push(f=new Date(+l)),t(l,d),e(l);while(f<l&&l<c);return h},a.filter=l=>Kr(c=>{if(c>=c)for(;e(c),!l(c);)c.setTime(c-1)},(c,d)=>{if(c>=c)if(d<0)for(;++d<=0;)for(;t(c,-1),!l(c););else for(;--d>=0;)for(;t(c,1),!l(c););}),r&&(a.count=(l,c)=>(tv.setTime(+l),rv.setTime(+c),e(tv),e(rv),Math.floor(r(tv,rv))),a.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?a.filter(n?c=>n(c)%l===0:c=>a.count(0,c)%l===0):a)),a}const Z0=Kr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Z0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Kr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Z0);Z0.range;const Xa=1e3,Is=Xa*60,Ja=Is*60,ci=Ja*24,C1=ci*7,C4=ci*30,nv=ci*365,ql=Kr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xa)},(e,t)=>(t-e)/Xa,e=>e.getUTCSeconds());ql.range;const E1=Kr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xa)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getMinutes());E1.range;const A1=Kr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCMinutes());A1.range;const T1=Kr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xa-e.getMinutes()*Is)},(e,t)=>{e.setTime(+e+t*Ja)},(e,t)=>(t-e)/Ja,e=>e.getHours());T1.range;const O1=Kr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ja)},(e,t)=>(t-e)/Ja,e=>e.getUTCHours());O1.range;const Hu=Kr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Is)/ci,e=>e.getDate()-1);Hu.range;const ep=Kr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ci,e=>e.getUTCDate()-1);ep.range;const sP=Kr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ci,e=>Math.floor(e/ci));sP.range;function so(e){return Kr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Is)/C1)}const tp=so(0),em=so(1),SQ=so(2),CQ=so(3),Sc=so(4),EQ=so(5),AQ=so(6);tp.range;em.range;SQ.range;CQ.range;Sc.range;EQ.range;AQ.range;function ao(e){return Kr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/C1)}const rp=ao(0),tm=ao(1),TQ=ao(2),OQ=ao(3),Cc=ao(4),PQ=ao(5),DQ=ao(6);rp.range;tm.range;TQ.range;OQ.range;Cc.range;PQ.range;DQ.range;const P1=Kr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());P1.range;const D1=Kr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());D1.range;const di=Kr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());di.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});di.range;const ui=Kr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ui.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Kr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ui.range;function aP(e,t,r,n,a,l){const c=[[ql,1,Xa],[ql,5,5*Xa],[ql,15,15*Xa],[ql,30,30*Xa],[l,1,Is],[l,5,5*Is],[l,15,15*Is],[l,30,30*Is],[a,1,Ja],[a,3,3*Ja],[a,6,6*Ja],[a,12,12*Ja],[n,1,ci],[n,2,2*ci],[r,1,C1],[t,1,C4],[t,3,3*C4],[e,1,nv]];function d(f,m,g){const x=m<f;x&&([f,m]=[m,f]);const b=g&&typeof g.range=="function"?g:h(f,m,g),j=b?b.range(f,+m+1):[];return x?j.reverse():j}function h(f,m,g){const x=Math.abs(m-f)/g,b=m1(([,,_])=>_).right(c,x);if(b===c.length)return e.every(Iy(f/nv,m/nv,g));if(b===0)return Z0.every(Math.max(Iy(f,m,g),1));const[j,w]=c[x/c[b-1][2]<c[b][2]/x?b-1:b];return j.every(w)}return[d,h]}const[MQ,RQ]=aP(ui,D1,rp,sP,O1,A1),[IQ,$Q]=aP(di,P1,tp,Hu,T1,E1);function sv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function av(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Bd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function LQ(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,l=e.days,c=e.shortDays,d=e.months,h=e.shortMonths,f=qd(a),m=Fd(a),g=qd(l),x=Fd(l),b=qd(c),j=Fd(c),w=qd(d),_=Fd(d),N=qd(h),C=Fd(h),E={a:B,A:G,b:ce,B:ge,c:null,d:D4,e:D4,f:lZ,g:xZ,G:vZ,H:sZ,I:aZ,j:iZ,L:iP,m:oZ,M:cZ,p:U,q:V,Q:I4,s:$4,S:dZ,u:uZ,U:hZ,V:fZ,w:mZ,W:pZ,x:null,X:null,y:gZ,Y:bZ,Z:yZ,"%":R4},A={a:te,A:he,b:ye,B:Ne,c:null,d:M4,e:M4,f:kZ,g:MZ,G:IZ,H:wZ,I:jZ,j:_Z,L:oP,m:NZ,M:SZ,p:ve,q:je,Q:I4,s:$4,S:CZ,u:EZ,U:AZ,V:TZ,w:OZ,W:PZ,x:null,X:null,y:DZ,Y:RZ,Z:$Z,"%":R4},S={a:$,A:M,b:R,B:q,c:H,d:O4,e:O4,f:eZ,g:T4,G:A4,H:P4,I:P4,j:XQ,L:ZQ,m:YQ,M:JQ,p:I,q:KQ,Q:rZ,s:nZ,S:QQ,u:FQ,U:HQ,V:VQ,w:qQ,W:WQ,x:W,X:L,y:T4,Y:A4,Z:GQ,"%":tZ};E.x=T(r,E),E.X=T(n,E),E.c=T(t,E),A.x=T(r,A),A.X=T(n,A),A.c=T(t,A);function T(Q,_e){return function(de){var Y=[],we=-1,Oe=0,lt=Q.length,ut,Ct,rr;for(de instanceof Date||(de=new Date(+de));++we<lt;)Q.charCodeAt(we)===37&&(Y.push(Q.slice(Oe,we)),(Ct=E4[ut=Q.charAt(++we)])!=null?ut=Q.charAt(++we):Ct=ut==="e"?" ":"0",(rr=_e[ut])&&(ut=rr(de,Ct)),Y.push(ut),Oe=we+1);return Y.push(Q.slice(Oe,we)),Y.join("")}}function D(Q,_e){return function(de){var Y=Bd(1900,void 0,1),we=P(Y,Q,de+="",0),Oe,lt;if(we!=de.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(_e&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(Oe=av(Bd(Y.y,0,1)),lt=Oe.getUTCDay(),Oe=lt>4||lt===0?tm.ceil(Oe):tm(Oe),Oe=ep.offset(Oe,(Y.V-1)*7),Y.y=Oe.getUTCFullYear(),Y.m=Oe.getUTCMonth(),Y.d=Oe.getUTCDate()+(Y.w+6)%7):(Oe=sv(Bd(Y.y,0,1)),lt=Oe.getDay(),Oe=lt>4||lt===0?em.ceil(Oe):em(Oe),Oe=Hu.offset(Oe,(Y.V-1)*7),Y.y=Oe.getFullYear(),Y.m=Oe.getMonth(),Y.d=Oe.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),lt="Z"in Y?av(Bd(Y.y,0,1)).getUTCDay():sv(Bd(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(lt+5)%7:Y.w+Y.U*7-(lt+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,av(Y)):sv(Y)}}function P(Q,_e,de,Y){for(var we=0,Oe=_e.length,lt=de.length,ut,Ct;we<Oe;){if(Y>=lt)return-1;if(ut=_e.charCodeAt(we++),ut===37){if(ut=_e.charAt(we++),Ct=S[ut in E4?_e.charAt(we++):ut],!Ct||(Y=Ct(Q,de,Y))<0)return-1}else if(ut!=de.charCodeAt(Y++))return-1}return Y}function I(Q,_e,de){var Y=f.exec(_e.slice(de));return Y?(Q.p=m.get(Y[0].toLowerCase()),de+Y[0].length):-1}function $(Q,_e,de){var Y=b.exec(_e.slice(de));return Y?(Q.w=j.get(Y[0].toLowerCase()),de+Y[0].length):-1}function M(Q,_e,de){var Y=g.exec(_e.slice(de));return Y?(Q.w=x.get(Y[0].toLowerCase()),de+Y[0].length):-1}function R(Q,_e,de){var Y=N.exec(_e.slice(de));return Y?(Q.m=C.get(Y[0].toLowerCase()),de+Y[0].length):-1}function q(Q,_e,de){var Y=w.exec(_e.slice(de));return Y?(Q.m=_.get(Y[0].toLowerCase()),de+Y[0].length):-1}function H(Q,_e,de){return P(Q,t,_e,de)}function W(Q,_e,de){return P(Q,r,_e,de)}function L(Q,_e,de){return P(Q,n,_e,de)}function B(Q){return c[Q.getDay()]}function G(Q){return l[Q.getDay()]}function ce(Q){return h[Q.getMonth()]}function ge(Q){return d[Q.getMonth()]}function U(Q){return a[+(Q.getHours()>=12)]}function V(Q){return 1+~~(Q.getMonth()/3)}function te(Q){return c[Q.getUTCDay()]}function he(Q){return l[Q.getUTCDay()]}function ye(Q){return h[Q.getUTCMonth()]}function Ne(Q){return d[Q.getUTCMonth()]}function ve(Q){return a[+(Q.getUTCHours()>=12)]}function je(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var _e=T(Q+="",E);return _e.toString=function(){return Q},_e},parse:function(Q){var _e=D(Q+="",!1);return _e.toString=function(){return Q},_e},utcFormat:function(Q){var _e=T(Q+="",A);return _e.toString=function(){return Q},_e},utcParse:function(Q){var _e=D(Q+="",!0);return _e.toString=function(){return Q},_e}}}var E4={"-":"",_:" ",0:"0"},ln=/^\s*\d+/,zQ=/^%/,UQ=/[\\^$*+?|[\]().{}]/g;function Pt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",l=a.length;return n+(l<r?new Array(r-l+1).join(t)+a:a)}function BQ(e){return e.replace(UQ,"\\$&")}function qd(e){return new RegExp("^(?:"+e.map(BQ).join("|")+")","i")}function Fd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function qQ(e,t,r){var n=ln.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function FQ(e,t,r){var n=ln.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function HQ(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function VQ(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function WQ(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function A4(e,t,r){var n=ln.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function T4(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function GQ(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function KQ(e,t,r){var n=ln.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function YQ(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function O4(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function XQ(e,t,r){var n=ln.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function P4(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function JQ(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function QQ(e,t,r){var n=ln.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function ZQ(e,t,r){var n=ln.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function eZ(e,t,r){var n=ln.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function tZ(e,t,r){var n=zQ.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function rZ(e,t,r){var n=ln.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function nZ(e,t,r){var n=ln.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function D4(e,t){return Pt(e.getDate(),t,2)}function sZ(e,t){return Pt(e.getHours(),t,2)}function aZ(e,t){return Pt(e.getHours()%12||12,t,2)}function iZ(e,t){return Pt(1+Hu.count(di(e),e),t,3)}function iP(e,t){return Pt(e.getMilliseconds(),t,3)}function lZ(e,t){return iP(e,t)+"000"}function oZ(e,t){return Pt(e.getMonth()+1,t,2)}function cZ(e,t){return Pt(e.getMinutes(),t,2)}function dZ(e,t){return Pt(e.getSeconds(),t,2)}function uZ(e){var t=e.getDay();return t===0?7:t}function hZ(e,t){return Pt(tp.count(di(e)-1,e),t,2)}function lP(e){var t=e.getDay();return t>=4||t===0?Sc(e):Sc.ceil(e)}function fZ(e,t){return e=lP(e),Pt(Sc.count(di(e),e)+(di(e).getDay()===4),t,2)}function mZ(e){return e.getDay()}function pZ(e,t){return Pt(em.count(di(e)-1,e),t,2)}function gZ(e,t){return Pt(e.getFullYear()%100,t,2)}function xZ(e,t){return e=lP(e),Pt(e.getFullYear()%100,t,2)}function bZ(e,t){return Pt(e.getFullYear()%1e4,t,4)}function vZ(e,t){var r=e.getDay();return e=r>=4||r===0?Sc(e):Sc.ceil(e),Pt(e.getFullYear()%1e4,t,4)}function yZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pt(t/60|0,"0",2)+Pt(t%60,"0",2)}function M4(e,t){return Pt(e.getUTCDate(),t,2)}function wZ(e,t){return Pt(e.getUTCHours(),t,2)}function jZ(e,t){return Pt(e.getUTCHours()%12||12,t,2)}function _Z(e,t){return Pt(1+ep.count(ui(e),e),t,3)}function oP(e,t){return Pt(e.getUTCMilliseconds(),t,3)}function kZ(e,t){return oP(e,t)+"000"}function NZ(e,t){return Pt(e.getUTCMonth()+1,t,2)}function SZ(e,t){return Pt(e.getUTCMinutes(),t,2)}function CZ(e,t){return Pt(e.getUTCSeconds(),t,2)}function EZ(e){var t=e.getUTCDay();return t===0?7:t}function AZ(e,t){return Pt(rp.count(ui(e)-1,e),t,2)}function cP(e){var t=e.getUTCDay();return t>=4||t===0?Cc(e):Cc.ceil(e)}function TZ(e,t){return e=cP(e),Pt(Cc.count(ui(e),e)+(ui(e).getUTCDay()===4),t,2)}function OZ(e){return e.getUTCDay()}function PZ(e,t){return Pt(tm.count(ui(e)-1,e),t,2)}function DZ(e,t){return Pt(e.getUTCFullYear()%100,t,2)}function MZ(e,t){return e=cP(e),Pt(e.getUTCFullYear()%100,t,2)}function RZ(e,t){return Pt(e.getUTCFullYear()%1e4,t,4)}function IZ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Cc(e):Cc.ceil(e),Pt(e.getUTCFullYear()%1e4,t,4)}function $Z(){return"+0000"}function R4(){return"%"}function I4(e){return+e}function $4(e){return Math.floor(+e/1e3)}var Yo,dP,uP;LZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function LZ(e){return Yo=LQ(e),dP=Yo.format,Yo.parse,uP=Yo.utcFormat,Yo.utcParse,Yo}function zZ(e){return new Date(e)}function UZ(e){return e instanceof Date?+e:+new Date(+e)}function M1(e,t,r,n,a,l,c,d,h,f){var m=y1(),g=m.invert,x=m.domain,b=f(".%L"),j=f(":%S"),w=f("%I:%M"),_=f("%I %p"),N=f("%a %d"),C=f("%b %d"),E=f("%B"),A=f("%Y");function S(T){return(h(T)<T?b:d(T)<T?j:c(T)<T?w:l(T)<T?_:n(T)<T?a(T)<T?N:C:r(T)<T?E:A)(T)}return m.invert=function(T){return new Date(g(T))},m.domain=function(T){return arguments.length?x(Array.from(T,UZ)):x().map(zZ)},m.ticks=function(T){var D=x();return e(D[0],D[D.length-1],T??10)},m.tickFormat=function(T,D){return D==null?S:f(D)},m.nice=function(T){var D=x();return(!T||typeof T.range!="function")&&(T=t(D[0],D[D.length-1],T??10)),T?x(J6(D,T)):m},m.copy=function(){return Fu(m,M1(e,t,r,n,a,l,c,d,h,f))},m}function BZ(){return qs.apply(M1(IQ,$Q,di,P1,tp,Hu,T1,E1,ql,dP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qZ(){return qs.apply(M1(MQ,RQ,ui,D1,rp,ep,O1,A1,ql,uP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function np(){var e=0,t=1,r,n,a,l,c=Pn,d=!1,h;function f(g){return g==null||isNaN(g=+g)?h:c(a===0?.5:(g=(l(g)-r)*a,d?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,r=l(e=+e),n=l(t=+t),a=r===n?0:1/(n-r),f):[e,t]},f.clamp=function(g){return arguments.length?(d=!!g,f):d},f.interpolator=function(g){return arguments.length?(c=g,f):c};function m(g){return function(x){var b,j;return arguments.length?([b,j]=x,c=g(b,j),f):[c(0),c(1)]}}return f.range=m(zc),f.rangeRound=m(v1),f.unknown=function(g){return arguments.length?(h=g,f):h},function(g){return l=g,r=g(e),n=g(t),a=r===n?0:1/(n-r),f}}function ll(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hP(){var e=il(np()(Pn));return e.copy=function(){return ll(e,hP())},gi.apply(e,arguments)}function fP(){var e=_1(np()).domain([1,10]);return e.copy=function(){return ll(e,fP()).base(e.base())},gi.apply(e,arguments)}function mP(){var e=k1(np());return e.copy=function(){return ll(e,mP()).constant(e.constant())},gi.apply(e,arguments)}function R1(){var e=N1(np());return e.copy=function(){return ll(e,R1()).exponent(e.exponent())},gi.apply(e,arguments)}function FZ(){return R1.apply(null,arguments).exponent(.5)}function pP(){var e=[],t=Pn;function r(n){if(n!=null&&!isNaN(n=+n))return t((Bu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(tl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,l)=>EJ(e,l/n))},r.copy=function(){return pP(t).domain(e)},gi.apply(r,arguments)}function sp(){var e=0,t=.5,r=1,n=1,a,l,c,d,h,f=Pn,m,g=!1,x;function b(w){return isNaN(w=+w)?x:(w=.5+((w=+m(w))-l)*(n*w<n*l?d:h),f(g?Math.max(0,Math.min(1,w)):w))}b.domain=function(w){return arguments.length?([e,t,r]=w,a=m(e=+e),l=m(t=+t),c=m(r=+r),d=a===l?0:.5/(l-a),h=l===c?0:.5/(c-l),n=l<a?-1:1,b):[e,t,r]},b.clamp=function(w){return arguments.length?(g=!!w,b):g},b.interpolator=function(w){return arguments.length?(f=w,b):f};function j(w){return function(_){var N,C,E;return arguments.length?([N,C,E]=_,f=tQ(w,[N,C,E]),b):[f(0),f(.5),f(1)]}}return b.range=j(zc),b.rangeRound=j(v1),b.unknown=function(w){return arguments.length?(x=w,b):x},function(w){return m=w,a=w(e),l=w(t),c=w(r),d=a===l?0:.5/(l-a),h=l===c?0:.5/(c-l),n=l<a?-1:1,b}}function gP(){var e=il(sp()(Pn));return e.copy=function(){return ll(e,gP())},gi.apply(e,arguments)}function xP(){var e=_1(sp()).domain([.1,1,10]);return e.copy=function(){return ll(e,xP()).base(e.base())},gi.apply(e,arguments)}function bP(){var e=k1(sp());return e.copy=function(){return ll(e,bP()).constant(e.constant())},gi.apply(e,arguments)}function I1(){var e=N1(sp());return e.copy=function(){return ll(e,I1()).exponent(e.exponent())},gi.apply(e,arguments)}function HZ(){return I1.apply(null,arguments).exponent(.5)}const Jd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:g1,scaleDiverging:gP,scaleDivergingLog:xP,scaleDivergingPow:I1,scaleDivergingSqrt:HZ,scaleDivergingSymlog:bP,scaleIdentity:X6,scaleImplicit:$y,scaleLinear:Y6,scaleLog:Q6,scaleOrdinal:p1,scalePoint:OJ,scalePow:S1,scaleQuantile:tP,scaleQuantize:rP,scaleRadial:eP,scaleSequential:hP,scaleSequentialLog:fP,scaleSequentialPow:R1,scaleSequentialQuantile:pP,scaleSequentialSqrt:FZ,scaleSequentialSymlog:mP,scaleSqrt:kQ,scaleSymlog:Z6,scaleThreshold:nP,scaleTime:BZ,scaleUtc:qZ,tickFormat:K6},Symbol.toStringTag,{value:"Module"}));var xi=e=>e.chartData,vP=le([xi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),yP=(e,t,r,n)=>n?vP(e):xi(e),VZ=(e,t,r)=>r?vP(e):xi(e);function nl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(br(t)&&br(r))return!0}return!1}function L4(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function wP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,l;if(br(r))a=r;else if(typeof r=="function")return;if(br(n))l=n;else if(typeof n=="function")return;var c=[a,l];if(nl(c))return c}}function WZ(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(nl(n))return L4(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,l]=e,c,d;if(a==="auto")t!=null&&(c=Math.min(...t));else if(Ve(a))c=a;else if(typeof a=="function")try{t!=null&&(c=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&J5.test(a)){var h=J5.exec(a);if(h==null||h[1]==null||t==null)c=void 0;else{var f=+h[1];c=t[0]-f}}else c=t==null?void 0:t[0];if(l==="auto")t!=null&&(d=Math.max(...t));else if(Ve(l))d=l;else if(typeof l=="function")try{t!=null&&(d=l(t==null?void 0:t[1]))}catch{}else if(typeof l=="string"&&Q5.test(l)){var m=Q5.exec(l);if(m==null||m[1]==null||t==null)d=void 0;else{var g=+m[1];d=t[1]+g}}else d=t==null?void 0:t[1];var x=[c,d];if(nl(x))return t==null?x:L4(x,t,r)}}}var Uc=1e9,GZ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},L1,mr=!0,Bs="[DecimalError] ",Kl=Bs+"Invalid argument: ",$1=Bs+"Exponent out of range: ",Bc=Math.floor,Ml=Math.pow,KZ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fs,rn=1e7,lr=7,jP=9007199254740991,rm=Bc(jP/lr),$e={};$e.absoluteValue=$e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$e.comparedTo=$e.cmp=function(e){var t,r,n,a,l=this;if(e=new l.constructor(e),l.s!==e.s)return l.s||-e.s;if(l.e!==e.e)return l.e>e.e^l.s<0?1:-1;for(n=l.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(l.d[t]!==e.d[t])return l.d[t]>e.d[t]^l.s<0?1:-1;return n===a?0:n>a^l.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*lr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};$e.dividedBy=$e.div=function(e){return Za(this,new this.constructor(e))};$e.dividedToIntegerBy=$e.idiv=function(e){var t=this,r=t.constructor;return Qt(Za(t,new r(e),0,1),r.precision)};$e.equals=$e.eq=function(e){return!this.cmp(e)};$e.exponent=function(){return qr(this)};$e.greaterThan=$e.gt=function(e){return this.cmp(e)>0};$e.greaterThanOrEqualTo=$e.gte=function(e){return this.cmp(e)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(e){return this.cmp(e)<0};$e.lessThanOrEqualTo=$e.lte=function(e){return this.cmp(e)<1};$e.logarithm=$e.log=function(e){var t,r=this,n=r.constructor,a=n.precision,l=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(fs))throw Error(Bs+"NaN");if(r.s<1)throw Error(Bs+(r.s?"NaN":"-Infinity"));return r.eq(fs)?new n(0):(mr=!1,t=Za(wu(r,l),wu(e,l),l),mr=!0,Qt(t,a))};$e.minus=$e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?NP(t,e):_P(t,(e.s=-e.s,e))};$e.modulo=$e.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Bs+"NaN");return r.s?(mr=!1,t=Za(r,e,0,1).times(e),mr=!0,r.minus(t)):Qt(new n(r),a)};$e.naturalExponential=$e.exp=function(){return kP(this)};$e.naturalLogarithm=$e.ln=function(){return wu(this)};$e.negated=$e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$e.plus=$e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_P(t,e):NP(t,(e.s=-e.s,e))};$e.precision=$e.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Kl+e);if(t=qr(a)+1,n=a.d.length-1,r=n*lr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};$e.squareRoot=$e.sqrt=function(){var e,t,r,n,a,l,c,d=this,h=d.constructor;if(d.s<1){if(!d.s)return new h(0);throw Error(Bs+"NaN")}for(e=qr(d),mr=!1,a=Math.sqrt(+d),a==0||a==1/0?(t=ga(d.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Bc((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new h(t)):n=new h(a.toString()),r=h.precision,a=c=r+3;;)if(l=n,n=l.plus(Za(d,l,c+2)).times(.5),ga(l.d).slice(0,c)===(t=ga(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),a==c&&t=="4999"){if(Qt(l,r+1,0),l.times(l).eq(d)){n=l;break}}else if(t!="9999")break;c+=4}return mr=!0,Qt(n,r)};$e.times=$e.mul=function(e){var t,r,n,a,l,c,d,h,f,m=this,g=m.constructor,x=m.d,b=(e=new g(e)).d;if(!m.s||!e.s)return new g(0);for(e.s*=m.s,r=m.e+e.e,h=x.length,f=b.length,h<f&&(l=x,x=b,b=l,c=h,h=f,f=c),l=[],c=h+f,n=c;n--;)l.push(0);for(n=f;--n>=0;){for(t=0,a=h+n;a>n;)d=l[a]+b[n]*x[a-n-1]+t,l[a--]=d%rn|0,t=d/rn|0;l[a]=(l[a]+t)%rn|0}for(;!l[--c];)l.pop();return t?++r:l.shift(),e.d=l,e.e=r,mr?Qt(e,g.precision):e};$e.toDecimalPlaces=$e.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(wa(e,0,Uc),t===void 0?t=n.rounding:wa(t,0,8),Qt(r,e+qr(r)+1,t))};$e.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Zl(n,!0):(wa(e,0,Uc),t===void 0?t=a.rounding:wa(t,0,8),n=Qt(new a(n),e+1,t),r=Zl(n,!0,e+1)),r};$e.toFixed=function(e,t){var r,n,a=this,l=a.constructor;return e===void 0?Zl(a):(wa(e,0,Uc),t===void 0?t=l.rounding:wa(t,0,8),n=Qt(new l(a),e+qr(a)+1,t),r=Zl(n.abs(),!1,e+qr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};$e.toInteger=$e.toint=function(){var e=this,t=e.constructor;return Qt(new t(e),qr(e)+1,t.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(e){var t,r,n,a,l,c,d=this,h=d.constructor,f=12,m=+(e=new h(e));if(!e.s)return new h(fs);if(d=new h(d),!d.s){if(e.s<1)throw Error(Bs+"Infinity");return d}if(d.eq(fs))return d;if(n=h.precision,e.eq(fs))return Qt(d,n);if(t=e.e,r=e.d.length-1,c=t>=r,l=d.s,c){if((r=m<0?-m:m)<=jP){for(a=new h(fs),t=Math.ceil(n/lr+4),mr=!1;r%2&&(a=a.times(d),U4(a.d,t)),r=Bc(r/2),r!==0;)d=d.times(d),U4(d.d,t);return mr=!0,e.s<0?new h(fs).div(a):Qt(a,n)}}else if(l<0)throw Error(Bs+"NaN");return l=l<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,mr=!1,a=e.times(wu(d,n+f)),mr=!0,a=kP(a),a.s=l,a};$e.toPrecision=function(e,t){var r,n,a=this,l=a.constructor;return e===void 0?(r=qr(a),n=Zl(a,r<=l.toExpNeg||r>=l.toExpPos)):(wa(e,1,Uc),t===void 0?t=l.rounding:wa(t,0,8),a=Qt(new l(a),e,t),r=qr(a),n=Zl(a,e<=r||r<=l.toExpNeg,e)),n};$e.toSignificantDigits=$e.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(wa(e,1,Uc),t===void 0?t=n.rounding:wa(t,0,8)),Qt(new n(r),e,t)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=qr(e),r=e.constructor;return Zl(e,t<=r.toExpNeg||t>=r.toExpPos)};function _P(e,t){var r,n,a,l,c,d,h,f,m=e.constructor,g=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),mr?Qt(t,g):t;if(h=e.d,f=t.d,c=e.e,a=t.e,h=h.slice(),l=c-a,l){for(l<0?(n=h,l=-l,d=f.length):(n=f,a=c,d=h.length),c=Math.ceil(g/lr),d=c>d?c+1:d+1,l>d&&(l=d,n.length=1),n.reverse();l--;)n.push(0);n.reverse()}for(d=h.length,l=f.length,d-l<0&&(l=d,n=f,f=h,h=n),r=0;l;)r=(h[--l]=h[l]+f[l]+r)/rn|0,h[l]%=rn;for(r&&(h.unshift(r),++a),d=h.length;h[--d]==0;)h.pop();return t.d=h,t.e=a,mr?Qt(t,g):t}function wa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Kl+e)}function ga(e){var t,r,n,a=e.length-1,l="",c=e[0];if(a>0){for(l+=c,t=1;t<a;t++)n=e[t]+"",r=lr-n.length,r&&(l+=Ki(r)),l+=n;c=e[t],n=c+"",r=lr-n.length,r&&(l+=Ki(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}var Za=(function(){function e(n,a){var l,c=0,d=n.length;for(n=n.slice();d--;)l=n[d]*a+c,n[d]=l%rn|0,c=l/rn|0;return c&&n.unshift(c),n}function t(n,a,l,c){var d,h;if(l!=c)h=l>c?1:-1;else for(d=h=0;d<l;d++)if(n[d]!=a[d]){h=n[d]>a[d]?1:-1;break}return h}function r(n,a,l){for(var c=0;l--;)n[l]-=c,c=n[l]<a[l]?1:0,n[l]=c*rn+n[l]-a[l];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,l,c){var d,h,f,m,g,x,b,j,w,_,N,C,E,A,S,T,D,P,I=n.constructor,$=n.s==a.s?1:-1,M=n.d,R=a.d;if(!n.s)return new I(n);if(!a.s)throw Error(Bs+"Division by zero");for(h=n.e-a.e,D=R.length,S=M.length,b=new I($),j=b.d=[],f=0;R[f]==(M[f]||0);)++f;if(R[f]>(M[f]||0)&&--h,l==null?C=l=I.precision:c?C=l+(qr(n)-qr(a))+1:C=l,C<0)return new I(0);if(C=C/lr+2|0,f=0,D==1)for(m=0,R=R[0],C++;(f<S||m)&&C--;f++)E=m*rn+(M[f]||0),j[f]=E/R|0,m=E%R|0;else{for(m=rn/(R[0]+1)|0,m>1&&(R=e(R,m),M=e(M,m),D=R.length,S=M.length),A=D,w=M.slice(0,D),_=w.length;_<D;)w[_++]=0;P=R.slice(),P.unshift(0),T=R[0],R[1]>=rn/2&&++T;do m=0,d=t(R,w,D,_),d<0?(N=w[0],D!=_&&(N=N*rn+(w[1]||0)),m=N/T|0,m>1?(m>=rn&&(m=rn-1),g=e(R,m),x=g.length,_=w.length,d=t(g,w,x,_),d==1&&(m--,r(g,D<x?P:R,x))):(m==0&&(d=m=1),g=R.slice()),x=g.length,x<_&&g.unshift(0),r(w,g,_),d==-1&&(_=w.length,d=t(R,w,D,_),d<1&&(m++,r(w,D<_?P:R,_))),_=w.length):d===0&&(m++,w=[0]),j[f++]=m,d&&w[0]?w[_++]=M[A]||0:(w=[M[A]],_=1);while((A++<S||w[0]!==void 0)&&C--)}return j[0]||j.shift(),b.e=h,Qt(b,c?l+qr(b)+1:l)}})();function kP(e,t){var r,n,a,l,c,d,h=0,f=0,m=e.constructor,g=m.precision;if(qr(e)>16)throw Error($1+qr(e));if(!e.s)return new m(fs);for(mr=!1,d=g,c=new m(.03125);e.abs().gte(.1);)e=e.times(c),f+=5;for(n=Math.log(Ml(2,f))/Math.LN10*2+5|0,d+=n,r=a=l=new m(fs),m.precision=d;;){if(a=Qt(a.times(e),d),r=r.times(++h),c=l.plus(Za(a,r,d)),ga(c.d).slice(0,d)===ga(l.d).slice(0,d)){for(;f--;)l=Qt(l.times(l),d);return m.precision=g,t==null?(mr=!0,Qt(l,g)):l}l=c}}function qr(e){for(var t=e.e*lr,r=e.d[0];r>=10;r/=10)t++;return t}function iv(e,t,r){if(t>e.LN10.sd())throw mr=!0,r&&(e.precision=r),Error(Bs+"LN10 precision limit exceeded");return Qt(new e(e.LN10),t)}function Ki(e){for(var t="";e--;)t+="0";return t}function wu(e,t){var r,n,a,l,c,d,h,f,m,g=1,x=10,b=e,j=b.d,w=b.constructor,_=w.precision;if(b.s<1)throw Error(Bs+(b.s?"NaN":"-Infinity"));if(b.eq(fs))return new w(0);if(t==null?(mr=!1,f=_):f=t,b.eq(10))return t==null&&(mr=!0),iv(w,f);if(f+=x,w.precision=f,r=ga(j),n=r.charAt(0),l=qr(b),Math.abs(l)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)b=b.times(e),r=ga(b.d),n=r.charAt(0),g++;l=qr(b),n>1?(b=new w("0."+r),l++):b=new w(n+"."+r.slice(1))}else return h=iv(w,f+2,_).times(l+""),b=wu(new w(n+"."+r.slice(1)),f-x).plus(h),w.precision=_,t==null?(mr=!0,Qt(b,_)):b;for(d=c=b=Za(b.minus(fs),b.plus(fs),f),m=Qt(b.times(b),f),a=3;;){if(c=Qt(c.times(m),f),h=d.plus(Za(c,new w(a),f)),ga(h.d).slice(0,f)===ga(d.d).slice(0,f))return d=d.times(2),l!==0&&(d=d.plus(iv(w,f+2,_).times(l+""))),d=Za(d,new w(g),f),w.precision=_,t==null?(mr=!0,Qt(d,_)):d;d=h,a+=2}}function z4(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Bc(r/lr),e.d=[],n=(r+1)%lr,r<0&&(n+=lr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=lr;n<a;)e.d.push(+t.slice(n,n+=lr));t=t.slice(n),n=lr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),mr&&(e.e>rm||e.e<-rm))throw Error($1+r)}else e.s=0,e.e=0,e.d=[0];return e}function Qt(e,t,r){var n,a,l,c,d,h,f,m,g=e.d;for(c=1,l=g[0];l>=10;l/=10)c++;if(n=t-c,n<0)n+=lr,a=t,f=g[m=0];else{if(m=Math.ceil((n+1)/lr),l=g.length,m>=l)return e;for(f=l=g[m],c=1;l>=10;l/=10)c++;n%=lr,a=n-lr+c}if(r!==void 0&&(l=Ml(10,c-a-1),d=f/l%10|0,h=t<0||g[m+1]!==void 0||f%l,h=r<4?(d||h)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||h||r==6&&(n>0?a>0?f/Ml(10,c-a):0:g[m-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return h?(l=qr(e),g.length=1,t=t-l-1,g[0]=Ml(10,(lr-t%lr)%lr),e.e=Bc(-t/lr)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=m,l=1,m--):(g.length=m+1,l=Ml(10,lr-n),g[m]=a>0?(f/Ml(10,c-a)%Ml(10,a)|0)*l:0),h)for(;;)if(m==0){(g[0]+=l)==rn&&(g[0]=1,++e.e);break}else{if(g[m]+=l,g[m]!=rn)break;g[m--]=0,l=1}for(n=g.length;g[--n]===0;)g.pop();if(mr&&(e.e>rm||e.e<-rm))throw Error($1+qr(e));return e}function NP(e,t){var r,n,a,l,c,d,h,f,m,g,x=e.constructor,b=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),mr?Qt(t,b):t;if(h=e.d,g=t.d,n=t.e,f=e.e,h=h.slice(),c=f-n,c){for(m=c<0,m?(r=h,c=-c,d=g.length):(r=g,n=f,d=h.length),a=Math.max(Math.ceil(b/lr),d)+2,c>a&&(c=a,r.length=1),r.reverse(),a=c;a--;)r.push(0);r.reverse()}else{for(a=h.length,d=g.length,m=a<d,m&&(d=a),a=0;a<d;a++)if(h[a]!=g[a]){m=h[a]<g[a];break}c=0}for(m&&(r=h,h=g,g=r,t.s=-t.s),d=h.length,a=g.length-d;a>0;--a)h[d++]=0;for(a=g.length;a>c;){if(h[--a]<g[a]){for(l=a;l&&h[--l]===0;)h[l]=rn-1;--h[l],h[a]+=rn}h[a]-=g[a]}for(;h[--d]===0;)h.pop();for(;h[0]===0;h.shift())--n;return h[0]?(t.d=h,t.e=n,mr?Qt(t,b):t):new x(0)}function Zl(e,t,r){var n,a=qr(e),l=ga(e.d),c=l.length;return t?(r&&(n=r-c)>0?l=l.charAt(0)+"."+l.slice(1)+Ki(n):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(a<0?"e":"e+")+a):a<0?(l="0."+Ki(-a-1)+l,r&&(n=r-c)>0&&(l+=Ki(n))):a>=c?(l+=Ki(a+1-c),r&&(n=r-a-1)>0&&(l=l+"."+Ki(n))):((n=a+1)<c&&(l=l.slice(0,n)+"."+l.slice(n)),r&&(n=r-c)>0&&(a+1===c&&(l+="."),l+=Ki(n))),e.s<0?"-"+l:l}function U4(e,t){if(e.length>t)return e.length=t,!0}function SP(e){var t,r,n;function a(l){var c=this;if(!(c instanceof a))return new a(l);if(c.constructor=a,l instanceof a){c.s=l.s,c.e=l.e,c.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(Kl+l);if(l>0)c.s=1;else if(l<0)l=-l,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(l===~~l&&l<1e7){c.e=0,c.d=[l];return}return z4(c,l.toString())}else if(typeof l!="string")throw Error(Kl+l);if(l.charCodeAt(0)===45?(l=l.slice(1),c.s=-1):c.s=1,KZ.test(l))z4(c,l);else throw Error(Kl+l)}if(a.prototype=$e,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=SP,a.config=a.set=YZ,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function YZ(e){if(!e||typeof e!="object")throw Error(Bs+"Object expected");var t,r,n,a=["precision",1,Uc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Bc(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Kl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kl+r+": "+n);return this}var L1=SP(GZ);fs=new L1(1);const Ft=L1;var XZ=e=>e,CP={},EP=e=>e===CP,B4=e=>function t(){return arguments.length===0||arguments.length===1&&EP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},AP=(e,t)=>e===1?t:B4(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var l=n.filter(c=>c!==CP).length;return l>=e?t(...n):AP(e-l,B4(function(){for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];var f=n.map(m=>EP(m)?d.shift():m);return t(...f,...d)}))}),JZ=e=>AP(e.length,e),By=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},QZ=JZ((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),ZZ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return XZ;var a=r.reverse(),l=a[0],c=a.slice(1);return function(){return c.reduce((d,h)=>h(d),l(...arguments))}};function TP(e){var t;return e===0?t=1:t=Math.floor(new Ft(e).abs().log(10).toNumber())+1,t}function OP(e,t,r){for(var n=new Ft(e),a=0,l=[];n.lt(t)&&a<1e5;)l.push(n.toNumber()),n=n.add(r),a++;return l}var PP=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},DP=(e,t,r)=>{if(e.lte(0))return new Ft(0);var n=TP(e.toNumber()),a=new Ft(10).pow(n),l=e.div(a),c=n!==1?.05:.1,d=new Ft(Math.ceil(l.div(c).toNumber())).add(r).mul(c),h=d.mul(a);return t?new Ft(h.toNumber()):new Ft(Math.ceil(h.toNumber()))},eee=(e,t,r)=>{var n=new Ft(1),a=new Ft(e);if(!a.isint()&&r){var l=Math.abs(e);l<1?(n=new Ft(10).pow(TP(e)-1),a=new Ft(Math.floor(a.div(n).toNumber())).mul(n)):l>1&&(a=new Ft(Math.floor(e)))}else e===0?a=new Ft(Math.floor((t-1)/2)):r||(a=new Ft(Math.floor(e)));var c=Math.floor((t-1)/2),d=ZZ(QZ(h=>a.add(new Ft(h-c).mul(n)).toNumber()),By);return d(0,t)},MP=function(t,r,n,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ft(0),tickMin:new Ft(0),tickMax:new Ft(0)};var c=DP(new Ft(r).sub(t).div(n-1),a,l),d;t<=0&&r>=0?d=new Ft(0):(d=new Ft(t).add(r).div(2),d=d.sub(new Ft(d).mod(c)));var h=Math.ceil(d.sub(t).div(c).toNumber()),f=Math.ceil(new Ft(r).sub(d).div(c).toNumber()),m=h+f+1;return m>n?MP(t,r,n,a,l+1):(m<n&&(f=r>0?f+(n-m):f,h=r>0?h:h+(n-m)),{step:c,tickMin:d.sub(new Ft(h).mul(c)),tickMax:d.add(new Ft(f).mul(c))})},tee=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(a,2),[d,h]=PP([r,n]);if(d===-1/0||h===1/0){var f=h===1/0?[d,...By(0,a-1).map(()=>1/0)]:[...By(0,a-1).map(()=>-1/0),h];return r>n?f.reverse():f}if(d===h)return eee(d,a,l);var{step:m,tickMin:g,tickMax:x}=MP(d,h,c,l,0),b=OP(g,x.add(new Ft(.1).mul(m)),m);return r>n?b.reverse():b},ree=function(t,r){var[n,a]=t,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,d]=PP([n,a]);if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var h=Math.max(r,2),f=DP(new Ft(d).sub(c).div(h-1),l,0),m=[...OP(new Ft(c),new Ft(d),f),d];return l===!1&&(m=m.map(g=>Math.round(g))),n>a?m.reverse():m},RP=e=>e.rootProps.maxBarSize,nee=e=>e.rootProps.barGap,IP=e=>e.rootProps.barCategoryGap,see=e=>e.rootProps.barSize,ap=e=>e.rootProps.stackOffset,$P=e=>e.rootProps.reverseStackOrder,z1=e=>e.options.chartName,U1=e=>e.rootProps.syncId,LP=e=>e.rootProps.syncMethod,B1=e=>e.options.eventEmitter,Dn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ka={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ds={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ip=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},aee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ka.angleAxisId,includeHidden:!1,name:void 0,reversed:Ka.reversed,scale:Ka.scale,tick:Ka.tick,tickCount:void 0,ticks:void 0,type:Ka.type,unit:void 0},iee={allowDataOverflow:ds.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ds.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ds.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ds.scale,tick:ds.tick,tickCount:ds.tickCount,ticks:void 0,type:ds.type,unit:void 0},lee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ka.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ka.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ka.scale,tick:Ka.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},oee={allowDataOverflow:ds.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ds.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ds.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ds.scale,tick:ds.tick,tickCount:ds.tickCount,ticks:void 0,type:"category",unit:void 0},q1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?lee:aee,F1=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?oee:iee,lp=e=>e.polarOptions,H1=le([mi,pi,an],rJ),zP=le([lp,H1],(e,t)=>{if(e!=null)return aa(e.innerRadius,t,0)}),UP=le([lp,H1],(e,t)=>{if(e!=null)return aa(e.outerRadius,t,t*.8)}),cee=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},BP=le([lp],cee);le([q1,BP],ip);var qP=le([H1,zP,UP],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});le([F1,qP],ip);var FP=le([Vt,lp,zP,UP,mi,pi],(e,t,r,n,a,l)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:d,startAngle:h,endAngle:f}=t;return{cx:aa(c,a,a/2),cy:aa(d,l,l/2),innerRadius:r,outerRadius:n,startAngle:h,endAngle:f,clockWise:!1}}}),Yr=(e,t)=>t,op=(e,t,r)=>r;function V1(e){return e==null?void 0:e.id}function HP(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:l}=r,c=new Map;return e.forEach(d=>{var h,f=(h=d.data)!==null&&h!==void 0?h:n;if(!(f==null||f.length===0)){var m=V1(d);f.forEach((g,x)=>{var b=l==null||a?x:String(yn(g,l,null)),j=yn(g,d.dataKey,0),w;c.has(b)?w=c.get(b):w={},Object.assign(w,{[m]:j}),c.set(b,w)})}}),Array.from(c.values())}function cp(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var dp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function up(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function dee(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Xr=e=>{var t=Vt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},qc=e=>e.tooltip.settings.axisId;function q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(r),!0).forEach(function(n){uee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uee(e,t,r){return(t=hee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hee(e){var t=fee(e,"string");return typeof t=="symbol"?t:t+""}function fee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qy=[0,"auto"],en={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},VP=(e,t)=>e.cartesianAxis.xAxis[t],bi=(e,t)=>{var r=VP(e,t);return r??en},tn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:qy,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Lu},WP=(e,t)=>e.cartesianAxis.yAxis[t],vi=(e,t)=>{var r=WP(e,t);return r??tn},mee={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},W1=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??mee},$n=(e,t,r)=>{switch(t){case"xAxis":return bi(e,r);case"yAxis":return vi(e,r);case"zAxis":return W1(e,r);case"angleAxis":return q1(e,r);case"radiusAxis":return F1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},pee=(e,t,r)=>{switch(t){case"xAxis":return bi(e,r);case"yAxis":return vi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Vu=(e,t,r)=>{switch(t){case"xAxis":return bi(e,r);case"yAxis":return vi(e,r);case"angleAxis":return q1(e,r);case"radiusAxis":return F1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},GP=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function KP(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var G1=e=>e.graphicalItems.cartesianItems,gee=le([Yr,op],KP),YP=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Wu=le([G1,$n,gee],YP,{memoizeOptions:{resultEqualityCheck:up}}),XP=le([Wu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(cp)),JP=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),xee=le([Wu],JP),QP=e=>e.map(t=>t.data).filter(Boolean).flat(1),bee=le([Wu],QP,{memoizeOptions:{resultEqualityCheck:up}}),ZP=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},K1=le([bee,yP],ZP),eD=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:yn(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:yn(a,n)}))):e.map(n=>({value:n})),hp=le([K1,$n,Wu],eD);function tD(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function n0(e){if(va(e)||e instanceof Date){var t=Number(e);if(br(t))return t}}function F4(e){if(Array.isArray(e)){var t=[n0(e[0]),n0(e[1])];return nl(t)?t:void 0}var r=n0(e);if(r!=null)return[r,r]}function hi(e){return e.map(n0).filter(CW)}function vee(e,t,r){return!r||typeof t!="number"||sa(t)?[]:r.length?hi(r.flatMap(n=>{var a=yn(e,n.dataKey),l,c;if(Array.isArray(a)?[l,c]=a:l=c=a,!(!br(l)||!br(c)))return[t-l,t+c]})):[]}var Jr=e=>{var t=Xr(e),r=qc(e);return Vu(e,t,r)},Gu=le([Jr],e=>e==null?void 0:e.dataKey),yee=le([XP,yP,Jr],HP),rD=(e,t,r,n)=>{var a={},l=t.reduce((c,d)=>{if(d.stackId==null)return c;var h=c[d.stackId];return h==null&&(h=[]),h.push(d),c[d.stackId]=h,c},a);return Object.fromEntries(Object.entries(l).map(c=>{var[d,h]=c,f=n?[...h].reverse():h,m=f.map(V1);return[d,{stackedData:GK(e,m,r),graphicalItems:f}]}))},Fy=le([yee,XP,ap,$P],rD),nD=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:l}=t;if(n==null&&r!=="zAxis"){var c=QK(e,a,l);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},wee=le([$n],e=>e.allowDataOverflow),Y1=e=>{var t;if(e==null||!("domain"in e))return qy;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=hi(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:qy},sD=le([$n],Y1),aD=le([sD,wee],wP),jee=le([Fy,xi,Yr,aD],nD,{memoizeOptions:{resultEqualityCheck:dp}}),X1=e=>e.errorBars,_ee=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>tD(r,n)),sm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var l=a.flat(),c=Math.min(...l),d=Math.max(...l);return[c,d]}},iD=(e,t,r,n,a)=>{var l,c;if(r.length>0&&e.forEach(d=>{r.forEach(h=>{var f,m,g=(f=n[h.id])===null||f===void 0?void 0:f.filter(N=>tD(a,N)),x=yn(d,(m=t.dataKey)!==null&&m!==void 0?m:h.dataKey),b=vee(d,x,g);if(b.length>=2){var j=Math.min(...b),w=Math.max(...b);(l==null||j<l)&&(l=j),(c==null||w>c)&&(c=w)}var _=F4(x);_!=null&&(l=l==null?_[0]:Math.min(l,_[0]),c=c==null?_[1]:Math.max(c,_[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(d=>{var h=F4(yn(d,t.dataKey));h!=null&&(l=l==null?h[0]:Math.min(l,h[0]),c=c==null?h[1]:Math.max(c,h[1]))}),br(l)&&br(c))return[l,c]},kee=le([K1,$n,xee,X1,Yr],iD,{memoizeOptions:{resultEqualityCheck:dp}});function Nee(e){var{value:t}=e;if(va(t)||t instanceof Date)return t}var See=(e,t,r)=>{var n=e.map(Nee).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&gO(n))?L6(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},lD=e=>e.referenceElements.dots,Fc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Cee=le([lD,Yr,op],Fc),oD=e=>e.referenceElements.areas,Eee=le([oD,Yr,op],Fc),cD=e=>e.referenceElements.lines,Aee=le([cD,Yr,op],Fc),dD=(e,t)=>{if(e!=null){var r=hi(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Tee=le(Cee,Yr,dD),uD=(e,t)=>{if(e!=null){var r=hi(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Oee=le([Eee,Yr],uD);function Pee(e){var t;if(e.x!=null)return hi([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:hi(r)}function Dee(e){var t;if(e.y!=null)return hi([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:hi(r)}var hD=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?Pee(n):Dee(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Mee=le([Aee,Yr],hD),Ree=le(Tee,Mee,Oee,(e,t,r)=>sm(e,r,t)),fD=(e,t,r,n,a,l,c,d)=>{if(r!=null)return r;var h=c==="vertical"&&d==="xAxis"||c==="horizontal"&&d==="yAxis",f=h?sm(n,l,a):sm(l,a);return WZ(t,f,e.allowDataOverflow)},Iee=le([$n,sD,aD,jee,kee,Ree,Vt,Yr],fD,{memoizeOptions:{resultEqualityCheck:dp}}),$ee=[0,1],mD=(e,t,r,n,a,l,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:d,type:h}=e,f=no(t,l);if(f&&d==null){var m;return L6(0,(m=r==null?void 0:r.length)!==null&&m!==void 0?m:0)}return h==="category"?See(n,e,f):a==="expand"?$ee:c}},J1=le([$n,Vt,K1,hp,ap,Yr,Iee],mD),pD=(e,t,r,n,a)=>{if(e!=null){var{scale:l,type:c}=e;if(l==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof l=="string"){var d="scale".concat(Du(l));return d in Jd?d:"point"}}},Ku=le([$n,Vt,GP,z1,Yr],pD);function Lee(e){if(e!=null){if(e in Jd)return Jd[e]();var t="scale".concat(Du(e));if(t in Jd)return Jd[t]()}}function Q1(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=Lee(t);if(a!=null){var l=a.domain(r).range(n);return qK(l),l}}}var gD=(e,t,r)=>{var n=Y1(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&nl(e))return tee(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&nl(e))return ree(e,t.tickCount,t.allowDecimals)}},Z1=le([J1,Vu,Ku],gD),xD=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&nl(t)&&Array.isArray(r)&&r.length>0){var a=t[0],l=r[0],c=t[1],d=r[r.length-1];return[Math.min(a,l),Math.max(c,d)]}return t},zee=le([$n,J1,Z1,Yr],xD),Uee=le(hp,$n,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(hi(e.map(g=>g.value))).sort((g,x)=>g-x),a=n[0],l=n[n.length-1];if(a==null||l==null)return 1/0;var c=l-a;if(c===0)return 1/0;for(var d=0;d<n.length-1;d++){var h=n[d],f=n[d+1];if(!(h==null||f==null)){var m=f-h;r=Math.min(r,m)}}return r/c}}),bD=le(Uee,Vt,IP,an,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!br(e))return 0;var l=t==="vertical"?n.height:n.width;if(a==="gap")return e*l/2;if(a==="no-gap"){var c=aa(r,e*l),d=e*l/2;return d-c-(d-c)/l*c}return 0}),Bee=(e,t,r)=>{var n=bi(e,t);return n==null||typeof n.padding!="string"?0:bD(e,"xAxis",t,r,n.padding)},qee=(e,t,r)=>{var n=vi(e,t);return n==null||typeof n.padding!="string"?0:bD(e,"yAxis",t,r,n.padding)},Fee=le(bi,Bee,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),Hee=le(vi,qee,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),Vee=le([an,Fee,Wm,Vm,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:l}=n;return a?[l.left,r.width-l.right]:[e.left+t.left,e.left+e.width-t.right]}),Wee=le([an,Vt,Hee,Wm,Vm,(e,t,r)=>r],(e,t,r,n,a,l)=>{var{padding:c}=a;return l?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Yu=(e,t,r,n)=>{var a;switch(t){case"xAxis":return Vee(e,r,n);case"yAxis":return Wee(e,r,n);case"zAxis":return(a=W1(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return BP(e);case"radiusAxis":return qP(e,r);default:return}},vD=le([$n,Yu],ip),fp=le([$n,Ku,zee,vD],Q1);le([Wu,X1,Yr],_ee);function yD(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var mp=(e,t)=>t,pp=(e,t,r)=>r,Gee=le(Fm,mp,pp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(yD)),Kee=le(Hm,mp,pp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(yD)),wD=(e,t)=>({width:e.width,height:t.height}),Yee=(e,t)=>{var r=typeof t.width=="number"?t.width:Lu;return{width:r,height:e.height}},jD=le(an,bi,wD),Xee=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Jee=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Qee=le(pi,an,Gee,mp,pp,(e,t,r,n,a)=>{var l={},c;return r.forEach(d=>{var h=wD(t,d);c==null&&(c=Xee(t,n,e));var f=n==="top"&&!a||n==="bottom"&&a;l[d.id]=c-Number(f)*h.height,c+=(f?-1:1)*h.height}),l}),Zee=le(mi,an,Kee,mp,pp,(e,t,r,n,a)=>{var l={},c;return r.forEach(d=>{var h=Yee(t,d);c==null&&(c=Jee(t,n,e));var f=n==="left"&&!a||n==="right"&&a;l[d.id]=c-Number(f)*h.width,c+=(f?-1:1)*h.width}),l}),ete=(e,t)=>{var r=bi(e,t);if(r!=null)return Qee(e,r.orientation,r.mirror)},tte=le([an,bi,ete,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),rte=(e,t)=>{var r=vi(e,t);if(r!=null)return Zee(e,r.orientation,r.mirror)},nte=le([an,vi,rte,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),_D=le(an,vi,(e,t)=>{var r=typeof t.width=="number"?t.width:Lu;return{width:r,height:e.height}}),H4=(e,t,r)=>{switch(t){case"xAxis":return jD(e,r).width;case"yAxis":return _D(e,r).height;default:return}},kD=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:l,dataKey:c}=r,d=no(e,n),h=t.map(f=>f.value);if(c&&d&&l==="category"&&a&&gO(h))return h}},ej=le([Vt,hp,$n,Yr],kD),ND=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:l}=r,c=no(e,n);if(c&&(a==="number"||l!=="auto"))return t.map(d=>d.value)}},tj=le([Vt,hp,Vu,Yr],ND),V4=le([Vt,pee,Ku,fp,ej,tj,Yu,Z1,Yr],(e,t,r,n,a,l,c,d,h)=>{if(t!=null){var f=no(e,h);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:h,categoricalDomain:l,duplicateDomain:a,isCategorical:f,niceTicks:d,range:c,realScaleType:r,scale:n}}}),ste=(e,t,r,n,a,l,c,d,h)=>{if(!(t==null||n==null)){var f=no(e,h),{type:m,ticks:g,tickCount:x}=t,b=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=m==="category"&&n.bandwidth?n.bandwidth()/b:0;j=h==="angleAxis"&&l!=null&&l.length>=2?Kn(l[0]-l[1])*2*j:j;var w=g||a;if(w){var _=w.map((N,C)=>{var E=c?c.indexOf(N):N;return{index:C,coordinate:n(E)+j,value:N,offset:j}});return _.filter(N=>br(N.coordinate))}return f&&d?d.map((N,C)=>({coordinate:n(N)+j,value:N,index:C,offset:j})).filter(N=>br(N.coordinate)):n.ticks?n.ticks(x).map(N=>({coordinate:n(N)+j,value:N,offset:j})):n.domain().map((N,C)=>({coordinate:n(N)+j,value:c?c[N]:N,index:C,offset:j}))}},SD=le([Vt,Vu,Ku,fp,Z1,Yu,ej,tj,Yr],ste),ate=(e,t,r,n,a,l,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var d=no(e,c),{tickCount:h}=t,f=0;return f=c==="angleAxis"&&(n==null?void 0:n.length)>=2?Kn(n[0]-n[1])*2*f:f,d&&l?l.map((m,g)=>({coordinate:r(m)+f,value:m,index:g,offset:f})):r.ticks?r.ticks(h).map(m=>({coordinate:r(m)+f,value:m,offset:f})):r.domain().map((m,g)=>({coordinate:r(m)+f,value:a?a[m]:m,index:g,offset:f}))}},Ec=le([Vt,Vu,fp,Yu,ej,tj,Yr],ate),Ac=le($n,fp,(e,t)=>{if(!(e==null||t==null))return nm(nm({},e),{},{scale:t})}),ite=le([$n,Ku,J1,vD],Q1);le((e,t,r)=>W1(e,r),ite,(e,t)=>{if(!(e==null||t==null))return nm(nm({},e),{},{scale:t})});var lte=le([Vt,Fm,Hm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),CD=e=>e.options.defaultTooltipEventType,ED=e=>e.options.validateTooltipEventTypes;function AD(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function rj(e,t){var r=CD(e),n=ED(e);return AD(t,r,n)}function ote(e){return Ke(t=>rj(t,e))}var TD=(e,t)=>{var r,n=Number(t);if(!(sa(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},cte=e=>e.tooltip.settings,Qi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},dte={itemInteraction:{click:Qi,hover:Qi},axisInteraction:{click:Qi,hover:Qi},keyboardInteraction:Qi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},OD=Jn({name:"tooltip",initialState:dte,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:hr()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ea(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:hr()},removeTooltipEntrySettings:{reducer(e,t){var r=ea(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:hr()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:ute,replaceTooltipEntrySettings:hte,removeTooltipEntrySettings:fte,setTooltipSettingsState:mte,setActiveMouseOverItemIndex:PD,mouseLeaveItem:pte,mouseLeaveChart:DD,setActiveClickItemIndex:gte,setMouseOverAxisIndex:MD,setMouseClickAxisIndex:xte,setSyncInteraction:Hy,setKeyboardInteraction:Vy}=OD.actions,bte=OD.reducer;function W4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W4(Object(r),!0).forEach(function(n){vte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vte(e,t,r){return(t=yte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yte(e){var t=wte(e,"string");return typeof t=="symbol"?t:t+""}function wte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jte(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function _te(e){return e.index!=null}var RD=(e,t,r,n)=>{if(t==null)return Qi;var a=jte(e,t,r);if(a==null)return Qi;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var l=e.settings.active===!0;if(_te(a)){if(l)return Bf(Bf({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Bf(Bf({},Qi),{},{coordinate:a.coordinate})};function kte(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function Nte(e,t){var r=kte(e),n=t[0],a=t[1];if(r===void 0)return!1;var l=Math.min(n,a),c=Math.max(n,a);return r>=l&&r<=c}function Ste(e,t,r){if(r==null||t==null)return!0;var n=yn(e,t);return n==null||!nl(r)?!0:Nte(n,r)}var nj=(e,t,r,n)=>{var a=e==null?void 0:e.index;if(a==null)return null;var l=Number(a);if(!br(l))return a;var c=0,d=1/0;t.length>0&&(d=t.length-1);var h=Math.max(c,Math.min(l,d)),f=t[h];return f==null||Ste(f,r,n)?String(h):null},ID=(e,t,r,n,a,l,c,d)=>{if(!(l==null||d==null)){var h=c[0],f=h==null?void 0:d(h.positions,l);if(f!=null)return f;var m=a==null?void 0:a[Number(l)];if(m)switch(r){case"horizontal":return{x:m.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:m.coordinate}}}},$D=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&n!=null){var l=e.tooltipItemPayloads[0];return l!=null?[l]:[]}return e.tooltipItemPayloads.filter(c=>{var d;return((d=c.settings)===null||d===void 0?void 0:d.graphicalItemId)===a})},Xu=e=>e.options.tooltipPayloadSearcher,Hc=e=>e.tooltip;function G4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G4(Object(r),!0).forEach(function(n){Cte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cte(e,t,r){return(t=Ete(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ete(e){var t=Ate(e,"string");return typeof t=="symbol"?t:t+""}function Ate(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tte(e,t){return e??t}var LD=(e,t,r,n,a,l,c)=>{if(!(t==null||l==null)){var{chartData:d,computedData:h,dataStartIndex:f,dataEndIndex:m}=r,g=[];return e.reduce((x,b)=>{var j,{dataDefinedOnItem:w,settings:_}=b,N=Tte(w,d),C=Array.isArray(N)?o6(N,f,m):N,E=(j=_==null?void 0:_.dataKey)!==null&&j!==void 0?j:n,A=_==null?void 0:_.nameKey,S;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&c==="axis"?S=SW(C,n,a):S=l(C,t,h,A),Array.isArray(S))S.forEach(D=>{var P=K4(K4({},_),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});x.push(Z5({tooltipEntrySettings:P,dataKey:D.dataKey,payload:D.payload,value:yn(D.payload,D.dataKey),name:D.name}))});else{var T;x.push(Z5({tooltipEntrySettings:_,dataKey:E,payload:S,value:yn(S,E),name:(T=yn(S,A))!==null&&T!==void 0?T:_==null?void 0:_.name}))}return x},g)}},sj=le([Jr,Vt,GP,z1,Xr],pD),Ote=le([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Pte=le([Xr,qc],KP),Vc=le([Ote,Jr,Pte],YP,{memoizeOptions:{resultEqualityCheck:up}}),Dte=le([Vc],e=>e.filter(cp)),Mte=le([Vc],QP,{memoizeOptions:{resultEqualityCheck:up}}),Wc=le([Mte,xi],ZP),Rte=le([Dte,xi,Jr],HP),aj=le([Wc,Jr,Vc],eD),zD=le([Jr],Y1),Ite=le([Jr],e=>e.allowDataOverflow),UD=le([zD,Ite],wP),$te=le([Vc],e=>e.filter(cp)),Lte=le([Rte,$te,ap,$P],rD),zte=le([Lte,xi,Xr,UD],nD),Ute=le([Vc],JP),Bte=le([Wc,Jr,Ute,X1,Xr],iD,{memoizeOptions:{resultEqualityCheck:dp}}),qte=le([lD,Xr,qc],Fc),Fte=le([qte,Xr],dD),Hte=le([oD,Xr,qc],Fc),Vte=le([Hte,Xr],uD),Wte=le([cD,Xr,qc],Fc),Gte=le([Wte,Xr],hD),Kte=le([Fte,Gte,Vte],sm),Yte=le([Jr,zD,UD,zte,Bte,Kte,Vt,Xr],fD),Ju=le([Jr,Vt,Wc,aj,ap,Xr,Yte],mD),Xte=le([Ju,Jr,sj],gD),Jte=le([Jr,Ju,Xte,Xr],xD),BD=e=>{var t=Xr(e),r=qc(e),n=!1;return Yu(e,t,r,n)},qD=le([Jr,BD],ip),FD=le([Jr,sj,Jte,qD],Q1),Qte=le([Vt,aj,Jr,Xr],kD),Zte=le([Vt,aj,Jr,Xr],ND),ere=(e,t,r,n,a,l,c,d)=>{if(t){var{type:h}=t,f=no(e,d);if(n){var m=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=h==="category"&&n.bandwidth?n.bandwidth()/m:0;return g=d==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Kn(a[0]-a[1])*2*g:g,f&&c?c.map((x,b)=>({coordinate:n(x)+g,value:x,index:b,offset:g})):n.domain().map((x,b)=>({coordinate:n(x)+g,value:l?l[x]:x,index:b,offset:g}))}}},yi=le([Vt,Jr,sj,FD,BD,Qte,Zte,Xr],ere),ij=le([CD,ED,cte],(e,t,r)=>AD(r.shared,e,t)),HD=e=>e.tooltip.settings.trigger,lj=e=>e.tooltip.settings.defaultIndex,Qu=le([Hc,ij,HD,lj],RD),Tc=le([Qu,Wc,Gu,Ju],nj),VD=le([yi,Tc],TD),WD=le([Qu],e=>{if(e)return e.dataKey});le([Qu],e=>{if(e)return e.graphicalItemId});var GD=le([Hc,ij,HD,lj],$D),tre=le([mi,pi,Vt,an,yi,lj,GD,Xu],ID),rre=le([Qu,tre],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),nre=le([Qu],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),sre=le([GD,Tc,xi,Gu,VD,Xu,ij],LD);le([sre],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Y4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function X4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y4(Object(r),!0).forEach(function(n){are(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function are(e,t,r){return(t=ire(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ire(e){var t=lre(e,"string");return typeof t=="symbol"?t:t+""}function lre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ore=()=>Ke(Jr),cre=()=>{var e=ore(),t=Ke(yi),r=Ke(FD);return $0(!e||!r?void 0:X4(X4({},e),{},{scale:r}),t)};function J4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J4(Object(r),!0).forEach(function(n){dre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dre(e,t,r){return(t=ure(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ure(e){var t=hre(e,"string");return typeof t=="symbol"?t:t+""}function hre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fre=(e,t,r,n)=>{var a=t.find(l=>l&&l.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},mre=(e,t,r,n)=>{var a=t.find(f=>f&&f.index===r);if(a){if(e==="centric"){var l=a.coordinate,{radius:c}=n;return Xo(Xo(Xo({},n),bn(n.cx,n.cy,c,l)),{},{angle:l,radius:c})}var d=a.coordinate,{angle:h}=n;return Xo(Xo(Xo({},n),bn(n.cx,n.cy,d,h)),{},{angle:h,radius:d})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function pre(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var KD=(e,t,r,n,a)=>{var l,c=(l=t==null?void 0:t.length)!==null&&l!==void 0?l:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<c;d++){var h,f,m,g,x,b=d>0?(h=r[d-1])===null||h===void 0?void 0:h.coordinate:(f=r[c-1])===null||f===void 0?void 0:f.coordinate,j=(m=r[d])===null||m===void 0?void 0:m.coordinate,w=d>=c-1?(g=r[0])===null||g===void 0?void 0:g.coordinate:(x=r[d+1])===null||x===void 0?void 0:x.coordinate,_=void 0;if(!(b==null||j==null||w==null))if(Kn(j-b)!==Kn(w-j)){var N=[];if(Kn(w-j)===Kn(a[1]-a[0])){_=w;var C=j+a[1]-a[0];N[0]=Math.min(C,(C+b)/2),N[1]=Math.max(C,(C+b)/2)}else{_=b;var E=w+a[1]-a[0];N[0]=Math.min(j,(E+j)/2),N[1]=Math.max(j,(E+j)/2)}var A=[Math.min(j,(_+j)/2),Math.max(j,(_+j)/2)];if(e>A[0]&&e<=A[1]||e>=N[0]&&e<=N[1]){var S;return(S=r[d])===null||S===void 0?void 0:S.index}}else{var T=Math.min(b,w),D=Math.max(b,w);if(e>(T+j)/2&&e<=(D+j)/2){var P;return(P=r[d])===null||P===void 0?void 0:P.index}}}else if(t)for(var I=0;I<c;I++){var $=t[I];if($!=null){var M=t[I+1],R=t[I-1];if(I===0&&M!=null&&e<=($.coordinate+M.coordinate)/2||I===c-1&&R!=null&&e>($.coordinate+R.coordinate)/2||I>0&&I<c-1&&R!=null&&M!=null&&e>($.coordinate+R.coordinate)/2&&e<=($.coordinate+M.coordinate)/2)return $.index}}return-1},gre=()=>Ke(z1),oj=(e,t)=>t,YD=(e,t,r)=>r,cj=(e,t,r,n)=>n,xre=le(yi,e=>Mm(e,t=>t.coordinate)),dj=le([Hc,oj,YD,cj],RD),uj=le([dj,Wc,Gu,Ju],nj),bre=(e,t,r)=>{if(t!=null){var n=Hc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},XD=le([Hc,oj,YD,cj],$D),am=le([mi,pi,Vt,an,yi,cj,XD,Xu],ID),vre=le([dj,am],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),JD=le([yi,uj],TD),yre=le([XD,uj,xi,Gu,JD,Xu,oj],LD),wre=le([dj,uj],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),jre=(e,t,r,n,a,l,c)=>{if(!(!e||!r||!n||!a)&&pre(e,c)){var d=ZK(e,t),h=KD(d,l,a,r,n),f=fre(t,a,h,e);return{activeIndex:String(h),activeCoordinate:f}}},_re=(e,t,r,n,a,l,c)=>{if(!(!e||!n||!a||!l||!r)){var d=lJ(e,r);if(d){var h=eY(d,t),f=KD(h,c,l,n,a),m=mre(t,l,f,d);return{activeIndex:String(f),activeCoordinate:m}}}},kre=(e,t,r,n,a,l,c,d)=>{if(!(!e||!t||!n||!a||!l))return t==="horizontal"||t==="vertical"?jre(e,t,n,a,l,c,d):_re(e,t,r,n,a,l,c)},Nre=le(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),Sre=le(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Dn)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:dee}});function Q4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q4(Object(r),!0).forEach(function(n){Cre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cre(e,t,r){return(t=Ere(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ere(e){var t=Are(e,"string");return typeof t=="symbol"?t:t+""}function Are(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tre={},Ore={zIndexMap:Object.values(Dn).reduce((e,t)=>Z4(Z4({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Tre)},Pre=new Set(Object.values(Dn));function Dre(e){return Pre.has(e)}var QD=Jn({name:"zIndex",initialState:Ore,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:hr()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!Dre(r)&&delete e.zIndexMap[r])},prepare:hr()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:hr()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:hr()}}}),{registerZIndexPortal:Mre,unregisterZIndexPortal:Rre,registerZIndexPortalElement:Ire,unregisterZIndexPortalElement:$re}=QD.actions,Lre=QD.reducer;function wi(e){var{zIndex:t,children:r}=e,n=PY(),a=n&&t!==void 0&&t!==0,l=Qn(),c=Tr();v.useLayoutEffect(()=>a?(c(Mre({zIndex:t})),()=>{c(Rre({zIndex:t}))}):Mu,[c,t,a]);var d=Ke(h=>Nre(h,t,l));return a?d?Cm.createPortal(r,d):null:r}function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(null,arguments)}function eE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(r),!0).forEach(function(n){zre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zre(e,t,r){return(t=Ure(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ure(e){var t=Bre(e,"string");return typeof t=="symbol"?t:t+""}function Bre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qre(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function Fre(e){var t,{coordinate:r,payload:n,index:a,offset:l,tooltipAxisBandSize:c,layout:d,cursor:h,tooltipEventType:f,chartName:m}=e,g=r,x=n,b=a;if(!h||!g||m!=="ScatterChart"&&f!=="axis")return null;var j,w,_;if(m==="ScatterChart")j=g,w=yX,_=Dn.cursorLine;else if(m==="BarChart")j=wX(d,g,l,c),w=M6,_=Dn.cursorRectangle;else if(d==="radial"&&vO(g)){var{cx:N,cy:C,radius:E,startAngle:A,endAngle:S}=R6(g);j={cx:N,cy:C,startAngle:A,endAngle:S,innerRadius:E,outerRadius:E},w=$6,_=Dn.cursorLine}else j={points:uJ(d,g,l)},w=A6,_=Dn.cursorLine;var T=typeof h=="object"&&"className"in h?h.className:void 0,D=qf(qf(qf(qf({stroke:"#ccc",pointerEvents:"none"},l),j),Hw(h)),{},{payload:x,payloadIndex:b,className:or("recharts-tooltip-cursor",T)});return v.createElement(wi,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:_},v.createElement(qre,{cursor:h,cursorComp:w,cursorProps:D}))}function Hre(e){var t=cre(),r=b6(),n=zu(),a=gre();return t==null||r==null||n==null||a==null?null:v.createElement(Fre,Wy({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var ZD=v.createContext(null),Vre=()=>v.useContext(ZD),lv={exports:{}},tE;function Wre(){return tE||(tE=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(h,f,m){this.fn=h,this.context=f,this.once=m||!1}function l(h,f,m,g,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new a(m,g||h,x),j=r?r+f:f;return h._events[j]?h._events[j].fn?h._events[j]=[h._events[j],b]:h._events[j].push(b):(h._events[j]=b,h._eventsCount++),h}function c(h,f){--h._eventsCount===0?h._events=new n:delete h._events[f]}function d(){this._events=new n,this._eventsCount=0}d.prototype.eventNames=function(){var f=[],m,g;if(this._eventsCount===0)return f;for(g in m=this._events)t.call(m,g)&&f.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},d.prototype.listeners=function(f){var m=r?r+f:f,g=this._events[m];if(!g)return[];if(g.fn)return[g.fn];for(var x=0,b=g.length,j=new Array(b);x<b;x++)j[x]=g[x].fn;return j},d.prototype.listenerCount=function(f){var m=r?r+f:f,g=this._events[m];return g?g.fn?1:g.length:0},d.prototype.emit=function(f,m,g,x,b,j){var w=r?r+f:f;if(!this._events[w])return!1;var _=this._events[w],N=arguments.length,C,E;if(_.fn){switch(_.once&&this.removeListener(f,_.fn,void 0,!0),N){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,m),!0;case 3:return _.fn.call(_.context,m,g),!0;case 4:return _.fn.call(_.context,m,g,x),!0;case 5:return _.fn.call(_.context,m,g,x,b),!0;case 6:return _.fn.call(_.context,m,g,x,b,j),!0}for(E=1,C=new Array(N-1);E<N;E++)C[E-1]=arguments[E];_.fn.apply(_.context,C)}else{var A=_.length,S;for(E=0;E<A;E++)switch(_[E].once&&this.removeListener(f,_[E].fn,void 0,!0),N){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,m);break;case 3:_[E].fn.call(_[E].context,m,g);break;case 4:_[E].fn.call(_[E].context,m,g,x);break;default:if(!C)for(S=1,C=new Array(N-1);S<N;S++)C[S-1]=arguments[S];_[E].fn.apply(_[E].context,C)}}return!0},d.prototype.on=function(f,m,g){return l(this,f,m,g,!1)},d.prototype.once=function(f,m,g){return l(this,f,m,g,!0)},d.prototype.removeListener=function(f,m,g,x){var b=r?r+f:f;if(!this._events[b])return this;if(!m)return c(this,b),this;var j=this._events[b];if(j.fn)j.fn===m&&(!x||j.once)&&(!g||j.context===g)&&c(this,b);else{for(var w=0,_=[],N=j.length;w<N;w++)(j[w].fn!==m||x&&!j[w].once||g&&j[w].context!==g)&&_.push(j[w]);_.length?this._events[b]=_.length===1?_[0]:_:c(this,b)}return this},d.prototype.removeAllListeners=function(f){var m;return f?(m=r?r+f:f,this._events[m]&&c(this,m)):(this._events=new n,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d})(lv)),lv.exports}var Gre=Wre();const Kre=ys(Gre);var ju=new Kre,Gy="recharts.syncEvent.tooltip",rE="recharts.syncEvent.brush";function Yre(e,t){if(t){var r=Number.parseInt(t,10);if(!sa(r))return e==null?void 0:e[r]}}var Xre={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},eM=Jn({name:"options",initialState:Xre,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Jre=eM.reducer,{createEventEmitter:Qre}=eM.actions;function Zre(e){return e.tooltip.syncInteraction}var ene={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},tM=Jn({name:"chartData",initialState:ene,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:nE,setDataStartEndIndexes:tne,setComputedData:zde}=tM.actions,rne=tM.reducer,nne=["x","y"];function sE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(r),!0).forEach(function(n){sne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sne(e,t,r){return(t=ane(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ane(e){var t=ine(e,"string");return typeof t=="symbol"?t:t+""}function ine(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lne(e,t){if(e==null)return{};var r,n,a=one(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function one(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cne(){var e=Ke(U1),t=Ke(B1),r=Tr(),n=Ke(LP),a=Ke(yi),l=zu(),c=Gm(),d=Ke(h=>h.rootProps.className);v.useEffect(()=>{if(e==null)return Mu;var h=(f,m,g)=>{if(t!==g&&e===f){if(n==="index"){var x;if(c&&m!==null&&m!==void 0&&(x=m.payload)!==null&&x!==void 0&&x.coordinate&&m.payload.sourceViewBox){var b=m.payload.coordinate,{x:j,y:w}=b,_=lne(b,nne),{x:N,y:C,width:E,height:A}=m.payload.sourceViewBox,S=Jo(Jo({},_),{},{x:c.x+(E?(j-N)/E:0)*c.width,y:c.y+(A?(w-C)/A:0)*c.height});r(Jo(Jo({},m),{},{payload:Jo(Jo({},m.payload),{},{coordinate:S})}))}else r(m);return}if(a!=null){var T;if(typeof n=="function"){var D={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},P=n(a,D);T=a[P]}else n==="value"&&(T=a.find(L=>String(L.value)===m.payload.label));var{coordinate:I}=m.payload;if(T==null||m.payload.active===!1||I==null||c==null){r(Hy({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:$,y:M}=I,R=Math.min($,c.x+c.width),q=Math.min(M,c.y+c.height),H={x:l==="horizontal"?T.coordinate:R,y:l==="horizontal"?q:T.coordinate},W=Hy({active:m.payload.active,coordinate:H,dataKey:m.payload.dataKey,index:String(T.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});r(W)}}};return ju.on(Gy,h),()=>{ju.off(Gy,h)}},[d,r,t,e,n,a,l,c])}function dne(){var e=Ke(U1),t=Ke(B1),r=Tr();v.useEffect(()=>{if(e==null)return Mu;var n=(a,l,c)=>{t!==c&&e===a&&r(tne(l))};return ju.on(rE,n),()=>{ju.off(rE,n)}},[r,t,e])}function une(){var e=Tr();v.useEffect(()=>{e(Qre())},[e]),cne(),dne()}function hne(e,t,r,n,a,l){var c=Ke(b=>bre(b,e,t)),d=Ke(B1),h=Ke(U1),f=Ke(LP),m=Ke(Zre),g=m==null?void 0:m.active,x=Gm();v.useEffect(()=>{if(!g&&h!=null&&d!=null){var b=Hy({active:l,coordinate:r,dataKey:c,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:x,graphicalItemId:void 0});ju.emit(Gy,h,b,d)}},[g,r,c,a,n,d,h,f,l,x])}function aE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(r),!0).forEach(function(n){fne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fne(e,t,r){return(t=mne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mne(e){var t=pne(e,"string");return typeof t=="symbol"?t:t+""}function pne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gne(e){return e.dataKey}function xne(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(ZY,t)}var lE=[],bne={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function rM(e){var t,r,n=ws(e,bne),{active:a,allowEscapeViewBox:l,animationDuration:c,animationEasing:d,content:h,filterNull:f,isAnimationActive:m,offset:g,payloadUniqBy:x,position:b,reverseDirection:j,useTranslate3d:w,wrapperStyle:_,cursor:N,shared:C,trigger:E,defaultIndex:A,portal:S,axisId:T}=n,D=Tr(),P=typeof A=="number"?String(A):A;v.useEffect(()=>{D(mte({shared:C,trigger:E,axisId:T,active:a,defaultIndex:P}))},[D,C,E,T,a,P]);var I=Gm(),$=E6(),M=ote(C),{activeIndex:R,isActive:q}=(t=Ke(ve=>wre(ve,M,E,P)))!==null&&t!==void 0?t:{},H=Ke(ve=>yre(ve,M,E,P)),W=Ke(ve=>JD(ve,M,E,P)),L=Ke(ve=>vre(ve,M,E,P)),B=H,G=Vre(),ce=(r=a??q)!==null&&r!==void 0?r:!1,[ge,U]=$G([B,ce]),V=M==="axis"?W:void 0;hne(M,E,L,V,R,ce);var te=S??G;if(te==null||I==null||M==null)return null;var he=B??lE;ce||(he=lE),f&&he.length&&(he=cG(he.filter(ve=>ve.value!=null&&(ve.hide!==!0||n.includeHidden)),x,gne));var ye=he.length>0,Ne=v.createElement(iX,{allowEscapeViewBox:l,animationDuration:c,animationEasing:d,isAnimationActive:m,active:ce,coordinate:L,hasPayload:ye,offset:g,position:b,reverseDirection:j,useTranslate3d:w,viewBox:I,wrapperStyle:_,lastBoundingBox:ge,innerRef:U,hasPortalFromProps:!!S},xne(h,iE(iE({},n),{},{payload:he,label:V,active:ce,activeIndex:R,coordinate:L,accessibilityLayer:$})));return v.createElement(v.Fragment,null,Cm.createPortal(Ne,te),ce&&v.createElement(Hre,{cursor:N,tooltipEventType:M,coordinate:L,payload:he,index:R}))}var nM=e=>null;nM.displayName="Cell";function vne(e,t,r){return(t=yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yne(e){var t=wne(e,"string");return typeof t=="symbol"?t:t+""}function wne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class jne{constructor(t){vne(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function oE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _ne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oE(Object(r),!0).forEach(function(n){kne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kne(e,t,r){return(t=Nne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nne(e){var t=Sne(e,"string");return typeof t=="symbol"?t:t+""}function Sne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cne={cacheSize:2e3,enableCache:!0},sM=_ne({},Cne),cE=new jne(sM.cacheSize),Ene={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},dE="recharts_measurement_span";function Ane(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",l=t.fontStyle||"",c=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(c,"|").concat(d)}var uE=(e,t)=>{try{var r=document.getElementById(dE);r||(r=document.createElement("span"),r.setAttribute("id",dE),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Ene,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},tu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Qm.isSsr)return{width:0,height:0};if(!sM.enableCache)return uE(t,r);var n=Ane(t,r),a=cE.get(n);if(a)return a;var l=uE(t,r);return cE.set(n,l),l},aM;function Tne(e,t,r){return(t=One(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function One(e){var t=Pne(e,"string");return typeof t=="symbol"?t:t+""}function Pne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Dne=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Mne=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Rne={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ine=["cm","mm","pt","pc","in","Q","px"];function $ne(e){return Ine.includes(e)}var ic="NaN";function Lne(e,t){return e*Rne[t]}class gn{static parse(t){var r,[,n,a]=(r=Mne.exec(t))!==null&&r!==void 0?r:[];return n==null?gn.NaN:new gn(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,sa(t)&&(this.unit=""),r!==""&&!Dne.test(r)&&(this.num=NaN,this.unit=""),$ne(r)&&(this.num=Lne(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new gn(NaN,""):new gn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new gn(NaN,""):new gn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new gn(NaN,""):new gn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new gn(NaN,""):new gn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return sa(this.num)}}aM=gn;Tne(gn,"NaN",new aM(NaN,""));function iM(e){if(e==null||e.includes(ic))return ic;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,l]=(r=hE.exec(t))!==null&&r!==void 0?r:[],c=gn.parse(n??""),d=gn.parse(l??""),h=a==="*"?c.multiply(d):c.divide(d);if(h.isNaN())return ic;t=t.replace(hE,h.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,m,g,x]=(f=fE.exec(t))!==null&&f!==void 0?f:[],b=gn.parse(m??""),j=gn.parse(x??""),w=g==="+"?b.add(j):b.subtract(j);if(w.isNaN())return ic;t=t.replace(fE,w.toString())}return t}var mE=/\(([^()]*)\)/;function zne(e){for(var t=e,r;(r=mE.exec(t))!=null;){var[,n]=r;t=t.replace(mE,iM(n))}return t}function Une(e){var t=e.replace(/\s+/g,"");return t=zne(t),t=iM(t),t}function Bne(e){try{return Une(e)}catch{return ic}}function ov(e){var t=Bne(e.slice(5,-1));return t===ic?"":t}var qne=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],Fne=["dx","dy","angle","className","breakAll"];function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ky.apply(null,arguments)}function pE(e,t){if(e==null)return{};var r,n,a=Hne(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lM=/[ \f\n\r\t\v\u2028\u2029]+/,oM=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];sn(t)||(r?a=t.toString().split(""):a=t.toString().split(lM));var l=a.map(d=>({word:d,width:tu(d,n).width})),c=r?0:tu("",n).width;return{wordsWithComputedWidth:l,spaceWidth:c}}catch{return null}};function Vne(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var cM=(e,t,r,n)=>e.reduce((a,l)=>{var{word:c,width:d}=l,h=a[a.length-1];if(h&&d!=null&&(t==null||n||h.width+d+r<Number(t)))h.words.push(c),h.width+=d+r;else{var f={words:[c],width:d};a.push(f)}return a},[]),dM=e=>e.reduce((t,r)=>t.width>r.width?t:r),Wne="",gE=(e,t,r,n,a,l,c,d)=>{var h=e.slice(0,t),f=oM({breakAll:r,style:n,children:h+Wne});if(!f)return[!1,[]];var m=cM(f.wordsWithComputedWidth,l,c,d),g=m.length>a||dM(m).width>Number(l);return[g,m]},Gne=(e,t,r,n,a)=>{var{maxLines:l,children:c,style:d,breakAll:h}=e,f=Ve(l),m=String(c),g=cM(t,n,r,a);if(!f||a)return g;var x=g.length>l||dM(g).width>Number(n);if(!x)return g;for(var b=0,j=m.length-1,w=0,_;b<=j&&w<=m.length-1;){var N=Math.floor((b+j)/2),C=N-1,[E,A]=gE(m,C,h,d,l,n,r,a),[S]=gE(m,N,h,d,l,n,r,a);if(!E&&!S&&(b=N+1),E&&S&&(j=N-1),!E&&S){_=A;break}w++}return _||g},xE=e=>{var t=sn(e)?[]:e.toString().split(lM);return[{words:t,width:void 0}]},Kne=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:l,maxLines:c}=e;if((t||r)&&!Qm.isSsr){var d,h,f=oM({breakAll:l,children:n,style:a});if(f){var{wordsWithComputedWidth:m,spaceWidth:g}=f;d=m,h=g}else return xE(n);return Gne({breakAll:l,children:n,maxLines:c,style:a},d,h,t,!!r)}return xE(n)},uM="#808080",Yne={angle:0,breakAll:!1,capHeight:"0.71em",fill:uM,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},hj=v.forwardRef((e,t)=>{var r=ws(e,Yne),{x:n,y:a,lineHeight:l,capHeight:c,fill:d,scaleToFit:h,textAnchor:f,verticalAnchor:m}=r,g=pE(r,qne),x=v.useMemo(()=>Kne({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:h,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,h,g.style,g.width]),{dx:b,dy:j,angle:w,className:_,breakAll:N}=g,C=pE(g,Fne);if(!va(n)||!va(a)||x.length===0)return null;var E=Number(n)+(Ve(b)?b:0),A=Number(a)+(Ve(j)?j:0);if(!br(E)||!br(A))return null;var S;switch(m){case"start":S=ov("calc(".concat(c,")"));break;case"middle":S=ov("calc(".concat((x.length-1)/2," * -").concat(l," + (").concat(c," / 2))"));break;default:S=ov("calc(".concat(x.length-1," * -").concat(l,")"));break}var T=[];if(h){var D=x[0].width,{width:P}=g;T.push("scale(".concat(Ve(P)&&Ve(D)?P/D:1,")"))}return w&&T.push("rotate(".concat(w,", ").concat(E,", ").concat(A,")")),T.length&&(C.transform=T.join(" ")),v.createElement("text",Ky({},zs(C),{ref:t,x:E,y:A,className:or("recharts-text",_),textAnchor:f,fill:d.includes("url")?uM:d}),x.map((I,$)=>{var M=I.words.join(N?"":" ");return v.createElement("tspan",{x:E,dy:$===0?S:l,key:"".concat(M,"-").concat($)},M)}))});hj.displayName="Text";var Xne=["labelRef"],Jne=["content"];function bE(e,t){if(e==null)return{};var r,n,a=Qne(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vE(Object(r),!0).forEach(function(n){Zne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zne(e,t,r){return(t=ese(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ese(e){var t=tse(e,"string");return typeof t=="symbol"?t:t+""}function tse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ya.apply(null,arguments)}var hM=v.createContext(null),rse=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:l,height:c,children:d}=e,h=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:l,height:c}),[t,r,n,a,l,c]);return v.createElement(hM.Provider,{value:h},d)},fM=()=>{var e=v.useContext(hM),t=Gm();return e||x6(t)},nse=v.createContext(null),sse=()=>{var e=v.useContext(nse),t=Ke(FP);return e||t},ase=e=>{var{value:t,formatter:r}=e,n=sn(e.children)?t:e.children;return typeof r=="function"?r(n):n},fj=e=>e!=null&&typeof e=="function",ise=(e,t)=>{var r=Kn(t-e),n=Math.min(Math.abs(t-e),360);return r*n},lse=(e,t,r,n,a)=>{var{offset:l,className:c}=e,{cx:d,cy:h,innerRadius:f,outerRadius:m,startAngle:g,endAngle:x,clockWise:b}=a,j=(f+m)/2,w=ise(g,x),_=w>=0?1:-1,N,C;switch(t){case"insideStart":N=g+_*l,C=b;break;case"insideEnd":N=x-_*l,C=!b;break;case"end":N=x+_*l,C=b;break;default:throw new Error("Unsupported position ".concat(t))}C=w<=0?C:!C;var E=bn(d,h,j,N),A=bn(d,h,j,N+(C?1:-1)*359),S="M".concat(E.x,",").concat(E.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(C?0:1,`,
    `).concat(A.x,",").concat(A.y),T=sn(e.id)?cu("recharts-radial-line-"):e.id;return v.createElement("text",Ya({},n,{dominantBaseline:"central",className:or("recharts-radial-bar-label",c)}),v.createElement("defs",null,v.createElement("path",{id:T,d:S})),v.createElement("textPath",{xlinkHref:"#".concat(T)},r))},ose=(e,t,r)=>{var{cx:n,cy:a,innerRadius:l,outerRadius:c,startAngle:d,endAngle:h}=e,f=(d+h)/2;if(r==="outside"){var{x:m,y:g}=bn(n,a,c+t,f);return{x:m,y:g,textAnchor:m>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var x=(l+c)/2,{x:b,y:j}=bn(n,a,x,f);return{x:b,y:j,textAnchor:"middle",verticalAnchor:"middle"}},Yy=e=>"cx"in e&&Ve(e.cx),cse=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,l;r!=null&&!Yy(r)&&(l=r);var{x:c,y:d,upperWidth:h,lowerWidth:f,height:m}=t,g=c,x=c+(h-f)/2,b=(g+x)/2,j=(h+f)/2,w=g+h/2,_=m>=0?1:-1,N=_*n,C=_>0?"end":"start",E=_>0?"start":"end",A=h>=0?1:-1,S=A*n,T=A>0?"end":"start",D=A>0?"start":"end";if(a==="top"){var P={x:g+h/2,y:d-N,textAnchor:"middle",verticalAnchor:C};return Cr(Cr({},P),l?{height:Math.max(d-l.y,0),width:h}:{})}if(a==="bottom"){var I={x:x+f/2,y:d+m+N,textAnchor:"middle",verticalAnchor:E};return Cr(Cr({},I),l?{height:Math.max(l.y+l.height-(d+m),0),width:f}:{})}if(a==="left"){var $={x:b-S,y:d+m/2,textAnchor:T,verticalAnchor:"middle"};return Cr(Cr({},$),l?{width:Math.max($.x-l.x,0),height:m}:{})}if(a==="right"){var M={x:b+j+S,y:d+m/2,textAnchor:D,verticalAnchor:"middle"};return Cr(Cr({},M),l?{width:Math.max(l.x+l.width-M.x,0),height:m}:{})}var R=l?{width:j,height:m}:{};return a==="insideLeft"?Cr({x:b+S,y:d+m/2,textAnchor:D,verticalAnchor:"middle"},R):a==="insideRight"?Cr({x:b+j-S,y:d+m/2,textAnchor:T,verticalAnchor:"middle"},R):a==="insideTop"?Cr({x:g+h/2,y:d+N,textAnchor:"middle",verticalAnchor:E},R):a==="insideBottom"?Cr({x:x+f/2,y:d+m-N,textAnchor:"middle",verticalAnchor:C},R):a==="insideTopLeft"?Cr({x:g+S,y:d+N,textAnchor:D,verticalAnchor:E},R):a==="insideTopRight"?Cr({x:g+h-S,y:d+N,textAnchor:T,verticalAnchor:E},R):a==="insideBottomLeft"?Cr({x:x+S,y:d+m-N,textAnchor:D,verticalAnchor:C},R):a==="insideBottomRight"?Cr({x:x+f-S,y:d+m-N,textAnchor:T,verticalAnchor:C},R):a&&typeof a=="object"&&(Ve(a.x)||li(a.x))&&(Ve(a.y)||li(a.y))?Cr({x:c+aa(a.x,j),y:d+aa(a.y,m),textAnchor:"end",verticalAnchor:"end"},R):Cr({x:w,y:d+m/2,textAnchor:"middle",verticalAnchor:"middle"},R)},dse={angle:0,offset:5,zIndex:Dn.label,position:"middle",textBreakAll:!1};function Yi(e){var t=ws(e,dse),{viewBox:r,position:n,value:a,children:l,content:c,className:d="",textBreakAll:h,labelRef:f}=t,m=sse(),g=fM(),x=n==="center"?g:m??g,b,j,w;if(r==null?b=x:Yy(r)?b=r:b=x6(r),!b||sn(a)&&sn(l)&&!v.isValidElement(c)&&typeof c!="function")return null;var _=Cr(Cr({},t),{},{viewBox:b});if(v.isValidElement(c)){var{labelRef:N}=_,C=bE(_,Xne);return v.cloneElement(c,C)}if(typeof c=="function"){var{content:E}=_,A=bE(_,Jne);if(j=v.createElement(c,A),v.isValidElement(j))return j}else j=ase(t);var S=zs(t);if(Yy(b)){if(n==="insideStart"||n==="insideEnd"||n==="end")return lse(t,n,j,S,b);w=ose(b,t.offset,t.position)}else w=cse(t,b);return v.createElement(wi,{zIndex:t.zIndex},v.createElement(hj,Ya({ref:f,className:or("recharts-label",d)},S,w,{textAnchor:Vne(S.textAnchor)?S.textAnchor:w.textAnchor,breakAll:h}),j))}Yi.displayName="Label";var use=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(Yi,Ya({key:"label-implicit"},n)):va(e)?v.createElement(Yi,Ya({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===Yi?v.cloneElement(e,Cr({key:"label-implicit"},n)):v.createElement(Yi,Ya({key:"label-implicit",content:e},n)):fj(e)?v.createElement(Yi,Ya({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(Yi,Ya({},e,{key:"label-implicit"},n)):null};function hse(e){var{label:t,labelRef:r}=e,n=fM();return use(t,n,r)||null}var cv={},dv={},yE;function fse(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(dv)),dv}var uv={},wE;function mse(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(uv)),uv}var jE;function pse(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fse(),r=mse(),n=Qw();function a(l){if(n.isArrayLike(l))return t.last(r.toArray(l))}e.last=a})(cv)),cv}var hv,_E;function gse(){return _E||(_E=1,hv=pse().last),hv}var xse=gse();const bse=ys(xse);var vse=["valueAccessor"],yse=["dataKey","clockWise","id","textBreakAll","zIndex"];function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(null,arguments)}function kE(e,t){if(e==null)return{};var r,n,a=wse(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jse=e=>Array.isArray(e.value)?bse(e.value):e.value,mM=v.createContext(void 0),_se=mM.Provider,pM=v.createContext(void 0);pM.Provider;function kse(){return v.useContext(mM)}function Nse(){return v.useContext(pM)}function s0(e){var{valueAccessor:t=jse}=e,r=kE(e,vse),{dataKey:n,clockWise:a,id:l,textBreakAll:c,zIndex:d}=r,h=kE(r,yse),f=kse(),m=Nse(),g=f||m;return!g||!g.length?null:v.createElement(wi,{zIndex:d??Dn.label},v.createElement(ii,{className:"recharts-label-list"},g.map((x,b)=>{var j,w=sn(n)?t(x,b):yn(x&&x.payload,n),_=sn(l)?{}:{id:"".concat(l,"-").concat(b)};return v.createElement(Yi,im({key:"label-".concat(b)},zs(x),h,_,{fill:(j=r.fill)!==null&&j!==void 0?j:x.fill,parentViewBox:x.parentViewBox,value:w,textBreakAll:c,viewBox:x.viewBox,index:b,zIndex:0}))})))}s0.displayName="LabelList";function Sse(e){var{label:t}=e;return t?t===!0?v.createElement(s0,{key:"labelList-implicit"}):v.isValidElement(t)||fj(t)?v.createElement(s0,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(s0,im({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var Cse={radiusAxis:{},angleAxis:{}},gM=Jn({name:"polarAxis",initialState:Cse,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Ude,removeRadiusAxis:Bde,addAngleAxis:qde,removeAngleAxis:Fde}=gM.actions,Ese=gM.reducer,fv={exports:{}},Yt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function Ase(){if(NE)return Yt;NE=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function j(w){if(typeof w=="object"&&w!==null){var _=w.$$typeof;switch(_){case e:switch(w=w.type,w){case r:case a:case n:case h:case f:case x:return w;default:switch(w=w&&w.$$typeof,w){case c:case d:case g:case m:return w;case l:return w;default:return _}}case t:return _}}}return Yt.ContextConsumer=l,Yt.ContextProvider=c,Yt.Element=e,Yt.ForwardRef=d,Yt.Fragment=r,Yt.Lazy=g,Yt.Memo=m,Yt.Portal=t,Yt.Profiler=a,Yt.StrictMode=n,Yt.Suspense=h,Yt.SuspenseList=f,Yt.isContextConsumer=function(w){return j(w)===l},Yt.isContextProvider=function(w){return j(w)===c},Yt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},Yt.isForwardRef=function(w){return j(w)===d},Yt.isFragment=function(w){return j(w)===r},Yt.isLazy=function(w){return j(w)===g},Yt.isMemo=function(w){return j(w)===m},Yt.isPortal=function(w){return j(w)===t},Yt.isProfiler=function(w){return j(w)===a},Yt.isStrictMode=function(w){return j(w)===n},Yt.isSuspense=function(w){return j(w)===h},Yt.isSuspenseList=function(w){return j(w)===f},Yt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===h||w===f||typeof w=="object"&&w!==null&&(w.$$typeof===g||w.$$typeof===m||w.$$typeof===c||w.$$typeof===l||w.$$typeof===d||w.$$typeof===b||w.getModuleId!==void 0)},Yt.typeOf=j,Yt}var SE;function Tse(){return SE||(SE=1,fv.exports=Ase()),fv.exports}var Ose=Tse(),CE=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",EE=null,mv=null,xM=e=>{if(e===EE&&Array.isArray(mv))return mv;var t=[];return v.Children.forEach(e,r=>{sn(r)||(Ose.isFragment(r)?t=t.concat(xM(r.props.children)):t.push(r))}),mv=t,EE=e,t};function Pse(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>CE(a)):n=[CE(t)],xM(e).forEach(a=>{var l=wc(a,"type.displayName")||wc(a,"type.name");l&&n.indexOf(l)!==-1&&r.push(a)}),r}var pv={},AE;function Dse(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const l=r[Symbol.toStringTag];return l==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${l}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(pv)),pv}var gv,TE;function Mse(){return TE||(TE=1,gv=Dse().isPlainObject),gv}var Rse=Mse();const Ise=ys(Rse);var OE,PE,DE,ME,RE;function IE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $E(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(r),!0).forEach(function(n){$se(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $se(e,t,r){return(t=Lse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lse(e){var t=zse(e,"string");return typeof t=="symbol"?t:t+""}function zse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lm.apply(null,arguments)}function Hd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var LE=(e,t,r,n,a)=>{var l=r-n,c;return c=wr(OE||(OE=Hd(["M ",",",""])),e,t),c+=wr(PE||(PE=Hd(["L ",",",""])),e+r,t),c+=wr(DE||(DE=Hd(["L ",",",""])),e+r-l/2,t+a),c+=wr(ME||(ME=Hd(["L ",",",""])),e+r-l/2-n,t+a),c+=wr(RE||(RE=Hd(["L ",","," Z"])),e,t),c},Use={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Bse=e=>{var t=ws(e,Use),{x:r,y:n,upperWidth:a,lowerWidth:l,height:c,className:d}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isUpdateAnimationActive:g}=t,x=v.useRef(null),[b,j]=v.useState(-1),w=v.useRef(a),_=v.useRef(l),N=v.useRef(c),C=v.useRef(r),E=v.useRef(n),A=f1(e,"trapezoid-");if(v.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var H=x.current.getTotalLength();H&&j(H)}catch{}},[]),r!==+r||n!==+n||a!==+a||l!==+l||c!==+c||a===0&&l===0||c===0)return null;var S=or("recharts-trapezoid",d);if(!g)return v.createElement("g",null,v.createElement("path",lm({},zs(t),{className:S,d:LE(r,n,a,l,c)})));var T=w.current,D=_.current,P=N.current,I=C.current,$=E.current,M="0px ".concat(b===-1?1:b,"px"),R="".concat(b,"px 0px"),q=T6(["strokeDasharray"],f,h);return v.createElement(h1,{animationId:A,key:A,canBegin:b>0,duration:f,easing:h,isActive:g,begin:m},H=>{var W=xn(T,a,H),L=xn(D,l,H),B=xn(P,c,H),G=xn(I,r,H),ce=xn($,n,H);x.current&&(w.current=W,_.current=L,N.current=B,C.current=G,E.current=ce);var ge=H>0?{transition:q,strokeDasharray:R}:{strokeDasharray:M};return v.createElement("path",lm({},zs(t),{className:S,d:LE(G,ce,W,L,B),ref:x,style:$E($E({},ge),t.style)}))})},qse=["option","shapeType","activeClassName"];function Fse(e,t){if(e==null)return{};var r,n,a=Hse(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function om(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(r),!0).forEach(function(n){Vse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vse(e,t,r){return(t=Wse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wse(e){var t=Gse(e,"string");return typeof t=="symbol"?t:t+""}function Gse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kse(e,t){return om(om({},t),e)}function Yse(e,t){return e==="symbols"}function UE(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(M6,r);case"trapezoid":return v.createElement(Bse,r);case"sector":return v.createElement($6,r);case"symbols":if(Yse(t))return v.createElement(bO,r);break;case"curve":return v.createElement(A6,r);default:return null}}function Xse(e){return v.isValidElement(e)?e.props:e}function Jse(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,a=Fse(e,qse),l;if(v.isValidElement(t))l=v.cloneElement(t,om(om({},a),Xse(t)));else if(typeof t=="function")l=t(a,a.index);else if(Ise(t)&&typeof t!="boolean"){var c=Kse(t,a);l=v.createElement(UE,{shapeType:r,elementProps:c})}else{var d=a;l=v.createElement(UE,{shapeType:r,elementProps:d})}return a.isActive?v.createElement(ii,{className:n},l):l}var bM=(e,t,r)=>{var n=Tr();return(a,l)=>c=>{e==null||e(a,l,c),n(PD({activeIndex:String(l),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},vM=e=>{var t=Tr();return(r,n)=>a=>{e==null||e(r,n,a),t(pte())}},yM=(e,t,r)=>{var n=Tr();return(a,l)=>c=>{e==null||e(a,l,c),n(gte({activeIndex:String(l),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function Qse(e){var{tooltipEntrySettings:t}=e,r=Tr(),n=Qn(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(ute(t)):a.current!==t&&r(hte({prev:a.current,next:t})),a.current=t)},[t,r,n]),v.useLayoutEffect(()=>()=>{a.current&&(r(fte(a.current)),a.current=null)},[r]),null}function Zse(e){var{legendPayload:t}=e,r=Tr(),n=Qn(),a=v.useRef(null);return v.useLayoutEffect(()=>{n||(a.current===null?r(VY(t)):a.current!==t&&r(WY({prev:a.current,next:t})),a.current=t)},[r,n,t]),v.useLayoutEffect(()=>()=>{a.current&&(r(GY(a.current)),a.current=null)},[r]),null}var xv,eae=()=>{var[e]=v.useState(()=>cu("uid-"));return e},tae=(xv=xI.useId)!==null&&xv!==void 0?xv:eae;function rae(e,t){var r=tae();return t||(e?"".concat(e,"-").concat(r):r)}var nae=v.createContext(void 0),sae=e=>{var{id:t,type:r,children:n}=e,a=rae("recharts-".concat(r),t);return v.createElement(nae.Provider,{value:a},n(a))},aae={cartesianItems:[],polarItems:[]},wM=Jn({name:"graphicalItems",initialState:aae,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:hr()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=ea(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:hr()},removeCartesianGraphicalItem:{reducer(e,t){var r=ea(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:hr()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:hr()},removePolarGraphicalItem:{reducer(e,t){var r=ea(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:hr()}}}),{addCartesianGraphicalItem:iae,replaceCartesianGraphicalItem:lae,removeCartesianGraphicalItem:oae,addPolarGraphicalItem:Hde,removePolarGraphicalItem:Vde}=wM.actions,cae=wM.reducer,dae=e=>{var t=Tr(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(iae(e)):r.current!==e&&t(lae({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(oae(r.current)),r.current=null)},[t]),null},uae=v.memo(dae);function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){hae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hae(e,t,r){return(t=fae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fae(e){var t=mae(e,"string");return typeof t=="symbol"?t:t+""}function mae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jM=0,pae={xAxis:{},yAxis:{},zAxis:{}},_M=Jn({name:"cartesianAxis",initialState:pae,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:hr()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:hr()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:hr()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:hr()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:hr()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:hr()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:hr()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:hr()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:hr()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var l=a.widthHistory||[];if(l.length===3&&l[0]===l[2]&&n===l[1]&&n!==a.width&&Math.abs(n-l[0])<=1)return;var c=[...l,n].slice(-3);e.yAxis[r]=qE(qE({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:gae,replaceXAxis:xae,removeXAxis:bae,addYAxis:vae,replaceYAxis:yae,removeYAxis:wae,addZAxis:Wde,replaceZAxis:Gde,removeZAxis:Kde,updateYAxisWidth:jae}=_M.actions,_ae=_M.reducer,kae=le([an],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Nae=le([kae,mi,pi],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),kM=()=>Ke(Nae),FE=(e,t,r)=>{var n=r??e;if(!sn(n))return aa(n,t,0)},Sae=(e,t,r)=>{var n={},a=e.filter(cp),l=e.filter(f=>f.stackId==null),c=a.reduce((f,m)=>(f[m.stackId]||(f[m.stackId]=[]),f[m.stackId].push(m),f),n),d=Object.entries(c).map(f=>{var[m,g]=f,x=g.map(j=>j.dataKey),b=FE(t,r,g[0].barSize);return{stackId:m,dataKeys:x,barSize:b}}),h=l.map(f=>{var m=[f.dataKey].filter(x=>x!=null),g=FE(t,r,f.barSize);return{stackId:void 0,dataKeys:m,barSize:g}});return[...d,...h]};function HE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ff(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(r),!0).forEach(function(n){Cae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cae(e,t,r){return(t=Eae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eae(e){var t=Aae(e,"string");return typeof t=="symbol"?t:t+""}function Aae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tae(e,t,r,n,a){var l=n.length;if(!(l<1)){var c=aa(e,r,0,!0),d,h=[];if(br(n[0].barSize)){var f=!1,m=r/l,g=n.reduce((N,C)=>N+(C.barSize||0),0);g+=(l-1)*c,g>=r&&(g-=(l-1)*c,c=0),g>=r&&m>0&&(f=!0,m*=.9,g=l*m);var x=(r-g)/2>>0,b={offset:x-c,size:0};d=n.reduce((N,C)=>{var E,A={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:b.offset+b.size+c,size:f?m:(E=C.barSize)!==null&&E!==void 0?E:0}},S=[...N,A];return b=S[S.length-1].position,S},h)}else{var j=aa(t,r,0,!0);r-2*j-(l-1)*c<=0&&(c=0);var w=(r-2*j-(l-1)*c)/l;w>1&&(w>>=0);var _=br(a)?Math.min(w,a):w;d=n.reduce((N,C,E)=>[...N,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:j+(w+c)*E+(w-_)/2,size:_}}],h)}return d}}var Oae=(e,t,r,n,a,l,c)=>{var d=sn(c)?t:c,h=Tae(r,n,a!==l?a:l,e,d);return a!==l&&h!=null&&(h=h.map(f=>Ff(Ff({},f),{},{position:Ff(Ff({},f.position),{},{offset:f.position.offset-a/2})}))),h},Pae=(e,t)=>{var r=V1(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:l}=a;if(l)return l.find(c=>c.key===r)}}}};function Dae(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&br(e.zIndex)?e.zIndex:t}var Mae=e=>{var{chartData:t}=e,r=Tr(),n=Qn();return v.useEffect(()=>n?()=>{}:(r(nE(t)),()=>{r(nE(void 0))}),[t,r,n]),null},VE={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},NM=Jn({name:"brush",initialState:VE,reducers:{setBrushSettings(e,t){return t.payload==null?VE:t.payload}}}),{setBrushSettings:Yde}=NM.actions,Rae=NM.reducer;function Iae(e,t,r){return(t=$ae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ae(e){var t=Lae(e,"string");return typeof t=="symbol"?t:t+""}function Lae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mj{static create(t){return new mj(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(t)+l}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Iae(mj,"EPS",1e-4);function zae(e){return(e%180+180)%180}var Uae=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=zae(a),c=l*Math.PI/180,d=Math.atan(n/r),h=c>d&&c<Math.PI-d?n/Math.sin(c):r/Math.cos(c);return Math.abs(h)},Bae={dots:[],areas:[],lines:[]},SM=Jn({name:"referenceElements",initialState:Bae,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ea(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ea(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ea(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Xde,removeDot:Jde,addArea:Qde,removeArea:Zde,addLine:eue,removeLine:tue}=SM.actions,qae=SM.reducer,Fae=v.createContext(void 0),Hae=e=>{var{children:t}=e,[r]=v.useState("".concat(cu("recharts"),"-clip")),n=kM();if(n==null)return null;var{x:a,y:l,width:c,height:d}=n;return v.createElement(Fae.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:a,y:l,height:d,width:c}))),t)};function CM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];a!==void 0&&r.push(a)}return r}function Vae(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Uae(n,r)}function Wae(e,t,r){var n=r==="width",{x:a,y:l,width:c,height:d}=e;return t===1?{start:n?a:l,end:n?a+c:l+d}:{start:n?a+c:l+d,end:n?a:l}}function _u(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var l=r();return e*(t-e*l/2-n)>=0&&e*(t+e*l/2-a)<=0}function Gae(e,t){return CM(e,t+1)}function Kae(e,t,r,n,a){for(var l=(n||[]).slice(),{start:c,end:d}=t,h=0,f=1,m=c,g=function(){var j=n==null?void 0:n[h];if(j===void 0)return{v:CM(n,f)};var w=h,_,N=()=>(_===void 0&&(_=r(j,w)),_),C=j.coordinate,E=h===0||_u(e,C,N,m,d);E||(h=0,m=c,f+=1),E&&(m=C+e*(N()/2+a),h+=f)},x;f<=l.length;)if(x=g(),x)return x.v;return[]}function Yae(e,t,r,n,a){var l=(n||[]).slice(),c=l.length;if(c===0)return[];for(var{start:d,end:h}=t,f=1;f<=c;f++){for(var m=(c-1)%f,g=d,x=!0,b=function(){var C=n[j],E=j,A,S=()=>(A===void 0&&(A=r(C,E)),A),T=C.coordinate,D=j===m||_u(e,T,S,g,h);if(!D)return x=!1,1;D&&(g=T+e*(S()/2+a))},j=m;j<c&&!b();j+=f);if(x){for(var w=[],_=m;_<c;_+=f)w.push(n[_]);return w}}return[]}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(n){Xae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xae(e,t,r){return(t=Jae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jae(e){var t=Qae(e,"string");return typeof t=="symbol"?t:t+""}function Qae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zae(e,t,r,n,a){for(var l=(n||[]).slice(),c=l.length,{start:d}=t,{end:h}=t,f=function(x){var b=l[x],j,w=()=>(j===void 0&&(j=r(b,x)),j);if(x===c-1){var _=e*(b.coordinate+e*w()/2-h);l[x]=b=Nn(Nn({},b),{},{tickCoord:_>0?b.coordinate-_*e:b.coordinate})}else l[x]=b=Nn(Nn({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var N=_u(e,b.tickCoord,w,d,h);N&&(h=b.tickCoord-e*(w()/2+a),l[x]=Nn(Nn({},b),{},{isShow:!0}))}},m=c-1;m>=0;m--)f(m);return l}function eie(e,t,r,n,a,l){var c=(n||[]).slice(),d=c.length,{start:h,end:f}=t;if(l){var m=n[d-1],g=r(m,d-1),x=e*(m.coordinate+e*g/2-f);if(c[d-1]=m=Nn(Nn({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate}),m.tickCoord!=null){var b=_u(e,m.tickCoord,()=>g,h,f);b&&(f=m.tickCoord-e*(g/2+a),c[d-1]=Nn(Nn({},m),{},{isShow:!0}))}}for(var j=l?d-1:d,w=function(C){var E=c[C],A,S=()=>(A===void 0&&(A=r(E,C)),A);if(C===0){var T=e*(E.coordinate-e*S()/2-h);c[C]=E=Nn(Nn({},E),{},{tickCoord:T<0?E.coordinate-T*e:E.coordinate})}else c[C]=E=Nn(Nn({},E),{},{tickCoord:E.coordinate});if(E.tickCoord!=null){var D=_u(e,E.tickCoord,S,h,f);D&&(h=E.tickCoord+e*(S()/2+a),c[C]=Nn(Nn({},E),{},{isShow:!0}))}},_=0;_<j;_++)w(_);return c}function pj(e,t,r){var{tick:n,ticks:a,viewBox:l,minTickGap:c,orientation:d,interval:h,tickFormatter:f,unit:m,angle:g}=e;if(!a||!a.length||!n)return[];if(Ve(h)||Qm.isSsr){var x;return(x=Gae(a,Ve(h)?h:0))!==null&&x!==void 0?x:[]}var b=[],j=d==="top"||d==="bottom"?"width":"height",w=m&&j==="width"?tu(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},_=(E,A)=>{var S=typeof f=="function"?f(E.value,A):E.value;return j==="width"?Vae(tu(S,{fontSize:t,letterSpacing:r}),w,g):tu(S,{fontSize:t,letterSpacing:r})[j]},N=a.length>=2?Kn(a[1].coordinate-a[0].coordinate):1,C=Wae(l,N,j);return h==="equidistantPreserveStart"?Kae(N,C,_,a,c):h==="equidistantPreserveEnd"?Yae(N,C,_,a,c):(h==="preserveStart"||h==="preserveStartEnd"?b=eie(N,C,_,a,c,h==="preserveStartEnd"):b=Zae(N,C,_,a,c),b.filter(E=>E.isShow))}var tie=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:l=0}=e,c=0;if(t){Array.from(t).forEach(m=>{if(m){var g=m.getBoundingClientRect();g.width>c&&(c=g.width)}});var d=r?r.getBoundingClientRect().width:0,h=a+l,f=c+h+d+(r?n:0);return Math.round(f)}return 0},rie=["axisLine","width","height","className","hide","ticks","axisType"];function nie(e,t){if(e==null)return{};var r,n,a=sie(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eo.apply(null,arguments)}function GE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(r),!0).forEach(function(n){aie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aie(e,t,r){return(t=iie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iie(e){var t=lie(e,"string");return typeof t=="symbol"?t:t+""}function lie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ei={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Dn.axis};function oie(e){var{x:t,y:r,width:n,height:a,orientation:l,mirror:c,axisLine:d,otherSvgProps:h}=e;if(!d)return null;var f=zr(zr(zr({},h),ai(d)),{},{fill:"none"});if(l==="top"||l==="bottom"){var m=+(l==="top"&&!c||l==="bottom"&&c);f=zr(zr({},f),{},{x1:t,y1:r+m*a,x2:t+n,y2:r+m*a})}else{var g=+(l==="left"&&!c||l==="right"&&c);f=zr(zr({},f),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+a})}return v.createElement("line",eo({},f,{className:or("recharts-cartesian-axis-line",wc(d,"className"))}))}function cie(e,t,r,n,a,l,c,d,h){var f,m,g,x,b,j,w=d?-1:1,_=e.tickSize||c,N=Ve(e.tickCoord)?e.tickCoord:e.coordinate;switch(l){case"top":f=m=e.coordinate,x=r+ +!d*a,g=x-w*_,j=g-w*h,b=N;break;case"left":g=x=e.coordinate,m=t+ +!d*n,f=m-w*_,b=f-w*h,j=N;break;case"right":g=x=e.coordinate,m=t+ +d*n,f=m+w*_,b=f+w*h,j=N;break;default:f=m=e.coordinate,x=r+ +d*a,g=x+w*_,j=g+w*h,b=N;break}return{line:{x1:f,y1:g,x2:m,y2:x},tick:{x:b,y:j}}}function die(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function uie(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function hie(e){var{option:t,tickProps:r,value:n}=e,a,l=or(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))a=v.cloneElement(t,zr(zr({},r),{},{className:l}));else if(typeof t=="function")a=t(zr(zr({},r),{},{className:l}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=or(c,t==null?void 0:t.className)),a=v.createElement(hj,eo({},r,{className:c}),n)}return a}var fie=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:l,tickFormatter:c,unit:d,padding:h,tickTextProps:f,orientation:m,mirror:g,x,y:b,width:j,height:w,tickSize:_,tickMargin:N,fontSize:C,letterSpacing:E,getTicksConfig:A,events:S,axisType:T}=e,D=pj(zr(zr({},A),{},{ticks:r}),C,E),P=die(m,g),I=uie(m,g),$=ai(A),M=Hw(n),R={};typeof a=="object"&&(R=a);var q=zr(zr({},$),{},{fill:"none"},R),H=D.map(B=>zr({entry:B},cie(B,x,b,j,w,m,_,g,N))),W=H.map(B=>{var{entry:G,line:ce}=B;return v.createElement(ii,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},a&&v.createElement("line",eo({},q,ce,{className:or("recharts-cartesian-axis-tick-line",wc(a,"className"))})))}),L=H.map((B,G)=>{var{entry:ce,tick:ge}=B,U=zr(zr(zr(zr({textAnchor:P,verticalAnchor:I},$),{},{stroke:"none",fill:l},M),ge),{},{index:G,payload:ce,visibleTicksCount:D.length,tickFormatter:c,padding:h},f);return v.createElement(ii,eo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},Jw(S,ce,G)),n&&v.createElement(hie,{option:n,tickProps:U,value:"".concat(typeof c=="function"?c(ce.value,G):ce.value).concat(d||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},L.length>0&&v.createElement(wi,{zIndex:Dn.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},L)),W.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},W))}),mie=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:l,hide:c,ticks:d,axisType:h}=e,f=nie(e,rie),[m,g]=v.useState(""),[x,b]=v.useState(""),j=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var _;return tie({ticks:j.current,label:(_=e.labelRef)===null||_===void 0?void 0:_.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=v.useCallback(_=>{if(_){var N=_.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=N;var C=N[0];if(C){var E=window.getComputedStyle(C),A=E.fontSize,S=E.letterSpacing;(A!==m||S!==x)&&(g(A),b(S))}}},[m,x]);return c||n!=null&&n<=0||a!=null&&a<=0?null:v.createElement(wi,{zIndex:e.zIndex},v.createElement(ii,{className:or("recharts-cartesian-axis",l)},v.createElement(oie,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:ai(e)}),v.createElement(fie,{ref:w,axisType:h,events:f,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:d,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(rse,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(hse,{label:e.label,labelRef:e.labelRef}),e.children)))}),gj=v.forwardRef((e,t)=>{var r=ws(e,ei);return v.createElement(mie,eo({},r,{ref:t}))});gj.displayName="CartesianAxis";var pie=["x1","y1","x2","y2","key"],gie=["offset"],xie=["xAxisId","yAxisId"],bie=["xAxisId","yAxisId"];function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(r),!0).forEach(function(n){vie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vie(e,t,r){return(t=yie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yie(e){var t=wie(e,"string");return typeof t=="symbol"?t:t+""}function wie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fl.apply(null,arguments)}function cm(e,t){if(e==null)return{};var r,n,a=jie(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _ie=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:l,height:c,ry:d}=e;return v.createElement("rect",{x:n,y:a,ry:d,width:l,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function EM(e){var{option:t,lineItemProps:r}=e,n;if(v.isValidElement(t))n=v.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:l,y1:c,x2:d,y2:h,key:f}=r,m=cm(r,pie),g=(a=ai(m))!==null&&a!==void 0?a:{},{offset:x}=g,b=cm(g,gie);n=v.createElement("line",Fl({},b,{x1:l,y1:c,x2:d,y2:h,fill:"none",key:f}))}return n}function kie(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:l,yAxisId:c}=e,d=cm(e,xie),h=a.map((f,m)=>{var g=Cn(Cn({},d),{},{x1:t,y1:f,x2:t+r,y2:f,key:"line-".concat(m),index:m});return v.createElement(EM,{key:"line-".concat(m),option:n,lineItemProps:g})});return v.createElement("g",{className:"recharts-cartesian-grid-horizontal"},h)}function Nie(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:l,yAxisId:c}=e,d=cm(e,bie),h=a.map((f,m)=>{var g=Cn(Cn({},d),{},{x1:f,y1:t,x2:f,y2:t+r,key:"line-".concat(m),index:m});return v.createElement(EM,{option:n,lineItemProps:g,key:"line-".concat(m)})});return v.createElement("g",{className:"recharts-cartesian-grid-vertical"},h)}function Sie(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:l,height:c,horizontalPoints:d,horizontal:h=!0}=e;if(!h||!t||!t.length||d==null)return null;var f=d.map(g=>Math.round(g+a-a)).sort((g,x)=>g-x);a!==f[0]&&f.unshift(0);var m=f.map((g,x)=>{var b=!f[x+1],j=b?a+c-g:f[x+1]-g;if(j<=0)return null;var w=x%t.length;return v.createElement("rect",{key:"react-".concat(x),y:g,x:n,height:j,width:l,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Cie(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:l,width:c,height:d,verticalPoints:h}=e;if(!t||!r||!r.length)return null;var f=h.map(g=>Math.round(g+a-a)).sort((g,x)=>g-x);a!==f[0]&&f.unshift(0);var m=f.map((g,x)=>{var b=!f[x+1],j=b?a+c-g:f[x+1]-g;if(j<=0)return null;var w=x%r.length;return v.createElement("rect",{key:"react-".concat(x),x:g,y:l,width:j,height:d,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return v.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Eie=(e,t)=>{var{xAxis:r,width:n,height:a,offset:l}=e;return c6(pj(Cn(Cn(Cn({},ei),r),{},{ticks:d6(r),viewBox:{x:0,y:0,width:n,height:a}})),l.left,l.left+l.width,t)},Aie=(e,t)=>{var{yAxis:r,width:n,height:a,offset:l}=e;return c6(pj(Cn(Cn(Cn({},ei),r),{},{ticks:d6(r),viewBox:{x:0,y:0,width:n,height:a}})),l.top,l.top+l.height,t)},Tie={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Dn.grid};function AM(e){var t=v6(),r=y6(),n=b6(),a=Cn(Cn({},ws(e,Tie)),{},{x:Ve(e.x)?e.x:n.left,y:Ve(e.y)?e.y:n.top,width:Ve(e.width)?e.width:n.width,height:Ve(e.height)?e.height:n.height}),{xAxisId:l,yAxisId:c,x:d,y:h,width:f,height:m,syncWithTicks:g,horizontalValues:x,verticalValues:b}=a,j=Qn(),w=Ke(I=>V4(I,"xAxis",l,j)),_=Ke(I=>V4(I,"yAxis",c,j));if(!ya(f)||!ya(m)||!Ve(d)||!Ve(h))return null;var N=a.verticalCoordinatesGenerator||Eie,C=a.horizontalCoordinatesGenerator||Aie,{horizontalPoints:E,verticalPoints:A}=a;if((!E||!E.length)&&typeof C=="function"){var S=x&&x.length,T=C({yAxis:_?Cn(Cn({},_),{},{ticks:S?x:_.ticks}):void 0,width:t??f,height:r??m,offset:n},S?!0:g);L0(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(E=T)}if((!A||!A.length)&&typeof N=="function"){var D=b&&b.length,P=N({xAxis:w?Cn(Cn({},w),{},{ticks:D?b:w.ticks}):void 0,width:t??f,height:r??m,offset:n},D?!0:g);L0(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(A=P)}return v.createElement(wi,{zIndex:a.zIndex},v.createElement("g",{className:"recharts-cartesian-grid"},v.createElement(_ie,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),v.createElement(Sie,Fl({},a,{horizontalPoints:E})),v.createElement(Cie,Fl({},a,{verticalPoints:A})),v.createElement(kie,Fl({},a,{offset:n,horizontalPoints:E,xAxis:w,yAxis:_})),v.createElement(Nie,Fl({},a,{offset:n,verticalPoints:A,xAxis:w,yAxis:_}))))}AM.displayName="CartesianGrid";var Oie={},TM=Jn({name:"errorBars",initialState:Oie,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(l=>l.dataKey===n.dataKey&&l.direction===n.direction?a:l))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:rue,replaceErrorBar:nue,removeErrorBar:sue}=TM.actions,Pie=TM.reducer,Die=["children"];function Mie(e,t){if(e==null)return{};var r,n,a=Rie(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Iie={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},$ie=v.createContext(Iie);function Lie(e){var{children:t}=e,r=Mie(e,Die);return v.createElement($ie.Provider,{value:r},t)}function OM(e,t){var r,n,a=Ke(f=>bi(f,e)),l=Ke(f=>vi(f,t)),c=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:en.allowDataOverflow,d=(n=l==null?void 0:l.allowDataOverflow)!==null&&n!==void 0?n:tn.allowDataOverflow,h=c||d;return{needClip:h,needClipX:c,needClipY:d}}function zie(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=kM(),{needClipX:l,needClipY:c,needClip:d}=OM(t,r);if(!d||!a)return null;var{x:h,y:f,width:m,height:g}=a;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:l?h:h-m/2,y:c?f:f-g/2,width:l?m:m*2,height:c?g:g*2}))}var bv={exports:{}},vv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function Uie(){if(YE)return vv;YE=1;var e=Oc();function t(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,l=e.useEffect,c=e.useMemo,d=e.useDebugValue;return vv.useSyncExternalStoreWithSelector=function(h,f,m,g,x){var b=a(null);if(b.current===null){var j={hasValue:!1,value:null};b.current=j}else j=b.current;b=c(function(){function _(S){if(!N){if(N=!0,C=S,S=g(S),x!==void 0&&j.hasValue){var T=j.value;if(x(T,S))return E=T}return E=S}if(T=E,r(C,S))return T;var D=g(S);return x!==void 0&&x(T,D)?(C=S,T):(C=S,E=D)}var N=!1,C,E,A=m===void 0?null:m;return[function(){return _(f())},A===null?void 0:function(){return _(A())}]},[f,m,g,x]);var w=n(h,b[0],b[1]);return l(function(){j.hasValue=!0,j.value=w},[w]),d(w),w},vv}var XE;function Bie(){return XE||(XE=1,bv.exports=Uie()),bv.exports}Bie();function qie(e){e()}function Fie(){let e=null,t=null;return{clear(){e=null,t=null},notify(){qie(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var JE={notify(){},get:()=>[]};function Hie(e,t){let r,n=JE,a=0,l=!1;function c(w){m();const _=n.subscribe(w);let N=!1;return()=>{N||(N=!0,_(),g())}}function d(){n.notify()}function h(){j.onStateChange&&j.onStateChange()}function f(){return l}function m(){a++,r||(r=e.subscribe(h),n=Fie())}function g(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=JE)}function x(){l||(l=!0,m())}function b(){l&&(l=!1,g())}const j={addNestedSub:c,notifyNestedSubs:d,handleChangeWrapper:h,isSubscribed:f,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>n};return j}var Vie=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wie=Vie(),Gie=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Kie=Gie(),Yie=()=>Wie||Kie?v.useLayoutEffect:v.useEffect,Xie=Yie();function QE(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Jie(e,t){if(QE(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!QE(e[r[a]],t[r[a]]))return!1;return!0}var yv=Symbol.for("react-redux-context"),wv=typeof globalThis<"u"?globalThis:{};function Qie(){if(!v.createContext)return{};const e=wv[yv]??(wv[yv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var Zie=Qie();function ele(e){const{children:t,context:r,serverState:n,store:a}=e,l=v.useMemo(()=>{const h=Hie(a);return{store:a,subscription:h,getServerState:n?()=>n:void 0}},[a,n]),c=v.useMemo(()=>a.getState(),[a]);Xie(()=>{const{subscription:h}=l;return h.onStateChange=h.notifyNestedSubs,h.trySubscribe(),c!==a.getState()&&h.notifyNestedSubs(),()=>{h.tryUnsubscribe(),h.onStateChange=void 0}},[l,c]);const d=r||Zie;return v.createElement(d.Provider,{value:l},t)}var tle=ele,rle=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function nle(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function xj(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(rle.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Jie(e[n],t[n]))return!1}else if(!nle(e[n],t[n]))return!1;return!0}function io(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:jM}function lo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:jM}var sle="Invariant failed";function ale(e,t){throw new Error(sle)}function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(null,arguments)}function dm(e){return v.createElement(Jse,Xy({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var ile=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Ve(t))return t;var l=Ve(n)||sn(n);return l?t(n,a):(l||ale(),r)}},lle=(e,t,r)=>r,ole=(e,t)=>t,Zu=le([G1,ole],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),cle=le([Zu],e=>e==null?void 0:e.maxBarSize),dle=(e,t,r,n)=>n,ule=le([Vt,G1,io,lo,lle],(e,t,r,n,a)=>t.filter(l=>e==="horizontal"?l.xAxisId===r:l.yAxisId===n).filter(l=>l.isPanorama===a).filter(l=>l.hide===!1).filter(l=>l.type==="bar")),hle=(e,t,r)=>{var n=Vt(e),a=io(e,t),l=lo(e,t);if(!(a==null||l==null))return n==="horizontal"?Fy(e,"yAxis",l,r):Fy(e,"xAxis",a,r)},fle=(e,t)=>{var r=Vt(e),n=io(e,t),a=lo(e,t);if(!(n==null||a==null))return r==="horizontal"?H4(e,"xAxis",n):H4(e,"yAxis",a)},mle=le([ule,see,fle],Sae),ple=(e,t,r)=>{var n,a,l=Zu(e,t);if(l!=null){var c=io(e,t),d=lo(e,t);if(!(c==null||d==null)){var h=Vt(e),f=RP(e),{maxBarSize:m}=l,g=sn(m)?f:m,x,b;return h==="horizontal"?(x=Ac(e,"xAxis",c,r),b=Ec(e,"xAxis",c,r)):(x=Ac(e,"yAxis",d,r),b=Ec(e,"yAxis",d,r)),(n=(a=$0(x,b,!0))!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0}}},PM=(e,t,r)=>{var n=Vt(e),a=io(e,t),l=lo(e,t);if(!(a==null||l==null)){var c,d;return n==="horizontal"?(c=Ac(e,"xAxis",a,r),d=Ec(e,"xAxis",a,r)):(c=Ac(e,"yAxis",l,r),d=Ec(e,"yAxis",l,r)),$0(c,d)}},gle=le([mle,RP,nee,IP,ple,PM,cle],Oae),xle=(e,t,r)=>{var n=io(e,t);if(n!=null)return Ac(e,"xAxis",n,r)},ble=(e,t,r)=>{var n=lo(e,t);if(n!=null)return Ac(e,"yAxis",n,r)},vle=(e,t,r)=>{var n=io(e,t);if(n!=null)return Ec(e,"xAxis",n,r)},yle=(e,t,r)=>{var n=lo(e,t);if(n!=null)return Ec(e,"yAxis",n,r)},wle=le([gle,Zu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),jle=le([hle,Zu],Pae),_le=le([an,o1,xle,ble,vle,yle,wle,Vt,VZ,PM,jle,Zu,dle],(e,t,r,n,a,l,c,d,h,f,m,g,x)=>{var{chartData:b,dataStartIndex:j,dataEndIndex:w}=h;if(!(g==null||c==null||t==null||d!=="horizontal"&&d!=="vertical"||r==null||n==null||a==null||l==null||f==null)){var{data:_}=g,N;if(_!=null&&_.length>0?N=_:N=b==null?void 0:b.slice(j,w+1),N!=null)return Qle({layout:d,barSettings:g,pos:c,parentViewBox:t,bandSize:f,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:l,stackedData:m,displayedData:N,offset:e,cells:x,dataStartIndex:j})}}),kle=["index"];function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jy.apply(null,arguments)}function Nle(e,t){if(e==null)return{};var r,n,a=Sle(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Sle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DM=v.createContext(void 0),Cle=e=>{var t=v.useContext(DM);if(t!=null)return t.stackId;if(e!=null)return KK(e)},Ele=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),Ale=e=>{var t=v.useContext(DM);if(t!=null){var{stackId:r}=t;return"url(#".concat(Ele(r,e),")")}},Tle=e=>{var{index:t}=e,r=Nle(e,kle),n=Ale(t);return v.createElement(ii,Jy({className:"recharts-bar-stack-layer",clipPath:n},r))},Ole=["onMouseEnter","onMouseLeave","onClick"],Ple=["value","background","tooltipPosition"],Dle=["id"],Mle=["onMouseEnter","onClick","onMouseLeave"];function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fi.apply(null,arguments)}function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(n){Rle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rle(e,t,r){return(t=Ile(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ile(e){var t=$le(e,"string");return typeof t=="symbol"?t:t+""}function $le(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(e,t){if(e==null)return{};var r,n,a=Lle(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lle(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zle=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:l}=e;return[{inactive:l,dataKey:t,type:a,color:n,value:u6(r,t),payload:e}]},Ule=v.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:l,hide:c,unit:d,tooltipType:h,id:f}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:u6(l,t),hide:c,type:h,color:a,unit:d,graphicalItemId:f}};return v.createElement(Qse,{tooltipEntrySettings:m})});function Ble(e){var t=Ke(Tc),{data:r,dataKey:n,background:a,allOtherBarProps:l}=e,{onMouseEnter:c,onMouseLeave:d,onClick:h}=l,f=um(l,Ole),m=bM(c,n,l.id),g=vM(d),x=yM(h,n,l.id);if(!a||r==null)return null;var b=Hw(a);return v.createElement(wi,{zIndex:Dae(a,Dn.barBackground)},r.map((j,w)=>{var{value:_,background:N,tooltipPosition:C}=j,E=um(j,Ple);if(!N)return null;var A=m(j,w),S=g(j,w),T=x(j,w),D=Tn(Tn(Tn(Tn(Tn({option:a,isActive:String(w)===t},E),{},{fill:"#eee"},N),b),Jw(f,j,w)),{},{onMouseEnter:A,onMouseLeave:S,onClick:T,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return v.createElement(dm,fi({key:"background-bar-".concat(w)},D))}))}function qle(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(l=>{var c={x:l.x,y:l.y,width:l.width,lowerWidth:l.width,upperWidth:l.width,height:l.height};return Tn(Tn({},c),{},{value:l.value,payload:l.payload,parentViewBox:l.parentViewBox,viewBox:c,fill:l.fill})});return v.createElement(_se,{value:t?a:void 0},r)}function Fle(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:l,dataKey:c}=e,d=Ke(Tc),h=Ke(WD),f=r&&String(l)===d&&(h==null||c===h),m=f?r:t;return f?v.createElement(wi,{zIndex:Dn.activeBar},v.createElement(dm,fi({},n,{name:String(n.name)},a,{isActive:f,option:m,index:l,dataKey:c}))):v.createElement(dm,fi({},n,{name:String(n.name)},a,{isActive:f,option:m,index:l,dataKey:c}))}function Hle(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:l}=e;return v.createElement(dm,fi({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:l}))}function Vle(e){var t,{data:r,props:n}=e,a=(t=ai(n))!==null&&t!==void 0?t:{},{id:l}=a,c=um(a,Dle),{shape:d,dataKey:h,activeBar:f}=n,{onMouseEnter:m,onClick:g,onMouseLeave:x}=n,b=um(n,Mle),j=bM(m,h,l),w=vM(x),_=yM(g,h,l);return r?v.createElement(v.Fragment,null,r.map((N,C)=>v.createElement(Tle,fi({index:C,key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(C),className:"recharts-bar-rectangle"},Jw(b,N,C),{onMouseEnter:j(N,C),onMouseLeave:w(N,C),onClick:_(N,C)}),f?v.createElement(Fle,{shape:d,activeBar:f,baseProps:c,entry:N,index:C,dataKey:h}):v.createElement(Hle,{shape:d,baseProps:c,entry:N,index:C,dataKey:h})))):null}function Wle(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:l,animationBegin:c,animationDuration:d,animationEasing:h,onAnimationEnd:f,onAnimationStart:m}=t,g=r.current,x=f1(t,"recharts-bar-"),[b,j]=v.useState(!1),w=!b,_=v.useCallback(()=>{typeof f=="function"&&f(),j(!1)},[f]),N=v.useCallback(()=>{typeof m=="function"&&m(),j(!0)},[m]);return v.createElement(qle,{showLabels:w,rects:n},v.createElement(h1,{animationId:x,begin:c,duration:d,isActive:l,easing:h,onAnimationEnd:_,onAnimationStart:N,key:x},C=>{var E=C===1?n:n==null?void 0:n.map((A,S)=>{var T=g&&g[S];if(T)return Tn(Tn({},A),{},{x:xn(T.x,A.x,C),y:xn(T.y,A.y,C),width:xn(T.width,A.width,C),height:xn(T.height,A.height,C)});if(a==="horizontal"){var D=xn(0,A.height,C),P=xn(A.stackedBarStart,A.y,C);return Tn(Tn({},A),{},{y:P,height:D})}var I=xn(0,A.width,C),$=xn(A.stackedBarStart,A.x,C);return Tn(Tn({},A),{},{width:I,x:$})});return C>0&&(r.current=E??null),E==null?null:v.createElement(ii,null,v.createElement(Vle,{props:t,data:E}))}),v.createElement(Sse,{label:t.label}),t.children)}function Gle(e){var t=v.useRef(null);return v.createElement(Wle,{previousRectanglesRef:t,props:e})}var MM=0,Kle=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:yn(e,t)}};class Yle extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:l,yAxisId:c,needClip:d,background:h,id:f}=this.props;if(t||r==null)return null;var m=or("recharts-bar",a),g=f;return v.createElement(ii,{className:m,id:f},d&&v.createElement("defs",null,v.createElement(zie,{clipPathId:g,xAxisId:l,yAxisId:c})),v.createElement(ii,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(g,")"):void 0},v.createElement(Ble,{data:r,dataKey:n,background:h,allOtherBarProps:this.props}),v.createElement(Gle,this.props)))}}var Xle={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:MM,xAxisId:0,yAxisId:0,zIndex:Dn.bar};function Jle(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:l,activeBar:c,animationBegin:d,animationDuration:h,animationEasing:f,isAnimationActive:m}=e,{needClip:g}=OM(t,r),x=zu(),b=Qn(),j=Pse(e.children,nM),w=Ke(C=>_le(C,e.id,b,j));if(x!=="vertical"&&x!=="horizontal")return null;var _,N=w==null?void 0:w[0];return N==null||N.height==null||N.width==null?_=0:_=x==="vertical"?N.height/2:N.width/2,v.createElement(Lie,{xAxisId:t,yAxisId:r,data:w,dataPointFormatter:Kle,errorBarOffset:_},v.createElement(Yle,fi({},e,{layout:x,needClip:g,data:w,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:l,activeBar:c,animationBegin:d,animationDuration:h,animationEasing:f,isAnimationActive:m})))}function Qle(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:l,xAxis:c,yAxis:d,xAxisTicks:h,yAxisTicks:f,stackedData:m,displayedData:g,offset:x,cells:b,parentViewBox:j,dataStartIndex:w}=e,_=t==="horizontal"?d:c,N=m?_.scale.domain():null,C=YK({numericAxis:_}),E=_.scale(C);return g.map((A,S)=>{var T,D,P,I,$,M;if(m){var R=m[S+w];if(R==null)return null;T=FK(R,N)}else T=yn(A,r),Array.isArray(T)||(T=[C,T]);var q=ile(n,MM)(T[1],S);if(t==="horizontal"){var H,[W,L]=[d.scale(T[0]),d.scale(T[1])];D=X5({axis:c,ticks:h,bandSize:l,offset:a.offset,entry:A,index:S}),P=(H=L??W)!==null&&H!==void 0?H:void 0,I=a.size;var B=W-L;if($=sa(B)?0:B,M={x:D,y:x.top,width:I,height:x.height},Math.abs(q)>0&&Math.abs($)<Math.abs(q)){var G=Kn($||q)*(Math.abs(q)-Math.abs($));P-=G,$+=G}}else{var[ce,ge]=[c.scale(T[0]),c.scale(T[1])];if(D=ce,P=X5({axis:d,ticks:f,bandSize:l,offset:a.offset,entry:A,index:S}),I=ge-ce,$=a.size,M={x:x.left,y:P,width:x.width,height:$},Math.abs(q)>0&&Math.abs(I)<Math.abs(q)){var U=Kn(I||q)*(Math.abs(q)-Math.abs(I));I+=U}}if(D==null||P==null||I==null||$==null)return null;var V=Tn(Tn({},A),{},{stackedBarStart:E,x:D,y:P,width:I,height:$,value:m?T:T[1],payload:A,background:M,tooltipPosition:{x:D+I/2,y:P+$/2},parentViewBox:j},b&&b[S]&&b[S].props);return V}).filter(Boolean)}function Zle(e){var t=ws(e,Xle),r=Cle(t.stackId),n=Qn();return v.createElement(sae,{id:t.id,type:"bar"},a=>v.createElement(v.Fragment,null,v.createElement(Zse,{legendPayload:zle(t)}),v.createElement(Ule,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),v.createElement(uae,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),v.createElement(wi,{zIndex:t.zIndex},v.createElement(Jle,fi({},t,{id:a})))))}var hm=v.memo(Zle,xj);hm.displayName="Bar";var eoe=["domain","range"],toe=["domain","range"];function e3(e,t){if(e==null)return{};var r,n,a=roe(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function roe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function t3(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function RM(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=e3(e,eoe),{domain:l,range:c}=t,d=e3(t,toe);return!t3(r,l)||!t3(n,c)?!1:xj(a,d)}var noe=["dangerouslySetInnerHTML","ticks","scale"],soe=["id","scale"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(null,arguments)}function r3(e,t){if(e==null)return{};var r,n,a=aoe(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ioe(e){var t=Tr(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(gae(e)):r.current!==e&&t(xae({prev:r.current,next:e})),r.current=e},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(t(bae(r.current)),r.current=null)},[t]),null}var loe=e=>{var{xAxisId:t,className:r}=e,n=Ke(o1),a=Qn(),l="xAxis",c=Ke(N=>SD(N,l,t,a)),d=Ke(N=>jD(N,t)),h=Ke(N=>tte(N,t)),f=Ke(N=>VP(N,t));if(d==null||h==null||f==null)return null;var{dangerouslySetInnerHTML:m,ticks:g,scale:x}=e,b=r3(e,noe),{id:j,scale:w}=f,_=r3(f,soe);return v.createElement(gj,Qy({},b,_,{x:h.x,y:h.y,width:d.width,height:d.height,className:or("recharts-".concat(l," ").concat(l),r),viewBox:n,ticks:c,axisType:l}))},ooe={allowDataOverflow:en.allowDataOverflow,allowDecimals:en.allowDecimals,allowDuplicatedCategory:en.allowDuplicatedCategory,angle:en.angle,axisLine:ei.axisLine,height:en.height,hide:!1,includeHidden:en.includeHidden,interval:en.interval,minTickGap:en.minTickGap,mirror:en.mirror,orientation:en.orientation,padding:en.padding,reversed:en.reversed,scale:en.scale,tick:en.tick,tickCount:en.tickCount,tickLine:ei.tickLine,tickSize:ei.tickSize,type:en.type,xAxisId:0},coe=e=>{var t=ws(e,ooe);return v.createElement(v.Fragment,null,v.createElement(ioe,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),v.createElement(loe,t))},bj=v.memo(coe,RM);bj.displayName="XAxis";var doe=["dangerouslySetInnerHTML","ticks","scale"],uoe=["id","scale"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zy.apply(null,arguments)}function n3(e,t){if(e==null)return{};var r,n,a=hoe(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function foe(e){var t=Tr(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(vae(e)):r.current!==e&&t(yae({prev:r.current,next:e})),r.current=e},[e,t]),v.useLayoutEffect(()=>()=>{r.current&&(t(wae(r.current)),r.current=null)},[t]),null}var moe=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,l=v.useRef(null),c=v.useRef(null),d=Ke(o1),h=Qn(),f=Tr(),m="yAxis",g=Ke(T=>_D(T,t)),x=Ke(T=>nte(T,t)),b=Ke(T=>SD(T,m,t,h)),j=Ke(T=>WP(T,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!g||fj(a)||v.isValidElement(a)||j==null)){var T=l.current;if(T){var D=T.getCalculatedWidth();Math.round(g.width)!==Math.round(D)&&f(jae({id:t,width:D}))}}},[b,g,f,a,t,n,j]),g==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:w,ticks:_,scale:N}=e,C=n3(e,doe),{id:E,scale:A}=j,S=n3(j,uoe);return v.createElement(gj,Zy({},C,S,{ref:l,labelRef:c,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:or("recharts-".concat(m," ").concat(m),r),viewBox:d,ticks:b,axisType:m}))},poe={allowDataOverflow:tn.allowDataOverflow,allowDecimals:tn.allowDecimals,allowDuplicatedCategory:tn.allowDuplicatedCategory,angle:tn.angle,axisLine:ei.axisLine,hide:!1,includeHidden:tn.includeHidden,interval:tn.interval,minTickGap:tn.minTickGap,mirror:tn.mirror,orientation:tn.orientation,padding:tn.padding,reversed:tn.reversed,scale:tn.scale,tick:tn.tick,tickCount:tn.tickCount,tickLine:ei.tickLine,tickSize:ei.tickSize,type:tn.type,width:tn.width,yAxisId:0},goe=e=>{var t=ws(e,poe);return v.createElement(v.Fragment,null,v.createElement(foe,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),v.createElement(moe,t))},IM=v.memo(goe,RM);IM.displayName="YAxis";var xoe=(e,t)=>t,vj=le([xoe,Vt,FP,Xr,qD,yi,xre,an],kre),yj=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},$M=Us("mouseClick"),LM=$u();LM.startListening({actionCreator:$M,effect:(e,t)=>{var r=e.payload,n=vj(t.getState(),yj(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(xte({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var ew=Us("mouseMove"),zM=$u(),Hf=null;zM.startListening({actionCreator:ew,effect:(e,t)=>{var r=e.payload;Hf!==null&&cancelAnimationFrame(Hf);var n=yj(r);Hf=requestAnimationFrame(()=>{var a=t.getState(),l=rj(a,a.tooltip.settings.shared);if(l==="axis"){var c=vj(a,n);(c==null?void 0:c.activeIndex)!=null?t.dispatch(MD({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(DD())}Hf=null})}});function boe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var s3={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},UM=Jn({name:"rootProps",initialState:s3,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:s3.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),voe=UM.reducer,{updateOptions:yoe}=UM.actions,BM=Jn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:aue}=BM.actions,woe=BM.reducer,qM=Us("keyDown"),FM=Us("focus"),wj=$u();wj.startListening({actionCreator:qM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,l=e.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var c=nj(a,Wc(r),Gu(r),Ju(r)),d=c==null?-1:Number(c);if(!(!Number.isFinite(d)||d<0)){var h=yi(r);if(l==="Enter"){var f=am(r,"axis","hover",String(a.index));t.dispatch(Vy({active:!a.active,activeIndex:a.index,activeCoordinate:f}));return}var m=lte(r),g=m==="left-to-right"?1:-1,x=l==="ArrowRight"?1:-1,b=d+x*g;if(!(h==null||b>=h.length||b<0)){var j=am(r,"axis","hover",String(b));t.dispatch(Vy({active:!0,activeIndex:b.toString(),activeCoordinate:j}))}}}}}});wj.startListening({actionCreator:FM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var l="0",c=am(r,"axis","hover",String(l));t.dispatch(Vy({active:!0,activeIndex:l,activeCoordinate:c}))}}}});var Rs=Us("externalEvent"),HM=$u(),jv=new Map;HM.startListening({actionCreator:Rs,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,l=jv.get(a);l!==void 0&&cancelAnimationFrame(l);var c=requestAnimationFrame(()=>{try{var d=t.getState(),h={activeCoordinate:rre(d),activeDataKey:WD(d),activeIndex:Tc(d),activeLabel:VD(d),activeTooltipIndex:Tc(d),isTooltipActive:nre(d)};r(h,n)}finally{jv.delete(a)}});jv.set(a,c)}}});var joe=le([Hc],e=>e.tooltipItemPayloads),_oe=le([joe,Xu,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(d=>d.settings.graphicalItemId===n);if(a!=null){var{positions:l}=a;if(l!=null){var c=t(l,r);return c}}}),VM=Us("touchMove"),WM=$u();WM.startListening({actionCreator:VM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=rj(n,n.tooltip.settings.shared);if(a==="axis"){var l=r.touches[0];if(l==null)return;var c=vj(n,yj({clientX:l.clientX,clientY:l.clientY,currentTarget:r.currentTarget}));(c==null?void 0:c.activeIndex)!=null&&t.dispatch(MD({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(a==="item"){var d,h=r.touches[0];if(document.elementFromPoint==null||h==null)return;var f=document.elementFromPoint(h.clientX,h.clientY);if(!f||!f.getAttribute)return;var m=f.getAttribute(rY),g=(d=f.getAttribute(nY))!==null&&d!==void 0?d:void 0,x=Vc(n).find(w=>w.id===g);if(m==null||x==null||g==null)return;var{dataKey:b}=x,j=_oe(n,m,g);t.dispatch(PD({activeDataKey:b,activeIndex:m,activeCoordinate:j,activeGraphicalItemId:g}))}}}});var koe=MO({brush:Rae,cartesianAxis:_ae,chartData:rne,errorBars:Pie,graphicalItems:cae,layout:$K,legend:KY,options:Jre,polarAxis:Ese,polarOptions:woe,referenceElements:qae,rootProps:voe,tooltip:bte,zIndex:Lre}),Noe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return oK({reducer:koe,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([LM.middleware,zM.middleware,wj.middleware,HM.middleware,WM.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(YO({type:"raf"}))},devTools:{serialize:{replacer:boe},name:"recharts-".concat(r)}})};function Soe(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Qn(),l=v.useRef(null);if(a)return r;l.current==null&&(l.current=Noe(t,n));var c=Zw;return v.createElement(tle,{context:c,store:l.current},r)}function Coe(e){var{layout:t,margin:r}=e,n=Tr(),a=Qn();return v.useEffect(()=>{a||(n(MK(t)),n(DK(r)))},[n,a,t,r]),null}var Eoe=v.memo(Coe,xj);function Aoe(e){var t=Tr();return v.useEffect(()=>{t(yoe(e))},[t,e]),null}function a3(e){var{zIndex:t,isPanorama:r}=e,n=v.useRef(null),a=Tr();return v.useLayoutEffect(()=>(n.current&&a(Ire({zIndex:t,element:n.current,isPanorama:r})),()=>{a($re({zIndex:t,isPanorama:r}))}),[a,t,r]),v.createElement("g",{tabIndex:-1,ref:n})}function i3(e){var{children:t,isPanorama:r}=e,n=Ke(Sre);if(!n||n.length===0)return t;var a=n.filter(c=>c<0),l=n.filter(c=>c>0);return v.createElement(v.Fragment,null,a.map(c=>v.createElement(a3,{key:c,zIndex:c,isPanorama:r})),t,l.map(c=>v.createElement(a3,{key:c,zIndex:c,isPanorama:r})))}var Toe=["children"];function Ooe(e,t){if(e==null)return{};var r,n,a=Poe(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Poe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fm(){return fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fm.apply(null,arguments)}var Doe={width:"100%",height:"100%",display:"block"},Moe=v.forwardRef((e,t)=>{var r=v6(),n=y6(),a=E6();if(!ya(r)||!ya(n))return null;var{children:l,otherAttributes:c,title:d,desc:h}=e,f,m;return c!=null&&(typeof c.tabIndex=="number"?f=c.tabIndex:f=a?0:void 0,typeof c.role=="string"?m=c.role:m=a?"application":void 0),v.createElement(QT,fm({},c,{title:d,desc:h,role:m,tabIndex:f,width:r,height:n,style:Doe,ref:t}),l)}),Roe=e=>{var{children:t}=e,r=Ke(Wm);if(!r)return null;var{width:n,height:a,y:l,x:c}=r;return v.createElement(QT,{width:n,height:a,x:c,y:l},t)},l3=v.forwardRef((e,t)=>{var{children:r}=e,n=Ooe(e,Toe),a=Qn();return a?v.createElement(Roe,null,v.createElement(i3,{isPanorama:!0},r)):v.createElement(Moe,fm({ref:t},n),v.createElement(i3,{isPanorama:!1},r))});function Ioe(){var e=Tr(),[t,r]=v.useState(null),n=Ke(tY);return v.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),l=a.width/t.offsetWidth;br(l)&&l!==n&&e(IK(l))}},[t,e,n]),r}function o3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $oe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o3(Object(r),!0).forEach(function(n){Loe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o3(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Loe(e,t,r){return(t=zoe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zoe(e){var t=Uoe(e,"string");return typeof t=="symbol"?t:t+""}function Uoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function to(){return to=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},to.apply(null,arguments)}var Boe=()=>(une(),null);function mm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var qoe=v.forwardRef((e,t)=>{var r,n,a=v.useRef(null),[l,c]=v.useState({containerWidth:mm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:mm((n=e.style)===null||n===void 0?void 0:n.height)}),d=v.useCallback((f,m)=>{c(g=>{var x=Math.round(f),b=Math.round(m);return g.containerWidth===x&&g.containerHeight===b?g:{containerWidth:x,containerHeight:b}})},[]),h=v.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null&&typeof ResizeObserver<"u"){var{width:m,height:g}=f.getBoundingClientRect();d(m,g);var x=j=>{var{width:w,height:_}=j[0].contentRect;d(w,_)},b=new ResizeObserver(x);b.observe(f),a.current=b}},[t,d]);return v.useEffect(()=>()=>{var f=a.current;f!=null&&f.disconnect()},[d]),v.createElement(v.Fragment,null,v.createElement(Km,{width:l.containerWidth,height:l.containerHeight}),v.createElement("div",to({ref:h},e)))}),Foe=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,l]=v.useState({containerWidth:mm(r),containerHeight:mm(n)}),c=v.useCallback((h,f)=>{l(m=>{var g=Math.round(h),x=Math.round(f);return m.containerWidth===g&&m.containerHeight===x?m:{containerWidth:g,containerHeight:x}})},[]),d=v.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null){var{width:f,height:m}=h.getBoundingClientRect();c(f,m)}},[t,c]);return v.createElement(v.Fragment,null,v.createElement(Km,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",to({ref:d},e)))}),Hoe=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(Km,{width:r,height:n}),v.createElement("div",to({ref:t},e)))}),Voe=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return li(r)||li(n)?v.createElement(Foe,to({},e,{ref:t})):v.createElement(Hoe,to({},e,{ref:t}))});function Woe(e){return e===!0?qoe:Voe}var Goe=v.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:l,onContextMenu:c,onDoubleClick:d,onMouseDown:h,onMouseEnter:f,onMouseLeave:m,onMouseMove:g,onMouseUp:x,onTouchEnd:b,onTouchMove:j,onTouchStart:w,style:_,width:N,responsive:C,dispatchTouchEvents:E=!0}=e,A=v.useRef(null),S=Tr(),[T,D]=v.useState(null),[P,I]=v.useState(null),$=Ioe(),M=c1(),R=(M==null?void 0:M.width)>0?M.width:N,q=(M==null?void 0:M.height)>0?M.height:a,H=v.useCallback(Q=>{$(Q),typeof t=="function"&&t(Q),D(Q),I(Q),Q!=null&&(A.current=Q)},[$,t,D,I]),W=v.useCallback(Q=>{S($M(Q)),S(Rs({handler:l,reactEvent:Q}))},[S,l]),L=v.useCallback(Q=>{S(ew(Q)),S(Rs({handler:f,reactEvent:Q}))},[S,f]),B=v.useCallback(Q=>{S(DD()),S(Rs({handler:m,reactEvent:Q}))},[S,m]),G=v.useCallback(Q=>{S(ew(Q)),S(Rs({handler:g,reactEvent:Q}))},[S,g]),ce=v.useCallback(()=>{S(FM())},[S]),ge=v.useCallback(Q=>{S(qM(Q.key))},[S]),U=v.useCallback(Q=>{S(Rs({handler:c,reactEvent:Q}))},[S,c]),V=v.useCallback(Q=>{S(Rs({handler:d,reactEvent:Q}))},[S,d]),te=v.useCallback(Q=>{S(Rs({handler:h,reactEvent:Q}))},[S,h]),he=v.useCallback(Q=>{S(Rs({handler:x,reactEvent:Q}))},[S,x]),ye=v.useCallback(Q=>{S(Rs({handler:w,reactEvent:Q}))},[S,w]),Ne=v.useCallback(Q=>{E&&S(VM(Q)),S(Rs({handler:j,reactEvent:Q}))},[S,E,j]),ve=v.useCallback(Q=>{S(Rs({handler:b,reactEvent:Q}))},[S,b]),je=Woe(C);return v.createElement(ZD.Provider,{value:T},v.createElement(UV.Provider,{value:P},v.createElement(je,{width:R??(_==null?void 0:_.width),height:q??(_==null?void 0:_.height),className:or("recharts-wrapper",n),style:$oe({position:"relative",cursor:"default",width:R,height:q},_),onClick:W,onContextMenu:U,onDoubleClick:V,onFocus:ce,onKeyDown:ge,onMouseDown:te,onMouseEnter:L,onMouseLeave:B,onMouseMove:G,onMouseUp:he,onTouchEnd:ve,onTouchMove:Ne,onTouchStart:ye,ref:H},v.createElement(Boe,null),r)))}),Koe=["width","height","responsive","children","className","style","compact","title","desc"];function Yoe(e,t){if(e==null)return{};var r,n,a=Xoe(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Joe=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:l,className:c,style:d,compact:h,title:f,desc:m}=e,g=Yoe(e,Koe),x=ai(g);return h?v.createElement(v.Fragment,null,v.createElement(Km,{width:r,height:n}),v.createElement(l3,{otherAttributes:x,title:f,desc:m},l)):v.createElement(Goe,{className:c,style:d,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(l3,{otherAttributes:x,title:f,desc:m,ref:t},v.createElement(Hae,null,l)))});function tw(){return tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tw.apply(null,arguments)}var Qoe={top:5,right:5,bottom:5,left:5},Zoe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Qoe,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},ece=v.forwardRef(function(t,r){var n,a=ws(t.categoricalChartProps,Zoe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,categoricalChartProps:f}=t,m={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:h,eventEmitter:void 0};return v.createElement(Soe,{preloadedState:{options:m},reduxStoreName:(n=f.id)!==null&&n!==void 0?n:l},v.createElement(Mae,{chartData:f.data}),v.createElement(Eoe,{layout:a.layout,margin:a.margin}),v.createElement(Aoe,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),v.createElement(Joe,tw({},a,{ref:r})))}),tce=["axis","item"],GM=v.forwardRef((e,t)=>v.createElement(ece,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tce,tooltipPayloadSearcher:Yre,categoricalChartProps:e,ref:t}));const rce=e=>{const[t,r]=v.useState([]),[n,a]=v.useState(!0),[l,c]=v.useState(null),d=v.useCallback(async()=>{if(!e){r([]),a(!1);return}try{a(!0);const{data:f,error:m}=await me.from("lead_activities").select("*").eq("lead_id",e).order("created_at",{ascending:!1});if(m)throw m;r(f||[]),c(null)}catch(f){console.error("Error fetching activities:",f),c(f.message),r([])}finally{a(!1)}},[e]);return v.useEffect(()=>{d()},[d]),{activities:t,loading:n,error:l,refreshActivities:d,addActivity:async(f,m={})=>{if(!e)return{success:!1,error:"No lead ID"};try{const{data:{user:g}}=await me.auth.getUser();if(!g)throw new Error("Not authenticated");const{data:x}=await me.from("profiles").select("organization_id").eq("id",g.id).single();if(!(x!=null&&x.organization_id))throw new Error("No organization found");const b={lead_id:e,org_id:x.organization_id,type:f,data:m,created_by:g.id},{data:j,error:w}=await me.from("lead_activities").insert(b).select().single();if(w)throw w;return r(_=>[j,..._]),{success:!0,activity:j}}catch(g){return console.error("Error adding activity:",g),{success:!1,error:g.message}}}}},jj=({lead:e,onClose:t,updateLead:r,generateAiScore:n,teamMembers:a=[]})=>{const[l,c]=v.useState("overview"),[d,h]=v.useState(!1),[f,m]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(""),[w,_]=v.useState(!1),[N,C]=v.useState(null),[E,A]=v.useState("all"),[S,T]=v.useState("all"),[D,P]=v.useState(!1),[I,$]=v.useState(!1),[M,R]=v.useState(""),[q,H]=v.useState("10:00"),[W,L]=v.useState(""),[B,G]=v.useState(!1),{activities:ce,loading:ge,addActivity:U}=rce(e==null?void 0:e.id),[V,te]=v.useState({name:"",company:"",phone:"",email:"",website:"",status:"",source:"",value:"",ownerId:""});if(v.useEffect(()=>{var se,Te;e&&te({name:e.name||"",company:e.company||"",phone:e.phone||"",email:e.email||"",website:e.website||"",status:e.status,source:e.source,value:((se=e.value)==null?void 0:se.replace(/[^0-9.]/g,""))||"",ownerId:((Te=e.owner)==null?void 0:Te.id)||""})},[e]),v.useEffect(()=>{const se=Te=>{Te.key==="Escape"&&(f?m(!1):t())};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},[t,f]),!e)return null;const he=(()=>{let se=0;return e.name&&(se+=10),e.company&&(se+=10),e.email&&(se+=10),e.phone&&(se+=10),e.value&&e.value!=="$0"&&(se+=10),se})(),ye=(()=>{let se=0;if(e.status!=="New"&&(se+=10),e.lastActivity){const Te=(new Date().getTime()-new Date(e.lastActivity).getTime())/864e5;Te<3?se+=20:Te<7?se+=10:se+=5}return Math.min(se,30)})(),Ne=e.priority==="Hot"?20:e.priority==="Warm"?10:5,ve=Math.round(he/50*40),je=Math.round(ye/30*35),Q=Math.round(Ne/20*25),_e=ve+je+Q,de=async()=>{x(!0),C(null);try{await n(e.id),h(!0)}catch(se){console.error("AI Analysis failed",se),C(se.message||"  .   .")}finally{x(!1)}},Y=async()=>{try{const se={name:V.name,company:V.company,phone:V.phone,email:V.email,website:V.website,status:V.status,source:V.source,value:V.value?`${V.value}`:"0",owner:{id:V.ownerId}};await r(e.id,se),m(!1)}catch(se){console.error("Update failed",se)}},we=se=>{const Te=se.replace(/\D/g,"");window.location.href=`tel:${Te} `},Oe=se=>{const Te=se.replace(/\D/g,""),Ge=Te.startsWith("0")?"972"+Te.substring(1):Te;window.open(`https://wa.me/${Ge}`,"_blank")},lt=async se=>{if(e){G(!0);try{if(se==="follow_up"&&!M){$(!0),G(!1);return}const Te=se==="follow_up"&&M?new Date(`${M}T${q}:00`).toISOString():null;if(!(await fetch(`/api/leads/${e.id}/status`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:se,followUpAt:Te,notes:W||null})})).ok)throw new Error("Failed to update lead");R(""),H("10:00"),L(""),$(!1),P(!1),console.log(`Lead marked as ${se}`)}catch(Te){console.error("Quick action failed:",Te)}finally{G(!1)}}},ut=se=>{switch(se){case"New":return"success";case"Discovery":return"brand";case"Negotiation":return"warning";case"Closed":return"neutral";case"Proposal":return"brand";default:return"neutral"}},Ct=se=>{switch(se){case"New":return" ";case"Discovery":return" ";case"Negotiation":return" ";case"Proposal":return" ";case"Closed":return"";default:return se}},rr=se=>{switch(se){case"Website":return" ";case"LinkedIn":return"";case"Facebook Ads":return"";case"Referral":return"";case"Webinar":return"";default:return se}},_r=()=>{var se,Te,Ge,ht;return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 shadow-sm transition-all duration-300 relative flex flex-col justify-between group hover:shadow-md",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden rounded-2xl pointer-events-none",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-500/5 rounded-full blur-3xl -mr-10 -mt-10"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-brand-500/5 rounded-full blur-2xl -ml-5 -mb-5"})]}),s.jsxs("div",{className:"relative z-10 flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 relative z-20",children:[s.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),onClick:()=>h(!d),className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors cursor-help",children:s.jsx(ow,{className:"w-3.5 h-3.5 text-slate-400 dark:text-slate-500"})}),d&&s.jsxs("div",{className:"absolute top-3 right-8 w-64 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 p-4 z-[999999] animate-in zoom-in-95 duration-200",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-900 dark:text-white mb-2",children:"  "}),s.jsx("p",{className:"text-[11px] text-slate-500 dark:text-slate-400 mb-3 leading-relaxed",children:"       :"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:" ( )"}),s.jsxs("span",{className:"font-bold text-brand-600",children:[ve,"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-brand-500 rounded-full",style:{width:`${ve}%`}})}),s.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:" ( )"}),s.jsxs("span",{className:"font-bold text-emerald-600",children:[je,"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${je}%`}})}),s.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:"  ()"}),s.jsxs("span",{className:"font-bold text-amber-600",children:[Q,"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-amber-500 rounded-full",style:{width:`${Q}%`}})})]}),s.jsx("div",{className:"absolute top-3 -right-1.5 w-3 h-3 bg-white dark:bg-slate-800 border-t border-r border-slate-100 dark:border-slate-700 transform rotate-45"})]})]})]}),s.jsx("div",{className:`px-4 py-1 rounded-full text-[11px] font-bold tracking-wide shadow-sm text-white
                     ${_e>80?"bg-gradient-to-r from-brand-600 to-brand-500":_e>50?"bg-gradient-to-r from-amber-500 to-amber-400":"bg-gradient-to-r from-slate-500 to-slate-400"}`,children:_e>80?"HIGH INTENT":_e>50?"MEDIUM INTENT":"LOW INTENT"})]}),s.jsxs("div",{className:"relative z-0 flex items-center justify-between",children:[s.jsx("span",{className:"text-6xl font-bold text-slate-900 dark:text-white tracking-tighter drop-shadow-sm",children:_e}),s.jsxs("button",{onClick:de,disabled:g,className:`flex items-center gap-2 px-4 py-2 rounded-xl transition-all duration-300
                        ${g?"bg-slate-100 dark:bg-slate-800 text-slate-400 cursor-wait":"bg-brand-50 dark:bg-brand-900/20 text-brand-600 dark:text-brand-400 hover:bg-brand-100 dark:hover:bg-brand-900/40 hover:scale-105 active:scale-95"}`,children:[s.jsx(jr,{className:`w-4 h-4 ${g?"animate-pulse":""}`}),s.jsx("span",{className:"text-xs font-bold",children:g?"...":"  AI"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-6 shadow-sm flex flex-col relative group",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pb-2 border-b border-slate-50 dark:border-slate-800/50",children:[s.jsxs("h3",{className:"text-base font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(u0,{className:"w-4 h-4 text-brand-500"})," "]}),s.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-1.5 text-xs font-bold text-brand-600 dark:text-brand-400 hover:text-brand-800 dark:hover:text-brand-300 transition-colors px-2 py-1 rounded hover:bg-brand-50 dark:hover:bg-brand-900/20",children:[s.jsx(O3,{className:"w-3 h-3"}),""]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-y-6 gap-x-8",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider block mb-2",children:""}),s.jsx(fr,{variant:ut(e.status),className:"text-xs px-3 py-1",children:Ct(e.status)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider block mb-2",children:" "}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-900 dark:text-white font-medium",children:[s.jsx(fc,{className:"w-3.5 h-3.5 text-slate-400"}),rr(e.source)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider block mb-2",children:" "}),s.jsxs("div",{className:"flex items-center gap-2.5",children:[(se=e.owner)!=null&&se.avatar?s.jsx("img",{src:e.owner.avatar,className:"w-7 h-7 rounded-full border border-slate-200 dark:border-slate-700 object-cover shadow-sm",alt:""}):s.jsx("div",{className:"w-7 h-7 rounded-full bg-slate-200 dark:bg-slate-700"}),s.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:(Te=e.owner)==null?void 0:Te.name})]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-wider block mb-2",children:" "}),s.jsxs("span",{className:"text-sm font-medium text-slate-900 dark:text-white font-mono text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(On,{className:"w-3.5 h-3.5 text-slate-400"}),e.createdAt?new Date(e.createdAt).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"10/11/2024"]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 shadow-sm",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(Mn,{className:"w-4 h-4 text-brand-500"})," "]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 dark:text-slate-400",children:s.jsx(mt,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:""}),s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white dir-ltr text-right font-mono",children:e.phone})]})]}),s.jsx("button",{onClick:()=>we(e.phone),className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-white dark:hover:bg-slate-700 rounded-full shadow-sm opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(mt,{className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 dark:text-slate-400",children:s.jsx(xs,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:""}),s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:e.email})]})]}),s.jsx("button",{onClick:()=>window.open(`mailto:${e.email}`),className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-white dark:hover:bg-slate-700 rounded-full shadow-sm opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(o0,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-500 dark:text-slate-400",children:s.jsx(fc,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:""}),s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"www.spectra.com"})]})]}),s.jsx("button",{onClick:()=>window.open("https://google.com","_blank"),className:"p-2 text-slate-400 hover:text-brand-600 hover:bg-white dark:hover:bg-slate-700 rounded-full shadow-sm opacity-0 group-hover:opacity-100 transition-all",children:s.jsx(j3,{className:"w-4 h-4"})})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 shadow-sm",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(ja,{className:"w-4 h-4 text-brand-500"})," "]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-4",children:[s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:" "}),s.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:e.company})]}),s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-800",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"  "}),s.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:(Ge=e.value)!=null&&Ge.startsWith("")||(ht=e.value)!=null&&ht.startsWith("$")?e.value.replace("$",""):`${e.value||0}`})]})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-slate-500 mb-2 flex items-center gap-1",children:[s.jsx(Q$,{className:"w-3 h-3"}),"  "]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[["Software","SaaS","Enterprise"].map(xt=>s.jsx("span",{className:"px-2.5 py-1 bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs rounded-full border border-slate-200 dark:border-slate-700 font-medium",children:xt},xt)),(e.tags||[]).map(xt=>s.jsx("span",{className:"px-2.5 py-1 bg-brand-50 dark:bg-brand-900/20 text-brand-700 dark:text-brand-300 text-xs rounded-full border border-brand-100 dark:border-brand-800",children:xt},xt)),s.jsxs("button",{className:"text-xs text-slate-400 hover:text-brand-600 px-2 py-1 rounded-full border border-dashed border-slate-300 hover:border-brand-300 transition-colors flex items-center gap-1",children:[s.jsx(wn,{className:"w-3 h-3"})," "]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 shadow-sm",children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(Ar,{className:"w-4 h-4 text-brand-500"})," "]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>lt("follow_up"),disabled:B,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-sm font-medium rounded-xl hover:from-blue-600 hover:to-indigo-600 transition-all shadow-sm hover:shadow-md disabled:opacity-50",children:[s.jsx(On,{className:"w-4 h-4"}),"  "]}),s.jsxs("button",{onClick:()=>lt("deal_closed"),disabled:B,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-emerald-500 to-green-500 text-white text-sm font-medium rounded-xl hover:from-emerald-600 hover:to-green-600 transition-all shadow-sm hover:shadow-md disabled:opacity-50",children:[s.jsx(iw,{className:"w-4 h-4"})," "]}),s.jsxs("button",{onClick:()=>lt("not_relevant"),disabled:B,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-sm font-medium rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all disabled:opacity-50",children:[s.jsx(nu,{className:"w-4 h-4"})," "]})]})]}),I&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[99999]",onClick:()=>$(!1),children:s.jsxs("div",{onClick:xt=>xt.stopPropagation(),className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-md shadow-2xl animate-in zoom-in-95 duration-200",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(On,{className:"w-5 h-5 text-brand-500"}),"  "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:""}),s.jsx("input",{type:"date",value:M,min:new Date().toISOString().split("T")[0],onChange:xt=>R(xt.target.value),className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-xl bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white outline-none focus:ring-2 focus:ring-brand-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:""}),s.jsx("input",{type:"time",value:q,min:M===new Date().toISOString().split("T")[0]?new Date().toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):void 0,onChange:xt=>H(xt.target.value),className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-xl bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white outline-none focus:ring-2 focus:ring-brand-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:" ()"}),s.jsx("textarea",{value:W,onChange:xt=>L(xt.target.value),placeholder:"    ?",className:"w-full px-4 py-2.5 border border-slate-200 dark:border-slate-700 rounded-xl bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-white outline-none focus:ring-2 focus:ring-brand-500 resize-none h-20"})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>$(!1),className:"flex-1 px-4 py-2.5 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-medium rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-all",children:""}),s.jsx("button",{onClick:()=>lt("follow_up"),disabled:!M||B,className:"flex-1 px-4 py-2.5 bg-gradient-to-r from-brand-600 to-indigo-600 text-white font-medium rounded-xl hover:from-brand-700 hover:to-indigo-700 transition-all shadow-md disabled:opacity-50 disabled:cursor-not-allowed",children:B?"...":" "})]})]})})]})},It=se=>{switch(se){case"call_start":case"call_end":return mt;case"email_sent":return xs;case"note":return gs;case"follow_up":return On;case"status_change":return l0;case"deal_closed":return Er;case"lead_created":return jr;default:return Xn}},oe=se=>{switch(se){case"call_start":return" ";case"call_end":return" ";case"email_sent":return" ";case"note":return" ";case"follow_up":return" -";case"status_change":return" ";case"deal_closed":return" ";case"not_relevant":return" ";case"lead_created":return" ";case"summary_ready":return" ";default:return se}},Ce=se=>{const Te=new Date(se),ht=new Date().getTime()-Te.getTime(),xt=Math.floor(ht/(1e3*60*60*24));return xt===0?`, ${Te.toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})}`:xt===1?`, ${Te.toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})}`:Te.toLocaleDateString("he-IL",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},Qe=async()=>{if(b.trim()){_(!0);try{await U("note",{note:b}),j("")}catch(se){console.error("Failed to add note:",se)}finally{_(!1)}}},tt=()=>s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-4 shadow-sm",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("textarea",{value:b,onChange:se=>j(se.target.value),placeholder:" ...",className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 resize-none",rows:2}),s.jsx(be,{onClick:Qe,disabled:!b.trim()||w,className:"px-4",children:w?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):s.jsx(wn,{className:"w-4 h-4"})})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:" "}),s.jsxs("span",{className:"text-xs text-slate-400",children:[ce.length," "]})]}),ge&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(rt,{className:"w-6 h-6 text-brand-500 animate-spin"})}),!ge&&ce.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-400",children:[s.jsx(Xn,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"  "}),s.jsx("p",{className:"text-xs mt-1",children:"    "})]}),!ge&&ce.length>0&&s.jsx("div",{className:"relative border-r-2 border-slate-100 dark:border-slate-800 mr-2 space-y-6 py-2",children:ce.map((se,Te)=>{var xt,$t,wt,ft,gt,En;const Ge=It(se.type),ht=Te===0;return s.jsxs("div",{className:"relative pr-6 group",children:[s.jsx("div",{className:`absolute -right-[7px] top-1.5 w-3 h-3 rounded-full bg-white dark:bg-slate-950 border-2 ${ht?"border-brand-500":"border-slate-300 dark:border-slate-700"} group-hover:scale-110 transition-transform`}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("div",{className:"flex justify-between items-start",children:s.jsx("span",{className:`text-xs font-semibold ${ht?"text-brand-600 dark:text-brand-400":"text-slate-500 dark:text-slate-400"}`,children:Ce(se.created_at)})}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-4 rounded-xl shadow-sm group-hover:border-brand-200 dark:group-hover:border-brand-800 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ge,{className:`w-3.5 h-3.5 ${se.type==="lead_created"?"text-amber-400":"text-slate-400"}`}),s.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:oe(se.type)})]}),((xt=se.data)==null?void 0:xt.note)&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:se.data.note}),(($t=se.data)==null?void 0:$t.summary)&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed",children:se.data.summary}),((wt=se.data)==null?void 0:wt.source)&&s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[": ",se.data.source]}),((ft=se.data)==null?void 0:ft.old_status)&&((gt=se.data)==null?void 0:gt.new_status)&&s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[se.data.old_status,"  ",se.data.new_status]}),((En=se.data)==null?void 0:En.duration)&&s.jsxs(fr,{variant:"neutral",className:"text-[10px] mt-2 px-2 py-0.5",children:[Math.floor(se.data.duration/60),":",(se.data.duration%60).toString().padStart(2,"0")," "]})]})]})]},se.id)})})]}),xe=()=>{let se=[...ce];E==="calls"?se=se.filter(Ge=>Ge.type==="call_start"||Ge.type==="call_end"):E==="emails"?se=se.filter(Ge=>Ge.type==="email_sent"):E==="notes"&&(se=se.filter(Ge=>Ge.type==="note"));const Te=new Date;if(S==="week"){const Ge=new Date(Te.getTime()-6048e5);se=se.filter(ht=>new Date(ht.created_at)>=Ge)}else if(S==="month"){const Ge=new Date(Te.getTime()-2592e6);se=se.filter(ht=>new Date(ht.created_at)>=Ge)}return se},Be=()=>{const se=xe();return s.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4 bg-white dark:bg-slate-900 p-2 rounded-lg border border-slate-200 dark:border-slate-800",children:[s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{value:E,onChange:Te=>A(Te.target.value),className:"w-full text-xs bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md py-1.5 px-2 outline-none text-slate-700 dark:text-slate-200",children:[s.jsx("option",{value:"all",children:" "}),s.jsx("option",{value:"calls",children:""}),s.jsx("option",{value:"emails",children:""}),s.jsx("option",{value:"notes",children:""})]})}),s.jsx("div",{className:"relative flex-1",children:s.jsxs("select",{value:S,onChange:Te=>T(Te.target.value),className:"w-full text-xs bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-md py-1.5 px-2 outline-none text-slate-700 dark:text-slate-200",children:[s.jsx("option",{value:"all",children:" "}),s.jsx("option",{value:"week",children:""}),s.jsx("option",{value:"month",children:""})]})})]}),ge&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(rt,{className:"w-6 h-6 text-brand-500 animate-spin"})}),!ge&&se.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-400",children:[s.jsx(Xn,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"  "}),s.jsx("p",{className:"text-xs mt-1",children:"   "})]}),!ge&&se.length>0&&s.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden shadow-sm",children:s.jsxs("table",{className:"w-full text-right text-xs",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500 dark:text-slate-400 border-b border-slate-200 dark:border-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 font-medium",children:""}),s.jsx("th",{className:"px-4 py-3 font-medium",children:""}),s.jsx("th",{className:"px-4 py-3 font-medium",children:""}),s.jsx("th",{className:"px-4 py-3 font-medium",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:se.map(Te=>{var Ge,ht;return s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[s.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400",children:new Date(Te.created_at).toLocaleDateString("he-IL",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:oe(Te.type)}),s.jsx("td",{className:"px-4 py-3 text-slate-600 dark:text-slate-300",children:Te.type==="call_start"||Te.type==="call_end"?"":Te.type==="email_sent"?"":Te.type==="note"?"":""}),s.jsx("td",{className:"px-4 py-3 text-slate-500 dark:text-slate-400 truncate max-w-[150px]",children:((Ge=Te.data)==null?void 0:Ge.note)||((ht=Te.data)==null?void 0:ht.summary)||"-"})]},Te.id)})})]})})]})},pt=()=>{var Ge,ht,xt,$t,wt;const se=e.scoreDetails&&e.scoreDetails.generatedAt,Te=ft=>ft>=80?"text-emerald-600 dark:text-emerald-400":ft>=60?"text-amber-600 dark:text-amber-400":"text-rose-600 dark:text-rose-400";return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[!se&&s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-900/20 dark:to-slate-900 border border-indigo-100 dark:border-indigo-900/50 rounded-xl p-6 shadow-sm text-center",children:[s.jsx(jr,{className:"w-10 h-10 mx-auto mb-3 text-indigo-400"}),s.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 mb-2",children:" AI"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"       "}),s.jsx(be,{onClick:de,disabled:g,children:g?s.jsxs(s.Fragment,{children:[s.jsx(rt,{className:"w-4 h-4 ml-2 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jr,{className:"w-4 h-4 ml-2"}),"  "]})}),N&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-xs",children:N})]}),se&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white dark:from-indigo-900/20 dark:to-slate-900 border border-indigo-100 dark:border-indigo-900/50 rounded-xl p-6 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg text-indigo-600 dark:text-indigo-400",children:s.jsx(jr,{className:"w-4 h-4"})}),s.jsx("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 text-sm",children:"  "})]}),s.jsx("div",{className:`text-3xl font-bold ${Te(e.score||0)}`,children:e.score||0})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-4",children:[{label:"",value:(Ge=e.scoreDetails)==null?void 0:Ge.fit,icon:Mn},{label:"",value:(ht=e.scoreDetails)==null?void 0:ht.activity,icon:Br},{label:"",value:(xt=e.scoreDetails)==null?void 0:xt.intent,icon:o0}].map((ft,gt)=>s.jsxs("div",{className:"text-center p-3 bg-white dark:bg-slate-800/50 rounded-lg",children:[s.jsx(ft.icon,{className:"w-4 h-4 mx-auto mb-1 text-slate-400"}),s.jsx("div",{className:`text-lg font-bold ${Te(ft.value||0)}`,children:ft.value||0}),s.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wide",children:ft.label})]},gt))}),(($t=e.scoreDetails)==null?void 0:$t.reasoning)&&s.jsxs("div",{className:"bg-white dark:bg-slate-800/30 rounded-lg p-4 border border-indigo-100 dark:border-indigo-800",children:[s.jsx("h4",{className:"text-xs font-bold text-indigo-600 dark:text-indigo-400 mb-2",children:" AI:"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:e.scoreDetails.reasoning})]}),s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-indigo-100 dark:border-indigo-800",children:[s.jsxs("span",{className:"text-[10px] text-slate-400",children:[": ",new Date(e.scoreDetails.generatedAt).toLocaleDateString("he-IL",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),s.jsxs(be,{variant:"ghost",size:"sm",onClick:de,disabled:g,className:"text-xs",children:[g?s.jsx(rt,{className:"w-3 h-3 animate-spin"}):s.jsx(Cu,{className:"w-3 h-3 ml-1"}),""]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-6 shadow-sm",children:[s.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white mb-4",children:" "}),s.jsx("div",{className:"space-y-3",children:(wt=e.scoreDetails)!=null&&wt.recommendations&&e.scoreDetails.recommendations.length>0?e.scoreDetails.recommendations.map((ft,gt)=>s.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer group border border-transparent hover:border-slate-100 dark:hover:border-slate-700 transition-all",children:[s.jsx("input",{type:"checkbox",className:"mt-1 rounded border-slate-300 dark:border-slate-600 text-brand-600 focus:ring-brand-500 bg-white dark:bg-slate-800"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200 font-medium",children:ft})]},gt)):(e.score||0)>=70?["   ","   ","  "].map((ft,gt)=>s.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer group border border-transparent hover:border-slate-100 dark:hover:border-slate-700 transition-all",children:[s.jsx("input",{type:"checkbox",className:"mt-1 rounded border-slate-300 dark:border-slate-600 text-brand-600 focus:ring-brand-500 bg-white dark:bg-slate-800"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200 font-medium",children:ft})]},gt)):(e.score||0)>=40?["   ","  ","  "].map((ft,gt)=>s.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer group border border-transparent hover:border-slate-100 dark:hover:border-slate-700 transition-all",children:[s.jsx("input",{type:"checkbox",className:"mt-1 rounded border-slate-300 dark:border-slate-600 text-brand-600 focus:ring-brand-500 bg-white dark:bg-slate-800"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200 font-medium",children:ft})]},gt)):["    ","  ","  "].map((ft,gt)=>s.jsxs("label",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 cursor-pointer group border border-transparent hover:border-slate-100 dark:hover:border-slate-700 transition-all",children:[s.jsx("input",{type:"checkbox",className:"mt-1 rounded border-slate-300 dark:border-slate-600 text-brand-600 focus:ring-brand-500 bg-white dark:bg-slate-800"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200 font-medium",children:ft})]},gt))})]})]})]})};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 transition-opacity duration-300",onClick:t}),s.jsxs("div",{className:"fixed inset-y-0 right-0 z-50 w-full md:w-[480px] lg:w-[540px] bg-white dark:bg-slate-950 shadow-2xl shadow-slate-900/20 transform transition-transform duration-300 ease-in-out animate-in slide-in-from-right flex flex-col h-full border-l border-slate-200 dark:border-slate-800",children:[s.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-slate-900 z-20 border-b border-slate-100 dark:border-slate-800 relative",children:[s.jsxs("div",{className:"px-6 pt-6 pb-4 flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-xl font-bold text-slate-500 dark:text-slate-400 border border-slate-200 dark:border-slate-700 shadow-sm",children:e.name.charAt(0)}),s.jsxs("div",{className:"mt-1",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white leading-none mb-2",children:e.name}),s.jsxs("div",{className:"flex items-center text-sm text-slate-500 dark:text-slate-400",children:[s.jsx("span",{children:'"'}),s.jsx("span",{className:"mx-2 text-slate-300",children:""}),s.jsx("span",{children:e.company})]})]})]}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:s.jsx(Rt,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"px-6 pb-6 flex gap-3",children:[s.jsxs(be,{className:"flex-1 justify-center py-2.5",onClick:()=>we(e.phone),children:[s.jsx(mt,{className:"w-4 h-4 ml-2"}),""]}),s.jsxs(be,{variant:"secondary",className:"flex-1 justify-center py-2.5 text-emerald-700 border-emerald-200 hover:bg-emerald-50 dark:text-emerald-400 dark:border-emerald-900 dark:hover:bg-emerald-900/20",onClick:()=>Oe(e.phone),children:[s.jsx(Zd,{className:"w-4 h-4 ml-2"}),""]}),s.jsx(be,{variant:"ghost",className:"px-3 border border-slate-200 dark:border-slate-700 text-slate-500",onClick:()=>m(!0),children:s.jsx(Su,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"px-6 flex gap-8 overflow-x-auto border-t border-slate-100 dark:border-slate-800 no-scrollbar",children:[{id:"overview",label:""},{id:"activity",label:""},{id:"history",label:""},{id:"ai",label:"AI Insights",icon:jr}].map(se=>s.jsxs("button",{onClick:()=>c(se.id),className:`
                    py-3 text-sm font-medium border-b-2 transition-all whitespace-nowrap flex items-center gap-1.5
                    ${l===se.id?"border-brand-600 text-brand-600 dark:text-brand-400 dark:border-brand-400 font-bold":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:border-slate-300 dark:hover:border-slate-700"}
                  `,children:[se.icon&&s.jsx(se.icon,{className:`w-3.5 h-3.5 ${l===se.id?"fill-current":""}`}),se.label]},se.id))})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50/50 dark:bg-slate-950",children:[l==="overview"&&_r(),l==="activity"&&tt(),l==="history"&&Be(),l==="ai"&&pt()]}),f&&s.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/30 backdrop-blur-sm transition-opacity",onClick:()=>m(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-sm p-6 space-y-5 animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"  "}),s.jsx("button",{onClick:()=>m(!1),className:"text-slate-400 hover:text-slate-600",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"max-h-[60vh] overflow-y-auto space-y-4 pr-1",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:" "}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" "}),s.jsx("input",{type:"text",value:V.name,onChange:se=>te({...V,name:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsx("input",{type:"text",value:V.company,onChange:se=>te({...V,company:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:V.status,onChange:se=>te({...V,status:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm appearance-none outline-none focus:ring-2 focus:ring-brand-500",children:[s.jsx("option",{value:"New",children:" "}),s.jsx("option",{value:"Discovery",children:" "}),s.jsx("option",{value:"Negotiation",children:" "}),s.jsx("option",{value:"Proposal",children:" "}),s.jsx("option",{value:"Closed",children:""})]}),s.jsx(Et,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:V.source,onChange:se=>te({...V,source:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm appearance-none outline-none focus:ring-2 focus:ring-brand-500",children:[s.jsx("option",{value:"Website",children:" "}),s.jsx("option",{value:"LinkedIn",children:""}),s.jsx("option",{value:"Facebook Ads",children:""}),s.jsx("option",{value:"Referral",children:""}),s.jsx("option",{value:"Webinar",children:""})]}),s.jsx(Et,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]}),s.jsxs("div",{className:"space-y-3 pt-2 border-t border-slate-100 dark:border-slate-800",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider pt-2",children:" "}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsx("input",{type:"tel",value:V.phone,onChange:se=>te({...V,phone:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 dir-ltr text-right",placeholder:"050-0000000"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsx("input",{type:"email",value:V.email,onChange:se=>te({...V,email:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 dir-ltr text-right",placeholder:"name@example.com"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsx("input",{type:"url",value:V.website,onChange:se=>te({...V,website:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 dir-ltr text-right",placeholder:"www.example.com"})]})]}),s.jsxs("div",{className:"space-y-3 pt-2 border-t border-slate-100 dark:border-slate-800",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider pt-2",children:" "}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"   ()"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute top-2 right-3 text-slate-400 text-sm",children:""}),s.jsx("input",{type:"number",value:V.value,onChange:se=>te({...V,value:se.target.value}),className:"w-full pr-8 pl-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500",placeholder:"0"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:V.ownerId,onChange:se=>te({...V,ownerId:se.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm appearance-none outline-none focus:ring-2 focus:ring-brand-500",children:a.map(se=>s.jsx("option",{value:se.id,children:se.name},se.id))}),s.jsx(Et,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100 dark:border-slate-800",children:[s.jsx(be,{variant:"ghost",onClick:()=>m(!1),children:""}),s.jsxs(be,{onClick:Y,children:[s.jsx(sl,{className:"w-4 h-4 ml-2"})," "]})]})]})]})]})]})},KM=(e,t,r,n)=>{const[a,l]=v.useState([]),[c,d]=v.useState(!0),[h,f]=v.useState(null),m=async()=>{try{d(!0);let w=me.from("leads").select(`
                    *,
                    owner:owner_id (
                        id,
                        full_name,
                        avatar_url,
                        role
                    )
                `).order("created_at",{ascending:!1});t&&(w=w.eq("organization_id",t)),r&&!(n==="manager"||n==="sales_manager"||n==="admin"||n==="super_admin"||n==="platform_admin")&&(w=w.eq("owner_id",r));const{data:N,error:C}=await w;if(C)throw C;const E=(N||[]).map(A=>({id:A.id,name:A.name,company:A.company||"",phone:A.phone||"",email:A.email||"",status:A.status||"New",priority:A.priority||"Warm",value:A.value?`$${A.value.toLocaleString()}`:"$0",owner:A.owner?{id:A.owner.id,name:A.owner.full_name,avatar:A.owner.avatar_url||"https://ui-avatars.com/api/?name=User",role:A.owner.role,type:A.owner.role==="platform_admin"?"super_admin":A.owner.role||"rep"}:void 0,source:A.source,lastActivity:A.last_activity_at||A.created_at,tags:A.tags||[],createdAt:A.created_at,score:A.score||0,scoreDetails:A.score_details||null}));l(E)}catch(w){console.error("Error fetching leads:",w),f(w.message)}finally{d(!1)}},g=async w=>{var _,N;try{d(!0);const{data:{session:C},error:E}=await me.auth.getSession();if(E||!C)throw new Error("No active session");const{data:A,error:S}=await me.from("profiles").select("organization_id").eq("id",C.user.id).single();if(S||!(A!=null&&A.organization_id))throw new Error("Could not fetch user organization details.");const T=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;let D=(_=w.owner)==null?void 0:_.id;if(!D||!T.test(D))try{const M=await(await fetch(`/api/org/next-assignee?organizationId=${A.organization_id}`)).json();M.success&&M.autoDistribute&&((N=M.assignee)!=null&&N.id)?(D=M.assignee.id,console.log("[useLeads] Auto-assigned to:",M.assignee.name)):D=C.user.id}catch($){console.warn("[useLeads] Auto-distribute failed, using current user:",$),D=C.user.id}const P={name:w.name,company:w.company,status:w.status||"New",source:w.source,phone:w.phone,email:w.email,value:w.value?parseFloat(w.value.replace(/[^0-9.]/g,"")):0,tags:w.tags,owner_id:D,organization_id:A.organization_id},{error:I}=await me.from("leads").insert([P]);if(I)throw I;return await m(),{success:!0}}catch(C){throw console.error("Error saving lead:",C),C}finally{d(!1)}},x=async w=>{try{if(l(C=>C.filter(E=>E.id!==w)),!(await(await fetch(`/api/leads/${w}`,{method:"DELETE"})).json()).success)throw await m(),new Error("Delete failed");return{success:!0}}catch(_){throw console.error("Error deleting lead:",_),_}},b=async(w,_)=>{var C;const N=[...a];l(E=>E.map(A=>A.id===w?{...A,..._}:A));try{const E={};_.name!==void 0&&(E.name=_.name),_.company!==void 0&&(E.company=_.company),_.phone!==void 0&&(E.phone=_.phone),_.email!==void 0&&(E.email=_.email),_.status!==void 0&&(E.status=_.status),_.priority!==void 0&&(E.priority=_.priority),_.value!==void 0&&(E.value=typeof _.value=="string"?parseFloat(_.value.replace(/[^0-9.]/g,"")):_.value),_.tags!==void 0&&(E.tags=_.tags),_.source!==void 0&&(E.source=_.source),_.website!==void 0&&(E.website=_.website),(C=_.owner)!=null&&C.id&&(E.owner_id=_.owner.id);const{error:A}=await me.from("leads").update(E).eq("id",w);if(A)throw console.error("DB Update Error:",A),A;if(A)throw A;return{success:!0}}catch(E){throw console.error("Error updating lead:",E),l(N),E}};return v.useEffect(()=>{m()},[t]),{leads:a,loading:c,error:h,refreshLeads:m,addLead:g,deleteLead:x,updateLead:b,generateAiScore:async w=>{try{const _=await fetch(`/api/leads/${w}/ai-score`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!_.ok){const C=await _.json().catch(()=>({}));throw new Error(C.error||`Server error: ${_.status}`)}const N=await _.json();return l(C=>C.map(E=>E.id===w?{...E,score:N.score,scoreDetails:N.scoreDetails}:E)),N}catch(_){throw console.error("Failed to generate AI score:",_),_}}}},YM=(e,t)=>{const[r,n]=v.useState([]),[a,l]=v.useState(!0),[c,d]=v.useState(null),h=async()=>{try{l(!0);let g=me.from("tasks").select(`
                    *,
                    type,
                    priority,
                    owner_id,
                    lead:lead_id (
                        id,
                        name
                    )
                `).order("due_date",{ascending:!0});e&&(g=g.eq("organization_id",e)),t&&(g=g.eq("owner_id",t));const{data:x,error:b}=await g;if(b)throw b;const j=(x||[]).map(w=>{var N;let _="";try{_=new Date(w.due_date).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"})}catch{_="12:00"}return{id:w.id,title:w.title,leadName:((N=w.lead)==null?void 0:N.name)||"",dueDate:_,dueTime:w.due_time?w.due_time.substring(0,5):"10:00",rawDate:w.due_date,completed:w.completed,type:w.type,priority:w.priority,ai_reason:w.ai_reason,ownerId:w.owner_id}});n(j)}catch(g){console.error("Error fetching tasks:",g),d(g.message)}finally{l(!1)}},f=async(g,x)=>{const b=x!==void 0?!x:!0;n(j=>j.map(w=>w.id===g?{...w,completed:b}:w));try{const{error:j}=await me.from("tasks").update({completed:b}).eq("id",g);j&&(console.error("Error toggling task:",j),n(w=>w.map(_=>_.id===g?{..._,completed:!b}:_)))}catch(j){console.error("Error toggling task:",j),n(w=>w.map(_=>_.id===g?{..._,completed:!b}:_))}},m=async(g,x,b)=>{try{const{data:{user:j},error:w}=await me.auth.getUser();let _=j;if(!_){const{data:{session:E},error:A}=await me.auth.getSession();E!=null&&E.user?(console.log("Recovered user from session:",E.user.id),_=E.user):console.error("Auth Check Failed:",{userError:w,sessionError:A})}if(!_)throw new Error("No user logged in. Please refresh or log in again.");console.log("Adding task for user:",_.id,{title:g,leadId:x,dueDate:b});const{error:N,data:C}=await me.from("tasks").insert({title:g,lead_id:x,due_date:b||new Date,owner_id:_.id,completed:!1}).select();if(C&&console.log("Task added successfully:",C),N)throw console.error("Supabase Error adding task:",N),N;h()}catch(j){console.error("Error adding task:",j)}};return v.useEffect(()=>{h()},[e,t]),{tasks:r,loading:a,error:c,toggleTask:f,addTask:m,refreshTasks:h}},XM=({isOpen:e,onClose:t,title:r,children:n})=>{const[a,l]=v.useState(!1);return v.useEffect(()=>(l(!0),e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!a||!e?null:Cm.createPortal(s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-md border border-slate-200 dark:border-slate-800 animate-in zoom-in-95 duration-200 relative",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:r}),s.jsx("button",{onClick:t,className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"p-4",children:n})]})}),document.body)},JM=({isOpen:e,onClose:t,onAdd:r})=>{const[n,a]=v.useState(""),[l,c]=v.useState(new Date),[d,h]=v.useState("");Ur.useEffect(()=>{if(e){const g=new Date;g.setHours(12,0,0,0),c(g),a(""),h("")}},[e]);const f=g=>{if(g.preventDefault(),!n.trim())return;if(!l){console.error("[AddTask] No date selected!");return}if(console.log("[AddTask] Submitting:",{title:n.trim(),dueDate:l==null?void 0:l.toISOString(),rawDate:l,isValidDate:l&&!isNaN(l.getTime())}),isNaN(l.getTime())){console.error("[AddTask] Invalid date!");return}const x=d.trim()?`${n.trim()} | ${d.trim()}`:n.trim();r(x,void 0,l),a(""),h(""),t()},m=[" ","  ","  ","  "];return s.jsx(XM,{isOpen:e,onClose:t,title:"",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-14 h-14 mx-auto bg-gradient-to-br from-brand-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg shadow-brand-500/25 mb-4",children:s.jsx(C3,{className:"w-7 h-7 text-white"})}),s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:" "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"    "})]}),s.jsxs("form",{onSubmit:f,className:"space-y-5",children:[s.jsx("div",{children:s.jsx(OT,{value:l,onChange:c,minDate:new Date,label:" ",showTime:!0})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-200 mb-2",children:"  ?"}),s.jsx("input",{type:"text",value:n,onChange:g=>a(g.target.value),className:"w-full rounded-xl border-2 border-slate-200 dark:border-slate-700 p-3.5 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-right placeholder:text-slate-400",placeholder:"  ...",autoFocus:!0}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:m.map((g,x)=>s.jsx("button",{type:"button",onClick:()=>a(g),className:"text-xs px-3 py-1.5 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-brand-50 hover:text-brand-600 dark:hover:bg-brand-900/30 dark:hover:text-brand-400 transition-colors border border-transparent hover:border-brand-200",children:g},x))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-200 mb-2 flex items-center gap-2",children:[s.jsx(jr,{className:"w-4 h-4 text-amber-500"})," ()"]}),s.jsx("textarea",{value:d,onChange:g=>h(g.target.value),rows:3,className:"w-full rounded-xl border-2 border-slate-200 dark:border-slate-700 p-3 bg-white dark:bg-slate-800 text-slate-900 dark:text-white focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none transition-all text-right placeholder:text-slate-400 resize-none",placeholder:" ?  ?  ..."})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsxs(be,{type:"submit",className:"flex-1 py-3 bg-gradient-to-r from-brand-600 to-brand-500 hover:from-brand-700 hover:to-brand-600 shadow-lg shadow-brand-500/25 font-semibold",disabled:!n.trim(),children:[s.jsx(At,{className:"w-4 h-4 ml-2"})," "]}),s.jsx(be,{variant:"ghost",onClick:t,type:"button",className:"px-6 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200",children:""})]})]}),s.jsx("div",{className:"absolute -top-2 -right-2 w-20 h-20 bg-gradient-to-br from-brand-500/10 to-purple-500/10 rounded-full blur-2xl pointer-events-none"})]})})},nce=({onStartCall:e,isDarkMode:t,onNavigate:r,userName:n,centerType:a="sales"})=>{var Ct,rr,_r,It;const c=(()=>{const oe=new Date().getHours();return oe>=5&&oe<12?" ":oe>=12&&oe<18?" ":oe>=18&&oe<22?" ":" "})(),[d,h]=v.useState("day"),[f,m]=v.useState(" "),[g,x]=v.useState(!1),[b,j]=v.useState(null);Lw();const{leads:w}=KM(),{tasks:_=[],toggleTask:N,addTask:C,loading:E}=YM(),[A,S]=v.useState("day"),T=Ur.useMemo(()=>{const oe=new Date,Ce=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate()),Qe=new Date(Ce);Qe.setDate(Qe.getDate()+1);const tt=new Date(Ce);tt.setDate(tt.getDate()-tt.getDay());const xe=new Date(tt);xe.setDate(xe.getDate()+7);const Be=new Date(oe.getFullYear(),oe.getMonth(),1),pt=new Date(oe.getFullYear(),oe.getMonth()+1,1);return _.filter(Te=>{if(!Te.rawDate)return A==="day";const Ge=new Date(Te.rawDate),ht=!Te.completed&&Ge<Ce;if(A==="overdue")return ht;if(ht)return!1;switch(A){case"day":return Ge>=Ce&&Ge<Qe;case"week":return Ge>=tt&&Ge<xe;case"month":return Ge>=Be&&Ge<pt;default:return!1}}).sort((Te,Ge)=>Te.completed!==Ge.completed?Te.completed?1:-1:!Te.rawDate||!Ge.rawDate?0:new Date(Te.rawDate).getTime()-new Date(Ge.rawDate).getTime())},[_,A]),D=Ur.useMemo(()=>{const oe=new Date,Ce=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate());return _.filter(Qe=>!Qe.rawDate||Qe.completed?!1:new Date(Qe.rawDate)<Ce).length},[_]),[P,I]=v.useState(null),[$,M]=v.useState(!0),[R,q]=v.useState(null),[H,W]=v.useState(!0);v.useEffect(()=>{(async()=>{M(!0);try{const Qe=await(await fetch(`/api/stats/daily?range=${d}`)).json();Qe.success&&I(Qe.stats)}catch(Ce){console.error("[Dashboard] Stats fetch error:",Ce)}finally{M(!1)}})()},[d]),v.useEffect(()=>{(async()=>{try{const Qe=await(await fetch("/api/coaching/daily")).json();Qe.success&&Qe.coaching&&q(Qe.coaching)}catch(Ce){console.error("[Dashboard] Coaching fetch error:",Ce)}finally{W(!1)}})()},[]);const[L,B]=v.useState([]),[G,ce]=v.useState(!0);v.useEffect(()=>{(async()=>{try{const Qe=await(await fetch("/api/stats/weekly-performance")).json();Qe.success&&Qe.data&&B(Qe.data)}catch(Ce){console.error("[Dashboard] Weekly performance fetch error:",Ce)}finally{ce(!1)}})()},[]);const ge=v.useRef(null);v.useEffect(()=>{function oe(Ce){ge.current&&!ge.current.contains(Ce.target)&&x(!1)}return document.addEventListener("mousedown",oe),()=>{document.removeEventListener("mousedown",oe)}},[]);const U=oe=>{h(oe)},V=oe=>{m(oe),x(!1)},te=oe=>{const Ce=w.find(Qe=>Qe.name===oe);j(Ce||{id:`temp-${Date.now()}`,name:oe,company:" ",phone:"",email:"",status:"New",priority:"Warm",value:"$0",tags:[]})},he=t?"#6366f1":"#4f46e5",ye=t?"#10b981":"#059669",Ne=[" "," ","",""],ve=oe=>oe.includes("")?s.jsx(rl,{className:"w-4 h-4 text-slate-300 dark:text-slate-600"}):oe.includes("")?s.jsx(On,{className:"w-4 h-4 text-slate-300 dark:text-slate-600"}):oe.includes("")?s.jsx(At,{className:"w-4 h-4 text-slate-300 dark:text-slate-600"}):s.jsx(mt,{className:"w-4 h-4 text-slate-300 dark:text-slate-600"}),je=oe=>{const Ce=Math.floor(oe/60),Qe=oe%60;return`${Ce}:${Qe.toString().padStart(2,"0")}`},Q=d==="day"?"":d==="week"?"":"",_e=[{id:"calls",label:`"  ${Q}`,value:P?String(P.calls.total):"0",target:d==="day"?10:d==="week"?50:200,trend:P?`${P.calls.answered} `:"...",subtext:P&&P.calls.total>0?`${Math.round(P.calls.answered/P.calls.total*100)}% `:"",color:"bg-indigo-500"},{id:"answered",label:" ",value:P?String(P.calls.answered):"0",target:d==="day"?8:d==="week"?40:150,trend:"",subtext:' " ',color:"bg-emerald-500"},{id:"newLeads",label:" ",value:P?String(P.newLeads):"0",target:d==="day"?5:d==="week"?25:100,trend:Q,subtext:" ",color:"bg-purple-500"},{id:"avgTime",label:"  ",value:P?je(P.avgCallTime):"0:00",target:300,trend:"",subtext:"",color:"bg-amber-500"}],de=(P==null?void 0:P.qualityScore)||0,Y=[..._e].reverse(),[we,Oe]=v.useState(!1),lt=new Date().toISOString().split("T")[0],ut=_.filter(oe=>{const Ce=oe.rawDate&&oe.rawDate.startsWith(lt);return d==="day"&&!Ce?!1:f===" "||f===" "||f===""?!0:f===""?oe.title.includes(""):!0}).map(oe=>{const Qe=(oe.rawDate?new Date(oe.rawDate):new Date).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"});return{id:oe.id,time:Qe,leadName:oe.leadName,outcome:oe.title,status:oe.completed?"Completed":"Scheduled",originalTask:oe}}).sort((oe,Ce)=>oe.time.localeCompare(Ce.time));return s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 lg:p-10 bg-transparent",dir:"rtl",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4 animate-slide-up",children:[s.jsxs("div",{className:"text-right flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight flex items-center gap-2",children:[c,", ",n||""," "]}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"     !"})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-amber-50 to-amber-100 dark:from-amber-900/30 dark:to-amber-800/30 border border-amber-200/60 dark:border-amber-700/50 rounded-xl px-3 py-2",children:[s.jsx(rl,{className:"w-4 h-4 text-amber-500"}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-300 block",children:" "}),s.jsx("span",{className:"text-lg font-bold text-amber-700 dark:text-amber-200",children:de})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 relative z-20",children:[s.jsx("div",{className:"flex items-center bg-slate-100 dark:bg-slate-800 p-1 rounded-lg w-full sm:w-auto",children:[{id:"day",label:""},{id:"week",label:""},{id:"month",label:""}].map(oe=>s.jsx("button",{onClick:()=>U(oe.id),className:`
                    flex-1 sm:flex-none px-4 py-1.5 text-xs font-medium rounded-md transition-all
                    ${d===oe.id?"bg-brand-600 text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}
                  `,children:oe.label},oe.id))}),s.jsxs(be,{onClick:e,className:"w-full sm:w-auto shadow-lg shadow-brand-500/25 hover:shadow-brand-500/40 hover:-translate-y-0.5 transition-all py-2.5 px-5",children:[s.jsx(mt,{className:"w-4 h-4 ml-2"}),"  "]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-10",children:Y.map((oe,Ce)=>s.jsxs("div",{className:"group bg-white dark:bg-slate-900 rounded-2xl p-5 shadow-card hover:shadow-card-hover border border-slate-200 dark:border-slate-800 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute -right-10 -top-10 w-24 h-24 bg-brand-500/5 rounded-full blur-2xl group-hover:bg-brand-500/10 transition-colors"}),s.jsxs("div",{className:"flex flex-col h-full justify-between relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:oe.label}),ve(oe.label)]}),s.jsx("div",{className:"mb-4",children:s.jsx("span",{className:"text-3xl font-bold text-slate-900 dark:text-white tracking-tight font-mono",children:oe.value})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-brand-500 to-brand-400 rounded-full transition-all duration-1000 ease-out",style:{width:`${Math.min(parseInt(oe.value)/(oe.target||100)*100,100)}%`}})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[11px] text-slate-400 font-medium",children:oe.subtext}),oe.trend&&s.jsx("span",{className:"text-[11px] font-bold flex items-center text-brand-600 dark:text-brand-400",children:oe.trend})]})]})]})]},Ce))}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8 mb-10",children:[s.jsxs("div",{className:"lg:col-span-8 bg-white dark:bg-slate-900 rounded-2xl shadow-card border border-slate-100 dark:border-slate-800 flex flex-col min-h-[420px] overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-5 border-b border-slate-50 dark:border-slate-800 flex items-center justify-between bg-slate-50/30 dark:bg-slate-800/20",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("h2",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-base",children:['" ',d==="day"?"":d==="week"?" ":" "]}),s.jsxs(fr,{variant:"neutral",className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-sm",children:[ut.length," "]})]}),s.jsxs("div",{className:"relative w-full sm:w-auto",ref:ge,children:[s.jsxs("button",{onClick:()=>x(!g),className:"w-full sm:w-40 flex items-center justify-between px-3 py-1.5 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg text-xs font-medium text-slate-700 dark:text-slate-200 hover:border-brand-300 dark:hover:border-brand-700 transition-colors shadow-sm",children:[s.jsx("span",{className:"truncate",children:f}),s.jsx(Et,{className:`w-3 h-3 text-slate-400 transition-transform ${g?"rotate-180":""}`})]}),g&&s.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 py-1.5 animate-in fade-in zoom-in-95 duration-200 text-right",children:Ne.map(oe=>s.jsxs("button",{onClick:()=>V(oe),className:`
                        w-full text-right px-4 py-2 text-xs flex items-center justify-between transition-colors
                        ${f===oe?"bg-brand-50/50 dark:bg-brand-900/10 text-brand-600 dark:text-brand-400 font-medium":"text-slate-700 dark:text-slate-200 hover:bg-slate-50 dark:hover:bg-slate-800"}
                      `,children:[oe,f===oe&&s.jsx(Er,{className:"w-3 h-3"})]},oe))})]})]}),s.jsx("div",{className:"overflow-x-auto flex-1",children:s.jsxs("table",{className:"w-full text-right border-collapse",children:[s.jsx("thead",{className:"bg-slate-50/80 dark:bg-slate-800/50 text-[11px] text-slate-500 uppercase tracking-wider border-b border-slate-100 dark:border-slate-800 sticky top-0 z-10 backdrop-blur-sm",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 font-semibold w-24",children:""}),s.jsx("th",{className:"px-6 py-3 font-semibold",children:a==="support"?" / ":""}),s.jsx("th",{className:"px-6 py-3 font-semibold",children:" / "}),s.jsx("th",{className:"px-6 py-3 font-semibold",children:""}),s.jsx("th",{className:"px-6 py-3 font-semibold w-24",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-800/50",children:ut.map((oe,Ce)=>s.jsxs("tr",{className:"group hover:bg-brand-50/30 dark:hover:bg-brand-900/10 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 align-middle",children:s.jsx("span",{className:"font-mono text-sm text-slate-600 dark:text-slate-400 font-medium bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded-md",children:oe.time})}),s.jsxs("td",{className:"px-6 py-4 align-middle",children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-white text-sm group-hover:text-brand-700 transition-colors",children:oe.leadName}),s.jsx("div",{className:"text-xs text-slate-400",children:'",  "'})]}),s.jsx("td",{className:"px-6 py-4 align-middle",children:s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:oe.outcome})}),s.jsx("td",{className:"px-6 py-4 align-middle",children:oe.status==="In Progress"?s.jsxs("div",{className:"flex items-center gap-1.5 text-brand-600 dark:text-brand-400 font-bold text-xs animate-pulse",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-500"})," "]}):oe.status==="Scheduled"?s.jsx("span",{className:"text-xs font-medium text-slate-500",children:""}):s.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-600 dark:text-emerald-400 text-xs font-medium",children:[s.jsx(At,{className:"w-3.5 h-3.5"}),""]})}),s.jsx("td",{className:"px-6 py-4 align-middle",children:oe.status==="In Progress"?s.jsx(be,{size:"sm",onClick:e,className:"h-8 px-4 shadow-lg shadow-brand-500/20 text-xs",children:" "}):oe.status==="Scheduled"?s.jsxs("button",{onClick:e,className:"h-8 px-3 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 text-xs hover:bg-white dark:hover:bg-slate-800 hover:border-brand-300 hover:text-brand-600 transition-all flex items-center gap-1.5 bg-slate-50 dark:bg-slate-900",children:[s.jsx(mt,{className:"w-3 h-3"})," "]}):s.jsx("button",{onClick:()=>te(oe.leadName),className:"text-xs text-slate-400 hover:text-brand-600 underline decoration-slate-300 hover:decoration-brand-300 transition-all",children:""})})]},oe.id))})]})})]}),s.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-[#1e1b4b] to-[#312e81] rounded-2xl shadow-xl shadow-indigo-900/20 p-6 text-white relative overflow-hidden min-h-[260px] flex flex-col border border-white/5",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 rounded-full -mr-20 -mt-20 blur-3xl mix-blend-overlay"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-purple-500/20 rounded-full -ml-10 -mb-10 blur-3xl mix-blend-overlay"}),s.jsxs("div",{className:"relative z-10 flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[s.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md border border-white/10 shadow-lg",children:s.jsx(Qd,{className:"w-5 h-5 text-yellow-300 fill-yellow-300/20"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg leading-tight",children:" "}),s.jsx("p",{className:"text-xs text-indigo-200 opacity-80",children:H?" ...":"   "})]})]}),s.jsx("div",{className:"space-y-3 flex-1",children:H?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white/30 border-t-yellow-400 rounded-full"})}):((Ct=R==null?void 0:R.dailyFocus)==null?void 0:Ct.length)>0?R.dailyFocus.map((oe,Ce)=>s.jsxs("div",{className:"group flex items-start gap-3 bg-white/5 hover:bg-white/10 transition-all duration-300 backdrop-blur-sm rounded-xl p-3.5 border border-white/5 hover:border-white/20 cursor-default hover:translate-x-1",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-yellow-400 mt-2 shadow-[0_0_8px_rgba(250,204,21,0.6)]"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm leading-relaxed font-medium text-indigo-50/90 group-hover:text-white",children:oe.text}),oe.why&&s.jsx("p",{className:"text-xs text-indigo-300/60 mt-1",children:oe.why})]})]},Ce)):s.jsx("div",{className:"text-center text-indigo-200/60 py-4 text-sm",children:"   "})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-6 shadow-sm flex-1 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-amber-400 to-amber-200"}),s.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white mb-4 text-sm flex items-center gap-2",children:[s.jsx(Ar,{className:"w-4 h-4 text-amber-500"}),((rr=R==null?void 0:R.goldenTip)==null?void 0:rr.title)||" "]}),s.jsxs("div",{className:"relative z-10",children:[H?s.jsxs("div",{className:"flex items-center gap-2 py-4",children:[s.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-slate-200 border-t-amber-500 rounded-full"}),s.jsx("span",{className:"text-sm text-slate-400",children:" ..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 leading-relaxed font-medium italic",children:['"',((_r=R==null?void 0:R.goldenTip)==null?void 0:_r.content)||"         .",'"']}),((It=R==null?void 0:R.goldenTip)==null?void 0:It.example)&&s.jsxs("div",{className:"mt-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-100 dark:border-amber-800/30",children:[s.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 font-medium",children:" :"}),s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:R.goldenTip.example})]})]}),s.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center",children:s.jsx("span",{className:"text-[10px] text-white font-bold",children:"AI"})}),s.jsx("span",{className:"text-xs text-slate-400",children:"AI Coach Analysis"})]})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8",children:[s.jsxs("div",{className:"lg:col-span-4 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-card p-5 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center",children:s.jsx(Er,{className:"w-4 h-4 text-white"})}),s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-base",children:""})]}),s.jsx(be,{variant:"ghost",size:"sm",className:"text-xs h-7 px-2.5 bg-brand-50 dark:bg-brand-900/20 text-brand-600 dark:text-brand-400 hover:bg-brand-100 dark:hover:bg-brand-900/40 font-medium rounded-lg",onClick:()=>r==null?void 0:r("tasks"),children:" "})]}),s.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 dark:bg-slate-800 rounded-lg mb-4",children:["day","week","month","overdue"].map(oe=>s.jsxs("button",{onClick:()=>S(oe),className:`flex-1 py-1.5 px-2 text-xs font-medium rounded-md transition-all relative ${A===oe?oe==="overdue"?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 shadow-sm":"bg-white dark:bg-slate-700 text-brand-600 dark:text-brand-400 shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"}`,children:[oe==="day"?"":oe==="week"?"":oe==="month"?"":"",oe==="overdue"&&D>0&&s.jsx("span",{className:"absolute -top-2 -left-1 min-w-[18px] h-[18px] px-1 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center shadow-sm",children:D})]},oe))}),s.jsx("div",{className:"space-y-2 flex-1 overflow-y-auto max-h-[280px] scrollbar-thin",children:E?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-slate-200 border-t-brand-500 rounded-full"})}):T.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center mb-3",children:s.jsx(Er,{className:"w-6 h-6 text-slate-400"})}),s.jsxs("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium",children:["  ",A==="day"?"":A==="week"?"":""]}),s.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"  !"})]}):T.map(oe=>s.jsxs("div",{className:`
                    group flex items-start gap-3 p-3 rounded-xl transition-all cursor-pointer border
                    ${oe.completed?"bg-slate-50 dark:bg-slate-800/50 border-slate-100 dark:border-slate-700/50":"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/50 border-slate-100 dark:border-slate-700 hover:border-brand-200 dark:hover:border-brand-800 shadow-sm hover:shadow-md"}
                  `,onClick:()=>N(oe.id,oe.completed),children:[s.jsx("div",{className:"mt-0.5 flex-shrink-0",children:s.jsx("div",{className:`
                      w-5 h-5 rounded-lg border-2 flex items-center justify-center transition-all
                      ${oe.completed?"bg-emerald-500 border-emerald-500":"border-slate-300 dark:border-slate-600 group-hover:border-brand-500 group-hover:bg-brand-50 dark:group-hover:bg-brand-900/20"}
                    `,children:oe.completed&&s.jsx(Er,{className:"w-3 h-3 text-white"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:`text-sm font-semibold leading-tight transition-colors ${oe.completed?"text-slate-400 dark:text-slate-500 line-through":"text-slate-800 dark:text-slate-200 group-hover:text-brand-600"}`,children:oe.title}),s.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[s.jsx("span",{className:"text-[11px] text-slate-500 dark:text-slate-400 px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md font-medium",children:oe.leadName}),s.jsxs("span",{className:"text-[11px] text-slate-400 dark:text-slate-500 flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3"}),oe.dueDate]})]})]})]},oe.id))}),s.jsx(be,{variant:"secondary",size:"sm",className:"w-full mt-4 border-dashed border-2 text-slate-500 hover:text-brand-600 hover:border-brand-300 hover:bg-brand-50/50 dark:hover:bg-brand-900/10 py-2.5 font-medium",onClick:()=>Oe(!0),children:"+   "}),s.jsx(JM,{isOpen:we,onClose:()=>Oe(!1),onAdd:C})]}),s.jsxs("div",{className:"lg:col-span-8 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-card p-6 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-base",children:" "}),s.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:G?" ...":`" ${L.reduce((oe,Ce)=>oe+Ce.calls,0)}  `})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"w-2.5 h-2.5 bg-brand-500 rounded-full"}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:'" '})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"w-2.5 h-2.5 bg-emerald-500 rounded-full"}),s.jsx("span",{className:"text-slate-600 dark:text-slate-300",children:" "})]})]})]}),G?s.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"animate-spin w-8 h-8 border-3 border-slate-200 border-t-brand-500 rounded-full"}),s.jsx("span",{className:"text-sm text-slate-400",children:" ..."})]})}):L.length>0?s.jsx("div",{style:{width:"100%",height:260},children:s.jsx(g6,{width:"100%",height:"100%",children:s.jsxs(GM,{data:L,barGap:8,barCategoryGap:"20%",children:[s.jsx(bj,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:t?"#94a3b8":"#64748b",fontSize:12,fontWeight:600},dy:10}),s.jsx(rM,{cursor:{fill:t?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",radius:8},content:({active:oe,payload:Ce})=>{if(oe&&Ce&&Ce.length){const Qe=Ce[0].payload;return s.jsxs("div",{className:`px-4 py-3 rounded-xl shadow-lg border ${t?"bg-slate-800 border-slate-700":"bg-white border-slate-200"}`,children:[s.jsxs("p",{className:`font-bold text-sm mb-2 ${t?"text-white":"text-slate-900"}`,children:[" ",Qe.name]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"text-xs flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-brand-500 rounded-full"}),s.jsxs("span",{className:t?"text-slate-300":"text-slate-600",children:[": ",Qe.calls]})]}),s.jsxs("p",{className:"text-xs flex items-center gap-2",children:[s.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),s.jsxs("span",{className:t?"text-slate-300":"text-slate-600",children:[": ",Qe.successful]})]}),Qe.calls>0&&s.jsxs("p",{className:"text-xs font-medium text-amber-500 mt-1",children:[Qe.rate,"% "]})]})]})}return null}}),s.jsx(hm,{dataKey:"calls",radius:[8,8,0,0],barSize:32,fill:he,name:" "}),s.jsx(hm,{dataKey:"successful",radius:[8,8,0,0],barSize:32,fill:ye,name:""})]})})}):s.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[200px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(mt,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"   "})]})})]})]}),s.jsx(jj,{lead:b,onClose:()=>j(null)})]})},QM=v.createContext(null),ZM=()=>{const e=v.useContext(QM);if(!e)throw new Error("useDashboardCustomization must be used within DashboardCustomizationProvider");return e},sce=({orgId:e,children:t})=>{const[r,n]=v.useState([]),[a,l]=v.useState(["calls","conversions","avgDuration","aiScore"]),[c,d]=v.useState(!0),h=v.useRef(null),f=v.useRef(r),m=v.useRef(a);f.current=r,m.current=a,v.useEffect(()=>{x()},[e]);const g=v.useCallback(async()=>{const{data:{session:C}}=await me.auth.getSession();return C!=null&&C.access_token?{Authorization:`Bearer ${C.access_token}`,"Content-Type":"application/json"}:null},[]),x=async()=>{try{const C=await g();if(!C){d(!1);return}const E=e?`?organizationId=${e}`:"",S=await(await fetch(`/api/dashboard/layout${E}`,{headers:C})).json();S.success&&(n(S.hidden_widgets||[]),l(S.kpi_selection||["calls","conversions","avgDuration","aiScore"]))}catch(C){console.error("[DashboardCustomization] Load error:",C)}finally{d(!1)}},b=v.useCallback(async(C,E)=>{try{const A=await g();if(!A)return;await fetch("/api/dashboard/layout",{method:"PUT",headers:A,body:JSON.stringify({organizationId:e,hidden_widgets:C,kpi_selection:E})})}catch(A){console.error("[DashboardCustomization] Save error:",A)}},[e,g]),j=v.useCallback((C,E)=>{h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{b(C,E)},500)},[b]),w=v.useCallback(C=>{const E=f.current.includes(C)?f.current.filter(A=>A!==C):[...f.current,C];n(E),j(E,m.current)},[j]),_=v.useCallback(C=>{l(C),j(f.current,C)},[j]),N=v.useCallback(async()=>{try{const C=await g();if(!C)return;const E=e?`?organizationId=${e}`:"";await fetch(`/api/dashboard/layout${E}`,{method:"DELETE",headers:C}),n([]),l(["calls","conversions","avgDuration","aiScore"])}catch(C){console.error("[DashboardCustomization] Reset error:",C)}},[e,g]);return s.jsx(QM.Provider,{value:{hiddenWidgets:r,kpiSelection:a,loading:c,toggleWidgetVisibility:w,updateKPISelection:_,resetToDefaults:N},children:t})},ace=[{id:"kpis",label:"  (KPIs)"},{id:"live-activity",label:" "},{id:"goal-progress",label:" "},{id:"ai-insights",label:" AI"},{id:"pipeline",label:" "},{id:"team-performance",label:" "},{id:"attention-queue",label:"  "}],ice=[{id:"calls",label:" "},{id:"conversions",label:"  ()"},{id:"avgDuration",label:" "},{id:"aiScore",label:" AI"}],lce=()=>{const[e,t]=v.useState(!1),{hiddenWidgets:r,kpiSelection:n,toggleWidgetVisibility:a,updateKPISelection:l,resetToDefaults:c}=ZM();return s.jsxs(s.Fragment,{children:[s.jsxs(be,{variant:"secondary",size:"sm",onClick:()=>t(!0),className:"flex items-center gap-2",children:[s.jsx(Eu,{className:"w-4 h-4"}),""]}),s.jsx(XM,{isOpen:e,onClose:()=>t(!1),title:"   Dashboard",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3 text-slate-900 dark:text-white",children:" "}),s.jsx("div",{className:"space-y-1",children:ace.map(d=>{const h=r.includes(d.id);return s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 p-2.5 rounded-lg transition-colors",children:[s.jsx("input",{type:"checkbox",checked:!h,onChange:()=>a(d.id),className:"w-4 h-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),s.jsx("span",{className:`text-sm ${h?"text-slate-400":"text-slate-700 dark:text-slate-200"}`,children:d.label})]},d.id)})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3 text-slate-900 dark:text-white",children:"  (4 )"}),s.jsx("div",{className:"space-y-1",children:ice.map(d=>{const h=n.includes(d.id);return s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-800 p-2.5 rounded-lg transition-colors",children:[s.jsx("input",{type:"checkbox",checked:h,disabled:!h&&n.length>=4,onChange:()=>{const f=h?n.filter(m=>m!==d.id):[...n,d.id];l(f)},className:"w-4 h-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:d.label})]},d.id)})})]}),s.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:s.jsxs(be,{variant:"secondary",onClick:()=>{confirm("      ?      .")&&(c(),t(!1))},className:"flex items-center gap-2 text-rose-600 hover:text-rose-700 hover:bg-rose-50 dark:hover:bg-rose-900/20",children:[s.jsx(Cu,{className:"w-4 h-4"}),"   "]})})]})})]})},oce=({teamProgress:e,loading:t})=>{const r=[{label:"",current:e.calls.current,target:e.calls.target,percentage:e.calls.percentage,icon:Ar,color:"purple"},{label:"",current:e.meetings.current,target:e.meetings.target,percentage:e.meetings.percentage,icon:Pc,color:"emerald"},{label:"",current:e.deals.current,target:e.deals.target,percentage:e.deals.percentage,icon:rl,color:"amber"}],n=a=>{const l={purple:{bg:"bg-purple-500",text:"text-purple-600 dark:text-purple-400"},emerald:{bg:"bg-emerald-500",text:"text-emerald-600 dark:text-emerald-400"},amber:{bg:"bg-amber-500",text:"text-amber-600 dark:text-amber-400"}};return l[a]||l.purple};return s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:border-slate-300 dark:hover:border-slate-700 transition-colors",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-50 dark:bg-indigo-950/30 flex items-center justify-center",children:s.jsx(Ar,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-base",children:" "}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:" "})]})]})}),s.jsx("div",{className:"space-y-5",children:t?s.jsx("div",{className:"text-center py-6 text-slate-400 text-sm",children:"..."}):r.map((a,l)=>{const c=a.icon,d=n(a.color),h=a.target-a.current,f=a.percentage>=100;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg ${d.bg} flex items-center justify-center`,children:s.jsx(c,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:a.label})]}),s.jsxs("div",{className:"text-left",children:[s.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-white",children:a.current}),s.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["/",a.target]})]})]}),s.jsx("div",{className:"relative h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:`absolute top-0 right-0 h-full rounded-full transition-all duration-500 ${f?"bg-emerald-500":d.bg}`,style:{width:`${Math.min(100,a.percentage)}%`}})}),s.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:f?s.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400 flex items-center gap-1",children:[s.jsx(rl,{className:"w-3 h-3"})," "]}):` ${h}`}),s.jsxs("span",{className:`text-xs font-semibold ${f?"text-emerald-600 dark:text-emerald-400":d.text}`,children:[a.percentage,"%"]})]})]},l)})})]})},cce=({insights:e,loading:t})=>{const r=a=>({AlertTriangle:vn,TrendingUp:Pc,TrendingDown:Vd,Target:Ar,Lightbulb:Qd})[a]||Qd,n=a=>{switch(a){case"warning":return{bg:"bg-amber-50 dark:bg-amber-900/10",border:"border-amber-200 dark:border-amber-800",icon:"text-amber-600 dark:text-amber-400",title:"text-amber-900 dark:text-amber-100"};case"opportunity":return{bg:"bg-emerald-50 dark:bg-emerald-900/10",border:"border-emerald-200 dark:border-emerald-800",icon:"text-emerald-600 dark:text-emerald-400",title:"text-emerald-900 dark:text-emerald-100"};case"success":return{bg:"bg-blue-50 dark:bg-blue-900/10",border:"border-blue-200 dark:border-blue-800",icon:"text-blue-600 dark:text-blue-400",title:"text-blue-900 dark:text-blue-100"};default:return{bg:"bg-slate-50 dark:bg-slate-800",border:"border-slate-200 dark:border-slate-700",icon:"text-slate-600 dark:text-slate-400",title:"text-slate-900 dark:text-slate-100"}}};return s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:border-slate-300 dark:hover:border-slate-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-950/30 flex items-center justify-center",children:s.jsx(ti,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-base",children:""}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:" "})]})]}),e.length>0&&s.jsx("span",{className:"text-xs font-medium bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 px-2.5 py-1 rounded-md",children:e.length})]}),s.jsx("div",{className:"space-y-3",children:t?s.jsxs("div",{className:"text-center py-6 text-slate-400",children:[s.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-slate-300 dark:border-slate-700 border-t-blue-600 rounded-full mx-auto mb-2"}),s.jsx("p",{className:"text-sm",children:"..."})]}):e.length===0?s.jsxs("div",{className:"text-center py-6",children:[s.jsx("div",{className:"w-14 h-14 mx-auto mb-3 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:s.jsx(Qd,{className:"w-7 h-7 text-slate-400 dark:text-slate-500"})}),s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:" "}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"  "})]}):e.map((a,l)=>{const c=r(a.icon),d=n(a.type);return s.jsx("div",{className:`p-3.5 rounded-lg border ${d.bg} ${d.border} hover:shadow-sm transition-shadow`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:`w-9 h-9 rounded-lg ${d.bg} flex items-center justify-center flex-shrink-0`,children:s.jsx(c,{className:`w-4 h-4 ${d.icon}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:`font-semibold text-sm ${d.title} mb-1`,children:a.title}),s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-2 leading-relaxed",children:a.description}),s.jsxs("button",{className:`text-xs font-medium ${d.icon} hover:underline`,children:[a.action," "]})]})]})},l)})})]})},dce=({activities:e,loading:t})=>{const[r,n]=v.useState(new Date);v.useEffect(()=>{const h=setInterval(()=>n(new Date),1e3);return()=>clearInterval(h)},[]);const a=h=>{const f=Math.floor((r.getTime()-new Date(h).getTime())/1e3);if(f<60)return` ${f} `;const m=Math.floor(f/60);return m<60?` ${m} `:` ${Math.floor(m/60)} `},l=h=>{if(!h)return"";const f=Math.floor(h/60),m=h%60;return`${f}:${m.toString().padStart(2,"0")}`},c=h=>{switch(h){case"in_call":return{icon:mt,color:"text-emerald-600",bg:"bg-emerald-100 dark:bg-emerald-900/30"};case"call_ended":return{icon:iw,color:"text-blue-600",bg:"bg-blue-100 dark:bg-blue-900/30"};default:return{icon:Br,color:"text-slate-600",bg:"bg-slate-100 dark:bg-slate-800"}}},d=e.filter(h=>h.action==="in_call").length;return s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:border-slate-300 dark:hover:border-slate-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-50 dark:bg-emerald-950/30 flex items-center justify-center",children:s.jsx(ti,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-base",children:"  "}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:" "})]})]}),d>0&&s.jsxs("span",{className:"text-xs font-medium bg-emerald-50 dark:bg-emerald-950/30 text-emerald-700 dark:text-emerald-400 px-2.5 py-1 rounded-md flex items-center gap-1.5",children:[s.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),d," "]})]}),s.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:t?s.jsx("div",{className:"text-center py-6 text-slate-400 text-sm",children:"..."}):e.length===0?s.jsxs("div",{className:"text-center py-6",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-2 rounded-lg bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:s.jsx(Br,{className:"w-6 h-6 text-slate-400 dark:text-slate-500"})}),s.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"  "}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:"  "})]}):e.map((h,f)=>{const m=c(h.action),g=m.icon,x=h.action==="in_call";return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors ${x?"bg-emerald-50/50 dark:bg-emerald-900/10":""}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:h.agentAvatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(h.agentName)}&background=random`,alt:"",className:"w-10 h-10 rounded-full border-2 border-white dark:border-slate-800"}),x&&s.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white dark:border-slate-900"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:h.agentName}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:[s.jsx(g,{className:`w-3.5 h-3.5 ${m.color}`}),s.jsxs("span",{children:[h.action==="in_call"&&` ${h.duration?l(h.duration):""}`,h.action==="call_ended"&&" ",h.action==="idle"&&""]}),h.quality!==void 0&&s.jsxs("span",{className:`text-[10px] font-semibold px-1.5 py-0.5 rounded ${h.quality>=80?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":h.quality>=60?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400"}`,children:[h.quality,"%"]})]})]}),s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 whitespace-nowrap",children:a(h.timestamp)})]},h.id)})})]})};function uce(e){const t=new Date(e);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`}const hce=({callSid:e,ws:t,onClose:r})=>{const[n,a]=v.useState([]),[l,c]=v.useState([]),[d,h]=v.useState(null),[f,m]=v.useState(""),[g,x]=v.useState({}),[b,j]=v.useState(!1),[w,_]=v.useState(!0),N=v.useRef(null),[C,E]=v.useState(!1);v.useEffect(()=>{requestAnimationFrame(()=>E(!0))},[]);const A=()=>{E(!1),setTimeout(r,200)},S=v.useCallback(I=>{try{const $=JSON.parse(I.data);if($.callSid&&$.callSid!==e)return;switch($.type){case"listen_status":j($.listening);break;case"transcript_history":a($.history||[]);break;case"coaching_history":if($.history&&$.history.length>0){c($.history);const M=$.history[$.history.length-1];M.score!==void 0&&h(M.score),M.stage&&m(M.stage),M.score_breakdown&&x(M.score_breakdown)}break;case"live_transcript":$.isFinal&&a(M=>{const R=M[M.length-1];if(R&&R.role===$.role&&$.timestamp-R.timestamp<3e3){const q=[...M];return q[q.length-1]={...R,text:$.text},q}return[...M,{role:$.role,text:$.text,timestamp:$.timestamp}]});break;case"live_coaching":c(M=>[...M,{...$,timestamp:Date.now()}]),$.score!==void 0&&h($.score),$.stage&&m($.stage),$.score_breakdown&&x($.score_breakdown);break}}catch{}},[e]);v.useEffect(()=>(t.addEventListener("message",S),t.readyState===1&&t.send(JSON.stringify({type:"start_listening",callSid:e})),()=>{t.removeEventListener("message",S),t.readyState===1&&t.send(JSON.stringify({type:"stop_listening"}))}),[t,e,S]),v.useEffect(()=>{var I;(I=N.current)==null||I.scrollIntoView({behavior:"smooth"})},[n]);const T=I=>I>=75?"text-emerald-600 dark:text-emerald-400":I>=50?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400",D=I=>I>=75?"bg-emerald-500":I>=50?"bg-amber-500":"bg-red-500",P={discovery:" ",presentation:" ",objection_handling:" ",closing:"",rapport:" ",engagement:""};return s.jsxs("div",{className:"fixed inset-0 z-50 flex justify-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity",style:{opacity:C?1:0},onClick:A}),s.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-slate-900 border-l border-slate-200 dark:border-slate-800 shadow-2xl flex flex-col transition-transform duration-200 ease-out",style:{transform:C?"translateX(0)":"translateX(100%)"},children:[s.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-800 flex items-center justify-between bg-gradient-to-l from-indigo-50 dark:from-indigo-950/20 to-transparent",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-100 dark:bg-indigo-900/30 flex items-center justify-center",children:s.jsx(k3,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[" ",b&&s.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-medium text-emerald-600 bg-emerald-50 dark:bg-emerald-900/20 px-2 py-0.5 rounded-full",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"LIVE"]})]}),s.jsx("p",{className:"text-[11px] text-slate-500 dark:text-slate-400 mt-0.5",children:f&&`: ${f}`})]})]}),s.jsx("button",{onClick:A,className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 text-slate-400 transition-colors",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),d!==null&&s.jsxs("div",{className:"px-5 py-3 border-b border-slate-100 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-2xl font-bold ${T(d)}`,children:d}),s.jsx("span",{className:"text-xs text-slate-400",children:"/100"})]}),s.jsx("span",{className:"text-xs text-slate-500 font-medium",children:f})]}),s.jsx("div",{className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${D(d)}`,style:{width:`${d}%`}})}),Object.keys(g).length>0&&s.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2.5",children:Object.entries(g).map(([I,$])=>{const M=Number($)||0;return s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[10px] text-slate-400 mb-0.5",children:P[I]||I}),s.jsx("div",{className:`text-xs font-bold ${M<40?"text-red-500":M<60?"text-amber-500":"text-emerald-500"}`,children:M})]},I)})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-2 border-b border-slate-100 dark:border-slate-800 sticky top-0 bg-white dark:bg-slate-900 z-10",children:[s.jsx("span",{className:"text-xs font-bold text-slate-500",children:" "}),s.jsx("button",{onClick:()=>_(!w),className:`text-[10px] px-2 py-1 rounded-full transition-colors ${w?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/30 dark:text-indigo-400":"bg-slate-100 text-slate-500 dark:bg-slate-800"}`,children:w?" ":" "})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[n.length===0&&s.jsxs("div",{className:"text-center py-10",children:[s.jsx(_v,{className:"w-8 h-8 text-slate-300 dark:text-slate-600 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-slate-400",children:" ..."})]}),n.map((I,$)=>s.jsx("div",{className:`flex ${I.role==="agent"?"justify-start":"justify-end"}`,children:s.jsxs("div",{className:`max-w-[85%] rounded-xl px-3.5 py-2 ${I.role==="agent"?"bg-indigo-50 dark:bg-indigo-950/30 text-indigo-900 dark:text-indigo-200":"bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-slate-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[I.role==="agent"?s.jsx(BL,{className:"w-3 h-3 text-indigo-500"}):s.jsx(Mn,{className:"w-3 h-3 text-slate-400"}),s.jsx("span",{className:"text-[10px] font-bold opacity-60",children:I.role==="agent"?"":""}),s.jsx("span",{className:"text-[10px] opacity-40 mr-auto",children:uce(I.timestamp)})]}),s.jsx("p",{className:"text-xs leading-relaxed",children:I.text})]})},$)),w&&l.length>0&&s.jsx(s.Fragment,{children:l.slice(-3).map((I,$)=>s.jsxs("div",{className:"mx-4 p-2.5 rounded-lg border border-amber-200 dark:border-amber-900/50 bg-amber-50 dark:bg-amber-950/20",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[s.jsx(Xn,{className:"w-3 h-3 text-amber-600"}),s.jsx("span",{className:"text-[10px] font-bold text-amber-700 dark:text-amber-400",children:" AI"}),I.severity==="warning"&&s.jsx(vn,{className:"w-3 h-3 text-amber-500"})]}),s.jsx("p",{className:"text-xs text-amber-800 dark:text-amber-300 leading-relaxed",children:I.message}),I.suggested_reply&&s.jsxs("div",{className:"mt-1.5 p-2 bg-white dark:bg-slate-900 rounded border border-amber-200 dark:border-amber-800",children:[s.jsx("span",{className:"text-[10px] text-amber-600 font-medium",children:" :"}),s.jsx("p",{className:"text-xs text-slate-700 dark:text-slate-300 mt-0.5",children:I.suggested_reply})]})]},`coaching-${$}`))}),s.jsx("div",{ref:N})]})]}),s.jsx("div",{className:"px-5 py-3 border-t border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/30",children:s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[b?s.jsx(_v,{className:"w-4 h-4 text-emerald-500"}):s.jsx(GL,{className:"w-4 h-4"}),s.jsx("span",{children:b?"   ":" ..."})]}),s.jsxs("span",{children:[n.length," "]})]})})]})]})},fce={critical:{bg:"bg-red-50 dark:bg-red-950/30",border:"border-red-200 dark:border-red-900/50",text:"text-red-700 dark:text-red-400",badge:"bg-red-100 dark:bg-red-900/40 text-red-700 dark:text-red-400",pulse:"animate-pulse",dot:"bg-red-500",label:""},high:{bg:"bg-orange-50 dark:bg-orange-950/30",border:"border-orange-200 dark:border-orange-900/50",text:"text-orange-700 dark:text-orange-400",badge:"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-400",pulse:"",dot:"bg-orange-500",label:""},medium:{bg:"bg-amber-50 dark:bg-amber-950/30",border:"border-amber-200 dark:border-amber-900/50",text:"text-amber-700 dark:text-amber-400",badge:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-400",pulse:"",dot:"bg-amber-500",label:""},low:{bg:"bg-slate-50 dark:bg-slate-800/50",border:"border-slate-200 dark:border-slate-700",text:"text-slate-600 dark:text-slate-400",badge:"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400",pulse:"",dot:"bg-slate-400",label:""}},mce={critical_score:gm,low_score:Vd,declining_score:Vd,unhandled_objections:k2,competitor_mentioned:AL,customer_frustration:V$,weak_discovery:ti,weak_objection_handling:k2,weak_closing:Vd,stuck_stage:Br,long_struggling_call:X9,golden_moment:jr,lost_momentum:el,negative_tone:e9,score_downtrend:Vd};function pce(e){const t=Math.floor(e/60),r=e%60;return`${t}:${r.toString().padStart(2,"0")}`}const gce=({orgId:e})=>{const[t,r]=v.useState([]),[n,a]=v.useState([]),[l,c]=v.useState(!1),[d,h]=v.useState(!1),[f,m]=v.useState(null),[g,x]=v.useState(!1),b=v.useRef(null),j=v.useRef(null),w=v.useCallback(async()=>{if(e)try{const{data:{session:S}}=await me.auth.getSession(),T=S==null?void 0:S.access_token;if(!T){console.error("[Manager WS] No auth token");return}const D=window.location.protocol==="https:"?"wss:":"ws:",P=new WebSocket(`${D}//${window.location.host}/ws/manager?orgId=${e}&token=${encodeURIComponent(T)}`);b.current=P,P.onopen=()=>{c(!0),P.send(JSON.stringify({type:"get_alerts"})),P.send(JSON.stringify({type:"get_active_calls"}))},P.onmessage=I=>{try{const $=JSON.parse(I.data);switch($.type){case"monitor_connected":r($.activeAlerts||[]);break;case"attention_alert":r(M=>{const R=M.findIndex(q=>q.id===$.alert.id);if(R>=0){const q=[...M];return q[R]=$.alert,q}return[$.alert,...M]});break;case"attention_resolved":case"attention_ended":r(M=>M.filter(R=>R.callSid!==$.callSid)),$.type==="attention_ended"&&a(M=>M.filter(R=>R.callSid!==$.callSid));break;case"attention_dismissed":r(M=>M.filter(R=>R.callSid!==$.callSid));break;case"alerts_list":r($.alerts||[]);break;case"active_calls":a($.calls||[]);break;case"call_update":a(M=>{const R=M.findIndex(q=>q.callSid===$.callSid);if(R>=0){const q=[...M];return q[R]={...q[R],lastScore:$.score,currentStage:$.stage,alertLevel:$.alertLevel},q}return[...M,{callSid:$.callSid,agentName:$.agentName,agentId:"",leadName:"",currentStage:$.stage,lastScore:$.score,alertLevel:$.alertLevel,duration:0}]});break}}catch{}},P.onclose=()=>{c(!1),j.current=setTimeout(w,3e3)},P.onerror=()=>P.close()}catch(S){console.error("[Manager WS] Connection error:",S)}},[e]);v.useEffect(()=>(w(),()=>{b.current&&b.current.close(),j.current&&clearTimeout(j.current)}),[w]),v.useEffect(()=>{if(!b.current||b.current.readyState!==1)return;const S=setInterval(()=>{var T;(T=b.current)==null||T.send(JSON.stringify({type:"get_active_calls"}))},15e3);return()=>clearInterval(S)},[l]);const _=S=>{b.current&&b.current.readyState===1&&b.current.send(JSON.stringify({type:"dismiss_alert",callSid:S}))},N=S=>{m(S)},C=t.filter(S=>S.severity==="critical").length,E=t.filter(S=>S.severity==="high").length,A=t.length;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[s.jsxs("button",{onClick:()=>h(!d),className:"w-full px-5 py-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center relative ${A>0?"bg-red-50 dark:bg-red-950/30":"bg-rose-50 dark:bg-rose-950/30"}`,children:[s.jsx(vn,{className:`w-5 h-5 ${A>0?"text-red-600 dark:text-red-400":"text-rose-600 dark:text-rose-400"}`}),C>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping opacity-75"})]}),s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"  "}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[A>0&&s.jsx("span",{className:"text-xs font-bold bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 px-2 py-0.5 rounded-full",children:A}),l?s.jsx(ZL,{className:"w-3 h-3 text-emerald-500"}):s.jsx(JL,{className:"w-3 h-3 text-slate-400"})]})]}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 transition-transform ${d?"rotate-180":""}`})]}),!d&&s.jsx("div",{className:"px-5 pb-4",children:A>0?s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:`text-2xl font-bold ${C>0?"text-red-600 dark:text-red-400":"text-orange-600 dark:text-orange-400"}`,children:A}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"  "}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[C>0&&s.jsxs("span",{className:"text-[10px] font-bold text-red-600 bg-red-50 dark:bg-red-900/20 px-1.5 py-0.5 rounded",children:[C," "]}),E>0&&s.jsxs("span",{className:"text-[10px] font-bold text-orange-600 bg-orange-50 dark:bg-orange-900/20 px-1.5 py-0.5 rounded",children:[E," "]})]})]})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:n.length}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:n.length>0?"  -  ":"   "})]})}),d&&s.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800",children:[A>0?s.jsx("div",{className:"p-3 space-y-2",children:t.map(S=>{const T=fce[S.severity];return s.jsxs("div",{className:`rounded-lg border p-3 ${T.bg} ${T.border} ${T.pulse} transition-all`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${T.dot} shrink-0`}),s.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:S.agentName}),s.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${T.badge}`,children:T.label})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:()=>N(S.callSid),className:"p-1.5 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-800/40 transition-colors",title:" ",children:s.jsx(k3,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>_(S.callSid),className:"p-1.5 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-400 transition-colors",title:" ",children:s.jsx(Rt,{className:"w-3.5 h-3.5"})})]})]}),s.jsxs("div",{className:"flex items-center gap-3 mb-2 text-[11px] text-slate-500 dark:text-slate-400",children:[s.jsxs("span",{children:[" : ",s.jsx("strong",{className:"text-slate-700 dark:text-slate-300",children:S.leadName})]}),s.jsx("span",{children:"|"}),s.jsxs("span",{children:[": ",s.jsx("strong",{className:"text-slate-700 dark:text-slate-300",children:S.stage||" "})]}),s.jsx("span",{children:"|"}),s.jsxs("span",{children:[": ",s.jsx("strong",{className:`${S.score<40?"text-red-600":S.score<60?"text-orange-600":"text-slate-700 dark:text-slate-300"}`,children:S.score})]}),s.jsx("span",{children:"|"}),s.jsx("span",{children:pce(S.callDuration)})]}),s.jsx("div",{className:"space-y-1",children:S.reasons.map((D,P)=>{const I=mce[D.type]||vn;return s.jsxs("div",{className:"flex items-center gap-2 text-[11px]",children:[s.jsx(I,{className:`w-3 h-3 shrink-0 ${T.text}`}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:D.text})]},P)})})]},S.id)})}):s.jsxs("div",{className:"p-4 text-center",children:[s.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400 font-medium mb-1",children:" "}),s.jsx("p",{className:"text-xs text-slate-400",children:"    "})]}),n.length>0&&s.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800 px-3 pb-3",children:[s.jsxs("button",{onClick:()=>x(!g),className:"w-full flex items-center justify-between py-2.5 text-xs text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 transition-colors",children:[s.jsxs("span",{className:"font-medium",children:["  (",n.length,")"]}),s.jsx(Et,{className:`w-3 h-3 transition-transform ${g?"rotate-180":""}`})]}),g&&s.jsx("div",{className:"space-y-1.5",children:n.map(S=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${S.alertLevel==="critical"?"bg-red-500 animate-pulse":S.alertLevel==="high"?"bg-orange-500":S.alertLevel==="medium"?"bg-amber-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:S.agentName}),S.lastScore!=null&&s.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${S.lastScore<40?"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400":S.lastScore<60?"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400":"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400"}`,children:S.lastScore})]}),s.jsx("button",{onClick:()=>N(S.callSid),className:"p-1 rounded text-slate-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",title:" ",children:s.jsx(pm,{className:"w-3.5 h-3.5"})})]},S.callSid))})]})]})]}),f&&b.current&&s.jsx(hce,{callSid:f,ws:b.current,onClose:()=>m(null)})]})},xce=e=>s.jsx(sce,{orgId:e.orgId,children:s.jsx(bce,{...e})}),c3=e=>{if(e&&(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/")))return e},bce=({isDarkMode:e,orgId:t,onNavigate:r,userName:n,centerType:a="sales"})=>{var _e;const{hiddenWidgets:l}=ZM(),[c,d]=v.useState(""),[h,f]=v.useState("all"),[m,g]=v.useState(!1),[x,b]=v.useState(!1),[j,w]=v.useState([]),[_,N]=v.useState([]),[C,E]=v.useState([]),[A,S]=v.useState([]),[T,D]=v.useState([]),[P,I]=v.useState([]),[$,M]=v.useState([]),[R,q]=v.useState(!0),[H,W]=v.useState([]),[L,B]=v.useState(null),[G,ce]=v.useState([]),[ge,U]=v.useState({pipeline:!1,team:!1,attention:!1}),V=de=>U(Y=>({...Y,[de]:!Y[de]})),he=(()=>{const de=new Date().getHours();return de>=5&&de<12?" ":de>=12&&de<18?" ":de>=18&&de<22?" ":" "})(),ye=de=>{switch(de){case"":return"day";case"":return"day";case"":case"7  ":return"week";case"30  ":return"month";case" ":return"month";default:return"day"}},Ne=de=>{switch(de){case"":return 1;case"":return 2;case"":case"7  ":return 7;case"30  ":case" ":return 30;default:return 7}},ve=de=>({backgroundColor:e?"#6366f1":"#4f46e5",opacity:[.4,.55,.7,.85,1][de]||1}),je=Math.max(...A.length?A.map(de=>de.value):[0])*1.1||1e3;v.useEffect(()=>{(async()=>{var we,Oe,lt,ut,Ct,rr,_r,It,oe,Ce;if(!t){q(!1);return}C.length>0||q(!0);try{const{data:{session:Qe}}=await me.auth.getSession(),tt={Authorization:`Bearer ${Qe==null?void 0:Qe.access_token}`,"Content-Type":"application/json"},xe=ye(c),Be=h!=="all"?`&userId=${h}`:"",pt=`?range=${xe}&organizationId=${t}${Be}`,se=Ne(c),Ge=(await Promise.allSettled([me.from("profiles").select("id, full_name, avatar_url, role").eq("organization_id",t),fetch(`/api/panel/stats${pt}`,{headers:tt}),fetch(`/api/pipeline/funnel${pt}`,{headers:tt}),fetch(`/api/panel/at-risk-leads?limit=5&organizationId=${t}${Be}`,{headers:tt}),fetch(`/api/panel/top-deals?limit=5&organizationId=${t}${Be}`,{headers:tt}),fetch(`/api/panel/quality-trend?days=${se}&organizationId=${t}${Be}`,{headers:tt}),fetch(`/api/panel/daily-insights?organizationId=${t}`,{headers:tt}),fetch(`/api/panel/goal-progress?organizationId=${t}`,{headers:tt}),fetch(`/api/panel/live-activity?limit=10&organizationId=${t}`,{headers:tt}),fetch(`/api/analytics/team-performance?organizationId=${t}&range=${xe}`,{headers:tt})])).map(Ee=>Ee.status==="fulfilled"?Ee.value:null),[ht,xt,$t,wt,ft,gt,En,Ln,jn,Ae]=Ge;if(ht&&"data"in ht&&ht.data){const Ee=ht.data.map(He=>({id:He.id,name:He.full_name,avatar:He.avatar_url,role:He.role}));w(Ee)}if(xt&&"json"in xt){const Ee=await xt.json();if(Ee.success){const He=Ee.stats;E(a==="support"?[{label:" ",value:((we=He.leadsContacted)==null?void 0:we.current)||0,subtext:`: ${((Oe=He.leadsContacted)==null?void 0:Oe.target)||0}`,trend:"+0%",trendDirection:"neutral",icon:At},{label:" ",value:((lt=He.appointments)==null?void 0:lt.current)||0,subtext:" ",trend:"0",trendDirection:"neutral",icon:Gr},{label:" -SLA",value:`${((ut=He.closedDeals)==null?void 0:ut.percentage)||0}%`,subtext:"",trend:"0%",trendDirection:"neutral",icon:rl},{label:"  ",value:He.qualityScore||0,subtext:"",trend:"0",trendDirection:"neutral",icon:Ar}]:[{label:'" ',value:((Ct=He.leadsContacted)==null?void 0:Ct.current)||0,subtext:`: ${((rr=He.leadsContacted)==null?void 0:rr.target)||0}`,trend:"+0%",trendDirection:"neutral",icon:mt},{label:" ",value:((_r=He.appointments)==null?void 0:_r.current)||0,subtext:`: ${((It=He.appointments)==null?void 0:It.target)||0}`,trend:"+0%",trendDirection:"neutral",icon:On},{label:"  ()",value:`${((oe=He.closedDeals)==null?void 0:oe.percentage)||0}%`,subtext:"30  ",trend:"0%",trendDirection:"neutral",icon:Ar},{label:"  ",value:He.qualityScore||0,subtext:"",trend:"0",trendDirection:"neutral",icon:rl}])}}if($t&&"json"in $t){const Ee=await $t.json();Ee.success&&S((Ee.funnel||[]).map(He=>({name:He.label,value:He.totalValue||0,count:He.count,color:He.color})))}if(wt&&"json"in wt){const Ee=await wt.json();Ee.success&&D(Ee.leads||[])}if(ft&&"json"in ft){const Ee=await ft.json();Ee.success&&I(Ee.deals||[])}if(gt&&"json"in gt){const Ee=await gt.json();Ee.success&&M(Ee.trend||[])}if(En&&"json"in En){const Ee=await En.json();Ee.success&&W(Ee.insights||[])}if(Ln&&"json"in Ln){const Ee=await Ln.json();Ee.success&&B(Ee.teamProgress)}if(jn&&"json"in jn){const Ee=await jn.json();Ee.success&&ce(Ee.activities||[])}if(Ae&&"json"in Ae){const Ee=await Ae.json();if(Ee.success){const He=Array.isArray(Ee.performance)?Ee.performance:((Ce=Ee.performance)==null?void 0:Ce.performance)||[];N(He)}}}catch(Qe){console.error("Error fetching dashboard data:",Qe)}finally{q(!1)}})()},[t,c,h]);const Q=()=>{let de="data:text/csv;charset=utf-8,";de+="  - "+c+`

`,de+=` 
,,,
`,C.forEach(we=>{de+=`${we.label},${we.value},${we.goal||"-"},${we.change||"-"}%
`}),de+=`
 
,
`,A.forEach(we=>{de+=`${we.name},${we.value}
`}),de+=`
 
,,,
`,P.forEach(we=>{de+=`${we.name},${we.value},${we.owner},${we.stage}
`}),de+=`

,
`,j.forEach(we=>{de+=`${we.name||we.full_name},${we.role}
`});const Y=document.createElement("a");Y.setAttribute("href",encodeURI(de)),Y.setAttribute("download",`sales_report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)};return R&&C.length===0?s.jsx("div",{className:"flex-1 flex items-center justify-center h-full bg-slate-50 dark:bg-slate-950",children:s.jsx(rt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 bg-slate-50 dark:bg-slate-950",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[he,", ",n||""]}),s.jsx(fr,{variant:"brand",children:a==="support"?" ":" "})]}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:a==="support"?"      .":"     ."})]}),s.jsxs("div",{className:"flex items-center gap-3 relative z-20",children:[s.jsx(lce,{}),s.jsxs("div",{className:"relative",children:[s.jsxs(be,{variant:"secondary",className:"hidden sm:flex bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 min-w-[140px] justify-between items-center",onClick:()=>{b(!x),g(!1)},children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"w-4 h-4 ml-2"}),s.jsx("span",{className:"truncate max-w-[100px] text-sm",children:h==="all"?" ":(_e=j.find(de=>de.id===h))==null?void 0:_e.name})]}),s.jsx(Et,{className:`w-3.5 h-3.5 mr-2 opacity-50 transition-transform duration-200 ${x?"rotate-180":""}`})]}),x&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>b(!1)}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 py-1.5 overflow-hidden",children:[s.jsxs("button",{onClick:()=>{f("all"),b(!1)},className:`w-full text-right px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-between ${h==="all"?"bg-brand-50/50 dark:bg-brand-900/10 text-brand-600 dark:text-brand-400":"text-slate-700 dark:text-slate-200"}`,children:[s.jsx("span",{className:"font-medium",children:" "}),h==="all"&&s.jsx(At,{className:"w-4 h-4"})]}),s.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 my-1"}),s.jsx("div",{className:"max-h-[240px] overflow-y-auto",children:j.map(de=>s.jsxs("button",{onClick:()=>{f(de.id),b(!1)},className:`w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-between ${h===de.id?"bg-brand-50/50 dark:bg-brand-900/10 text-brand-600 dark:text-brand-400":"text-slate-700 dark:text-slate-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:c3(de.avatar)||"https://www.gravatar.com/avatar/00000000000000000000000000000000?d=mp&f=y",className:"w-6 h-6 rounded-full border border-slate-100 dark:border-slate-700 object-cover",alt:""}),s.jsx("span",{className:"truncate",children:de.name})]}),h===de.id&&s.jsx(At,{className:"w-4 h-4"})]},de.id))})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs(be,{variant:"secondary",className:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 min-w-[140px] justify-between items-center",onClick:()=>{g(!m),b(!1)},children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(On,{className:"w-4 h-4 ml-2"}),s.jsx("span",{className:"text-sm",children:c})]}),s.jsx(Et,{className:`w-3.5 h-3.5 mr-2 opacity-50 transition-transform duration-200 ${m?"rotate-180":""}`})]}),m&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),s.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 py-1.5",children:["","","7  ","30  "," "].map(de=>s.jsxs("button",{onClick:()=>{d(de),g(!1)},className:`w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-between ${c===de?"text-brand-600 bg-brand-50/50 dark:bg-brand-900/10 font-medium":"text-slate-700 dark:text-slate-200"}`,children:[s.jsx("span",{children:de}),c===de&&s.jsx(At,{className:"w-4 h-4"})]},de))})]})]}),s.jsxs(be,{variant:"secondary",className:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800",onClick:Q,title:" ",children:[s.jsx(Nu,{className:"w-4 h-4 ml-2"}),s.jsx("span",{className:"text-sm hidden sm:inline",children:""})]})]})]}),!l.includes("kpis")&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-8",children:C.map((de,Y)=>{const we=de.icon||Pc,Oe=["bg-indigo-50 dark:bg-indigo-950/30 text-indigo-600 dark:text-indigo-400","bg-emerald-50 dark:bg-emerald-950/30 text-emerald-600 dark:text-emerald-400","bg-amber-50 dark:bg-amber-950/30 text-amber-600 dark:text-amber-400","bg-rose-50 dark:bg-rose-950/30 text-rose-600 dark:text-rose-400"];return s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-5 hover:border-slate-300 dark:hover:border-slate-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:de.label}),s.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${Oe[Y]||Oe[0]}`,children:s.jsx(we,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-1",children:de.value}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:de.subtext})]})]},Y)})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5 mb-8",children:[!l.includes("live-activity")&&s.jsx(dce,{activities:G,loading:R}),!l.includes("goal-progress")&&s.jsx(oce,{teamProgress:L||{calls:{current:0,target:10,percentage:0},meetings:{current:0,target:3,percentage:0},deals:{current:0,target:1,percentage:0}},loading:R}),!l.includes("ai-insights")&&s.jsx(cce,{insights:H,loading:R})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:[!l.includes("pipeline")&&s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[s.jsxs("button",{onClick:()=>V("pipeline"),className:"w-full px-5 py-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-lg bg-indigo-50 dark:bg-indigo-950/30 flex items-center justify-center",children:s.jsx(aw,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:" "}),s.jsx("span",{className:"text-xs font-medium bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 px-2 py-0.5 rounded-full",children:""})]}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 transition-transform ${ge.pipeline?"rotate-180":""}`})]}),!ge.pipeline&&s.jsxs("div",{className:"px-5 pb-4",children:[s.jsxs("span",{className:"text-2xl font-bold text-slate-900 dark:text-white ltr",children:["",A.reduce((de,Y)=>de+(Y.value||0),0).toLocaleString()]}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:'" '})]}),ge.pipeline&&s.jsx("div",{className:"px-5 pb-5 space-y-3 border-t border-slate-100 dark:border-slate-800 pt-4",children:A.length===0?s.jsx("p",{className:"text-sm text-slate-400 text-center py-3",children:"  "}):A.map((de,Y)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-20 text-xs font-medium text-slate-600 dark:text-slate-400 truncate text-right shrink-0",children:de.name}),s.jsx("div",{className:"flex-1 h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${de.value/je*100}%`,...ve(Y)}})}),s.jsxs("span",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 w-16 text-left shrink-0 ltr tabular-nums",children:["",(de.value/1e3).toLocaleString(),"k"]})]},Y))})]}),!l.includes("team-performance")&&s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden",children:[s.jsxs("button",{onClick:()=>V("team"),className:"w-full px-5 py-4 flex items-center justify-between hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-lg bg-emerald-50 dark:bg-emerald-950/30 flex items-center justify-center",children:s.jsx(Gr,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:" "})]}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 transition-transform ${ge.team?"rotate-180":""}`})]}),!ge.team&&s.jsxs("div",{className:"px-5 pb-4",children:[s.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:j.length}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:" "})]}),ge.team&&s.jsx("div",{className:"border-t border-slate-100 dark:border-slate-800",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right border-collapse",children:[s.jsx("thead",{className:"text-[11px] text-slate-500 bg-slate-50/80 dark:bg-slate-800/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"py-2.5 px-3 font-medium",children:""}),s.jsx("th",{className:"py-2.5 px-2 font-medium text-center",children:""}),s.jsx("th",{className:"py-2.5 px-3 font-medium text-left",children:""})]})}),s.jsx("tbody",{className:"text-sm",children:_.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"text-center py-6 text-slate-400 text-xs",children:"   "})}):_.slice(0,5).map(de=>s.jsxs("tr",{className:"border-b border-slate-50 dark:border-slate-800/50 last:border-0 hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[s.jsx("td",{className:"py-2.5 px-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:c3(de.avatar)||`https://ui-avatars.com/api/?name=${encodeURIComponent(de.name)}&background=random&size=32`,alt:"",className:"w-6 h-6 rounded-full"}),s.jsx("span",{className:"text-xs font-medium text-slate-800 dark:text-slate-200 truncate max-w-[80px]",children:de.name})]})}),s.jsx("td",{className:"py-2.5 px-2 text-center text-xs font-bold text-slate-700 dark:text-slate-300",children:de.calls||0}),s.jsxs("td",{className:"py-2.5 px-3 text-left text-xs font-bold text-emerald-600 dark:text-emerald-400 ltr",children:["",(de.revenue||0).toLocaleString()]})]},de.id))})]})})})]}),!l.includes("attention-queue")&&s.jsx(gce,{orgId:t})]})]})},vce=({leads:e,onSelectLead:t,selectedIds:r,onToggleSelect:n,onToggleSelectAll:a,sortConfig:l,onSort:c,onUpdateLead:d,onDeleteLead:h,statuses:f=[]})=>{const[m,g]=Ur.useState(null),x=e.length>0&&r.length===e.length;Ur.useEffect(()=>{const _=()=>g(null);return m&&window.addEventListener("click",_),()=>window.removeEventListener("click",_)},[m]);const b=_=>{switch(_){case"Website":return" ";case"LinkedIn":return"";case"Facebook Ads":return"";case"Referral":return"";case"Webinar":return"";default:return _}},j=({columnKey:_})=>l.key!==_?s.jsx("div",{className:"w-3 h-3"}):l.direction==="asc"?s.jsx(BI,{className:"w-3 h-3 text-brand-600"}):s.jsx(MI,{className:"w-3 h-3 text-brand-600"}),w=_=>{if(!_)return"-";const N=new Date(_);return!isNaN(N.getTime())&&(_.includes("T")||_.includes("-"))?new Intl.DateTimeFormat("he-IL",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(N):_};return s.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",style:{minHeight:"400px"},children:s.jsx("div",{className:"overflow-visible",children:s.jsxs("table",{className:"w-full text-right border-collapse",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-xs text-slate-500 font-semibold uppercase border-b border-slate-100 dark:border-slate-800 sticky top-0 z-10",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4 w-12",children:s.jsx("input",{type:"checkbox",checked:x,onChange:a,className:"w-4 h-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500 cursor-pointer"})}),s.jsx("th",{className:"px-6 py-4 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group",onClick:()=>c("name"),children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[" ",s.jsx(j,{columnKey:"name"})]})}),s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group",onClick:()=>c("status"),children:s.jsxs("div",{className:"flex items-center gap-1.5",children:["",s.jsx(j,{columnKey:"status"})]})}),s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4 cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group",onClick:()=>c("lastActivity"),children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[" ",s.jsx(j,{columnKey:"lastActivity"})]})}),s.jsx("th",{className:"px-6 py-4",children:" "}),s.jsx("th",{className:"px-4 py-4 w-10"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:e.map(_=>{var C,E;const N=f.find(A=>A.id===_.status);return s.jsxs("tr",{onClick:A=>{A.target.closest('input[type="checkbox"]')||A.target.closest("button")||t(_)},className:`
                    group cursor-pointer transition-colors
                    ${r.includes(_.id)?"bg-brand-50/50 dark:bg-brand-900/10":"hover:bg-slate-50 dark:hover:bg-slate-800/30"}
                  `,children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"checkbox",checked:r.includes(_.id),onChange:()=>n(_.id),className:"w-4 h-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500 cursor-pointer"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-bold text-slate-900 dark:text-white text-sm",children:_.name}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono mt-0.5",children:_.phone})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300",children:[s.jsx(ja,{className:"w-3.5 h-3.5 text-slate-400"}),_.company]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium border border-transparent",style:{backgroundColor:N?`${N.color}20`:"#f1f5f9",color:N?N.color:"#64748b"},children:N?N.label:_.status})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[(C=_.owner)!=null&&C.avatar?s.jsx("img",{src:_.owner.avatar,alt:"",className:"w-6 h-6 rounded-full border border-white dark:border-slate-700"}):s.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 dark:bg-slate-700"}),s.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-300 truncate max-w-[80px]",children:(E=_.owner)==null?void 0:E.name})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded",children:b(_.source)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("div",{className:"flex items-center gap-1.5",children:s.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[s.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 32 32",children:[s.jsx("circle",{cx:"16",cy:"16",r:"12",fill:"none",strokeWidth:"3",className:"stroke-slate-100 dark:stroke-slate-800"}),s.jsx("circle",{cx:"16",cy:"16",r:"12",fill:"none",strokeWidth:"3",className:`${(_.score||0)>80?"stroke-emerald-500":(_.score||0)>50?"stroke-amber-500":"stroke-rose-500"}`,strokeDasharray:"75.4",strokeDashoffset:75.4-75.4*(_.score||0)/100,strokeLinecap:"round"})]}),s.jsx("span",{className:"absolute text-[10px] font-bold text-slate-700 dark:text-slate-300",children:_.score})]})})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:w(_.lastActivity)})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-slate-600 dark:text-slate-300",children:[s.jsx(x$,{className:"w-3.5 h-3.5 text-brand-500"}),_.nextStep]})}),s.jsxs("td",{className:"px-4 py-4 text-left relative",children:[s.jsx("button",{onClick:A=>{A.stopPropagation(),g(m===_.id?null:_.id)},className:`p-1.5 rounded-lg transition-colors ${m===_.id?"bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-white":"text-slate-400 hover:text-brand-600 hover:bg-brand-50 dark:hover:bg-brand-900/20"}`,children:s.jsx(dw,{className:"w-4 h-4"})}),m===_.id&&s.jsxs("div",{className:"absolute left-8 top-8 w-40 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-100 text-right",children:[s.jsx("button",{onClick:A=>{A.stopPropagation(),t(_),g(null)},className:"w-full text-right px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-200 block",children:""}),h&&s.jsx("button",{onClick:A=>{A.stopPropagation(),confirm("  ?")&&h(_.id),g(null)},className:"w-full text-right px-4 py-2.5 text-sm hover:bg-rose-50 dark:hover:bg-rose-900/10 text-rose-600 block",children:""})]})]})]},_.id)})})]})})})},yce=({leads:e,onSelectLead:t,onUpdateLead:r,onDeleteLead:n,onAddLead:a,statuses:l})=>{const[c,d]=v.useState(null),[h,f]=v.useState(null),[m,g]=v.useState(null),x=(w,_)=>{d(_),w.dataTransfer.effectAllowed="move"},b=w=>{w.preventDefault(),w.dataTransfer.dropEffect="move"},j=(w,_)=>{if(w.preventDefault(),!c)return;const N=e.find(C=>C.id===c);N&&N.status!==_&&r(c,{status:_}),d(null)};return s.jsx("div",{className:"flex items-start gap-4 h-full overflow-x-auto pb-4",onClick:()=>{f(null),g(null)},children:l.map(w=>{const _=e.filter(N=>N.status===w.id);return s.jsxs("div",{className:"w-72 flex-shrink-0 flex flex-col h-full bg-slate-100/50 dark:bg-slate-900/50 rounded-xl p-3 border border-slate-200/60 dark:border-slate-800/60",onDragOver:b,onDrop:N=>j(N,w.id),children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 px-1 relative",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:w.color}}),s.jsx("h3",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:w.label}),s.jsxs("span",{className:"text-xs text-slate-400 font-medium",children:["(",_.length,")"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:N=>{N.stopPropagation(),g(m===w.id?null:w.id),f(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 p-1 hover:bg-slate-200/50 dark:hover:bg-slate-800 rounded transition-colors",children:s.jsx(j2,{className:"w-4 h-4"})}),m===w.id&&s.jsx("div",{className:"absolute top-full left-0 mt-1 w-40 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-xl z-30 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:s.jsxs("button",{onClick:N=>{N.stopPropagation(),a&&a(w.id),g(null)},className:"w-full text-right px-3 py-2 text-xs hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center gap-2 text-slate-700 dark:text-slate-200",children:[s.jsx(wn,{className:"w-3.5 h-3.5"}),"   "]})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 min-h-0 pr-1 pl-1 custom-scrollbar",children:_.map(N=>{var C;return s.jsxs("div",{draggable:!0,onDragStart:E=>x(E,N.id),className:`bg-white dark:bg-slate-900 p-3.5 rounded-lg border border-slate-200 dark:border-slate-800 shadow-sm hover:shadow-md cursor-grab active:cursor-grabbing transition-all group relative ${c===N.id?"opacity-40 scale-95":"opacity-100"}`,children:[s.jsxs("div",{className:"absolute top-2 left-2 z-10",children:[s.jsx("button",{onClick:E=>{E.stopPropagation(),f(h===N.id?null:N.id),g(null)},className:`p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-opacity ${h===N.id?"opacity-100 bg-slate-100 dark:bg-slate-800":"opacity-0 group-hover:opacity-100"}`,children:s.jsx(j2,{className:"w-4 h-4 text-slate-400"})}),h===N.id&&s.jsxs("div",{className:"absolute top-full left-0 mt-1 w-32 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg shadow-lg z-20 overflow-hidden animate-in fade-in zoom-in-95 duration-100",children:[s.jsxs("button",{onClick:E=>{E.stopPropagation(),t(N),f(null)},className:"w-full text-right px-3 py-2 text-xs hover:bg-slate-50 dark:hover:bg-slate-700 flex items-center gap-2 text-slate-700 dark:text-slate-200",children:[s.jsx(_L,{className:"w-3 h-3"})," "]}),n&&s.jsxs("button",{onClick:E=>{E.stopPropagation(),n(N.id),f(null)},className:"w-full text-right px-3 py-2 text-xs hover:bg-rose-50 dark:hover:bg-rose-900/20 text-rose-600 flex items-center gap-2",children:[s.jsx(ra,{className:"w-3 h-3"})," "]})]})]}),s.jsxs("div",{onClick:()=>t(N),children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"text-xs font-semibold text-slate-400 uppercase tracking-tight",children:N.company||""}),N.priority==="Hot"&&s.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500 shadow-sm shadow-rose-500/50",title:""})]}),s.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm mb-3 group-hover:text-brand-600 transition-colors line-clamp-2",children:N.name}),s.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-slate-50 dark:border-slate-800",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 font-mono tracking-tight",children:N.value}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`text-[10px] font-bold ${N.score&&N.score>80?"text-emerald-600":"text-slate-400"}`,children:N.score}),((C=N.owner)==null?void 0:C.avatar)&&s.jsx("img",{src:N.owner.avatar,className:"w-5 h-5 rounded-full border border-white dark:border-slate-800",alt:""})]})]})]})]},N.id)})}),s.jsxs("button",{onClick:()=>a&&a(w.id),className:"mt-3 flex items-center justify-center gap-2 py-2 text-xs font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-800 rounded-lg transition-colors border border-dashed border-transparent hover:border-slate-300 dark:hover:border-slate-700",children:[s.jsx(wn,{className:"w-3.5 h-3.5"})," "]})]},w.id)})})},wce=({isOpen:e,onClose:t,onSave:r,initialData:n,teamMembers:a=[]})=>{const[l,c]=v.useState({name:"",company:"",status:"New",source:"Website",ownerId:"",phone:"",email:"",website:"",value:"",tags:[],notes:""}),[d,h]=v.useState({}),[f,m]=v.useState(!1);v.useEffect(()=>{var w;e&&(c({name:(n==null?void 0:n.name)||"",company:(n==null?void 0:n.company)||"",status:(n==null?void 0:n.status)||"New",source:(n==null?void 0:n.source)||"Website",ownerId:((w=n==null?void 0:n.owner)==null?void 0:w.id)||(a.length>0?a[0].id:""),phone:(n==null?void 0:n.phone)||"",email:(n==null?void 0:n.email)||"",website:(n==null?void 0:n.website)||"",value:n!=null&&n.value?String(n.value).replace(/[^0-9.]/g,""):"",tags:(n==null?void 0:n.tags)||["SaaS"],notes:(n==null?void 0:n.notes)||""}),h({}))},[e,n]);const g=(w,_)=>{c(N=>({...N,[w]:_})),d[w]&&h(N=>{const C={...N};return delete C[w],C})},x=()=>{const w=prompt("  :");w&&!l.tags.includes(w)&&g("tags",[...l.tags,w])},b=w=>{g("tags",l.tags.filter(_=>_!==w))},j=async()=>{const w={};if(l.name.trim()||(w.name="   "),l.status||(w.status="  "),Object.keys(w).length>0){h(w);return}m(!0);const _={name:l.name,company:l.company,status:l.status,source:l.source,phone:l.phone,email:l.email,value:l.value?`${l.value}`:"0",tags:l.tags,owner:a.find(N=>N.id===l.ownerId)};m(!0);try{await r(_),t()}catch(N){console.error(N)}finally{m(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[60] transition-opacity duration-300 ${e?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:t}),s.jsxs("div",{className:`fixed inset-y-0 right-0 z-[70] w-full md:w-[520px] bg-slate-50 dark:bg-slate-950 shadow-2xl transform transition-transform duration-300 ease-in-out flex flex-col ${e?"translate-x-0":"translate-x-full"}`,children:[s.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800 px-6 py-5 flex justify-between items-start",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-brand-50 dark:bg-brand-900/20 text-brand-600 dark:text-brand-400 flex items-center justify-center border border-brand-100 dark:border-brand-800",children:s.jsx(Mn,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white leading-tight",children:l.name||" "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-0.5",children:"   "})]})]}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 shadow-sm space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:[s.jsx(Mn,{className:"w-3.5 h-3.5"}),"  "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:["  ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsx("input",{type:"text",value:l.name,onChange:w=>g("name",w.target.value),className:`w-full px-3 py-2 bg-white dark:bg-slate-950 border rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none transition-all ${d.name?"border-rose-300 focus:ring-rose-200":"border-slate-200 dark:border-slate-700"}`,placeholder:":  "}),d.name&&s.jsxs("p",{className:"text-xs text-rose-500 mt-1 flex items-center gap-1",children:[s.jsx(ru,{className:"w-3 h-3"})," ",d.name]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx(ja,{className:"absolute top-2.5 right-3 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",value:l.company,onChange:w=>g("company",w.target.value),className:"w-full pr-9 pl-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none transition-all",placeholder:"  "})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:[" ",s.jsx("span",{className:"text-rose-500",children:"*"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:l.status,onChange:w=>g("status",w.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none appearance-none",children:[s.jsx("option",{value:"New",children:" "}),s.jsx("option",{value:"Discovery",children:" "}),s.jsx("option",{value:"Negotiation",children:'"'}),s.jsx("option",{value:"Proposal",children:" "}),s.jsx("option",{value:"Closed",children:""})]}),s.jsx(Et,{className:"absolute top-3 left-3 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:l.source,onChange:w=>g("source",w.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none appearance-none",children:[s.jsx("option",{value:"Website",children:" "}),s.jsx("option",{value:"LinkedIn",children:""}),s.jsx("option",{value:"Facebook Ads",children:""}),s.jsx("option",{value:"Referral",children:""}),s.jsx("option",{value:"Webinar",children:""})]}),s.jsx(Et,{className:"absolute top-3 left-3 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" (Owner)"}),s.jsxs("div",{className:"relative",children:[s.jsx("select",{value:l.ownerId,onChange:w=>g("ownerId",w.target.value),className:"w-full pr-3 pl-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none appearance-none",children:a.map(w=>s.jsx("option",{value:w.id,children:w.name},w.id))}),s.jsx(Et,{className:"absolute top-3 left-3 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 shadow-sm space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:[s.jsx(mt,{className:"w-3.5 h-3.5"}),"  "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx(mt,{className:"absolute top-2.5 right-3 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"tel",value:l.phone,onChange:w=>g("phone",w.target.value),className:"w-full pr-9 pl-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none transition-all dir-ltr text-right",placeholder:"050-0000000"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx(xs,{className:"absolute top-2.5 right-3 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"email",value:l.email,onChange:w=>g("email",w.target.value),className:"w-full pr-9 pl-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none transition-all dir-ltr text-right",placeholder:"name@example.com"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx(fc,{className:"absolute top-2.5 right-3 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"url",value:l.website,onChange:w=>g("website",w.target.value),className:"w-full pr-9 pl-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none transition-all dir-ltr text-right",placeholder:"https://..."})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-5 shadow-sm space-y-4",children:[s.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 flex items-center gap-2",children:[s.jsx(HI,{className:"w-3.5 h-3.5"}),"  "]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:"  "}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute top-2 right-3 text-slate-400 text-sm",children:""}),s.jsx("input",{type:"number",value:l.value,onChange:w=>g("value",w.target.value),className:"w-full pr-7 pl-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none transition-all",placeholder:"0.00"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"  ()"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[l.tags.map(w=>s.jsxs("span",{className:"flex items-center gap-1 bg-brand-50 dark:bg-brand-900/30 text-brand-700 dark:text-brand-300 px-2 py-1 rounded text-xs border border-brand-100 dark:border-brand-800",children:[w,s.jsx("button",{onClick:()=>b(w),className:"hover:text-brand-900",children:s.jsx(Rt,{className:"w-3 h-3"})})]},w)),s.jsxs("button",{onClick:x,className:"flex items-center gap-1 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-1 rounded text-xs hover:bg-slate-200 transition-colors",children:[s.jsx(wn,{className:"w-3 h-3"}),"  "]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" "}),s.jsx("textarea",{value:l.notes,onChange:w=>g("notes",w.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-950 border border-slate-200 dark:border-slate-700 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 outline-none transition-all h-24 resize-none",placeholder:"    ..."})]})]})]})]}),s.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800 p-4 flex justify-between items-center gap-4",children:[s.jsx(be,{variant:"ghost",onClick:t,className:"text-slate-500",children:""}),s.jsxs(be,{onClick:j,disabled:f,className:"w-full md:w-auto px-8",children:[f?"...":" ",!f&&s.jsx(Er,{className:"w-4 h-4 ml-2"})]})]})]})]})},jce={name:" ",company:"",phone:"",email:"",status:"",source:"",value:" "},_ce=["New","Discovery","Negotiation","Proposal","Closed"],kce=["Website","LinkedIn","Facebook Ads","Referral","Webinar"],Nce={" ":"New",:"New",new:"New"," ":"Discovery",discovery:"Discovery"," ":"Negotiation",negotiation:"Negotiation"," ":"Proposal",proposal:"Proposal",:"Closed",closed:"Closed"},Sce={" ":"Website",:"Website",website:"Website",:"LinkedIn",linkedin:"LinkedIn",:"Facebook Ads","facebook ads":"Facebook Ads",facebook:"Facebook Ads",:"Referral",referral:"Referral",:"Webinar",webinar:"Webinar"},Cce=({isOpen:e,onClose:t,onImport:r,teamMembers:n})=>{const[a,l]=v.useState(null),[c,d]=v.useState([]),[h,f]=v.useState([]),[m,g]=v.useState(!1),[x,b]=v.useState("upload"),j=v.useRef(null),w=S=>{var D;const T=(D=S.target.files)==null?void 0:D[0];T&&(l(T),_(T))},_=S=>{const T=new FileReader;T.onload=D=>{var W;const I=((W=D.target)==null?void 0:W.result).split(`
`).filter(L=>L.trim());if(I.length<2){f(["     "]);return}const $=I[0].split(",").map(L=>L.trim().toLowerCase().replace(/['"]/g,"")),M={:"name"," ":"name",:"company",:"phone",:"email",:"status",:"source",:"value"," ":"value"},R=$.map(L=>M[L]||L);if(!R.includes("name")){f(['  "" .      .']);return}const q=[],H=[];for(let L=1;L<I.length;L++){const B=N(I[L]);if(B.length===0)continue;const G={};if(R.forEach((ce,ge)=>{var V;const U=((V=B[ge])==null?void 0:V.trim().replace(/^["']|["']$/g,""))||"";switch(ce){case"name":G.name=U;break;case"company":G.company=U;break;case"phone":G.phone=U;break;case"email":G.email=U;break;case"status":const te=Nce[U.toLowerCase()]||U;G.status=_ce.includes(te)?te:"New";break;case"source":const he=Sce[U.toLowerCase()]||U;G.source=kce.includes(he)?he:"Website";break;case"value":G.value=U.replace(/[^\d.]/g,"")?`${U.replace(/[^\d.]/g,"")}`:"0";break}}),!G.name){H.push(` ${L+1}:  `);continue}G.status||(G.status="New"),G.source||(G.source="Website"),q.push(G)}if(q.length===0){f(["    "]);return}f(H),d(q),b("preview")},T.readAsText(S)},N=S=>{const T=[];let D="",P=!1;for(let I=0;I<S.length;I++){const $=S[I];$==='"'?P=!P:$===","&&!P?(T.push(D),D=""):D+=$}return T.push(D),T},C=async()=>{g(!0);try{await r(c),b("success")}catch{f(["  .  ."])}finally{g(!1)}},E=()=>{l(null),d([]),f([]),b("upload"),t()},A=()=>{const S=`,,,,,, 
 , ",050-1234567,email@example.com, , ,5000
`,T=new Blob(["\uFEFF"+S],{type:"text/csv;charset=utf-8;"}),D=document.createElement("a");D.href=URL.createObjectURL(T),D.download="leads_template.csv",D.click()};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-[60]",onClick:E}),s.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-lg p-6 animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"   CSV"}),s.jsx("button",{onClick:E,className:"text-slate-400 hover:text-slate-600 p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),x==="upload"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{onClick:()=>{var S;return(S=j.current)==null?void 0:S.click()},className:"border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl p-8 text-center cursor-pointer hover:border-brand-400 hover:bg-brand-50/50 dark:hover:bg-brand-900/10 transition-colors",children:[s.jsx(M3,{className:"w-10 h-10 text-slate-400 mx-auto mb-3"}),s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"     CSV"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:" 1000   "}),s.jsx("input",{ref:j,type:"file",accept:".csv",onChange:w,className:"hidden"})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-2",children:"  :"}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3",children:"     .  :"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Object.entries(jce).map(([S,T])=>s.jsx("span",{className:"text-xs bg-white dark:bg-slate-700 px-2 py-1 rounded border border-slate-200 dark:border-slate-600",children:T},S))}),s.jsxs(be,{variant:"secondary",size:"sm",onClick:A,children:[s.jsx(Nu,{className:"w-3.5 h-3.5 ml-1"}),"  "]})]}),h.length>0&&s.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-rose-600 dark:text-rose-400 mb-1",children:[s.jsx(ru,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-bold",children:""})]}),h.map((S,T)=>s.jsx("p",{className:"text-xs text-rose-600 dark:text-rose-400",children:S},T))]})]}),x==="preview"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-brand-50 dark:bg-brand-900/20 rounded-lg",children:[s.jsx(gs,{className:"w-5 h-5 text-brand-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-brand-700 dark:text-brand-300",children:a==null?void 0:a.name}),s.jsxs("p",{className:"text-xs text-brand-600 dark:text-brand-400",children:[c.length,"  "]})]})]}),s.jsxs("div",{className:"max-h-60 overflow-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:[s.jsxs("table",{className:"w-full text-xs text-right",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 font-medium text-slate-600",children:""}),s.jsx("th",{className:"px-3 py-2 font-medium text-slate-600",children:""}),s.jsx("th",{className:"px-3 py-2 font-medium text-slate-600",children:""}),s.jsx("th",{className:"px-3 py-2 font-medium text-slate-600",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:c.slice(0,10).map((S,T)=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50",children:[s.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-white",children:S.name}),s.jsx("td",{className:"px-3 py-2 text-slate-500",children:S.phone||"-"}),s.jsx("td",{className:"px-3 py-2 text-slate-500",children:S.status}),s.jsx("td",{className:"px-3 py-2 text-slate-500",children:S.source})]},T))})]}),c.length>10&&s.jsxs("p",{className:"text-xs text-slate-400 text-center py-2",children:[" ",c.length-10,"  ..."]})]}),h.length>0&&s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:[s.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium mb-1",children:[" (",h.length,"):"]}),h.slice(0,3).map((S,T)=>s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:S},T)),h.length>3&&s.jsxs("p",{className:"text-xs text-amber-500",children:[" ",h.length-3,"..."]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[s.jsx(be,{variant:"ghost",onClick:()=>{b("upload"),l(null),d([]),f([])},children:""}),s.jsx(be,{onClick:C,disabled:m,children:m?"...":` ${c.length} `})]})]}),x==="success"&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Er,{className:"w-8 h-8 text-emerald-600"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"  !"}),s.jsxs("p",{className:"text-sm text-slate-500 mb-6",children:[c.length,"   "]}),s.jsx(be,{onClick:E,children:""})]})]})})]}):null},Ece=({isOpen:e,onClose:t,onAssign:r,teamMembers:n,selectedCount:a})=>{const[l,c]=v.useState(null),[d,h]=v.useState("");if(!e)return null;const f=n.filter(g=>g.name.toLowerCase().includes(d.toLowerCase())),m=()=>{l&&(r(l),t())};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity",onClick:t}),s.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-slate-900 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 duration-200 border border-slate-200 dark:border-slate-800",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Gr,{className:"w-5 h-5 text-brand-600"})," "]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[" ",a,"    "]})]}),s.jsx("button",{onClick:t,className:"p-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]}),s.jsx("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800",children:s.jsxs("div",{className:"relative",children:[s.jsx(ta,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:" ...",value:d,onChange:g=>h(g.target.value),className:"w-full pr-10 pl-4 py-2.5 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-brand-500 outline-none"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1 max-h-[400px]",children:[f.map(g=>s.jsxs("button",{onClick:()=>c(g.id),className:`w-full flex items-center justify-between p-3 rounded-xl transition-all border ${l===g.id?"bg-brand-50 dark:bg-brand-900/20 border-brand-200 dark:border-brand-800":"bg-transparent border-transparent hover:bg-slate-50 dark:hover:bg-slate-800/50"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:g.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(g.name)}`,alt:g.name,className:"w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 object-cover border border-slate-200 dark:border-slate-700"}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:`font-medium text-sm ${l===g.id?"text-brand-700 dark:text-brand-300":"text-slate-900 dark:text-white"}`,children:g.name}),s.jsx("p",{className:"text-xs text-slate-500 capitalize",children:g.role})]})]}),l===g.id&&s.jsx("div",{className:"w-6 h-6 bg-brand-500 rounded-full flex items-center justify-center",children:s.jsx(Er,{className:"w-3.5 h-3.5 text-white"})})]},g.id)),f.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-500",children:"  "})]}),s.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex gap-3",children:[s.jsx(be,{variant:"secondary",className:"flex-1",onClick:t,children:""}),s.jsx(be,{className:"flex-1",onClick:m,disabled:!l,children:" "})]})]})]})},Ace=({isOpen:e,onClose:t,organizationId:r})=>{const[n,a]=v.useState(!1),[l,c]=v.useState(!0),[d,h]=v.useState(!1);v.useEffect(()=>{if(!e||!r)return;(async()=>{c(!0);try{const x=await(await fetch(`/api/org/distribution-settings?organizationId=${r}`)).json();x.success&&x.settings&&a(x.settings.auto_distribute||!1)}catch(g){console.error("Failed to fetch distribution settings:",g)}finally{c(!1)}})()},[e,r]);const f=async()=>{h(!0);try{(await(await fetch("/api/org/distribution-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:r,auto_distribute:n,distribution_method:"round_robin"})})).json()).success?t():alert("  ")}catch(m){console.error("Failed to save settings:",m),alert("  ")}finally{h(!1)}};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:t}),s.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-slate-900 rounded-2xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800 animate-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center bg-slate-50/50 dark:bg-slate-800/50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-brand-100 dark:bg-brand-900/30 rounded-xl",children:s.jsx(Eu,{className:"w-5 h-5 text-brand-600"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"  "}),s.jsx("p",{className:"text-xs text-slate-500",children:"  "})]})]}),s.jsx("button",{onClick:t,className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-full transition-colors",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]}),s.jsx("div",{className:"p-6",children:l?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(rt,{className:"w-6 h-6 text-brand-500 animate-spin"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-xl border border-slate-100 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:s.jsx(Cu,{className:"w-4 h-4 text-emerald-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-slate-900 dark:text-white text-sm",children:" "}),s.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"     "})]})]}),s.jsx("button",{onClick:()=>a(!n),className:`relative w-11 h-6 rounded-full transition-colors flex-shrink-0 ${n?"bg-brand-500":"bg-slate-300 dark:bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-sm transition-all duration-200 flex items-center justify-center ${n?"left-0.5":"left-[22px]"}`,children:n&&s.jsx(Er,{className:"w-3 h-3 text-brand-500"})})})]}),n&&s.jsx("div",{className:"p-4 bg-brand-50 dark:bg-brand-900/20 rounded-xl border border-brand-100 dark:border-brand-800/50",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Gr,{className:"w-5 h-5 text-brand-600 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-brand-800 dark:text-brand-200 text-sm",children:"Round Robin "}),s.jsx("p",{className:"text-xs text-brand-600 dark:text-brand-300 mt-1",children:"        .          ."})]})]})})]})}),s.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex gap-3",children:[s.jsx(be,{variant:"secondary",className:"flex-1",onClick:t,children:""}),s.jsxs(be,{className:"flex-1",onClick:f,disabled:l||d,children:[d?s.jsx(rt,{className:"w-4 h-4 animate-spin ml-2"}):null,""]})]})]})]}):null},Tce=({isDarkMode:e,orgId:t,user:r})=>{var tt;const{leads:n,refreshLeads:a,addLead:l,deleteLead:c,updateLead:d,generateAiScore:h}=KM(void 0,t,r==null?void 0:r.id,r==null?void 0:r.role),{settings:f}=Pw(t),[m,g]=v.useState(()=>typeof window<"u"&&localStorage.getItem("leadsViewMode")||"list");Ur.useEffect(()=>{localStorage.setItem("leadsViewMode",m)},[m]);const[x,b]=v.useState(null),j=n.find(xe=>xe.id===x)||null,[w,_]=v.useState([]),[N,C]=v.useState(""),[E,A]=v.useState({key:"lastActivity",direction:"asc"}),[S,T]=v.useState(!1),[D,P]=v.useState(void 0),[I,$]=v.useState(!1),[M,R]=v.useState(!1),[q,H]=v.useState(!1),W=xe=>{P(xe?{status:xe}:void 0),T(!0)},[L,B]=v.useState(null),[G,ce]=v.useState([]),[ge,U]=v.useState([]),[V,te]=v.useState("all"),[he,ye]=v.useState([]);Ur.useEffect(()=>{(async()=>{if(!t)return;const{data:Be}=await me.from("profiles").select("id, full_name, avatar_url, role").eq("organization_id",t);Be&&ye(Be.map(pt=>({id:pt.id,name:pt.full_name,avatar:pt.avatar_url||"https://ui-avatars.com/api/?name="+pt.full_name,role:pt.role})))})()},[t]);const Ne=n.filter(xe=>{var Ge,ht,xt;const Be=G.length===0||G.includes(xe.status),pt=V==="all"||((Ge=xe.owner)==null?void 0:Ge.id)===V,se=N.toLowerCase(),Te=!N||xe.name.toLowerCase().includes(se)||((ht=xe.company)==null?void 0:ht.toLowerCase().includes(se))||((xt=xe.phone)==null?void 0:xt.includes(se));return Be&&pt&&Te}),ve=(r==null?void 0:r.type)==="manager"||(r==null?void 0:r.type)==="admin"||(r==null?void 0:r.type)==="super_admin",je=(xe="")=>xe?xe.includes("T")||xe.includes("-")?new Date(xe).getTime():xe.includes("")?parseInt(xe.replace(/\D/g,""))||1:xe.includes("")||xe.includes("")?(parseInt(xe.replace(/\D/g,""))||1)*60:xe.includes("")?0:xe.includes("")?720:xe.includes("")?1440:xe.includes("")?2880:xe.includes("")?10080:999999:999999,Q=[...Ne].sort((xe,Be)=>{const{key:pt,direction:se}=E;let Te=0;if(pt==="lastActivity"){const Ge=je(xe.lastActivity),ht=je(Be.lastActivity);Te=Ge-ht}else pt==="name"?Te=xe.name.localeCompare(Be.name):pt==="status"?Te=xe.status.localeCompare(Be.status):Te=String(xe[pt]||"").localeCompare(String(Be[pt]||""));return se==="asc"?Te:-Te}),_e=xe=>{A(Be=>({key:xe,direction:Be.key===xe&&Be.direction==="asc"?"desc":"asc"}))},de=xe=>{_(Be=>Be.includes(xe)?Be.filter(pt=>pt!==xe):[...Be,xe])},Y=()=>{w.length===Q.length?_([]):_(Q.map(xe=>xe.id))},we=()=>{L==="status"?B(null):(U([...G]),B("status"))},Oe=xe=>{U(Be=>Be.includes(xe)?Be.filter(pt=>pt!==xe):[...Be,xe])},lt=()=>{ce(ge),B(null)},ut=()=>{U([])},Ct=()=>{B(L==="owner"?null:"owner")},rr=xe=>{te(xe),B(null)},_r=()=>{ce([]),te("all"),A({key:"lastActivity",direction:"asc"}),C(""),B(null)},It=(f==null?void 0:f.pipeline_statuses)||[{id:"New",label:" ",color:"#3B82F6"},{id:"Discovery",label:" ",color:"#8B5CF6"},{id:"Proposal",label:" ",color:"#10B981"},{id:"Negotiation",label:" / ",color:"#EC4899"},{id:"Follow Up",label:"",color:"#F59E0B"},{id:"Closed",label:" - ",color:"#059669"}],oe=async xe=>{try{await l(xe),console.log("SAVE_LEAD_SUCCESS")}catch(Be){console.error("SAVE_LEAD_FAIL",Be),alert("Failed to save lead: "+Be.message)}},Ce=async xe=>{for(const Be of xe)try{await l(Be)}catch(pt){console.error("Import failed for lead:",Be.name,pt)}a()},Qe=async xe=>{if(w.length!==0)try{const{error:Be}=await me.from("leads").update({owner_id:xe}).in("id",w);if(Be)throw Be;a(),_([]),R(!1)}catch(Be){alert("Failed to assign leads: "+Be.message),console.error(Be)}};return s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col h-full bg-slate-50 dark:bg-slate-950 relative",children:[s.jsxs("div",{className:"px-6 py-6 md:py-8 flex flex-col md:flex-row md:items-center justify-between gap-4 flex-shrink-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:""}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:"    ."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[ve&&s.jsx("button",{onClick:()=>H(!0),className:"p-2 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300 transition-colors",title:"  ",children:s.jsx(Eu,{className:"w-4 h-4"})}),s.jsxs(be,{variant:"secondary",className:"hidden sm:flex",onClick:()=>$(!0),children:[s.jsx(M3,{className:"w-4 h-4 ml-2"}),""]}),s.jsxs(be,{onClick:()=>T(!0),children:[s.jsx(wn,{className:"w-4 h-4 ml-2"})," "]})]})]}),s.jsx("div",{className:"px-6 pb-6 flex flex-col gap-4 flex-shrink-0",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto flex-1 relative z-20",children:[s.jsxs("div",{className:"relative w-full max-w-sm",children:[s.jsx(ta,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",value:N,onChange:xe=>C(xe.target.value),placeholder:"  ,   ...",className:"w-full pr-10 pl-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg text-sm focus:ring-2 focus:ring-brand-500 focus:border-transparent outline-none transition-all"})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[ve&&s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:Ct,className:`flex items-center gap-2 px-3 py-2 border rounded-lg text-sm transition-colors ${L==="owner"||V!=="all"?"bg-brand-50 border-brand-200 text-brand-600 dark:bg-brand-900/20 dark:border-brand-800 dark:text-brand-400":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-300 hover:border-brand-300"}`,children:[s.jsx(uw,{className:"w-3.5 h-3.5"}),V==="all"?"":((tt=he.find(xe=>xe.id===V))==null?void 0:tt.name)||"Unknown",s.jsx(Et,{className:`w-3 h-3 opacity-50 transition-transform ${L==="owner"?"rotate-180":""}`})]}),L==="owner"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>B(null)}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-200",children:[s.jsxs("div",{className:"p-1.5 max-h-64 overflow-y-auto",children:[s.jsxs("button",{onClick:()=>rr("all"),className:`w-full text-right px-3 py-2 rounded-lg text-sm flex items-center justify-between group transition-colors ${V==="all"?"bg-brand-50 dark:bg-brand-900/20 text-brand-700 dark:text-brand-300":"hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200"}`,children:[s.jsx("span",{children:" "}),V==="all"&&s.jsx("div",{className:"w-2 h-2 bg-brand-600 rounded-full"})]}),he.map(xe=>s.jsxs("button",{onClick:()=>rr(xe.id),className:`w-full text-right px-3 py-2 rounded-lg text-sm flex items-center justify-between group transition-colors ${V===xe.id?"bg-brand-50 dark:bg-brand-900/20 text-brand-700 dark:text-brand-300":"hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:xe.avatar,className:"w-5 h-5 rounded-full",alt:""}),s.jsx("span",{children:xe.name})]}),V===xe.id&&s.jsx("div",{className:"w-2 h-2 bg-brand-600 rounded-full"})]},xe.id))]}),s.jsx("div",{className:"p-2 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50",children:s.jsx("button",{onClick:()=>rr("all"),className:"text-xs text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 px-2 py-1",children:""})})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:we,className:`flex items-center gap-2 px-3 py-2 border rounded-lg text-sm transition-colors ${L==="status"||G.length>0?"bg-brand-50 border-brand-200 text-brand-600 dark:bg-brand-900/20 dark:border-brand-800 dark:text-brand-400":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-300 hover:border-brand-300"}`,children:[G.length>0?`  ${G.length} `:"",s.jsx(Et,{className:`w-3 h-3 opacity-50 transition-transform ${L==="status"?"rotate-180":""}`})]}),L==="status"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>B(null)}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-64 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 overflow-hidden flex flex-col animate-in fade-in zoom-in-95 duration-200",children:[s.jsx("div",{className:"p-1.5 space-y-0.5 max-h-72 overflow-y-auto",children:It.map(xe=>{const Be=ge.includes(xe.id);return s.jsxs("label",{className:`flex items-center justify-between px-3 py-2.5 rounded-lg cursor-pointer transition-colors ${Be?"bg-slate-50 dark:bg-slate-800/60":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-all ${Be?"bg-brand-600 border-brand-600 text-white":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:Be&&s.jsx(Er,{className:"w-3 h-3"})}),s.jsx("span",{className:`text-sm ${Be?"font-medium text-slate-900 dark:text-white":"text-slate-700 dark:text-slate-300"}`,children:xe.label})]}),s.jsx("input",{type:"checkbox",className:"hidden",checked:Be,onChange:()=>Oe(xe.id)})]},xe.id)})}),s.jsxs("div",{className:"p-3 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/50 flex justify-between items-center",children:[s.jsx("button",{onClick:ut,className:"text-xs font-medium text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 px-2 py-1",children:""}),s.jsx(be,{size:"sm",onClick:lt,className:"h-7 text-xs",children:""})]})]})]})]}),s.jsx("div",{className:"h-6 w-px bg-slate-300 dark:bg-slate-700 mx-1"}),s.jsx("button",{onClick:_r,className:"text-sm text-brand-600 dark:text-brand-400 font-medium hover:underline disabled:opacity-50 disabled:no-underline",disabled:G.length===0&&V==="all"&&E.key==="lastActivity"&&E.direction==="asc",children:" "})]})]}),s.jsxs("div",{className:"flex items-center gap-2 bg-slate-200 dark:bg-slate-800 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>g("list"),className:`p-1.5 rounded-md transition-all ${m==="list"?"bg-white dark:bg-slate-700 text-brand-600 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,title:" ",children:s.jsx(c9,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>g("kanban"),className:`p-1.5 rounded-md transition-all ${m==="kanban"?"bg-white dark:bg-slate-700 text-brand-600 dark:text-white shadow-sm":"text-slate-500 dark:text-slate-400 hover:text-slate-700"}`,title:" ",children:s.jsx(l9,{className:"w-4 h-4"})})]})]})}),w.length>0&&s.jsxs("div",{className:"absolute top-[140px] left-1/2 -translate-x-1/2 z-20 bg-slate-900 text-white px-6 py-3 rounded-xl shadow-lg flex items-center gap-6 animate-in slide-in-from-top-2 fade-in duration-200",children:[s.jsxs("span",{className:"font-medium text-sm border-l border-slate-700 pl-4 ml-2",children:[w.length," "]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>R(!0),className:"flex items-center gap-2 text-sm text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-white/10 transition-colors",children:[s.jsx(bw,{className:"w-4 h-4"})," "]}),s.jsxs("button",{className:"flex items-center gap-2 text-sm text-slate-300 hover:text-white px-2 py-1 rounded hover:bg-white/10 transition-colors",children:[s.jsx(LI,{className:"w-4 h-4"})," "]}),s.jsxs("button",{onClick:async()=>{if(confirm(`     ${w.length} ?`)){for(const xe of w)await c(xe);_([])}},className:"flex items-center gap-2 text-sm text-rose-300 hover:text-rose-100 px-2 py-1 rounded hover:bg-rose-500/20 transition-colors",children:[s.jsx(ra,{className:"w-4 h-4"}),""]})]}),s.jsx("button",{onClick:()=>_([]),className:"text-xs text-slate-500 hover:text-white underline mr-2",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6 min-h-0",children:Q.length>0?m==="list"?s.jsx(vce,{leads:Q,onSelectLead:xe=>b(xe.id),selectedIds:w,onToggleSelect:de,onToggleSelectAll:Y,sortConfig:E,onSort:_e,onUpdateLead:(xe,Be)=>d(xe,Be),onDeleteLead:xe=>c(xe),statuses:It}):s.jsx(yce,{leads:Q,onSelectLead:xe=>b(xe.id),onUpdateLead:(xe,Be)=>d(xe,Be),onAddLead:W,statuses:It,onDeleteLead:xe=>{confirm("      ?")&&c(xe)}}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8 bg-white dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-800 border-dashed",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:s.jsx(ta,{className:"w-8 h-8 text-slate-400"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:"  "}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm max-w-xs mx-auto mb-4",children:"           ."}),s.jsxs(be,{variant:"secondary",onClick:_r,children:[s.jsx(Cu,{className:"w-4 h-4 ml-2"})," "]})]})}),s.jsx(jj,{lead:j,onClose:()=>b(null),updateLead:d,generateAiScore:h,teamMembers:he}),s.jsx(wce,{isOpen:S,onClose:()=>T(!1),onSave:oe,initialData:D,teamMembers:he}),s.jsx(Cce,{isOpen:I,onClose:()=>$(!1),onImport:Ce,teamMembers:he}),s.jsx(Ece,{isOpen:M,onClose:()=>R(!1),onAssign:Qe,teamMembers:he,selectedCount:w.length}),t&&s.jsx(Ace,{isOpen:q,onClose:()=>H(!1),organizationId:t})]})},Oce=({isDarkMode:e,currentUser:t})=>{var L,B,G,ce,ge;const[r,n]=v.useState(null),[a,l]=v.useState("month"),[c,d]=v.useState("all"),[h,f]=v.useState(!1),[m,g]=v.useState(!1),[x,b]=v.useState("leads"),[j,w]=v.useState([]),[_,N]=v.useState([]),[C,E]=v.useState([]),[A,S]=v.useState(null),[T,D]=v.useState([]),[P,I]=v.useState([]),[$,M]=v.useState(!0),q=((t==null?void 0:t.type)||"manager")==="rep";v.useEffect(()=>{(async()=>{if(q||!(t!=null&&t.organization_id))return;const{data:V}=await me.from("profiles").select("id, full_name, avatar_url, role").eq("organization_id",t.organization_id);V&&w(V.map(te=>({id:te.id,name:te.full_name,avatar:te.avatar_url,role:te.role})))})()},[t==null?void 0:t.organization_id,q]),v.useEffect(()=>{(async()=>{if(!(t!=null&&t.organization_id)){M(!1);return}M(!0);try{let V="";q&&(t!=null&&t.id)?V=t.id:!q&&c!=="all"&&(V=c);const te=V?`&userId=${V}`:"",he=`&range=${a===""?"day":a===""?"week":"month"}`,ye=t!=null&&t.organization_id?`&organizationId=${t.organization_id}`:"",{data:{session:Ne}}=await me.auth.getSession(),ve={Authorization:`Bearer ${Ne==null?void 0:Ne.access_token}`},[je,Q,_e,de,Y]=await Promise.all([fetch(`/api/pipeline/funnel?${he.substring(1)}${te}${ye}`,{headers:ve}),fetch(`/api/pipeline/sources?${he.substring(1)}${te}${ye}`,{headers:ve}),fetch(`/api/panel/stats?${he.substring(1)}${te}${ye}`,{headers:ve}),fetch(`/api/panel/at-risk-leads?limit=5${te}${ye}`,{headers:ve}),q?Promise.resolve({json:()=>({success:!0,leads:[]})}):fetch(`/api/pipeline/unassigned?limit=5${ye}`,{headers:ve})]),[we,Oe,lt,ut,Ct]=await Promise.all([je.json(),Q.json(),_e.json(),de.json(),Y.json()]);we.success&&N(we.funnel),Oe.success&&E(Oe.sources),lt.success&&S(lt.stats),ut.success&&D(ut.leads),Ct.success&&I(Ct.leads)}catch(V){console.error("Error fetching pipeline data:",V)}finally{M(!1)}})()},[a,c,t==null?void 0:t.organization_id,t==null?void 0:t.id,q]),C.reduce((U,V)=>U+V[x],0);const H=C.length>0?Math.max(...C.map(U=>U[x])):1,W=[{label:'" ',value:((L=A==null?void 0:A.leadsContacted)==null?void 0:L.current)||0,change:"+0%",positive:!0,subtext:" "},{label:" ",value:((B=A==null?void 0:A.newLeads)==null?void 0:B.current)||0,change:"+0%",positive:!0,subtext:" "},{label:"",value:((G=A==null?void 0:A.appointments)==null?void 0:G.current)||0,change:"+0%",positive:!0,subtext:" "},{label:"",value:((ce=A==null?void 0:A.closedDeals)==null?void 0:ce.current)||0,change:"+0%",positive:!0,subtext:" "}];return s.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 bg-slate-50 dark:bg-slate-950 font-sans relative",children:s.jsxs("div",{className:`transition-opacity duration-300 ${$?"opacity-50 pointer-events-none":"opacity-100"}`,children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:q?" ":" & "}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:q?"   ":"    "}),s.jsx(fr,{variant:"success",className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800",children:"  "})]})]}),s.jsxs("div",{className:"flex items-center gap-3 relative z-20",children:[!q&&s.jsxs("div",{className:"relative",children:[s.jsxs(be,{variant:"secondary",className:"hidden sm:flex bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 min-w-[140px] justify-between items-center",onClick:()=>{g(!m),f(!1)},children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"w-4 h-4 ml-2"}),s.jsx("span",{className:"truncate max-w-[100px] text-sm",children:c==="all"?" ":((ge=j.find(U=>U.id===c))==null?void 0:ge.name)||" "})]}),s.jsx(Et,{className:`w-3.5 h-3.5 mr-2 opacity-50 transition-transform duration-200 ${m?"rotate-180":""}`})]}),m&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>g(!1)}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 py-1.5 animate-in fade-in zoom-in-95 duration-200 overflow-hidden",children:[s.jsxs("button",{onClick:()=>{d("all"),g(!1)},className:`w-full text-right px-4 py-2.5 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-between ${c==="all"?"bg-brand-50/50 dark:bg-brand-900/10 text-brand-600 dark:text-brand-400":"text-slate-700 dark:text-slate-200"}`,children:[s.jsx("span",{className:"font-medium",children:" "}),c==="all"&&s.jsx(At,{className:"w-4 h-4"})]}),s.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 my-1"}),s.jsx("div",{className:"max-h-[240px] overflow-y-auto",children:j.map(U=>s.jsxs("button",{onClick:()=>{d(U.id),g(!1)},className:`w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-between group ${c===U.id?"bg-brand-50/50 dark:bg-brand-900/10 text-brand-600 dark:text-brand-400":"text-slate-700 dark:text-slate-200"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:U.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(U.name)}`,className:"w-6 h-6 rounded-full border border-slate-100 dark:border-slate-700 object-cover",alt:""}),s.jsx("span",{className:"truncate",children:U.name})]}),c===U.id&&s.jsx(At,{className:"w-4 h-4"})]},U.id))})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsxs(be,{variant:"secondary",className:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 min-w-[140px] justify-between items-center",onClick:()=>{f(!h),g(!1)},children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(On,{className:"w-4 h-4 ml-2"}),s.jsx("span",{className:"text-sm",children:a==="month"?"":a==="week"?"":a})]}),s.jsx(Et,{className:`w-3.5 h-3.5 mr-2 opacity-50 transition-transform duration-200 ${h?"rotate-180":""}`})]}),h&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>f(!1)}),s.jsx("div",{className:"absolute top-full left-0 mt-2 w-48 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 py-1.5 animate-in fade-in zoom-in-95 duration-200",children:["","",""].map(U=>s.jsxs("button",{onClick:()=>{l(U),f(!1)},className:`w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors flex items-center justify-between ${a===U?"text-brand-600 bg-brand-50/50 dark:bg-brand-900/10 font-medium":"text-slate-700 dark:text-slate-200"}`,children:[s.jsx("span",{children:U==="month"?"":U==="week"?"":U}),a===U&&s.jsx(At,{className:"w-4 h-4"})]},U))})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:W.map((U,V)=>s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow",children:[s.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400 mb-1",children:U.label}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsx("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:U.value}),s.jsxs("span",{className:`flex items-center text-xs font-bold px-1.5 py-0.5 rounded ${U.positive?"text-emerald-700 bg-emerald-50 dark:bg-emerald-900/30 dark:text-emerald-400":"text-rose-700 bg-rose-50 dark:bg-rose-900/30 dark:text-rose-400"}`,children:[U.positive?s.jsx(o0,{className:"w-3 h-3 ml-1"}):s.jsx(PI,{className:"w-3 h-3 ml-1"}),U.change]})]})]},V))}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"xl:col-span-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm p-6 flex flex-col",children:[s.jsx("div",{className:"flex items-start justify-between mb-8",children:s.jsxs("div",{children:[s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-base",children:" "}),s.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["    ",q?" ":" "]})]})}),s.jsx("div",{className:"flex flex-col gap-6 flex-1 justify-center px-4",children:_.map((U,V)=>{const te=V>0?_[V-1].count:U.count;return V>0&&Math.round(U.count/te*100),s.jsxs("div",{className:"group flex items-center gap-4",children:[s.jsx("div",{className:"w-24 sm:w-32 flex-shrink-0 text-right font-medium text-sm text-slate-700 dark:text-slate-300",children:U.label}),s.jsx("div",{className:"flex-1 h-2.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden relative",children:s.jsx("div",{className:"absolute top-0 bottom-0 right-0 rounded-l-full transition-all duration-1000 ease-out group-hover:brightness-95",style:{width:`${U.percentage}%`,backgroundColor:U.color,opacity:e?.9:1}})}),s.jsx("div",{className:"w-20 sm:w-24 flex-shrink-0 flex items-center justify-end gap-2 text-left",children:s.jsx("span",{className:"font-bold text-slate-900 dark:text-white tabular-nums text-sm",children:U.count})})]},U.id)})})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm flex flex-col h-full overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-5 border-b border-transparent flex items-center justify-between",children:[s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-base",children:" "}),s.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 p-1 rounded-lg flex text-xs font-medium",children:[s.jsx("button",{onClick:()=>b("leads"),className:`px-3 py-1.5 rounded-md transition-all ${x==="leads"?"bg-white dark:bg-slate-700 text-brand-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:""}),s.jsx("button",{onClick:()=>b("revenue"),className:`px-3 py-1.5 rounded-md transition-all ${x==="revenue"?"bg-white dark:bg-slate-700 text-brand-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:""})]})]}),s.jsx("div",{className:"px-6 pb-2 flex flex-col gap-4 flex-1",children:C.slice(0,5).map((U,V)=>{const te=U[x],he=H>0?Math.max(te/H*100,5):0;return s.jsxs("div",{className:"flex items-center gap-4 group",children:[s.jsx("span",{className:"w-32 text-sm font-medium text-slate-700 dark:text-slate-300 text-right truncate",title:U.name,children:{Website:" ",Unknown:" ",Webinar:"",LinkedIn:"",Facebook:"",Referral:"",Instagram:""}[U.name]||U.name}),s.jsx("div",{className:"flex-1 h-2.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden flex justify-end",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out bg-brand-500 dark:bg-brand-400",style:{width:`${he}%`,opacity:e?.9:1}})}),s.jsx("div",{className:"w-28 text-left flex items-center justify-end gap-2",children:s.jsx("span",{className:"font-bold text-slate-900 dark:text-white tabular-nums text-base",children:x==="revenue"?`${te.toLocaleString("he-IL")}`:te})})]},V)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm flex flex-col h-full",children:[s.jsx("div",{className:"px-6 py-5 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(D9,{className:"w-4 h-4 text-rose-500"}),s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-base",children:" "})]})}),s.jsx("div",{className:"p-4 space-y-3",children:T.map(U=>s.jsx("div",{onClick:()=>n(U),className:"p-3 hover:bg-rose-50/30 dark:hover:bg-rose-900/10 transition-colors cursor-pointer rounded-lg border border-slate-100 dark:border-slate-800",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white",children:U.name}),s.jsx("p",{className:"text-xs text-rose-600",children:"   "})]}),s.jsx(fr,{variant:"warning",className:"text-[10px]",children:typeof U.timeSinceActivity=="string"?U.timeSinceActivity:" "})]})},U.id))})]}),!q&&s.jsxs("div",{className:"xl:col-span-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm flex flex-col h-full",children:[s.jsx("div",{className:"px-6 py-5 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ar,{className:"w-4 h-4 text-amber-500"}),s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white text-base",children:"  "})]})}),s.jsx("div",{className:"p-4 space-y-3",children:P.length===0?s.jsx("div",{className:"text-center py-8 text-slate-400",children:"   "}):P.map(U=>{var V,te;return s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/20 rounded-lg flex justify-between items-center",children:[s.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:U.name}),s.jsx(fr,{variant:"neutral",children:{website:" ",unknown:" ",webinar:"",linkedin:"",facebook:"",referral:"",instagram:""}[(te=(V=U.source)==null?void 0:V.toLowerCase())==null?void 0:te.trim()]||U.source})]},U.id)})})]})]}),s.jsx(jj,{lead:r,onClose:()=>n(null)})]})})},Pce=({orgId:e})=>{const{settings:t,loading:r,updateSettings:n}=Pw(e),[a,l]=v.useState([]),[c,d]=v.useState(!1),[h,f]=v.useState(!1),[m,g]=v.useState(null),[x,b]=v.useState(null),j=v.useRef(null);v.useEffect(()=>{const S=T=>{j.current&&!j.current.contains(T.target)&&g(null)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]),v.useEffect(()=>{t!=null&&t.pipeline_statuses&&l(t.pipeline_statuses)},[t]);const w=()=>{const S={id:`status_${Date.now()}`,label:" ",color:"#94a3b8"};l([...a,S]),f(!0)},_=(S,T)=>{const D=[...a];D[S]={...D[S],...T},l(D),f(!0),T.color&&g(null)},N=S=>{if(a.length<=1){alert("     .");return}if(confirm("  ?              .")){const T=a.filter((D,P)=>P!==S);l(T),f(!0)}},C=(S,T)=>{if(T==="up"&&S===0||T==="down"&&S===a.length-1)return;const D=[...a],P=T==="up"?S-1:S+1;[D[S],D[P]]=[D[P],D[S]],l(D),f(!0)},E=async()=>{if(!t||!n)return;if(!e){b(":    (OrgID is missing).");return}d(!0),b(null);const S=await n({pipeline_statuses:a});d(!1),S!=null&&S.success?f(!1):(b("  .  ."),console.error(S==null?void 0:S.error))},A=["#64748B","#94A3B8","#EF4444","#F87171","#F97316","#FB923C","#F59E0B","#FBBF24","#84CC16","#A3E635","#10B981","#34D399","#06B6D4","#22D3EE","#3B82F6","#60A5FA","#6366F1","#818CF8","#8B5CF6","#A78BFA","#D946EF","#E879F9","#EC4899","#F472B6","#F43F5E","#FB7185"];return r?s.jsx("div",{className:"p-8 text-center text-slate-500",children:" ..."}):s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300 pb-10",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:"  "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"      .       ."})]}),h&&s.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in",children:[s.jsx("span",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium",children:"   "}),s.jsxs(be,{onClick:E,disabled:c,children:[c?s.jsx(pw,{className:"w-4 h-4 animate-spin ml-2"}):s.jsx(sl,{className:"w-4 h-4 ml-2"})," "]})]})]}),x&&s.jsx("div",{className:"mb-4 p-3 bg-rose-50 border border-rose-200 text-rose-600 rounded-lg text-sm",children:x}),s.jsxs("div",{className:"space-y-3",children:[a.map((S,T)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-200 dark:border-slate-700 group hover:border-brand-200 dark:hover:border-brand-800 transition-colors",children:[s.jsxs("div",{className:"flex flex-col gap-0.5",children:[s.jsx("button",{onClick:()=>C(T,"up"),disabled:T===0,className:"text-slate-400 hover:text-brand-600 disabled:opacity-30 disabled:hover:text-slate-400",children:s.jsx(Yl,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>C(T,"down"),disabled:T===a.length-1,className:"text-slate-400 hover:text-brand-600 disabled:opacity-30 disabled:hover:text-slate-400",children:s.jsx(Et,{className:"w-4 h-4"})})]}),s.jsx(hw,{className:"w-5 h-5 text-slate-300 dark:text-slate-600"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{onClick:()=>g(m===T?null:T),className:"w-8 h-8 rounded-full cursor-pointer border-2 border-white dark:border-slate-800 shadow-sm ring-1 ring-slate-100 dark:ring-slate-700 hover:scale-105 transition-transform",style:{backgroundColor:S.color}}),m===T&&s.jsxs("div",{ref:j,className:"absolute top-full right-0 mt-2 p-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl z-20 w-64 animate-in fade-in zoom-in-95 duration-200",children:[s.jsx("p",{className:"text-xs font-bold text-slate-500 mb-2",children:"  /"}),s.jsx("div",{className:"grid grid-cols-6 gap-2",children:A.map(D=>s.jsx("button",{onClick:()=>_(T,{color:D}),className:"w-7 h-7 rounded-full border border-slate-100 dark:border-slate-700 hover:scale-110 transition-transform relative",style:{backgroundColor:D},children:S.color===D&&s.jsx(Er,{className:"w-4 h-4 text-white absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 drop-shadow-md"})},D))})]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("input",{type:"text",value:S.label,onChange:D=>_(T,{label:D.target.value}),className:"w-full bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5 text-sm font-medium focus:ring-2 focus:ring-brand-500 outline-none",placeholder:"  ()"}),s.jsx("input",{type:"text",value:S.id,readOnly:!0,onChange:D=>_(T,{id:D.target.value}),className:"w-full bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-md px-3 py-1.5 text-xs font-mono text-slate-500 focus:ring-2 focus:ring-brand-500 outline-none",placeholder:"Technical ID (English)"})]}),s.jsx("button",{onClick:()=>N(T),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-all",title:" ",children:s.jsx(ra,{className:"w-4 h-4"})})]},S.id||T)),s.jsxs("button",{onClick:w,className:"w-full py-4 flex items-center justify-center gap-2 border-2 border-dashed border-slate-200 dark:border-slate-700 rounded-xl text-slate-500 hover:text-brand-600 hover:border-brand-200 dark:hover:border-brand-800/50 hover:bg-brand-50/50 dark:hover:bg-brand-900/10 transition-all group",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center group-hover:bg-brand-100 dark:group-hover:bg-brand-900/30 transition-colors",children:s.jsx(wn,{className:"w-4 h-4"})}),s.jsx("span",{className:"font-medium",children:"  "})]})]})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800 p-4 rounded-lg flex gap-3",children:[s.jsx(At,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[s.jsx("p",{className:"font-bold mb-1",children:"  "}),s.jsx("p",{children:"      (5-8)    .         (   )."})]})]})]})},Dce=()=>{const[e,t]=v.useState([]),[r,n]=v.useState([]),[a,l]=v.useState(!0),[c,d]=v.useState(null),[h,f]=v.useState(!1),[m,g]=v.useState(null),[x,b]=v.useState(""),[j,w]=v.useState(""),[_,N]=v.useState(""),[C,E]=v.useState(!1);v.useEffect(()=>{(async()=>{var R;const{data:{session:$}}=await me.auth.getSession();if(!((R=$==null?void 0:$.user)!=null&&R.id))return;const{data:M}=await me.from("profiles").select("organization_id").eq("id",$.user.id).single();M!=null&&M.organization_id&&d(M.organization_id)})()},[]),v.useEffect(()=>{if(!c)return;(async()=>{l(!0);const{data:{session:$}}=await me.auth.getSession();if(!$){l(!1);return}try{const M={Authorization:`Bearer ${$.access_token}`},[R,q]=await Promise.all([fetch(`/api/campaigns?organizationId=${c}`,{headers:M}),fetch(`/api/leads/sources?organizationId=${c}`,{headers:M})]),H=await R.json(),W=await q.json();H.success&&t(H.campaigns||[]),W.success&&n(W.sources||[])}catch(M){console.error("[CampaignSettings] Fetch error:",M)}finally{l(!1)}})()},[c]);const A=()=>{g(null),b(""),w(""),N(""),f(!0)},S=I=>{g(I),b(I.name),w(I.source_filter),N(I.description||""),f(!0)},T=async()=>{if(!c||!x||!j)return;E(!0);const{data:{session:I}}=await me.auth.getSession();if(!I){E(!1);return}try{const $={"Content-Type":"application/json",Authorization:`Bearer ${I.access_token}`};if(m){const R=await(await fetch(`/api/campaigns/${m.id}`,{method:"PUT",headers:$,body:JSON.stringify({name:x,sourceFilter:j,description:_})})).json();R.success&&t(q=>q.map(H=>H.id===m.id?R.campaign:H))}else{const R=await(await fetch("/api/campaigns",{method:"POST",headers:$,body:JSON.stringify({organizationId:c,name:x,sourceFilter:j,description:_})})).json();R.success&&t(q=>[R.campaign,...q])}f(!1)}catch($){console.error("[CampaignSettings] Save error:",$)}finally{E(!1)}},D=async I=>{if(!confirm("   ?"))return;const{data:{session:$}}=await me.auth.getSession();if($)try{(await(await fetch(`/api/campaigns/${I}`,{method:"DELETE",headers:{Authorization:`Bearer ${$.access_token}`}})).json()).success&&t(q=>q.filter(H=>H.id!==I))}catch(M){console.error("[CampaignSettings] Delete error:",M)}},P={Website:" ",Google:"",Facebook:"",LinkedIn:"",Instagram:"",Webinar:"",Referral:"","Landing Page":" "};return s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:" "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"     "})]}),s.jsxs("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors",children:[s.jsx(wn,{className:"w-4 h-4"})," "]})]}),a?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(rt,{className:"w-6 h-6 animate-spin text-brand-500"})}):e.length===0?s.jsxs("div",{className:"text-center py-12 text-slate-400",children:[s.jsx("p",{children:"  "}),s.jsx("p",{className:"text-sm mt-1",children:'  " "  '})]}):s.jsx("div",{className:"space-y-3",children:e.map(I=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-slate-900 dark:text-white",children:I.name}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[": ",P[I.source_filter]||I.source_filter,I.description&&`  ${I.description}`]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>S(I),className:"p-2 text-slate-400 hover:text-brand-500 transition-colors",children:s.jsx(O3,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>D(I.id),className:"p-2 text-slate-400 hover:text-rose-500 transition-colors",children:s.jsx(ra,{className:"w-4 h-4"})})]})]},I.id))}),h&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl w-full max-w-md p-6 shadow-xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:m?" ":" "}),s.jsx("button",{onClick:()=>f(!1),className:"text-slate-400 hover:text-slate-600",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" "}),s.jsx("input",{type:"text",value:x,onChange:I=>b(I.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",placeholder:":   "})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" "}),s.jsxs("select",{value:j,onChange:I=>w(I.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white",children:[s.jsx("option",{value:"",children:" ..."}),r.map(I=>s.jsx("option",{value:I,children:P[I]||I},I)),!r.includes("Website")&&s.jsx("option",{value:"Website",children:" "}),!r.includes("Google")&&s.jsx("option",{value:"Google",children:""}),!r.includes("Facebook")&&s.jsx("option",{value:"Facebook",children:""}),!r.includes("Landing Page")&&s.jsx("option",{value:"Landing Page",children:" "})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" ()"}),s.jsx("textarea",{value:_,onChange:I=>N(I.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white resize-none",rows:2,placeholder:"   "})]}),s.jsxs("button",{onClick:T,disabled:!x||!j||C,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[C?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):s.jsx(sl,{className:"w-4 h-4"}),m?" ":" "]})]})]})})]})},Mce=({user:e})=>{const[t,r]=v.useState(!0),[n,a]=v.useState(!1),[l,c]=v.useState({transcription:!0,aiInsights:!0,language:"auto",aiModel:"standard",shortTips:!1,coachingWeights:{discovery:70,objections:50,closing:85}}),[d,h]=v.useState([]),[f,m]=v.useState(null),[g,x]=v.useState(""),[b,j]=v.useState("");v.useEffect(()=>{const A=async()=>{const S=e.organization_id||"org1",{data:{session:T}}=await me.auth.getSession();if(T)try{const P=await(await fetch(`/api/settings/calls?organizationId=${S}`,{headers:{Authorization:`Bearer ${T.access_token}`}})).json();P.success&&P.settings&&(P.settings.calls_config&&c(P.settings.calls_config),P.settings.stages_config&&h(P.settings.stages_config),P.settings.twilio_phone_number&&j(P.settings.twilio_phone_number))}catch(D){console.error("Failed to load settings:",D)}finally{r(!1)}};e.organization_id&&A()},[e.organization_id]);const w=async()=>{a(!0);const A=e.organization_id||"org1",{data:{session:S}}=await me.auth.getSession();if(!S){a(!1);return}try{const T={organizationId:A,settings:{calls_config:l,stages_config:d,twilio_phone_number:b}};(await(await fetch("/api/settings/calls",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.access_token}`},body:JSON.stringify(T)})).json()).success&&console.log("Settings Saved!")}catch(T){console.error("Failed to save:",T)}finally{setTimeout(()=>a(!1),500)}},_=()=>{h([...d," "])},N=A=>{const S=[...d];S.splice(A,1),h(S)},C=A=>{m(A),x(d[A])},E=A=>{const S=[...d];S[A]=g,h(S),m(null)};return t?s.jsx("div",{className:"p-8 text-center text-slate-500",children:" ..."}):s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300 relative pb-16",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsxs("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(ti,{className:"w-5 h-5 text-brand-500"}),"   "]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white block",children:"   "}),s.jsx("span",{className:"text-xs text-slate-500",children:"      "})]}),s.jsx("div",{onClick:()=>c({...l,transcription:!l.transcription}),className:`w-10 h-5 rounded-full relative cursor-pointer transition-colors ${l.transcription?"bg-brand-600":"bg-slate-300 dark:bg-slate-700"}`,children:s.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-all ${l.transcription?"right-1":"left-1"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white block",children:"  AI  "}),s.jsx("span",{className:"text-xs text-slate-500",children:" ,     "})]}),s.jsx("div",{onClick:()=>c({...l,aiInsights:!l.aiInsights}),className:`w-10 h-5 rounded-full relative cursor-pointer transition-colors ${l.aiInsights?"bg-brand-600":"bg-slate-300 dark:bg-slate-700"}`,children:s.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-all ${l.aiInsights?"right-1":"left-1"}`})})]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"   "}),s.jsxs("select",{value:l.language,onChange:A=>c({...l,language:A.target.value}),className:"w-full md:w-64 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:[s.jsx("option",{value:"auto",children:"  (Auto-detect)"}),s.jsx("option",{value:"he",children:" (Hebrew)"}),s.jsx("option",{value:"en",children:" (English)"})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsxs("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(ti,{className:"w-5 h-5 text-blue-500"}),"  "]}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"   (Caller ID)"}),s.jsx("input",{type:"text",value:b,onChange:A=>j(A.target.value),placeholder:"+972500000000",className:"w-full md:w-64 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none font-mono"}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"      .        ."})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsxs("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(bL,{className:"w-5 h-5 text-purple-500"}),"   (AI Coach)"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:" AI"}),s.jsxs("select",{value:l.aiModel,onChange:A=>c({...l,aiModel:A.target.value}),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none mb-4",children:[s.jsx("option",{value:"standard",children:"   (Standard v2)"}),s.jsx("option",{value:"pro",children:"   (Sales Pro)"}),s.jsx("option",{value:"advanced",children:"  - Claude 3.5 (Advanced)"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2 border-t border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white block",children:"   "}),s.jsx("span",{className:"text-xs text-slate-500",children:"     "})]}),s.jsx("div",{onClick:()=>c({...l,shortTips:!l.shortTips}),className:`w-10 h-5 rounded-full relative cursor-pointer transition-colors ${l.shortTips?"bg-brand-600":"bg-slate-300 dark:bg-slate-700"}`,children:s.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-all ${l.shortTips?"right-1":"left-1"}`})})]})]}),s.jsxs("div",{className:"space-y-4 bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase",children:"  ()"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"   "}),s.jsxs("span",{className:"text-xs font-bold text-brand-600",children:[l.coachingWeights.discovery,"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:l.coachingWeights.discovery,onChange:A=>c({...l,coachingWeights:{...l.coachingWeights,discovery:parseInt(A.target.value)}}),className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-brand-600"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"   "}),s.jsxs("span",{className:"text-xs font-bold text-brand-600",children:[l.coachingWeights.objections,"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:l.coachingWeights.objections,onChange:A=>c({...l,coachingWeights:{...l.coachingWeights,objections:parseInt(A.target.value)}}),className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-brand-600"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"  "}),s.jsxs("span",{className:"text-xs font-bold text-brand-600",children:[l.coachingWeights.closing,"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:l.coachingWeights.closing,onChange:A=>c({...l,coachingWeights:{...l.coachingWeights,closing:parseInt(A.target.value)}}),className:"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-brand-600"})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:"  "}),s.jsxs(be,{size:"sm",variant:"ghost",className:"text-xs border border-dashed border-slate-300",onClick:_,children:[s.jsx(wn,{className:"w-3 h-3 ml-1"}),"  "]})]}),s.jsx("div",{className:"space-y-2",children:d.map((A,S)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-slate-900 border border-slate-100 dark:border-slate-800 rounded-lg group hover:border-brand-200 transition-colors",children:[s.jsx(hw,{className:"w-4 h-4 text-slate-300 cursor-move"}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-xs font-bold text-slate-500",children:S+1}),f===S?s.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[s.jsx("input",{type:"text",value:g,onChange:T=>x(T.target.value),className:"flex-1 bg-slate-50 dark:bg-slate-800 px-2 py-1 rounded border border-brand-300 outline-none text-sm",autoFocus:!0}),s.jsx("button",{onClick:()=>E(S),className:"p-1 text-emerald-500 hover:bg-emerald-50 rounded",children:s.jsx(Er,{className:"w-4 h-4"})})]}):s.jsx("span",{className:"flex-1 text-sm text-slate-700 dark:text-slate-200 font-medium",children:A}),s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>C(S),className:"p-1.5 text-slate-400 hover:text-slate-600",children:s.jsx(Su,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>N(S),className:"p-1.5 text-slate-400 hover:text-rose-500",children:s.jsx(ra,{className:"w-3.5 h-3.5"})})]})]},S))})]}),s.jsx("div",{className:"fixed bottom-8 left-8 z-20",children:s.jsxs(be,{onClick:w,disabled:n,className:"shadow-xl rounded-full px-6 py-4 h-auto flex items-center gap-2",children:[n?s.jsx(rt,{className:"w-5 h-5 animate-spin"}):s.jsx(sl,{className:"w-5 h-5"}),n?" ...":" "]})})]})},Rce=({webhookUrl:e,apiKey:t})=>{const[r,n]=v.useState(null),[a,l]=v.useState("fields"),c=(b,j)=>{navigator.clipboard.writeText(b),n(j),setTimeout(()=>n(null),2e3)},d=`${e}?apiKey=${t}`,h=[{name:"name",type:"string",required:!0,description:" ",example:'" "'},{name:"phone",type:"string",required:!0,description:" ",example:'"0501234567"'},{name:"email",type:"string",required:!1,description:" ",example:'"email@example.com"'},{name:"company",type:"string",required:!1,description:" /",example:'" "'},{name:"source",type:"string",required:!1,description:"  ",example:'"Facebook Ads", "Google", ""'},{name:"status",type:"string",required:!1,description:" ",example:'"New", "Contacted", "Qualified"'},{name:"priority",type:"string",required:!1,description:" ",example:'"Hot", "Warm", "Cold"'},{name:"value",type:"number",required:!1,description:"   ()",example:"5000"},{name:"tags",type:"array",required:!1,description:" ",example:'["VIP", "-"]'}],f={minimal:{title:"  ()",description:"  ",code:`{
  "name": " ",
  "phone": "0501234567"
}`},full:{title:" ",description:"  ",code:`{
  "name": " ",
  "phone": "0501234567",
  "email": "israel@example.com",
  "company": " ",
  "source": "Facebook Ads",
  "status": "New",
  "priority": "Hot",
  "value": 15000,
  "tags": ["VIP", "-", "B2B"]
}`},facebook:{title:"Facebook Lead Ads",description:"    ",code:`{
  "name": "{{full_name}}",
  "phone": "{{phone_number}}",
  "email": "{{email}}",
  "source": "Facebook Lead Ad",
  "tags": ["", "{{ad_name}}"]
}`},elementor:{title:"WordPress / Elementor",description:"  Elementor",code:`{
  "name": "{{form.name}}",
  "phone": "{{form.phone}}",
  "email": "{{form.email}}",
  "source": " -   ",
  "tags": ["", ""]
}`},google:{title:"Google Ads Lead Form",description:" -Google Lead Form Extensions",code:`{
  "name": "{{lead.user_column_data.FULL_NAME}}",
  "phone": "{{lead.user_column_data.PHONE_NUMBER}}",
  "email": "{{lead.user_column_data.EMAIL}}",
  "source": "Google Ads",
  "tags": ["", "{{lead.campaign_id}}"]
}`}},m=[{name:"Zapier",icon:s.jsx(el,{className:"w-5 h-5"}),color:"bg-orange-500",steps:[" Zap ","   (Facebook Lead Ads, Google Sheets, ')",' Action: "Webhooks by Zapier"  "POST"',"  -URL  ",' "JSON" ',"     "]},{name:"Make (Integromat)",icon:s.jsx(jr,{className:"w-5 h-5"}),color:"bg-purple-500",steps:[" Scenario ","     (Facebook, Google ')","  HTTP  Make a request","URL:     ","Method: POST","Body type: JSON","    "]},{name:"WordPress / Elementor",icon:s.jsx(fc,{className:"w-5 h-5"}),color:"bg-blue-500",steps:["   -Elementor"," -Actions After Submit",' "Webhook"',"  -URL ","Advanced:    "]},{name:"  (cURL)",icon:s.jsx(S$,{className:"w-5 h-5"}),color:"bg-slate-700",code:`curl -X POST "${d}" \\
  -H "Content-Type: application/json" \\
  -d '{
    "name": " ",
    "phone": "0501234567",
    "source": "API Test"
  }'`}],g=({id:b,title:j,children:w})=>{const _=a===b;return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>l(_?null:b),className:"w-full px-5 py-4 flex items-center justify-between bg-slate-50 dark:bg-slate-800/50 hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:j}),_?s.jsx(Yl,{className:"w-5 h-5 text-slate-400"}):s.jsx(Et,{className:"w-5 h-5 text-slate-400"})]}),_&&s.jsx("div",{className:"p-5 bg-white dark:bg-slate-900",children:w})]})},x=({code:b,label:j})=>s.jsxs("div",{className:"relative",children:[s.jsx("pre",{className:"bg-slate-900 text-slate-100 p-4 rounded-lg text-sm overflow-x-auto font-mono",dir:"ltr",children:b}),s.jsx("button",{onClick:()=>c(b,j),className:"absolute top-2 left-2 p-2 bg-slate-700 hover:bg-slate-600 rounded-lg transition-colors",children:r===j?s.jsx(Er,{className:"w-4 h-4 text-green-400"}):s.jsx(c0,{className:"w-4 h-4 text-slate-300"})})]});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-3 bg-brand-100 dark:bg-brand-900/30 rounded-xl",children:s.jsx(XI,{className:"w-6 h-6 text-brand-600 dark:text-brand-400"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"  Webhook"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"      "})]})]}),s.jsx("div",{className:"p-4 bg-gradient-to-r from-brand-50 to-purple-50 dark:from-brand-900/20 dark:to-purple-900/20 rounded-xl border border-brand-100 dark:border-brand-800",children:s.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:" :"}),s.jsx("code",{className:"text-xs text-slate-600 dark:text-slate-400 break-all",dir:"ltr",children:d})]}),s.jsxs("button",{onClick:()=>c(d,"url"),className:"flex items-center gap-2 px-4 py-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 transition-colors text-sm font-medium",children:[r==="url"?s.jsx(Er,{className:"w-4 h-4"}):s.jsx(c0,{className:"w-4 h-4"}),""]})]})}),s.jsxs(g,{id:"fields",title:"  ",children:[s.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(n9,{className:"w-5 h-5 text-blue-500 shrink-0 mt-0.5"}),s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[s.jsx("strong",{children:" :"}),"  ",s.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 rounded",children:"name"})," -",s.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-1 rounded",children:"phone"}),"   .      ."]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[s.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-600 dark:text-slate-300",children:""}),s.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-600 dark:text-slate-300",children:""}),s.jsx("th",{className:"text-center py-3 px-4 font-semibold text-slate-600 dark:text-slate-300",children:""}),s.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-600 dark:text-slate-300",children:""}),s.jsx("th",{className:"text-right py-3 px-4 font-semibold text-slate-600 dark:text-slate-300",children:""})]})}),s.jsx("tbody",{children:h.map((b,j)=>s.jsxs("tr",{className:j%2===0?"bg-slate-50 dark:bg-slate-800/30":"",children:[s.jsx("td",{className:"py-3 px-4",children:s.jsx("code",{className:"bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded text-brand-600 dark:text-brand-400 font-mono text-xs",children:b.name})}),s.jsx("td",{className:"py-3 px-4 text-slate-500 dark:text-slate-400",children:b.type}),s.jsx("td",{className:"py-3 px-4 text-center",children:b.required?s.jsx(At,{className:"w-5 h-5 text-green-500 mx-auto"}):s.jsx("span",{className:"text-slate-400",children:""})}),s.jsx("td",{className:"py-3 px-4 text-slate-700 dark:text-slate-300",children:b.description}),s.jsx("td",{className:"py-3 px-4",children:s.jsx("code",{className:"text-xs text-slate-500 dark:text-slate-400",dir:"ltr",children:b.example})})]},b.name))})]})})]}),s.jsx(g,{id:"examples",title:"  ",children:s.jsx("div",{className:"grid gap-4",children:Object.entries(f).map(([b,j])=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:j.title}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:j.description})]}),s.jsx("div",{className:"p-4",children:s.jsx(x,{code:j.code,label:b})})]},b))})}),s.jsx(g,{id:"integrations",title:"  ",children:s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:m.map(b=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden",children:[s.jsxs("div",{className:`px-4 py-3 ${b.color} text-white flex items-center gap-2`,children:[b.icon,s.jsx("span",{className:"font-bold",children:b.name})]}),s.jsx("div",{className:"p-4",children:b.steps?s.jsx("ol",{className:"space-y-2",children:b.steps.map((j,w)=>s.jsxs("li",{className:"flex gap-2 text-sm text-slate-700 dark:text-slate-300",children:[s.jsx("span",{className:"w-5 h-5 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-xs font-bold text-slate-600 dark:text-slate-400 shrink-0",children:w+1}),j]},w))}):b.code?s.jsx(x,{code:b.code,label:b.name}):null})]},b.name))})}),s.jsx(g,{id:"tips",title:"  ",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-100 dark:border-green-800",children:s.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[s.jsx("strong",{children:"  -source:"}),"      (Facebook, Google, ) -        ."]})}),s.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-100 dark:border-yellow-800",children:s.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[s.jsx("strong",{children:"  -tags:"}),'    . : ["-", "B2B", "-"]']})}),s.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-100 dark:border-purple-800",children:s.jsxs("p",{className:"text-sm text-purple-700 dark:text-purple-300",children:[s.jsx("strong",{children:"  :"}),'  priority: "Hot"      .']})}),s.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-100 dark:border-blue-800",children:s.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[s.jsx("strong",{children:"  :"}),"        ,   -value  -pipeline."]})})]})}),s.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-xl text-center",children:s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"  ?     "})})]})},Ice=()=>typeof window>"u"?"":window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?"https://salescoach-7yul.onrender.com":window.location.origin,$ce=()=>{const[e,t]=v.useState([]),[r,n]=v.useState(!0),[a,l]=v.useState(null),[c,d]=v.useState(null),[h,f]=v.useState(!1),[m,g]=v.useState(""),[x,b]=v.useState(!1),[j,w]=v.useState(null),[_,N]=v.useState(!1),[C,E]=v.useState(!1),[A,S]=v.useState(null),[T,D]=v.useState(!1);v.useEffect(()=>{(async()=>{var ce;const{data:{session:B}}=await me.auth.getSession();if(!((ce=B==null?void 0:B.user)!=null&&ce.id))return;d(B.user.id);const{data:G}=await me.from("profiles").select("organization_id").eq("id",B.user.id).single();G!=null&&G.organization_id&&l(G.organization_id)})()},[]),v.useEffect(()=>{if(!a)return;(async()=>{n(!0);try{const G=await(await fetch(`/api/settings/api-keys?organizationId=${a}`)).json();G.success&&t(G.keys||[])}catch(B){console.error("[WebhookSettings] Fetch error:",B)}finally{n(!1)}})()},[a]);const P=async()=>{if(a){b(!0);try{const B=await(await fetch("/api/settings/api-keys",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:a,name:m||"Default Key",userId:c})})).json();B.success&&B.key&&(t(G=>[{...B.key,key_prefix:B.key.key_prefix},...G]),w(B.key.key),f(!1),g(""))}catch(L){console.error("[WebhookSettings] Create error:",L)}finally{b(!1)}}},I=async L=>{if(confirm("   ?"))try{(await(await fetch(`/api/settings/api-keys/${L}?organizationId=${a}`,{method:"DELETE"})).json()).success&&t(ce=>ce.filter(ge=>ge.id!==L))}catch(B){console.error("[WebhookSettings] Revoke error:",B)}},$=L=>{navigator.clipboard.writeText(L),N(!0),setTimeout(()=>N(!1),2e3)},M=e.find(L=>L.is_active),R=`${Ice()}/api/leads/webhook`,q=j?`${R}?apiKey=${j}`:`${R}?apiKey=YOUR_API_KEY`,H=!!j,W=async()=>{if(!j&&!M){alert("   API ");return}let L=j;if(!L){const B=prompt("  ,     -API   (     ):");if(!B)return;L=B}E(!0),S(null);try{let B=`${R}?apiKey=${L}`;typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&(B=`http://localhost:5050/api/leads/webhook?apiKey=${L}`),(await fetch(B,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:" ",phone:"0500000000",email:"test@example.com",source:"Test Connection",tags:["Test","Webhook"]})})).ok?S("success"):S("error")}catch{S("error")}finally{E(!1)}};return s.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-indigo-600 p-6 text-white text-center",children:[s.jsx(YL,{className:"w-12 h-12 mx-auto mb-3 opacity-90"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"  (Quick Connect)"}),s.jsx("p",{className:"opacity-90 max-w-lg mx-auto",children:"      .         ."})]}),s.jsxs("div",{className:"p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("label",{className:"block text-sm font-bold text-slate-700 dark:text-slate-300 mb-2 text-center",children:"   (Magic Link)"}),s.jsxs("div",{className:`relative flex items-center bg-slate-50 dark:bg-slate-800 border-2 rounded-xl overflow-hidden transition-colors ${H?"border-brand-500 shadow-brand-100":"border-slate-200 dark:border-slate-700 dashed border-dashed"}`,children:[s.jsx("div",{className:"px-4 py-3 bg-slate-100 dark:bg-slate-700 border-l border-slate-200 dark:border-slate-600 text-slate-500",children:s.jsx(fc,{className:"w-5 h-5"})}),s.jsx("code",{className:"flex-1 px-4 py-3 text-sm font-mono text-slate-600 dark:text-slate-300 dir-ltr text-left overflow-x-auto whitespace-nowrap",children:q}),s.jsx("button",{onClick:()=>$(q),className:"px-6 py-3 bg-white dark:bg-slate-600 hover:bg-slate-50 dark:hover:bg-slate-500 text-brand-600 dark:text-white font-bold transition-colors border-r border-slate-200 dark:border-slate-600 h-full",children:_?"!":""})]}),!H&&s.jsx("div",{className:"text-center mt-3",children:s.jsxs("p",{className:"text-sm text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 py-2 px-4 rounded-lg inline-block",children:[s.jsx(vn,{className:"w-3.5 h-3.5 inline-block ml-1"})," :   ,   .",s.jsx("button",{onClick:()=>f(!0),className:"underline hover:text-amber-800 font-bold mx-1",children:"  "}),"    !"]})}),H&&s.jsx("p",{className:"text-center mt-3 text-sm text-emerald-600 dark:text-emerald-400 font-medium",children:" !    .    (    )."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:W,className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 transition-all font-medium text-slate-700 dark:text-slate-300",children:[C?s.jsx(rt,{className:"w-5 h-5 animate-spin"}):s.jsx(pw,{className:"w-5 h-5"}),"  (Test)"]}),s.jsxs("a",{href:"https://zapier.com/apps/webhook/integrations",target:"_blank",className:"flex items-center justify-center gap-2 py-3 px-4 rounded-xl bg-orange-50 text-orange-700 hover:bg-orange-100 transition-all font-medium border border-orange-200",children:[s.jsx(el,{className:"w-5 h-5"})," -Zapier/Make"]})]}),A&&s.jsxs("div",{className:`mt-4 p-4 rounded-xl flex items-center gap-3 animate-in fade-in slide-in-from-top-2 ${A==="success"?"bg-emerald-50 text-emerald-800 border border-emerald-200":"bg-rose-50 text-rose-800 border border-rose-200"}`,children:[A==="success"?s.jsx(Er,{className:"w-5 h-5"}):s.jsx(vn,{className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:A==="success"?" !":" "}),s.jsx("p",{className:"text-sm opacity-90",children:A==="success"?"    .   .":"     ."})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-2md:grid-cols-4 gap-4",children:[{name:"Wordpress / Elementor",icon:"W",color:"bg-blue-600"},{name:"Wix Automations",icon:"X",color:"bg-yellow-500"},{name:"Facebook Lead Ads",icon:"F",color:"bg-blue-500"},{name:"Google Ads",icon:"G",color:"bg-green-500"}].map(L=>s.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 flex items-center gap-3 shadow-sm",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg ${L.color} text-white flex items-center justify-center font-bold text-sm`,children:L.icon}),s.jsxs("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[L.name,s.jsx("span",{className:"block text-[10px] text-slate-400 font-normal",children:"   -Webhook"})]})]},L.name))}),s.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden",children:s.jsx(Rce,{webhookUrl:R,apiKey:j||"YOUR_API_KEY"})}),s.jsx("div",{className:"text-center",children:s.jsxs("button",{onClick:()=>D(!T),className:"text-slate-400 hover:text-slate-600 text-sm flex items-center justify-center gap-2 mx-auto transition-colors",children:[T?"  ":"  API  ",s.jsx(N3,{className:"w-3 h-3"})]})}),T&&s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-6 border border-slate-200 dark:border-slate-700 animate-in fade-in slide-in-from-top-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300",children:"  API"}),s.jsx("button",{onClick:()=>f(!0),className:"bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 hover:bg-slate-100 px-3 py-1.5 rounded-lg text-sm border border-slate-200 dark:border-slate-600 transition-colors shadow-sm",children:"+  "})]}),h&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 mb-6",children:[s.jsx("h4",{className:"font-bold text-sm mb-3",children:"  "}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:m,onChange:L=>g(L.target.value),placeholder:"  (:   )",className:"flex-1 px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 text-sm bg-transparent"}),s.jsx("button",{onClick:P,disabled:x,className:"bg-brand-600 text-white px-4 py-2 rounded-lg text-sm font-medium",children:x?"...":""}),s.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-slate-500 text-sm",children:""})]})]}),e.length===0?s.jsx("p",{className:"text-center text-slate-400 text-sm py-4",children:"  "}):s.jsx("div",{className:"space-y-3",children:e.map(L=>s.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${L.is_active?"bg-emerald-500":"bg-slate-300"}`}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.name}),s.jsxs("p",{className:"text-slate-400 font-mono text-xs",children:[L.key_prefix,"****"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-400",children:[s.jsxs("span",{children:[L.usage_count," "]}),s.jsx("button",{onClick:()=>I(L.id),className:"text-rose-500 hover:text-rose-700",children:""})]})]},L.id))})]})]})},Lce=({user:e})=>{const[t,r]=v.useState(!0),[n,a]=v.useState(!1),[l,c]=v.useState("sales"),[d,h]=v.useState("product"),[f,m]=v.useState(""),[g,x]=v.useState([]),[b,j]=v.useState([]),[w,_]=v.useState(null),[N,C]=v.useState(null),E=e.organization_id||"org1";v.useEffect(()=>{A()},[l,E]);const A=async()=>{r(!0);try{const I=await(await fetch(`/api/knowledge?organizationId=${E}&domain=${l}`)).json();I.success&&I.knowledge.forEach($=>{$.knowledge_type==="product_info"?m($.content.description||""):$.knowledge_type==="objections"?x(M=>[...M,{...$.content,id:$.id}]):$.knowledge_type==="competitors"&&j(M=>[...M,{...$.content,id:$.id}])})}catch(P){console.error("Failed to load knowledge:",P)}finally{r(!1)}},S=async()=>{a(!0);try{await fetch("/api/knowledge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({organizationId:E,domain:l,knowledge_type:"product_info",title:"Product Information",content:{description:f}})})}catch(P){console.error("Failed to save:",P)}finally{a(!1)}},T=async P=>{try{await fetch("/api/knowledge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:P.id,organizationId:E,domain:l,knowledge_type:"objections",title:P.objection_text,content:P})}),_(null),A()}catch(I){console.error("Failed to save objection:",I)}},D=async P=>{try{await fetch(`/api/knowledge/${P}?organizationId=${E}`,{method:"DELETE"}),A()}catch(I){console.error("Failed to delete:",I)}};return t?s.jsx("div",{className:"p-8 text-center",children:"  ..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6",children:[s.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 mb-3 block",children:"  (Domain)"}),s.jsx("div",{className:"flex gap-2",children:[{value:"sales",label:" ",desc:"  "},{value:"support",label:" ",desc:"  "},{value:"success",label:" Success",desc:" "}].map(P=>s.jsxs("button",{onClick:()=>c(P.value),className:`flex-1 p-4 rounded-lg border-2 transition-all ${l===P.value?"border-brand-500 bg-brand-50 dark:bg-brand-900/20":"border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:[s.jsx("div",{className:"font-bold text-sm",children:P.label}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:P.desc})]},P.value))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800",children:[s.jsx("div",{className:"flex border-b border-slate-200 dark:border-slate-800",children:[{id:"product",label:"  ",icon:ku},{id:"objections",label:" ",icon:Ar},{id:"competitors",label:"",icon:bm}].map(P=>s.jsxs("button",{onClick:()=>h(P.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium transition-colors border-b-2 ${d===P.id?"border-brand-500 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:[s.jsx(P.icon,{className:"w-4 h-4"}),P.label]},P.id))}),s.jsxs("div",{className:"p-6",children:[d==="product"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-600",children:"  /  -      "}),s.jsx("textarea",{value:f,onChange:P=>m(P.target.value),placeholder:":  AI Coach  ...  :  , feedback  ...",className:"w-full h-64 px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg outline-none resize-none"}),s.jsxs(be,{onClick:S,disabled:n,children:[n?s.jsx(rt,{className:"w-4 h-4 animate-spin ml-2"}):s.jsx(sl,{className:"w-4 h-4 ml-2"}),""]})]}),d==="objections"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("p",{className:"text-sm text-slate-600",children:"   "}),s.jsxs(be,{size:"sm",onClick:()=>_({}),children:[s.jsx(wn,{className:"w-4 h-4 ml-1"}),"  "]})]}),s.jsx("div",{className:"space-y-2",children:g.map((P,I)=>s.jsx("div",{className:"p-4 border border-slate-200 dark:border-slate-700 rounded-lg",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-sm",children:P.objection_text}),s.jsxs("div",{className:"text-xs text-slate-600 mt-1",children:[": ",P.response]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>_(P),className:"p-1 text-slate-400 hover:text-blue-500",children:s.jsx(Su,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>D(P.id),className:"p-1 text-slate-400 hover:text-red-500",children:s.jsx(ra,{className:"w-4 h-4"})})]})]})},I))}),w&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 max-w-lg w-full mx-4",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:w.id?" ":" "}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{placeholder:' (: " ")',value:w.objection_text||"",onChange:P=>_({...w,objection_text:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg"}),s.jsx("textarea",{placeholder:" ...",value:w.response||"",onChange:P=>_({...w,response:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg h-24"}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(be,{variant:"ghost",onClick:()=>_(null),children:""}),s.jsx(be,{onClick:()=>T(w),children:""})]})]})]})})]}),d==="competitors"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-slate-600",children:" Battle Cards  "}),s.jsxs(be,{size:"sm",onClick:()=>C({}),children:[s.jsx(wn,{className:"w-4 h-4 ml-1"}),"  "]}),s.jsx("div",{className:"text-slate-500 text-center py-8",children:":  "})]})]})]})]})},a0={id:"u1",name:" ",role:" ",avatar:"https://picsum.photos/100/100",type:"rep"},Vf=[a0,{id:"u3",name:" ",role:" ",avatar:"https://picsum.photos/id/1012/100/100",type:"rep"},{id:"u4",name:" ",role:" ",avatar:"https://picsum.photos/id/1025/100/100",type:"rep"},{id:"u5",name:" ",role:" ",avatar:"https://picsum.photos/id/1027/100/100",type:"rep"}],i0=[{id:"l1",name:" ",company:" ",phone:"050-1234567",email:"m.ross@spectra.com",status:"New",priority:"Hot",value:"45,000",owner:a0,source:"Website",score:92,lastActivity:" 10 ",nextStep:"  ",tags:["SaaS","High Intent"],createdAt:"10/11/2024"},{id:"l2",name:" ",company:" ",phone:"052-9876543",email:"anat@tech-adv.co.il",status:"Discovery",priority:"Warm",value:"120,000",owner:Vf[1],source:"LinkedIn",score:78,lastActivity:"",nextStep:" ",tags:["Enterprise"],createdAt:"08/11/2024"},{id:"l3",name:" ",company:" ",phone:"054-1112223",email:"yossi@barak-inv.com",status:"Negotiation",priority:"Hot",value:"85,000",owner:Vf[2],source:"Referral",score:88,lastActivity:" 3 ",nextStep:"  ",tags:["Finance"],createdAt:"01/11/2024"},{id:"l4",name:" ",company:"- ",phone:"053-3334445",email:"dana@startup.io",status:"Proposal",priority:"Warm",value:"60,000",owner:a0,source:"Webinar",score:65,lastActivity:" ",nextStep:"  ",tags:["Startup"],createdAt:"05/11/2024"},{id:"l5",name:" ",company:" ",phone:"050-5556667",email:"avi@logistics.com",status:"Closed",priority:"Cold",value:"30,000",owner:Vf[1],source:"Cold Call",score:45,lastActivity:" ",nextStep:" - ",tags:[],createdAt:"20/10/2024"},{id:"l6",name:" ",company:' " ',phone:"052-2223334",email:"ronit@law.co.il",status:"New",priority:"Hot",value:"25,000",owner:a0,source:"Facebook Ads",score:85,lastActivity:"",nextStep:" ",tags:["Legal","SMB"],createdAt:"11/11/2024"},{id:"l7",name:" ",company:" ",phone:"054-9998887",email:"guy@cyber.io",status:"Discovery",priority:"Warm",value:"150,000",owner:Vf[2],source:"Partner",score:72,lastActivity:" 5 ",nextStep:" ",tags:["Cyber","Global"],createdAt:"09/11/2024"}];({...i0[3]},{...i0[6]}),{...i0[2]};i0.filter(e=>e.priority==="Hot").slice(0,3);const zce=[{id:"srv1",name:"Telephony (Voice)",status:"operational",latency:"24ms",lastCheck:""},{id:"srv2",name:"Transcription (Soniox)",status:"operational",latency:"120ms",lastCheck:" "},{id:"srv3",name:"AI Coach (LLM)",status:"operational",latency:"450ms",lastCheck:" "},{id:"srv4",name:"CRM Sync (Webhooks)",status:"degraded",latency:"High",lastCheck:" 5 "}],Uce=({user:e,isDarkMode:t,toggleTheme:r})=>{const n=e.type==="rep",[a,l]=v.useState(!0);return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6",children:" "}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-start",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsxs("div",{className:"relative group cursor-pointer",children:[s.jsx("img",{src:e.avatar,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-slate-50 dark:border-slate-800"}),!n&&s.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(r$,{className:"w-6 h-6 text-white"})})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:e.name}),s.jsx("p",{className:"text-xs text-slate-500",children:e.role})]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-6 w-full",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:" "}),s.jsx("input",{type:"text",defaultValue:e.name,disabled:n,className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none ${n?"opacity-70 cursor-not-allowed":"focus:ring-2 focus:ring-brand-500"}`})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:""}),s.jsx("input",{type:"email",defaultValue:e.email||"sara@company.com",disabled:n,className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none ${n?"opacity-70 cursor-not-allowed":"focus:ring-2 focus:ring-brand-500"}`})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:""}),s.jsx("input",{type:"tel",defaultValue:"050-1234567",disabled:n,className:`w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none ${n?"opacity-70 cursor-not-allowed":"focus:ring-2 focus:ring-brand-500"}`})]}),!n&&s.jsx("div",{className:"md:col-span-2 flex justify-end mt-2",children:s.jsx(be,{children:" "})})]})]})]}),!n&&s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6",children:"  "}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-lg",children:s.jsx(h0,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:" "}),s.jsx("p",{className:"text-xs text-slate-500",children:"   3 "})]})]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("div",{className:"flex items-center gap-4",children:s.jsx(be,{variant:"secondary",children:" "})})})]}),s.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 my-6"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:" - (2FA)"}),s.jsx("p",{className:"text-xs text-slate-500",children:"    "})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(fr,{variant:"success",children:""}),s.jsx("div",{className:"w-10 h-5 bg-brand-600 rounded-full relative cursor-pointer",children:s.jsx("div",{className:"absolute right-1 top-1 w-3 h-3 bg-white rounded-full shadow-sm"})})]})]}),s.jsxs("div",{className:"mt-6 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg text-xs text-slate-500 flex justify-between",children:[s.jsx("span",{children:" : , 09:30"}),s.jsx("span",{children:"IP: 213.57.120.44 (Tel Aviv)"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6",children:" "}),!n&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(fc,{className:"w-3.5 h-3.5"}),"  "]}),s.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:[s.jsx("option",{children:" (Hebrew)"}),s.jsx("option",{children:"English"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[s.jsx(Br,{className:"w-3.5 h-3.5"}),"   (Timezone)"]}),s.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:[s.jsx("option",{children:"Jerusalem (GMT+2)"}),s.jsx("option",{children:"London (GMT+0)"}),s.jsx("option",{children:"New York (GMT-5)"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(A3,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"   "})]}),s.jsx("div",{onClick:r,className:`w-10 h-5 rounded-full relative cursor-pointer transition-colors ${t?"bg-brand-600":"bg-slate-300 dark:bg-slate-700"}`,children:s.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-all ${t?"right-1":"left-1"}`})})]}),s.jsxs("div",{className:"flex items-center justify-between py-3 border-t border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ri,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"     "})]}),s.jsx("div",{onClick:()=>l(!a),className:`w-10 h-5 rounded-full relative cursor-pointer transition-colors ${a?"bg-brand-600":"bg-slate-300 dark:bg-slate-700"}`,children:s.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-all ${a?"right-1":"left-1"}`})})]})]})]})]})},Bce=({userId:e,userName:t,onClose:r})=>{var x;const[n,a]=v.useState({numbers:[],active_index:0,auto_rotate:!0}),[l,c]=v.useState(!0),[d,h]=v.useState("");v.useEffect(()=>{(async()=>{const{data:{session:j}}=await me.auth.getSession();if(j)try{const _=await(await fetch(`/api/users/phone-config?userId=${e}&organizationId=current`,{headers:{Authorization:`Bearer ${j.access_token}`}})).json();_.success&&_.config&&a(_.config)}catch(w){console.error(w)}finally{c(!1)}})()},[e]);const f=async()=>{try{const{data:{session:b}}=await me.auth.getSession();if(!b)return;await fetch("/api/users/phone-config",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.access_token}`},body:JSON.stringify({userId:e,organizationId:"current",config:n})}),r()}catch(b){console.error(b)}},m=()=>{if(!d)return;const b={...n,numbers:[...n.numbers||[],{number:d,label:"Secondary",consecutive_failures:0}]};a(b),h("")},g=b=>{const j={...n,numbers:n.numbers.filter((w,_)=>_!==b)};a(j)};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm animate-in fade-in duration-200",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-md p-6 border border-slate-200 dark:border-slate-800",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:["  - ",t]}),s.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"    ."}),l?s.jsx("div",{className:"py-8 text-center text-slate-500",children:" ..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between bg-slate-50 dark:bg-slate-800 p-3 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${n.auto_rotate?"bg-brand-100 text-brand-600":"bg-slate-200 text-slate-500"}`,children:s.jsx(ti,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"Anti-Spam Protection"}),s.jsx("p",{className:"text-xs text-slate-500",children:"     "})]})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.auto_rotate,onChange:b=>a({...n,auto_rotate:b.target.checked})}),s.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-brand-300 dark:peer-focus:ring-brand-800 rounded-full peer dark:bg-slate-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-brand-600"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:" "}),(!n.numbers||n.numbers.length===0)&&s.jsx("p",{className:"text-sm text-slate-400 italic",children:"    (  )"}),(x=n.numbers)==null?void 0:x.map((b,j)=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${j===n.active_index?"border-brand-500 bg-brand-50 dark:bg-brand-900/20":"border-slate-200 dark:border-slate-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-xs font-bold w-6 h-6 flex items-center justify-center bg-white dark:bg-slate-800 rounded-full border border-slate-200 dark:border-slate-700",children:j+1}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-mono font-medium text-slate-900 dark:text-white",children:b.number}),b.consecutive_failures>0&&s.jsxs("span",{className:"text-[10px] text-rose-500",children:["(",b.consecutive_failures," )"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>a({...n,active_index:j}),title:" ",className:`p-1.5 rounded hover:bg-white dark:hover:bg-slate-800 ${j===n.active_index?"text-brand-600":"text-slate-400 hover:text-brand-600"}`,children:s.jsx(Mn,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>g(j),className:"p-1.5 rounded hover:bg-white dark:hover:bg-slate-800 text-slate-400 hover:text-rose-500",children:s.jsx(Rt,{className:"w-4 h-4"})})]})]},j)),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsx("input",{type:"text",placeholder:"+972...",value:d,onChange:b=>h(b.target.value),className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none"}),s.jsx(be,{onClick:m,disabled:!d,variant:"secondary",size:"sm",children:""})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 mt-8",children:[s.jsx(be,{variant:"ghost",onClick:r,children:""}),s.jsx(be,{onClick:f,disabled:l,children:" "})]})]})})},qce=({members:e})=>{const[t,r]=v.useState("users"),[n,a]=v.useState(null),l=e.length>0?e:[{id:"1",name:" ",email:"sara@company.com",role:"rep",team:" ",status:"active",lastLogin:" "},{id:"2",name:" ",email:"david@company.com",role:"manager",team:"",status:"active",lastLogin:""}];return s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:e.length||12}),s.jsx("p",{className:"text-xs text-slate-500",children:" "})]}),s.jsx(Gr,{className:"w-8 h-8 text-brand-100 dark:text-brand-900/50"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"3"}),s.jsx("p",{className:"text-xs text-slate-500",children:" "})]}),s.jsx(xs,{className:"w-8 h-8 text-amber-100 dark:text-amber-900/50"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"4"}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]}),s.jsx(Gr,{className:"w-8 h-8 text-blue-100 dark:text-blue-900/50"})]})]}),s.jsxs("div",{className:"flex gap-4 border-b border-slate-200 dark:border-slate-800",children:[s.jsx("button",{onClick:()=>r("users"),className:`pb-2 text-sm font-medium transition-colors border-b-2 ${t==="users"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:""}),s.jsx("button",{onClick:()=>r("roles"),className:`pb-2 text-sm font-medium transition-colors border-b-2 ${t==="roles"?"border-brand-600 text-brand-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:" "})]}),t==="users"?s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:" ...",className:"pl-4 pr-9 py-1.5 text-sm bg-slate-50 dark:bg-slate-800 border-none rounded-lg w-64 outline-none focus:ring-1 focus:ring-brand-500"}),s.jsx(Gr,{className:"w-4 h-4 text-slate-400 absolute right-3 top-1/2 -translate-y-1/2"})]}),s.jsxs(be,{size:"sm",children:[s.jsx(wn,{className:"w-4 h-4 ml-1.5"}),"  "]})]}),s.jsxs("table",{className:"w-full text-right text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:" "}),s.jsx("th",{className:"px-6 py-3 font-medium"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:l.map(c=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors cursor-pointer group",children:[s.jsx("td",{className:"px-6 py-3 font-medium text-slate-900 dark:text-white",children:c.name}),s.jsx("td",{className:"px-6 py-3 text-slate-500",children:c.email}),s.jsx("td",{className:"px-6 py-3",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300",children:c.role})}),s.jsx("td",{className:"px-6 py-3 text-slate-500",children:c.team}),s.jsx("td",{className:"px-6 py-3",children:s.jsx(fr,{variant:c.status==="active"?"success":"warning",children:c.status==="active"||!c.status?"":""})}),s.jsx("td",{className:"px-6 py-3 text-slate-500 font-mono text-xs",children:c.last_sign_in_at?new Date(c.last_sign_in_at).toLocaleDateString("he-IL"):c.lastLogin||"-"}),s.jsxs("td",{className:"px-6 py-3 text-left",children:[s.jsx("button",{className:"text-slate-400 hover:text-brand-600 p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors opacity-0 group-hover:opacity-100",children:s.jsx(dw,{className:"w-4 h-4"})}),s.jsx("button",{onClick:d=>{d.stopPropagation(),a({id:c.id,name:c.name})},title:" ",className:"text-slate-400 hover:text-emerald-600 p-1.5 rounded-lg hover:bg-emerald-50 dark:hover:bg-emerald-900/20 transition-colors opacity-0 group-hover:opacity-100 mx-1",children:s.jsx(mt,{className:"w-4 h-4"})})]})]},c.id))})]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["  (Admin)","  (Manager)","  (Rep)"].map((c,d)=>s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-5 shadow-sm hover:border-brand-300 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("div",{className:"p-2 bg-brand-50 dark:bg-brand-900/20 rounded-lg text-brand-600 dark:text-brand-400",children:s.jsx(xm,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{title:"",className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-slate-400 hover:text-slate-600",children:s.jsx(c0,{className:"w-4 h-4"})}),s.jsx("button",{title:"",className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-slate-400 hover:text-slate-600",children:s.jsx(Su,{className:"w-4 h-4"})})]})]}),s.jsx("h4",{className:"font-bold text-slate-900 dark:text-white mb-1",children:c}),s.jsx("p",{className:"text-xs text-slate-500 mb-4 h-8",children:d===0?"     .":"      ."}),s.jsxs("div",{className:"flex gap-2 text-xs text-slate-500 bg-slate-50 dark:bg-slate-800/50 p-2 rounded",children:[s.jsx(At,{className:"w-3.5 h-3.5 text-emerald-500"}),s.jsx("span",{children:" -CRM"}),s.jsx("span",{className:"text-slate-300",children:"|"}),s.jsx(At,{className:"w-3.5 h-3.5 text-emerald-500"}),s.jsx("span",{children:""})]})]},d))}),n&&s.jsx(Bce,{userId:n.id,userName:n.name,onClose:()=>a(null)})]})},Fce=()=>{const e=[{title:"",items:[{name:"Twilio Voice",status:"connected",type:"Voice Provider"}]},{title:" ",items:[{name:"Soniox AI",status:"connected",type:"Transcription Engine"}]},{title:"CRM & Webhooks",items:[{name:"Salesforce",status:"disconnected",type:"CRM Sync"},{name:"HubSpot",status:"connected",type:"CRM Sync"}]},{title:"",items:[{name:"Slack",status:"connected",type:"Notifications"},{name:"Zoom",status:"disconnected",type:"Video"}]}];return s.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"flex items-center gap-2 bg-emerald-50 dark:bg-emerald-900/10 text-emerald-700 dark:text-emerald-400 px-4 py-2 rounded-lg border border-emerald-100 dark:border-emerald-900/20 text-sm font-medium w-fit",children:[s.jsx(At,{className:"w-4 h-4"})," -4  "]}),s.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:e.map((t,r)=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider mb-4 border-b border-slate-200 dark:border-slate-800 pb-2",children:t.title}),s.jsx("div",{className:"space-y-4",children:t.items.map((n,a)=>s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl p-4 shadow-sm flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${n.status==="connected"?"bg-brand-50 dark:bg-brand-900/20 text-brand-600":"bg-slate-100 dark:bg-slate-800 text-slate-400"}`,children:s.jsx(mw,{className:"w-6 h-6"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:n.name}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${n.status==="connected"?"bg-emerald-500":"bg-slate-300"}`}),s.jsx("span",{className:"text-xs text-slate-500",children:n.status==="connected"?"":" "})]})]})]}),s.jsx(be,{variant:n.status==="connected"?"secondary":"primary",size:"sm",children:n.status==="connected"?"":""})]},a))})]},r))})]})},Hce=()=>s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6",children:" "}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{icon:ri,title:" ",desc:"Push notifications ",active:!0},{icon:xs,title:" ",desc:"   ",active:!0},{icon:D3,title:" SMS",desc:"",active:!1,disabled:!0}].map((e,t)=>s.jsxs("div",{className:`border rounded-lg p-4 flex items-start justify-between ${e.active?"border-brand-200 bg-brand-50/50 dark:bg-brand-900/10 dark:border-brand-800":"border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-800/50 opacity-70"}`,children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx(e.icon,{className:`w-5 h-5 ${e.active?"text-brand-600":"text-slate-400"}`}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:e.title}),s.jsx("p",{className:"text-xs text-slate-500",children:e.desc})]})]}),!e.disabled&&s.jsx("div",{className:`w-9 h-5 rounded-full relative cursor-pointer ${e.active?"bg-brand-600":"bg-slate-300 dark:bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-all ${e.active?"right-1":"left-1"}`})})]},t))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6",children:" "}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3",children:""}),s.jsx("div",{className:"space-y-2",children:["   ",'  (Score > 80)  " AI',"    4 "].map((e,t)=>s.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg cursor-pointer transition-colors",children:[s.jsx("input",{type:"checkbox",defaultChecked:!0,className:"w-4 h-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:e})]},t))})]}),s.jsxs("div",{className:"border-t border-slate-100 dark:border-slate-800 pt-4",children:[s.jsx("h4",{className:"text-xs font-bold text-slate-500 uppercase mb-3",children:" "}),s.jsx("div",{className:"space-y-2",children:["      -60","    ","     "].map((e,t)=>s.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg cursor-pointer transition-colors",children:[s.jsx("input",{type:"checkbox",defaultChecked:t===0,className:"w-4 h-4 rounded border-slate-300 text-brand-600 focus:ring-brand-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-200",children:e})]},t))})]})]}),s.jsx("div",{className:"mt-8 flex justify-end",children:s.jsx(be,{children:"  "})})]})]}),Vce=()=>s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsxs("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2",children:[s.jsx(xm,{className:"w-5 h-5 text-emerald-500"}),"  "]}),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-slate-900 dark:text-white block",children:"  - (2FA)"}),s.jsx("span",{className:"text-xs text-slate-500",children:"        "})]}),s.jsx("div",{className:"w-10 h-5 bg-brand-600 rounded-full relative cursor-pointer",children:s.jsx("div",{className:"absolute right-1 top-1 w-3 h-3 bg-white rounded-full shadow-sm"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:" "}),s.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:[s.jsx("option",{children:" ( 8 )"}),s.jsx("option",{children:" ( )"}),s.jsx("option",{children:" (  )"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"  (Session Timeout)"}),s.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:[s.jsx("option",{children:"30 "}),s.jsx("option",{children:"60 "}),s.jsx("option",{children:"4 "})]})]})]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:"IP Allowlist ( )"}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[s.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded text-xs border border-slate-200 dark:border-slate-700 flex items-center gap-1",children:["213.57.120.* ",s.jsx("button",{children:s.jsx(nu,{className:"w-3 h-3 text-slate-400 hover:text-rose-500"})})]}),s.jsxs("span",{className:"px-2 py-1 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 rounded text-xs border border-slate-200 dark:border-slate-700 flex items-center gap-1",children:["84.110.20.* ",s.jsx("button",{children:s.jsx(nu,{className:"w-3 h-3 text-slate-400 hover:text-rose-500"})})]})]}),s.jsx(be,{size:"sm",variant:"secondary",className:"text-xs h-7 border-dashed",children:"+   IP"})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 shadow-sm",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-6",children:"  "}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:" "}),s.jsxs("select",{className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:[s.jsx("option",{children:"  6 "}),s.jsx("option",{children:"  12 "}),s.jsx("option",{children:" "})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"  (Transcripts)"}),s.jsx("select",{className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:s.jsx("option",{children:"  24 "})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"  CRM"}),s.jsx("select",{className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none",children:s.jsx("option",{children:" "})})]})]}),s.jsxs("p",{className:"text-xs text-slate-400 flex items-center gap-1.5 bg-slate-50 dark:bg-slate-800/50 p-2 rounded",children:[s.jsx(vn,{className:"w-3.5 h-3.5"})," :         ."]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-rose-100 dark:border-rose-900/30 p-6 shadow-sm",children:[s.jsx("h3",{className:"text-base font-bold text-rose-600 dark:text-rose-400 mb-4",children:" "}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs(be,{variant:"secondary",className:"border-rose-200 text-rose-600 hover:bg-rose-50 hover:border-rose-300 dark:border-rose-900 dark:text-rose-400 dark:hover:bg-rose-900/20",children:[s.jsx(Nu,{className:"w-4 h-4 ml-2"}),"   (CSV)"]}),s.jsxs(be,{variant:"danger",className:"bg-white border border-rose-200 text-rose-600 hover:bg-rose-600 hover:text-white dark:bg-slate-900 dark:border-rose-900",children:[s.jsx(ra,{className:"w-4 h-4 ml-2"}),"  "]})]})]})]}),Wce=({usage:e})=>s.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl shadow-lg p-6 text-white relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -mr-20 -mt-20 blur-3xl"}),s.jsxs("div",{className:"relative z-10 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-2xl font-bold",children:" Pro Team"}),s.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-400/30 border border-indigo-300/30 text-xs font-medium",children:""})]}),s.jsx("p",{className:"text-indigo-100 text-sm mb-6",children:"   ."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{className:"px-4 py-2 bg-white text-indigo-700 rounded-lg text-sm font-bold hover:bg-indigo-50 transition-colors",children:" -Enterprise"}),s.jsx("button",{className:"px-4 py-2 bg-indigo-700/50 border border-indigo-400/30 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors",children:" "})]})]}),s.jsxs("div",{className:"text-left bg-white/10 p-4 rounded-lg backdrop-blur-sm border border-white/10 min-w-[200px]",children:[s.jsx("p",{className:"text-xs text-indigo-200 uppercase tracking-wider mb-1",children:" "}),s.jsx("p",{className:"text-xl font-bold mb-4",children:"1,200"}),s.jsx("p",{className:"text-xs text-indigo-200 uppercase tracking-wider mb-1",children:" "}),s.jsx("p",{className:"text-sm font-medium",children:"10 , 2025"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-5 shadow-sm",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:" (Seats)"}),s.jsxs("div",{className:"flex justify-between items-end mb-2",children:[s.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:e.users}),s.jsx("span",{className:"text-xs font-medium text-slate-400",children:" 20"})]}),s.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-brand-500 w-[60%]"})})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-5 shadow-sm",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"  "}),s.jsxs("div",{className:"flex justify-between items-end mb-2",children:[s.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:Math.round(e.minutes)}),s.jsx("span",{className:"text-xs font-medium text-slate-400",children:" 2,000"})]}),s.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-emerald-500 w-[42%]"})})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-5 shadow-sm",children:[s.jsx("p",{className:"text-xs text-slate-500 mb-1",children:" "}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[s.jsx("div",{className:"w-10 h-6 bg-slate-800 rounded text-white text-[8px] flex items-center justify-center tracking-widest",children:"VISA"}),s.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"**** 4242"})]}),s.jsx("button",{className:"text-xs text-brand-600 dark:text-brand-400 font-medium hover:underline mt-2",children:"  "})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-sm",children:" "}),s.jsx("button",{className:"text-xs text-brand-600 dark:text-brand-400 hover:underline",children:" "})]}),s.jsxs("table",{className:"w-full text-right text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-slate-500",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium",children:""}),s.jsx("th",{className:"px-6 py-3 font-medium"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:[{date:"10/11/2024",period:"Nov 2024",amount:"1,200",status:"paid"},{date:"10/10/2024",period:"Oct 2024",amount:"1,200",status:"paid"},{date:"10/09/2024",period:"Sep 2024",amount:"1,200",status:"paid"}].map((t,r)=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-6 py-3 text-slate-700 dark:text-slate-300",children:t.date}),s.jsx("td",{className:"px-6 py-3 text-slate-500",children:t.period}),s.jsx("td",{className:"px-6 py-3 font-medium text-slate-900 dark:text-white",children:t.amount}),s.jsx("td",{className:"px-6 py-3",children:s.jsx(fr,{variant:"success",className:"text-[10px] uppercase",children:""})}),s.jsx("td",{className:"px-6 py-3 text-left",children:s.jsxs("button",{className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 flex items-center gap-1 text-xs",children:[s.jsx(Nu,{className:"w-3.5 h-3.5"})," PDF"]})})]},r))})]})]})]}),d3=({setCategory:e,stats:t})=>{const[r,n]=v.useState(zce),[a,l]=v.useState(!1);return Ur.useEffect(()=>{(async()=>{try{const d=await fetch("/api/system/health");if(d.ok){const h=await d.json();h.success&&Array.isArray(h.health)&&h.health.length>0&&n(h.health)}}catch(d){console.warn("System Health Check Failed - Using cached data:",d)}})()},[]),s.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 shadow-sm p-6 relative overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]"}),s.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wide",children:" "})]}),s.jsxs("a",{href:"#",className:"text-xs text-brand-600 dark:text-brand-400 font-medium hover:underline flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 ml-1"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map(c=>s.jsxs("div",{className:"flex flex-col gap-2 p-3 rounded-lg border border-slate-100 dark:border-slate-800/50 bg-slate-50/50 dark:bg-slate-800/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-semibold text-slate-700 dark:text-slate-300 truncate pr-2",children:c.name}),c.status==="operational"&&s.jsx(At,{className:"w-4 h-4 text-emerald-500"}),c.status==="degraded"&&s.jsx(vn,{className:"w-4 h-4 text-amber-500"}),c.status==="down"&&s.jsx(nu,{className:"w-4 h-4 text-rose-500"})]}),s.jsxs("div",{className:"flex items-center justify-between mt-1",children:[s.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded uppercase font-bold tracking-wider
                     ${c.status==="operational"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":""}
                     ${c.status==="degraded"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":""}
                     ${c.status==="down"?"bg-rose-100 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400":""}
                   `,children:c.status==="operational"?"":c.status==="degraded"?"":""}),s.jsx("span",{className:"text-[10px] text-slate-400 tabular-nums",children:c.latency})]})]},c.id))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[s.jsxs("div",{onClick:()=>e("profile"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600 dark:text-indigo-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(R9,{className:"w-5 h-5"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-2",children:" "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:"  , ,   ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("team"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-blue-600 dark:text-blue-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(Gr,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:" "}),s.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full",children:[t.users," "]})]}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:" ,      ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("calls"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center text-emerald-600 dark:text-emerald-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(mt,{className:"w-5 h-5"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-2",children:" "}),s.jsxs("div",{className:"flex gap-2 mb-6 h-10 items-start",children:[s.jsx(fr,{variant:"success",className:"text-[10px]",children:" "}),s.jsx(fr,{variant:"brand",className:"text-[10px]",children:"AI Coach "})]}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("pipeline"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-teal-50 dark:bg-teal-900/20 flex items-center justify-center text-teal-600 dark:text-teal-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(S3,{className:"w-5 h-5"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-2",children:" "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:"  ,    ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("knowledge"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-50 dark:bg-orange-900/20 flex items-center justify-center text-orange-600 dark:text-orange-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(ku,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:" "}),s.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full",children:[t.knowledge," "]})]}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:"   ,      ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("campaigns"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-pink-50 dark:bg-pink-900/20 flex items-center justify-center text-pink-600 dark:text-pink-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(Ar,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:""}),s.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full",children:[t.campaigns," "]})]}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:"  ,      ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("integrations"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center text-purple-600 dark:text-purple-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(mw,{className:"w-5 h-5"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-2",children:""}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:[t.activeIntegrations,"  .   API -Webhooks."]}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("notifications"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center text-amber-600 dark:text-amber-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(ri,{className:"w-5 h-5"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-2",children:""}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:"    ,   ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("security"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-rose-50 dark:bg-rose-900/20 flex items-center justify-center text-rose-600 dark:text-rose-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(xm,{className:"w-5 h-5"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white mb-2",children:" "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:"  - (2FA),    ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]}),s.jsxs("div",{onClick:()=>e("billing"),className:"bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 p-6 hover:shadow-md transition-all cursor-pointer group hover:border-brand-200 dark:hover:border-brand-800",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-teal-50 dark:bg-teal-900/20 flex items-center justify-center text-teal-600 dark:text-teal-400 mb-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(d0,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-white",children:" "}),s.jsxs("span",{className:"text-xs bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 px-2 py-0.5 rounded-full",children:[t.leads," "]})]}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-6 leading-relaxed h-10",children:" ,     ."}),s.jsxs("span",{className:"text-xs font-bold text-brand-600 dark:text-brand-400 flex items-center",children:["  ",s.jsx(os,{className:"w-3 h-3 mr-1"})]})]})]})]})},Gce=({isDarkMode:e,user:t,onLogout:r,toggleTheme:n})=>{const a=[{id:"overview",label:" ",icon:ti},{id:"profile",label:" ",icon:Mn},{id:"team",label:" ",icon:Gr},{id:"calls",label:" ",icon:mt},{id:"pipeline",label:" ",icon:S3},{id:"campaigns",label:"",icon:Ar},{id:"knowledge",label:" ",icon:ku},{id:"webhooks",label:"Webhooks",icon:N3},{id:"integrations",label:"",icon:mw},{id:"notifications",label:"",icon:ri},{id:"security",label:" ",icon:xm},{id:"billing",label:"",icon:d0}],l=t.type==="rep"?a.filter(T=>T.id==="profile"):a,[c,d]=v.useState(t.type==="rep"?"profile":"overview"),h=()=>{switch(c){case"overview":return s.jsx(d3,{setCategory:d,stats:S});case"profile":return s.jsx(Uce,{user:t,isDarkMode:e,toggleTheme:n});case"team":return s.jsx(qce,{members:g});case"calls":return s.jsx(Mce,{user:t});case"pipeline":return s.jsx(Pce,{orgId:t.organization_id});case"campaigns":return s.jsx(Dce,{});case"knowledge":return s.jsx(Lce,{user:t});case"webhooks":return s.jsx($ce,{});case"integrations":return s.jsx(Fce,{});case"notifications":return s.jsx(Hce,{});case"security":return s.jsx(Vce,{});case"billing":return s.jsx(Wce,{usage:{users:S.users,minutes:b}});default:return s.jsx(d3,{setCategory:d,stats:S})}},m=(()=>{switch(c){case"overview":return{title:" ",desc:"   , ,    ."};case"profile":return{title:" ",desc:"   ,    ."};case"team":return{title:" ",desc:"  ,    ."};case"calls":return{title:" ",desc:"   ,      ."};case"pipeline":return{title:" ",desc:"   -Pipeline,    ."};case"campaigns":return{title:"",desc:"      ( , , )."};case"knowledge":return{title:" ",desc:"     -       ."};case"webhooks":return{title:"Webhooks & API",desc:"  ,  ,   ."};case"integrations":return{title:"",desc:"      (CRM,  )."};case"notifications":return{title:"",desc:"      ."};case"security":return{title:" ",desc:"   ,    ."};case"billing":return{title:"",desc:"  ,    ."};default:return{title:"",desc:""}}})(),[g,x]=v.useState([]),[b,j]=v.useState(0),[w,_]=v.useState(0),[N,C]=v.useState(0),[E,A]=v.useState(0);Ur.useEffect(()=>{(async()=>{const{data:D}=await me.from("profiles").select("id, full_name, email, role, avatar_url");if(D&&x(D.map(P=>({id:P.id,name:P.full_name||"User",email:P.email||"",role:P.role||"rep",avatar_url:P.avatar_url}))),t.role==="manager"){const{data:P}=await me.from("calls").select("duration");if(P){const R=P.reduce((q,H)=>q+(H.duration||0),0);j(R/60)}const{count:I}=await me.from("leads").select("*",{count:"exact",head:!0});_(I||0);const{count:$}=await me.from("campaigns").select("*",{count:"exact",head:!0});C($||0);const{count:M}=await me.from("organization_knowledge").select("*",{count:"exact",head:!0});A(M||0)}else{const{count:P}=await me.from("leads").select("*",{count:"exact",head:!0});_(P||0)}})()},[t.role]);const S={users:g.length||1,activeIntegrations:4,leads:w,campaigns:N,knowledge:E};return s.jsxs("div",{className:"flex flex-1 h-full bg-slate-50 dark:bg-slate-950 overflow-hidden",children:[s.jsxs("div",{className:"w-64 flex-shrink-0 bg-white dark:bg-slate-900 border-e border-slate-200 dark:border-slate-800 hidden lg:flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800",children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:" "}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"  "})]}),s.jsx("div",{className:"p-3 space-y-1 flex-1 overflow-y-auto",children:l.map(T=>s.jsxs("button",{onClick:()=>d(T.id),className:`
                w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all
                ${c===T.id?"bg-brand-50 text-brand-700 dark:bg-brand-900/20 dark:text-brand-300":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-slate-200"}
              `,children:[s.jsx(T.icon,{className:`w-4 h-4 ${c===T.id?"text-brand-600":"opacity-70"}`}),T.label]},T.id))}),s.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800",children:s.jsxs("button",{onClick:r,className:"flex items-center gap-3 w-full px-3 py-2 text-sm font-medium text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/10 rounded-lg transition-colors",children:[s.jsx(fw,{className:"w-4 h-4"}),""]})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-10",children:[s.jsx("div",{className:"flex items-center justify-between mb-8 animate-in fade-in duration-300",children:s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center gap-3 mb-1",children:s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:m.title})}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:m.desc})]})}),h()]})]})},Kce=({type:e})=>{switch(e){case"call":return s.jsx(mt,{className:"w-3.5 h-3.5"});case"email":return s.jsx(xs,{className:"w-3.5 h-3.5"});case"proposal":return s.jsx(gs,{className:"w-3.5 h-3.5"});case"file":return s.jsx(gs,{className:"w-3.5 h-3.5"});case"whatsapp":return s.jsx(Xn,{className:"w-3.5 h-3.5"});case"meeting":return s.jsx(sw,{className:"w-3.5 h-3.5"});default:return s.jsx(gw,{className:"w-3.5 h-3.5"})}},eR=({type:e})=>{switch(e){case"call":return s.jsx("span",{children:" "});case"email":return s.jsx("span",{children:""});case"proposal":return s.jsx("span",{children:" "});case"whatsapp":return s.jsx("span",{children:" "});case"meeting":return s.jsx("span",{children:""});case"file":return s.jsx("span",{children:""});default:return s.jsx("span",{children:""})}},Wf=({task:e,onClick:t})=>s.jsxs("div",{onClick:t,className:"flex items-center justify-between p-4 rounded-xl border border-transparent bg-white dark:bg-slate-900 shadow-sm hover:shadow-md hover:border-brand-200 dark:hover:border-slate-700 transition-all cursor-pointer group relative overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-4 relative z-10",children:[s.jsx("div",{className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all duration-200 ${e.status==="completed"?"bg-emerald-500 border-emerald-500 text-white":"border-slate-300 dark:border-slate-600 hover:border-brand-500 bg-slate-50 dark:bg-slate-800"}`,onClick:r=>{r.stopPropagation()},children:e.status==="completed"&&s.jsx(gw,{className:"w-4 h-4"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:`text-sm font-bold ${e.status==="completed"?"text-slate-400 line-through":"text-slate-900 dark:text-white"}`,children:e.title}),e.priority==="high"&&s.jsx("span",{className:"flex h-2 w-2 rounded-full bg-rose-500 ring-2 ring-rose-100 dark:ring-rose-900/50",title:" "})]}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[s.jsxs("span",{className:`flex items-center gap-1.5 text-xs font-medium px-2 py-0.5 rounded-md ${e.type==="call"?"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400":e.type==="email"?"bg-purple-50 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400":"bg-slate-100 text-slate-600 dark:bg-slate-800 dark:text-slate-400"}`,children:[s.jsx(Kce,{type:e.type}),s.jsx("span",{className:"text-[10px]",children:s.jsx(eR,{type:e.type})})]}),s.jsxs("span",{className:"text-xs text-slate-400 flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3"})," ",e.dueTime]}),e.leadName&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-slate-300 text-[10px]",children:""}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium",children:e.leadName})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-all duration-200 transform translate-x-2 group-hover:translate-x-0",children:[s.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400 hover:text-brand-600 transition-colors",children:s.jsx(W9,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400 hover:text-rose-600 transition-colors",children:s.jsx(ra,{className:"w-4 h-4"})})]})]}),Yce=({tasks:e,onSelectTask:t,activeTab:r,setActiveTab:n,filterProps:a,stats:l})=>{const c=new Date,d=c.toISOString().split("T")[0],h=new Date(c);h.setDate(c.getDate()+7);const f=h.toISOString().split("T")[0],m=P=>P?new Date(P).toISOString().split("T")[0]:"",g=e.filter(P=>P.status==="overdue"||P.status==="open"&&m(P.dueDate)<d),x=e.filter(P=>m(P.dueDate)===d),b=x.filter(P=>P.status==="completed").length;let j=e;r==="today"?j=x:r==="week"&&(j=e.filter(P=>{const I=m(P.dueDate);return I>=d&&I<=f}));const w=j.filter(P=>P.dueTime&&parseInt(P.dueTime)<12),_=j.filter(P=>P.dueTime&&parseInt(P.dueTime)>=12&&parseInt(P.dueTime)<15),N=j.filter(P=>P.dueTime&&parseInt(P.dueTime)>=15),C=r==="today"?g.filter(P=>P.status!=="completed"):[],E=e.filter(P=>P.aiReason&&P.status!=="completed").slice(0,2),{filterType:A,setFilterType:S,isFilterOpen:T,setIsFilterOpen:D}=a;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 mb-6 md:mb-10 px-4 md:px-6",children:[s.jsxs("div",{className:"group bg-white dark:bg-slate-900 rounded-xl md:rounded-2xl p-4 md:p-5 shadow-card hover:shadow-card-hover border border-slate-100 dark:border-slate-800 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute -right-10 -top-10 w-24 h-24 bg-blue-500/5 rounded-full blur-2xl group-hover:bg-blue-500/10 transition-colors"}),s.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-500 dark:text-slate-400",children:" "}),s.jsx("div",{className:"p-1 md:p-1.5 rounded-lg bg-blue-50 text-blue-600 dark:bg-blue-900/20",children:s.jsx(C3,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]}),s.jsx("div",{className:"mb-2 md:mb-3 relative z-10",children:s.jsx("span",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight font-mono",children:e.filter(P=>P.status==="open").length})}),s.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden relative z-10",children:s.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${e.filter(P=>P.status==="open").length/(e.length||1)*100}%`}})})]}),s.jsxs("div",{className:"group bg-white dark:bg-slate-900 rounded-xl md:rounded-2xl p-4 md:p-5 shadow-card hover:shadow-card-hover border border-slate-100 dark:border-slate-800 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute -right-10 -top-10 w-24 h-24 bg-rose-500/5 rounded-full blur-2xl group-hover:bg-rose-500/10 transition-colors"}),s.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-500 dark:text-slate-400",children:" "}),s.jsx("div",{className:"p-1 md:p-1.5 rounded-lg bg-rose-50 text-rose-600 dark:bg-rose-900/20",children:s.jsx(ru,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]}),s.jsxs("div",{className:"mb-2 md:mb-3 relative z-10 flex items-end gap-2",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight font-mono",children:g.length}),g.length>0&&s.jsx(fr,{variant:"danger",className:"mb-1 text-[10px]",children:""})]}),s.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden relative z-10",children:s.jsx("div",{className:"h-full bg-rose-500 rounded-full",style:{width:`${g.length/(e.length||1)*100}%`}})})]}),s.jsxs("div",{className:"group bg-white dark:bg-slate-900 rounded-xl md:rounded-2xl p-4 md:p-5 shadow-card hover:shadow-card-hover border border-slate-100 dark:border-slate-800 transition-all duration-300 relative overflow-hidden",children:[s.jsx("div",{className:"absolute -right-10 -top-10 w-24 h-24 bg-emerald-500/5 rounded-full blur-2xl group-hover:bg-emerald-500/10 transition-colors"}),s.jsxs("div",{className:"flex justify-between items-start mb-2 relative z-10",children:[s.jsx("span",{className:"text-xs md:text-sm font-medium text-slate-500 dark:text-slate-400",children:" "}),s.jsx("div",{className:"p-1 md:p-1.5 rounded-lg bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20",children:s.jsx(At,{className:"w-3.5 h-3.5 md:w-4 md:h-4"})})]}),s.jsx("div",{className:"mb-2 md:mb-3 relative z-10",children:s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight font-mono",children:b}),s.jsxs("span",{className:"text-xs md:text-sm text-slate-400 font-medium",children:["/ ",x.length]})]})}),s.jsx("div",{className:"w-full h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden relative z-10",children:s.jsx("div",{className:"h-full bg-emerald-500 rounded-full transition-all duration-1000",style:{width:`${b/(x.length||1)*100}%`}})})]})]}),s.jsx("div",{className:"flex-1 overflow-visible lg:overflow-hidden px-4 md:px-6 pb-4 md:pb-6 min-h-0",children:s.jsxs("div",{className:"grid grid-cols-1 gap-4 md:gap-8 lg:grid-cols-12 lg:h-full",children:[s.jsxs("div",{className:"lg:col-span-8 flex flex-col bg-white/50 dark:bg-slate-900/50 rounded-2xl border border-slate-200/60 dark:border-slate-800/60 shadow-sm lg:h-full overflow-hidden backdrop-blur-sm order-2 lg:order-1",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 dark:border-slate-800 px-4 md:px-6 pt-4 pb-0 bg-white dark:bg-slate-900 rounded-t-2xl",children:[s.jsx("div",{className:"flex gap-6 overflow-x-auto no-scrollbar",children:[{id:"today",label:""},{id:"week",label:""},{id:"all",label:" "}].map(P=>s.jsx("button",{onClick:()=>n(P.id),className:`
                       pb-4 text-sm font-medium border-b-2 transition-all whitespace-nowrap
                       ${r===P.id?"border-brand-600 text-brand-600 dark:border-brand-400 dark:text-brand-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}
                     `,children:P.label},P.id))}),s.jsxs("div",{className:"relative mb-2 hidden sm:block",children:[s.jsxs(be,{variant:"ghost",size:"sm",className:`text-xs ${A!=="all"?"text-brand-600 bg-brand-50":""}`,onClick:()=>D(!T),children:[s.jsx(uw,{className:"w-3.5 h-3.5 ml-1.5"}),A!=="all"?s.jsx(eR,{type:A}):""]}),T&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>D(!1)}),s.jsxs("div",{className:"absolute left-0 mt-2 w-40 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-40 py-1",children:[s.jsx("button",{onClick:()=>{S("all"),D(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800",children:""}),s.jsx("button",{onClick:()=>{S("call"),D(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800",children:""}),s.jsx("button",{onClick:()=>{S("email"),D(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800",children:""}),s.jsx("button",{onClick:()=>{S("proposal"),D(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800",children:" "}),s.jsx("button",{onClick:()=>{S("meeting"),D(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800",children:""})]})]})]})]}),s.jsxs("div",{className:"flex-1 lg:overflow-y-auto p-4 md:p-6 space-y-6 md:space-y-8 bg-slate-50/30 dark:bg-slate-950/30",children:[C.length>0&&s.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[s.jsxs("h3",{className:"text-xs font-bold text-rose-600 dark:text-rose-400 uppercase tracking-wider mb-4 flex items-center gap-2 pl-2 border-l-2 border-rose-500",children:[" (",C.length,")"]}),s.jsx("div",{className:"space-y-3",children:C.map(P=>s.jsx(Wf,{task:P,onClick:()=>t(P)},P.id))})]}),w.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 pl-2 border-l-2 border-slate-200 dark:border-slate-700",children:" (08:00 - 12:00)"}),s.jsx("div",{className:"space-y-3",children:w.map(P=>s.jsx(Wf,{task:P,onClick:()=>t(P)},P.id))})]}),_.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 pl-2 border-l-2 border-slate-200 dark:border-slate-700",children:" (12:00 - 15:00)"}),s.jsx("div",{className:"space-y-3",children:_.map(P=>s.jsx(Wf,{task:P,onClick:()=>t(P)},P.id))})]}),N.length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 pl-2 border-l-2 border-slate-200 dark:border-slate-700",children:"  (15:00 - 18:00)"}),s.jsx("div",{className:"space-y-3",children:N.map(P=>s.jsx(Wf,{task:P,onClick:()=>t(P)},P.id))})]}),s.jsx("div",{className:"pt-4 text-center",children:s.jsx(be,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-brand-600",children:"  "})})]})]}),s.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-4 md:gap-6 lg:h-full lg:overflow-y-auto pb-4 order-1 lg:order-2",children:[s.jsxs("div",{className:"bg-gradient-to-br from-[#1e1b4b] to-[#312e81] rounded-2xl shadow-xl shadow-indigo-900/20 p-6 text-white relative overflow-hidden flex-shrink-0 border border-white/5",children:[s.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/20 rounded-full -mr-10 -mt-10 blur-3xl mix-blend-overlay"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-purple-500/20 rounded-full -ml-5 -mb-5 blur-3xl mix-blend-overlay"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[s.jsx("div",{className:"p-2 bg-white/10 rounded-xl backdrop-blur-md border border-white/10 shadow-lg",children:s.jsx(jr,{className:"w-5 h-5 text-yellow-300 fill-yellow-300/20"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg leading-tight",children:" "}),s.jsx("p",{className:"text-xs text-indigo-200 opacity-80",children:'   " -AI'})]})]}),s.jsx("div",{className:"space-y-4",children:E.map((P,I)=>s.jsxs("div",{className:"group bg-white/5 hover:bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/5 hover:border-white/20 transition-all duration-300 cursor-pointer shadow-lg hover:-translate-y-1",onClick:()=>t(P),children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(fr,{variant:"danger",className:"text-[10px] bg-rose-600 text-white border-none shadow-md shadow-rose-900/20",children:" "})}),s.jsx("span",{className:"text-xs text-indigo-200 font-mono bg-black/20 px-2 py-0.5 rounded-md",children:P.dueTime})]}),s.jsx("p",{className:"text-sm font-bold mb-1.5 truncate text-white",children:P.title}),s.jsxs("div",{className:"flex items-start gap-2 mb-4",children:[s.jsx("div",{className:"w-0.5 h-full bg-indigo-400/50 rounded-full self-stretch"}),s.jsxs("p",{className:"text-xs text-indigo-100 opacity-80 leading-relaxed",children:['"',P.aiReason,'"']})]}),s.jsxs("button",{className:"w-full py-2 bg-white text-indigo-900 rounded-lg text-xs font-bold hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2 shadow-sm",children:[s.jsx(Hl,{className:"w-3 h-3 fill-current"}),"  "]})]},P.id))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-sm p-6",children:[s.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white text-sm mb-5 flex items-center gap-2",children:[s.jsx(sw,{className:"w-4 h-4 text-brand-500"})," "]}),s.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{label:"",count:l.calls,icon:mt,color:"text-blue-600 bg-blue-50 dark:bg-blue-900/20"},{label:"",count:l.emails,icon:xs,color:"text-purple-600 bg-purple-50 dark:bg-purple-900/20"},{label:" ",count:l.proposals,icon:gs,color:"text-pink-600 bg-pink-50 dark:bg-pink-900/20"},{label:"",count:l.meetings,icon:Gr,color:"text-amber-600 bg-amber-50 dark:bg-amber-900/20"}].map((P,I)=>s.jsxs("div",{className:"flex flex-col items-center justify-center p-4 rounded-xl border border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-800/20 hover:bg-slate-100 dark:hover:bg-slate-800/40 transition-colors group cursor-default",children:[s.jsx("div",{className:`p-2.5 rounded-xl mb-2 ${P.color} group-hover:scale-110 transition-transform duration-300`,children:s.jsx(P.icon,{className:"w-5 h-5"})}),s.jsx("span",{className:"text-xl font-bold text-slate-900 dark:text-white",children:P.count}),s.jsx("span",{className:"text-xs text-slate-500 font-medium",children:P.label})]},I))})]})]})]})})]})},Xce=({isDarkMode:e,currentUser:t})=>{const[r,n]=v.useState("today"),[a,l]=v.useState("all"),[c,d]=v.useState(!1),f=((t==null?void 0:t.type)||"manager")==="rep",[m,g]=v.useState("all"),[x,b]=v.useState(!1),[j,w]=v.useState([]);v.useEffect(()=>{(async()=>{if(f||!(t!=null&&t.organization_id))return;const{data:q}=await me.from("profiles").select("id, full_name, avatar_url").eq("organization_id",t.organization_id);q&&w(q.map(H=>({id:H.id,name:H.full_name,avatar:H.avatar_url})))})()},[t,f]);const _=f?t.id:m==="all"?void 0:m,{tasks:N,loading:C,addTask:E,toggleTask:A}=YM(t.organization_id,_),T=N.map(R=>{const q=R.rawDate?new Date(R.rawDate):new Date;return{id:R.id,title:R.title,type:R.type||"admin",dueDate:q.toISOString().split("T")[0],dueTime:R.dueTime||"12:00",leadName:R.leadName,status:R.completed?"completed":new Date(R.dueDate)<new Date?"overdue":"open",priority:R.priority||"medium",ownerId:R.ownerId||t.id,aiReason:R.ai_reason}}),D=a==="all"?T:T.filter(R=>R.type===a),P={calls:T.filter(R=>R.type==="call").length,emails:T.filter(R=>R.type==="email").length,proposals:T.filter(R=>R.type==="proposal").length,meetings:T.filter(R=>R.type==="meeting").length},[I,$]=v.useState(!1),M=()=>{$(!0)};return s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col h-full bg-slate-50 dark:bg-slate-950 relative",children:[s.jsxs("div",{className:"px-6 py-6 md:py-8 flex flex-col md:flex-row md:items-center justify-between gap-4 flex-shrink-0",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:f?" ":"  "}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:f?"   .":"    ."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[!f&&s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>b(!x),className:"flex items-center gap-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-700 dark:text-slate-300 text-sm rounded-xl px-4 py-2.5 hover:border-brand-400 transition-all shadow-sm",children:[s.jsx(uw,{className:"w-4 h-4 text-brand-600"}),s.jsx("span",{className:"font-medium",children:""}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 transition-transform ${x?"rotate-180":""}`})]}),x&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>b(!1)}),s.jsxs("div",{className:"absolute left-0 mt-2 w-52 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl shadow-xl z-40 py-2 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("button",{onClick:()=>{g("all"),b(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm transition-colors ${m==="all"?"bg-brand-50 dark:bg-brand-900/20 text-brand-700 dark:text-brand-400 font-semibold":"hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300"}`,children:[m==="all"&&s.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-600"}),s.jsx("span",{className:m!=="all"?"mr-5":"",children:" "})]}),s.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 my-1"}),j.map(R=>s.jsxs("button",{onClick:()=>{g(R.id),b(!1)},className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm transition-colors ${m===R.id?"bg-brand-50 dark:bg-brand-900/20 text-brand-700 dark:text-brand-400 font-semibold":"hover:bg-slate-50 dark:hover:bg-slate-800 text-slate-700 dark:text-slate-300"}`,children:[m===R.id&&s.jsx("span",{className:"w-2 h-2 rounded-full bg-brand-600"}),s.jsx("img",{src:R.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(R.name||"U")}&background=random&size=24`,alt:"",className:"w-6 h-6 rounded-full object-cover"}),s.jsx("span",{className:(m!==R.id,""),children:R.name})]},R.id)),m!=="all"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"h-px bg-slate-100 dark:bg-slate-800 my-1"}),s.jsx("button",{onClick:()=>{g("all"),b(!1)},className:"w-full text-center px-4 py-2.5 text-sm text-brand-600 hover:text-brand-700 font-medium hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:""})]})]})]})]}),s.jsxs(be,{onClick:M,children:[s.jsx(wn,{className:"w-4 h-4 ml-2"})," "]})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col min-h-0",children:[C?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx("span",{className:"text-slate-400",children:" ..."})}):s.jsx(Yce,{tasks:D,onSelectTask:R=>A(R.id,R.status==="completed"),activeTab:r,setActiveTab:n,filterProps:{filterType:a,setFilterType:l,isFilterOpen:c,setIsFilterOpen:d},stats:P}),s.jsx(JM,{isOpen:I,onClose:()=>$(!1),onAdd:E})]})]})},Jce=({targetData:e,user:t,onClose:r,onSave:n})=>{const[a,l]=Ur.useState(null);if(Ur.useEffect(()=>{e&&l({calls:e.calls.target,connectedCalls:e.connectedCalls.target,talkTime:e.talkTime.target,conversion:15,quality:80,deals:e.deals.target*20,revenue:e.revenue.target})},[e]),!e||!t||!a)return null;const c=(h,f)=>{l(m=>({...m,[h]:Number(f)}))},d=()=>{n(a)};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40",onClick:r}),s.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 w-full md:w-[480px] bg-white dark:bg-slate-950 shadow-2xl border-r border-slate-200 dark:border-slate-800 transform transition-transform duration-300 ease-in-out flex flex-col",children:[s.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 dark:border-slate-800 flex justify-between items-start bg-slate-50/50 dark:bg-slate-900/50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:t.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(t.name)}&background=random`,alt:"",className:"w-12 h-12 rounded-full border-2 border-slate-200 dark:border-slate-700"}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white leading-tight",children:["  ",t.name]}),s.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"    "})]})]}),s.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-100 dark:border-slate-800 pb-2",children:[s.jsx(ti,{className:"w-4 h-4 text-brand-500"}),s.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase",children:" (Activity)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.calls,onChange:h=>c("calls",h.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 pointer-events-none",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"  "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.connectedCalls,onChange:h=>c("connectedCalls",h.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 pointer-events-none",children:""})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"   ()"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.talkTime,onChange:h=>c("talkTime",h.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 pointer-events-none",children:""})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-100 dark:border-slate-800 pb-2",children:[s.jsx(rl,{className:"w-4 h-4 text-purple-500"}),s.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase",children:" (Quality)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"  ( )"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.conversion,onChange:h=>c("conversion",h.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 pointer-events-none",children:"%"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"  "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.quality,onChange:h=>c("quality",h.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 pointer-events-none",children:""})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 border-b border-slate-100 dark:border-slate-800 pb-2",children:[s.jsx(sw,{className:"w-4 h-4 text-emerald-500"}),s.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase",children:" (Outcome)"})]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"  "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.deals,onChange:h=>c("deals",h.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 pointer-events-none",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 mb-1.5 block",children:"  "}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:a.revenue,onChange:h=>c("revenue",h.target.value),className:"w-full px-3 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-xs text-slate-400 pointer-events-none",children:""})]})]})]})]}),s.jsxs("div",{className:"bg-brand-50 dark:bg-brand-900/10 p-4 rounded-xl border border-brand-100 dark:border-brand-900/30 flex gap-3",children:[s.jsx(Ar,{className:"w-5 h-5 text-brand-600 dark:text-brand-400 flex-shrink-0 mt-0.5"}),s.jsx("p",{className:"text-xs text-brand-800 dark:text-brand-200 leading-relaxed",children:"             .     ."})]})]}),s.jsxs("div",{className:"p-4 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-950 flex flex-col gap-3",children:[s.jsxs(be,{onClick:d,className:"w-full justify-center",children:[s.jsx(sl,{className:"w-4 h-4 ml-2"})," "]}),s.jsxs("button",{className:"text-xs text-slate-500 hover:text-slate-800 dark:hover:text-slate-300 flex items-center justify-center gap-1.5 py-2",children:[s.jsx(Cu,{className:"w-3 h-3"}),"   "]})]})]})]})},Qce=({isDarkMode:e,orgId:t})=>{var I;const[r,n]=v.useState("day"),[a,l]=v.useState("all"),[c,d]=v.useState(""),[h,f]=v.useState(!1),[m,g]=v.useState(null),[x,b]=v.useState([]),[j,w]=v.useState({}),[_,N]=v.useState(!0);Ur.useEffect(()=>{C()},[r,a,t]);const C=async()=>{if(t)try{N(!0);const{data:$,error:M}=await me.from("profiles").select("id, full_name, avatar_url, role, organization_id").eq("organization_id",t);$&&b($.map(W=>({id:W.id,name:W.full_name,avatar:W.avatar_url,role:W.role,organization_id:W.organization_id})));const{data:R,error:q}=await me.from("user_targets").select("*").eq("period",r);if(q)throw q;const H={};R==null||R.forEach(W=>{H[W.user_id]||(H[W.user_id]={}),H[W.user_id][W.target_type]=W.target_value}),w(H)}catch($){console.error("Error fetching data:",$)}finally{N(!1)}},E=async $=>{if(!m)return;const M=Object.keys($).map(R=>{var q;return{user_id:m,organization_id:((q=x.find(H=>H.id===m))==null?void 0:q.organization_id)||t,target_type:R,target_value:$[R],period:r}});try{const{error:R}=await me.from("user_targets").upsert(M,{onConflict:"user_id, organization_id, target_type, period"});if(R)throw R;C(),g(null)}catch(R){console.error("Error saving targets:",R),alert("Error saving targets")}},A=$=>{const M=j[$];return{userId:$,calls:{target:(M==null?void 0:M.calls)||40,current:0},connectedCalls:{target:(M==null?void 0:M.connectedCalls)||15,current:0},talkTime:{target:(M==null?void 0:M.talkTime)||120,current:0},deals:{target:((M==null?void 0:M.deals)||5)/20,current:0},revenue:{target:(M==null?void 0:M.revenue)||5e4,current:0}}},S=m?A(m):null,T=x.find($=>$.id===m),D=({current:$,target:M,colorClass:R="bg-brand-600"})=>{const q=Math.min($/M*100,100);return s.jsx("div",{className:"w-24 h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden mt-1.5",children:s.jsx("div",{className:`h-full rounded-full ${R}`,style:{width:`${q}%`}})})},P=x.filter($=>{const M=a==="all"||$.id===a,R=c===""||$.name.toLowerCase().includes(c.toLowerCase());return M&&R});return s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col h-full bg-slate-50 dark:bg-slate-950 relative",children:[s.jsxs("div",{className:"px-6 py-6 md:py-8 flex flex-col md:flex-row md:items-center justify-between gap-4 flex-shrink-0",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" "}),s.jsx(fr,{variant:"brand",className:"text-xs",children:"Manager Only"})]}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"  ,     ."})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-1 rounded-lg",children:[s.jsx("button",{onClick:()=>n("day"),className:`px-4 py-1.5 text-xs font-medium rounded-md transition-all ${r==="day"?"bg-brand-600 text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:""}),s.jsx("button",{onClick:()=>n("week"),className:`px-4 py-1.5 text-xs font-medium rounded-md transition-all ${r==="week"?"bg-brand-600 text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:""}),s.jsx("button",{onClick:()=>n("month"),className:`px-4 py-1.5 text-xs font-medium rounded-md transition-all ${r==="month"?"bg-brand-600 text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:""})]}),s.jsx("div",{className:"h-6 w-px bg-slate-300 dark:bg-slate-700 mx-1"}),s.jsxs("div",{className:"relative",children:[s.jsxs(be,{variant:"secondary",className:"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 min-w-[140px] justify-between items-center",onClick:()=>f(!h),children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Gr,{className:"w-4 h-4 ml-2"}),s.jsx("span",{className:"text-sm",children:a==="all"?" ":(I=x.find($=>$.id===a))==null?void 0:I.name})]}),s.jsx(Et,{className:"w-3.5 h-3.5 mr-2 opacity-50"})]}),h&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>f(!1)}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-20 py-1 overflow-hidden",children:[s.jsx("button",{onClick:()=>{l("all"),f(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800",children:" "}),x.map($=>s.jsx("button",{onClick:()=>{l($.id),f(!1)},className:"w-full text-right px-4 py-2 text-sm hover:bg-slate-50 dark:hover:bg-slate-800",children:$.name},$.id))]})]})]}),s.jsxs("div",{className:"relative w-64 hidden xl:block",children:[s.jsx(ta,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:" ...",value:c,onChange:$=>d($.target.value),className:"w-full pr-9 pl-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg text-sm outline-none focus:ring-1 focus:ring-brand-500"})]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto px-6 pb-6",children:s.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-sm overflow-hidden",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800/50 text-xs text-slate-500 font-semibold uppercase border-b border-slate-100 dark:border-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4",children:" "}),s.jsx("th",{className:"px-6 py-4",children:" "}),s.jsx("th",{className:"px-6 py-4",children:""}),s.jsx("th",{className:"px-6 py-4",children:" ()"}),s.jsx("th",{className:"px-6 py-4",children:" "}),s.jsx("th",{className:"px-6 py-4 w-16"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:P.map($=>{const M=A($.id),R=M.calls.target,q=M.calls.current,H=M.connectedCalls.target,W=M.connectedCalls.current,L=M.deals.target,B=M.deals.current;return M.revenue.target,M.revenue.current,s.jsxs("tr",{className:"group hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",onClick:()=>g($.id),children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:$.avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent($.name)}&background=random`,className:"w-9 h-9 rounded-full border border-slate-200 dark:border-slate-700 object-cover",alt:""}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold text-slate-900 dark:text-white text-sm",children:$.name}),s.jsx("p",{className:"text-xs text-slate-500",children:$.role})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:q}),s.jsxs("span",{className:"text-xs text-slate-400",children:["/ ",R]})]}),s.jsx(D,{current:q,target:R})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:W}),s.jsxs("span",{className:"text-xs text-slate-400",children:["/ ",H]})]}),s.jsx(D,{current:W,target:H,colorClass:"bg-indigo-500"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:[M.talkTime.current,"  ",s.jsxs("span",{className:"text-slate-400 font-normal",children:["/ ",M.talkTime.target]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:B}),s.jsxs("span",{className:"text-xs text-slate-400",children:["/ ",L]})]}),s.jsx(D,{current:B,target:L,colorClass:"bg-emerald-500"})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white",children:["",(M.revenue.current/1e3).toFixed(0),"k ",s.jsxs("span",{className:"text-slate-400 font-normal text-xs",children:["/ ",(M.revenue.target/1e3).toFixed(0),"k"]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs(fr,{variant:M.productivityScore>90?"success":M.productivityScore>75?"warning":"danger",children:[M.productivityScore,"%"]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("button",{onClick:G=>{G.stopPropagation(),g($.id)},className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400 hover:text-brand-600 transition-colors",children:s.jsx(Su,{className:"w-4 h-4"})})})]},$.id)})})]})})}),s.jsx(Jce,{targetData:S,user:T,onClose:()=>g(null),onSave:E})]})},Zce=({isDarkMode:e,onStartCall:t,currentUser:r})=>{const[n,a]=v.useState("day"),[l,c]=v.useState(null),[d,h]=v.useState([]),[f,m]=v.useState([]),[g,x]=v.useState([]),[b,j]=v.useState(!0);v.useEffect(()=>{(async()=>{j(!0);try{const E=r!=null&&r.id?`&userId=${r.id}`:"",A=r!=null&&r.organization_id?`&organizationId=${r.organization_id}`:"",[S,T,D,P]=await Promise.all([fetch(`/api/panel/stats?range=${n}${E}${A}`),fetch(`/api/panel/hot-leads?limit=5${E}${A}`),fetch(`/api/panel/at-risk-leads?hours=48&limit=5${E}${A}`),fetch(`/api/panel/lead-queue?limit=10${E}${A}`)]),[I,$,M,R]=await Promise.all([S.json(),T.json(),D.json(),P.json()]);I.success&&c(I.stats),$.success&&h($.leads),M.success&&m(M.leads),R.success&&x(R.leads)}catch(E){console.error("[Panel] Error fetching data:",E)}finally{j(!1)}})()},[n,r==null?void 0:r.id,r==null?void 0:r.organization_id]);const w=({title:C,current:E,target:A,percentage:S,icon:T,color:D})=>s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:C}),s.jsx("div",{className:`w-10 h-10 rounded-xl ${D} flex items-center justify-center`,children:s.jsx(T,{className:"w-5 h-5 text-white"})})]}),s.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[s.jsx("span",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:E}),s.jsxs("span",{className:"text-sm text-slate-400",children:["/ ",A]})]}),s.jsx("div",{className:"w-full h-2 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${D}`,style:{width:`${S}%`}})}),s.jsxs("span",{className:"text-xs text-slate-400 mt-1 block",children:[S,"%"]})]}),_=[{name:"",value:(l==null?void 0:l.leadsContacted.current)||0,fill:"#6366f1"},{name:" ",value:(l==null?void 0:l.newLeads.current)||0,fill:"#8b5cf6"},{name:"",value:(l==null?void 0:l.appointments.current)||0,fill:"#06b6d4"},{name:"",value:(l==null?void 0:l.closedDeals.current)||0,fill:"#10b981"}],N=C=>{t&&t(C.phone,C.id)};return s.jsxs("div",{className:"flex-1 overflow-auto h-full bg-slate-50 dark:bg-slate-950 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:" "}),s.jsx("span",{className:"text-2xl",children:""})]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["  ",n==="day"?"":n==="week"?"":""]})]}),s.jsx("div",{className:"flex items-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 p-1 rounded-lg",children:["day","week","month"].map(C=>s.jsx("button",{onClick:()=>a(C),className:`px-4 py-1.5 text-xs font-medium rounded-md transition-all ${n===C?"bg-brand-600 text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:C==="day"?"":C==="week"?"":""},C))})]}),b?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[1,2,3,4].map(C=>s.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 h-32 animate-pulse"},C))}):s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[s.jsx(w,{title:"  ",current:(l==null?void 0:l.leadsContacted.current)||0,target:(l==null?void 0:l.leadsContacted.target)||15,percentage:(l==null?void 0:l.leadsContacted.percentage)||0,icon:mt,color:"bg-gradient-to-br from-indigo-500 to-purple-600"}),s.jsx(w,{title:"  ",current:(l==null?void 0:l.newLeads.current)||0,target:(l==null?void 0:l.newLeads.target)||12,percentage:(l==null?void 0:l.newLeads.percentage)||0,icon:Gr,color:"bg-gradient-to-br from-purple-500 to-pink-600"}),s.jsx(w,{title:" ",current:(l==null?void 0:l.appointments.current)||0,target:(l==null?void 0:l.appointments.target)||5,percentage:(l==null?void 0:l.appointments.percentage)||0,icon:On,color:"bg-gradient-to-br from-cyan-500 to-blue-600"}),s.jsx(w,{title:" ",current:(l==null?void 0:l.closedDeals.current)||0,target:(l==null?void 0:l.closedDeals.target)||2,percentage:(l==null?void 0:l.closedDeals.percentage)||0,icon:Ar,color:"bg-gradient-to-br from-emerald-500 to-green-600"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-6",children:[s.jsxs("div",{className:"lg:col-span-4 space-y-4 lg:space-y-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(su,{className:"w-5 h-5 text-orange-500"}),s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white",children:"  "})]}),s.jsx("div",{className:"space-y-3",children:d.length===0?s.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"   "}):d.map(C=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-xl hover:bg-orange-50 dark:hover:bg-orange-900/20 transition-colors cursor-pointer group",onClick:()=>N(C),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center text-white font-bold text-sm",children:C.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900 dark:text-white text-sm",children:C.name}),s.jsx("p",{className:"text-xs text-slate-500",children:C.company})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(fr,{variant:"warning",className:"text-xs",children:[C.score," "]}),s.jsx(be,{size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity bg-green-500 hover:bg-green-600",onClick:E=>{E.stopPropagation(),N(C)},children:s.jsx(mt,{className:"w-3 h-3"})})]})]},C.id))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-5 shadow-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(vn,{className:"w-5 h-5 text-red-500"}),s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white",children:"  "}),f.length>0&&s.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs rounded-full font-bold",children:f.length})]}),s.jsx("div",{className:"space-y-3",children:f.length===0?s.jsx("p",{className:"text-sm text-slate-400 text-center py-4",children:"   "}):f.map(C=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/10 rounded-xl hover:bg-red-100 dark:hover:bg-red-900/20 transition-colors cursor-pointer group",onClick:()=>N(C),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center text-slate-600 dark:text-slate-300 font-bold text-sm",children:C.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900 dark:text-white text-sm",children:C.name}),s.jsxs("p",{className:"text-xs text-red-500 flex items-center gap-1",children:[s.jsx(Br,{className:"w-3 h-3"}),"   ",C.timeSinceActivity]})]})]}),s.jsx(be,{size:"sm",className:"opacity-0 group-hover:opacity-100 transition-opacity bg-orange-500 hover:bg-orange-600",onClick:E=>{E.stopPropagation(),N(C)},children:s.jsx(mt,{className:"w-3 h-3"})})]},C.id))})]})]}),s.jsx("div",{className:"lg:col-span-5",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-4 md:p-5 shadow-sm h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gr,{className:"w-5 h-5 text-brand-500"}),s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white",children:"  "}),s.jsx("span",{className:"text-xs text-slate-400",children:g.length})]}),g.length>0&&s.jsxs(be,{className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700",onClick:()=>N(g[0]),children:[s.jsx(Hl,{className:"w-4 h-4 ml-2"}),"  "]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right min-w-[500px]",children:[s.jsx("thead",{className:"text-xs text-slate-500 uppercase border-b border-slate-100 dark:border-slate-800",children:s.jsxs("tr",{children:[s.jsx("th",{className:"pb-3 font-semibold",children:" "}),s.jsx("th",{className:"pb-3 font-semibold",children:""}),s.jsx("th",{className:"pb-3 font-semibold",children:" "}),s.jsx("th",{className:"pb-3 font-semibold",children:" "}),s.jsx("th",{className:"pb-3 w-20"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:g.map((C,E)=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[s.jsx("td",{className:"py-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-xs ${C.priority==="Hot"?"bg-gradient-to-br from-orange-400 to-red-500":C.priority==="Warm"?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-gradient-to-br from-blue-400 to-indigo-500"}`,children:C.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900 dark:text-white text-sm",children:C.name}),s.jsx("p",{className:"text-xs text-slate-500",children:C.company})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx(fr,{variant:C.status==="New"?"success":C.status==="Discovery"?"brand":C.status==="Proposal"?"warning":"secondary",children:C.status})}),s.jsx("td",{className:"py-3 text-sm text-slate-500",children:C.lastActivity?new Date(C.lastActivity).toLocaleDateString("he-IL"):""}),s.jsx("td",{className:"py-3",children:s.jsxs("span",{className:"text-sm text-slate-600 dark:text-slate-300 flex items-center gap-1",children:[s.jsx(mt,{className:"w-3 h-3"}),C.nextStep]})}),s.jsx("td",{className:"py-3",children:s.jsx(be,{size:"sm",variant:"ghost",className:"hover:bg-green-100 hover:text-green-600 dark:hover:bg-green-900/30",onClick:()=>N(C),children:s.jsx(mt,{className:"w-4 h-4"})})})]},C.id))})]})})]})}),s.jsx("div",{className:"lg:col-span-3",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-2xl p-4 md:p-5 shadow-sm h-full",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Pc,{className:"w-5 h-5 text-emerald-500"}),s.jsx("h2",{className:"font-bold text-slate-900 dark:text-white",children:"  "})]}),s.jsxs("div",{className:"flex gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:(l==null?void 0:l.leadsContacted.current)||0}),s.jsx("p",{className:"text-xs text-slate-500",children:" "})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-2xl font-bold text-emerald-500",children:[l!=null&&l.closedDeals.current?Math.round((l==null?void 0:l.closedDeals.current)/(l==null?void 0:l.leadsContacted.current)*100):0,"%"]}),s.jsx("p",{className:"text-xs text-slate-500",children:" "})]})]}),s.jsx("div",{className:"h-48",children:s.jsx(g6,{width:"100%",height:"100%",minWidth:1,children:s.jsxs(GM,{data:_,layout:"vertical",children:[s.jsx(AM,{strokeDasharray:"3 3",stroke:e?"#334155":"#e2e8f0"}),s.jsx(bj,{type:"number",tick:{fill:e?"#94a3b8":"#64748b",fontSize:10}}),s.jsx(IM,{type:"category",dataKey:"name",tick:{fill:e?"#94a3b8":"#64748b",fontSize:9},width:55,tickFormatter:C=>C.length>8?C.slice(0,6)+"":C}),s.jsx(rM,{contentStyle:{backgroundColor:e?"#1e293b":"#fff",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),s.jsx(hm,{dataKey:"value",radius:[0,4,4,0]})]})})})]})})]})]})},ede=({isDarkMode:e,currentUser:t})=>{const[r,n]=v.useState([]),[a,l]=v.useState(null),[c,d]=v.useState(""),[h,f]=v.useState([]),[m,g]=v.useState(!1),[x,b]=v.useState(!0),[j,w]=v.useState(""),[_,N]=v.useState(0),[C,E]=v.useState(!1),A=v.useRef(null),S=v.useRef(null);v.useEffect(()=>{S.current=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleT0jUY292p2PbDArQJPY88mtbzAWOnHT+ei0cDAKM2LQ/++3dDAHLVnN/vK8djEFJ1DE/vXHfDcEIkq+/fjQhD8GG0K1/tn/kEkJF0Cw/dD+l1EUR7j9xf+fXh9esy78vv+mZyZYq0L7tv+uc0o=")},[]);const T=v.useCallback(async()=>{if(!(t!=null&&t.organization_id)||!(t!=null&&t.id)){b(!1);return}try{const{data:M,error:R}=await me.from("profiles").select("id, full_name, email, avatar_url, role").eq("organization_id",t.organization_id).neq("id",t.id);if(R)throw R;if(!M)return;const H=(await Promise.all(M.map(async L=>{const{count:B}=await me.from("messages").select("*",{count:"exact",head:!0}).eq("sender_id",L.id).eq("recipient_id",t.id).eq("is_read",!1),{data:G}=await me.from("messages").select("content, created_at").or(`and(sender_id.eq.${t.id},recipient_id.eq.${L.id}),and(sender_id.eq.${L.id},recipient_id.eq.${t.id})`).order("created_at",{ascending:!1}).limit(1).single();return{...L,status:"offline",unreadCount:B||0,lastMessageTime:(G==null?void 0:G.created_at)||null,lastMessageContent:(G==null?void 0:G.content)||null}}))).sort((L,B)=>L.unreadCount>0&&B.unreadCount===0?-1:L.unreadCount===0&&B.unreadCount>0?1:L.lastMessageTime&&B.lastMessageTime?new Date(B.lastMessageTime).getTime()-new Date(L.lastMessageTime).getTime():L.lastMessageTime?-1:B.lastMessageTime?1:L.full_name.localeCompare(B.full_name));n(H);const W=H.reduce((L,B)=>L+B.unreadCount,0);N(W),H.length>0&&!a&&l(H[0].id)}catch(M){console.error("Error fetching team:",M)}finally{b(!1)}},[t==null?void 0:t.organization_id,t==null?void 0:t.id,a]);v.useEffect(()=>{b(!0),T()},[T]),v.useEffect(()=>{if(!(t!=null&&t.id))return;const M=me.channel(`global-chat-${t.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${t.id}`},R=>{const q=R.new;if(S.current&&S.current.play().catch(()=>{}),n(H=>H.map(L=>L.id===q.sender_id?{...L,unreadCount:L.id===a?L.unreadCount:L.unreadCount+1,lastMessageTime:q.created_at,lastMessageContent:q.content}:L).sort((L,B)=>L.unreadCount>0&&B.unreadCount===0?-1:L.unreadCount===0&&B.unreadCount>0?1:L.lastMessageTime&&B.lastMessageTime?new Date(B.lastMessageTime).getTime()-new Date(L.lastMessageTime).getTime():0)),q.sender_id!==a&&N(H=>H+1),q.sender_id===a){const H={id:q.id,senderId:q.sender_id,text:q.content,timestamp:new Date(q.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isRead:!1};f(W=>[...W,H]),me.from("messages").update({is_read:!0}).eq("id",q.id)}}).subscribe();return()=>{me.removeChannel(M)}},[t==null?void 0:t.id,a]);const D=r.find(M=>M.id===a);v.useEffect(()=>{if(!(t!=null&&t.id)||!a)return;(async()=>{g(!0);try{const{data:R,error:q}=await me.from("messages").select("*").or(`and(sender_id.eq.${t.id},recipient_id.eq.${a}),and(sender_id.eq.${a},recipient_id.eq.${t.id})`).order("created_at",{ascending:!0});if(q)throw q;if(R){const H=R.map(L=>({id:L.id,senderId:L.sender_id,text:L.content,timestamp:new Date(L.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isRead:L.is_read,context:L.context_type?{type:L.context_type,id:L.context_id||"",label:L.context_label||"Context"}:void 0}));f(H);const W=R.filter(L=>L.sender_id===a&&!L.is_read).map(L=>L.id);W.length>0&&(await me.from("messages").update({is_read:!0}).in("id",W),n(L=>L.map(B=>B.id===a?{...B,unreadCount:0}:B)),N(L=>Math.max(0,L-W.length)))}}catch(R){console.error("Error fetching messages:",R)}finally{g(!1)}})()},[a,t==null?void 0:t.id]),v.useEffect(()=>{A.current&&A.current.scrollIntoView({behavior:"smooth"})},[h]);const P=async()=>{if(!c.trim()||!(t!=null&&t.id)||!a)return;const M=Date.now().toString(),R=c;d("");const q={id:M,senderId:t.id,text:R,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isRead:!1};f(H=>[...H,q]),n(H=>H.map(L=>L.id===a?{...L,lastMessageTime:new Date().toISOString(),lastMessageContent:R}:L).sort((L,B)=>L.unreadCount>0&&B.unreadCount===0?-1:L.unreadCount===0&&B.unreadCount>0?1:L.lastMessageTime&&B.lastMessageTime?new Date(B.lastMessageTime).getTime()-new Date(L.lastMessageTime).getTime():0));try{await me.from("messages").insert({sender_id:t.id,recipient_id:a,content:R,organization_id:t.organization_id})}catch(H){console.error("Error sending message:",H)}},I=r.filter(M=>M.full_name.toLowerCase().includes(j.toLowerCase())),$=M=>{if(!M)return"";const R=new Date(M),H=new Date().getTime()-R.getTime(),W=Math.floor(H/6e4),L=Math.floor(H/36e5),B=Math.floor(H/864e5);return W<1?"":W<60?` ${W} '`:L<24?` ${L} '`:B<7?` ${B} `:R.toLocaleDateString("he-IL")};return s.jsxs("div",{className:"flex flex-1 h-full bg-slate-50 dark:bg-slate-950 overflow-hidden",children:[s.jsxs("div",{className:"hidden md:flex w-80 flex-shrink-0 bg-white dark:bg-slate-900 border-e border-slate-200 dark:border-slate-800 flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"' "}),_>0&&s.jsxs("div",{className:"flex items-center gap-2 bg-brand-100 dark:bg-brand-900/30 text-brand-700 dark:text-brand-300 px-2.5 py-1 rounded-full text-xs font-bold animate-pulse",children:[s.jsx(WI,{className:"w-3.5 h-3.5"}),s.jsxs("span",{children:[_," "]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(ta,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:" ...",value:j,onChange:M=>w(M.target.value),className:"w-full pr-9 pl-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm outline-none focus:ring-1 focus:ring-brand-500"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:x?s.jsx("div",{className:"flex items-center justify-center h-32 text-slate-400",children:s.jsx(rt,{className:"w-6 h-6 animate-spin"})}):I.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-slate-400 text-sm",children:[s.jsx(Xn,{className:"w-8 h-8 mb-2 opacity-50"}),s.jsx("p",{children:"  "})]}):I.map(M=>{const R=a===M.id,q=M.unreadCount>0;return s.jsxs("div",{onClick:()=>l(M.id),className:`flex items-center gap-3 p-4 cursor-pointer transition-all border-b border-slate-50 dark:border-slate-800/50 hover:bg-slate-50 dark:hover:bg-slate-800/50 ${R?"bg-brand-50/50 dark:bg-brand-900/10 border-r-4 border-r-brand-500":"border-r-4 border-r-transparent"} ${q?"bg-amber-50/30 dark:bg-amber-900/10":""}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:M.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(M.full_name)}&background=6366f1&color=fff`,alt:M.full_name,className:"w-11 h-11 rounded-full border-2 border-slate-200 dark:border-slate-700"}),q&&s.jsx("span",{className:"absolute -top-1 -left-1 min-w-[20px] h-5 bg-rose-500 text-white text-xs font-bold rounded-full flex items-center justify-center px-1 animate-bounce",children:M.unreadCount}),s.jsx("span",{className:`absolute bottom-0 right-0 w-3 h-3 border-2 border-white dark:border-slate-900 rounded-full ${M.role==="manager"||M.role==="sales_manager"?"bg-amber-500":"bg-emerald-500"}`})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-baseline mb-0.5",children:[s.jsx("h3",{className:`text-sm font-bold truncate ${q?"text-slate-900 dark:text-white":R?"text-brand-900 dark:text-white":"text-slate-900 dark:text-slate-200"}`,children:M.full_name}),M.lastMessageTime&&s.jsx("span",{className:`text-[10px] ${q?"text-brand-600 font-bold":"text-slate-400"}`,children:$(M.lastMessageTime)})]}),s.jsx("p",{className:`text-xs truncate pr-1 ${q?"text-slate-700 dark:text-slate-300 font-medium":"text-slate-500 dark:text-slate-400"}`,children:M.lastMessageContent||(M.role==="manager"||M.role==="sales_manager"?" ":" ")})]})]},M.id)})})]}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-slate-50/30 dark:bg-slate-950",children:[s.jsxs("div",{className:"h-16 px-4 md:px-6 border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 flex items-center justify-between shadow-sm z-10",children:[s.jsxs("div",{className:"md:hidden relative flex-1",children:[s.jsxs("button",{onClick:()=>E(!C),className:"flex items-center gap-3 w-full",children:[D?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:D.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(D.full_name)}&background=6366f1&color=fff`,alt:D.full_name,className:"w-9 h-9 rounded-full border-2 border-slate-200 dark:border-slate-700"}),s.jsxs("div",{className:"flex-1 text-right",children:[s.jsx("h2",{className:"text-sm font-bold text-slate-900 dark:text-white",children:D.full_name}),s.jsx("span",{className:"text-[10px] text-slate-500",children:D.role==="manager"||D.role==="sales_manager"?"":""})]})]}):s.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[s.jsx(Gr,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm font-medium",children:"  "})]}),s.jsx(Et,{className:`w-4 h-4 text-slate-400 transition-transform ${C?"rotate-180":""}`})]}),C&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-20",onClick:()=>E(!1)}),s.jsx("div",{className:"absolute top-full right-0 left-0 mt-2 max-h-72 overflow-y-auto bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-xl shadow-xl z-30 animate-in fade-in slide-in-from-top-2 duration-200",children:I.map(M=>s.jsxs("button",{onClick:()=>{l(M.id),E(!1)},className:`w-full flex items-center gap-3 p-3 text-right hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors ${a===M.id?"bg-brand-50 dark:bg-brand-900/20":""}`,children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:M.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(M.full_name)}&background=6366f1&color=fff`,alt:M.full_name,className:"w-9 h-9 rounded-full border border-slate-200 dark:border-slate-700"}),M.unreadCount>0&&s.jsx("span",{className:"absolute -top-1 -left-1 min-w-[18px] h-[18px] bg-rose-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center px-1",children:M.unreadCount})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:M.full_name}),s.jsx("p",{className:"text-xs text-slate-500 truncate",children:M.lastMessageContent||" "})]})]},M.id))})]})]}),D?s.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[s.jsx("img",{src:D.avatar_url||`https://ui-avatars.com/api/?name=${encodeURIComponent(D.full_name)}&background=6366f1&color=fff`,alt:D.full_name,className:"w-10 h-10 rounded-full border-2 border-slate-200 dark:border-slate-700"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-white",children:D.full_name}),s.jsx("span",{className:"text-xs text-slate-500",children:D.role==="manager"||D.role==="sales_manager"?" ":" "})]})]}):s.jsx("div",{className:"hidden md:block"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:s.jsx(mt,{className:"w-4 h-4"})}),s.jsx("button",{className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full",children:s.jsx(dw,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4",children:[m?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(rt,{className:"w-8 h-8 animate-spin text-brand-500"})}):h.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[s.jsx(Xn,{className:"w-12 h-12 mb-2 opacity-50"}),s.jsx("p",{children:"  .  ! "})]}):h.map((M,R)=>{const q=M.senderId===(t==null?void 0:t.id);return s.jsx("div",{className:`flex ${q?"justify-start":"justify-end"} animate-in fade-in slide-in-from-bottom-2 duration-300`,children:s.jsxs("div",{className:`max-w-[85%] md:max-w-[70%] flex flex-col ${q?"items-start":"items-end"}`,children:[s.jsx("div",{className:`
                                px-4 py-3 rounded-2xl text-sm shadow-sm relative leading-relaxed
                                ${q?"bg-brand-600 text-white rounded-tr-none":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-none"}
                            `,children:M.text}),s.jsxs("span",{className:"text-[10px] text-slate-400 mt-1 px-1 flex items-center gap-1",children:[M.timestamp,q&&(M.isRead?s.jsx(v3,{className:"w-3 h-3 text-brand-500"}):s.jsx(Er,{className:"w-3 h-3"}))]})]})},R)}),s.jsx("div",{ref:A})]}),s.jsx("div",{className:"p-4 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-800",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-end gap-2 bg-slate-50 dark:bg-slate-800/50 p-2 rounded-xl border border-slate-200 dark:border-slate-800",children:[s.jsx("button",{className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors mb-0.5",children:s.jsx(T3,{className:"w-4 h-4"})}),s.jsx("textarea",{value:c,onChange:M=>d(M.target.value),onKeyDown:M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),P())},placeholder:" ...",className:"flex-1 bg-transparent border-none outline-none text-sm px-2 py-2.5 text-slate-900 dark:text-white placeholder-slate-400 resize-none max-h-32",rows:1}),s.jsx("button",{onClick:P,disabled:!c.trim(),className:"p-2.5 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm mb-0.5",children:s.jsx(mc,{className:"w-4 h-4 ml-0.5"})})]})})]})]})},tde=({currentUser:e,isOpen:t,onClose:r,activeContext:n,orgId:a})=>{var T;const[l,c]=v.useState([]),[d,h]=v.useState(""),[f,m]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState(!1),N=v.useRef(null);v.useEffect(()=>{(async()=>{if(!a||!(e!=null&&e.id)){console.log("[Chat] Missing orgId or currentUser:",{orgId:a,currentUser:e});return}try{const{data:P}=await me.from("profiles").select("role").eq("id",e.id).single(),I=["sales_manager","manager","admin"].includes((P==null?void 0:P.role)||"");console.log("[Chat] Current user role:",P==null?void 0:P.role,"isManager:",I);let $;I?$=me.from("profiles").select("id, full_name, avatar_url, role").eq("organization_id",a).eq("role","rep").limit(1):$=me.from("profiles").select("id, full_name, avatar_url, role").eq("organization_id",a).in("role",["sales_manager","manager","admin"]).neq("id",e.id).limit(1);const{data:M,error:R}=await $;if(console.log("[Chat] Found chat partner:",M,"error:",R),M&&M.length>0&&!R)j(M[0]);else{const{data:q}=await me.from("profiles").select("id, full_name, avatar_url, role").eq("organization_id",a).neq("id",e.id).limit(1);console.log("[Chat] Fallback partner:",q),q&&q.length>0?j(q[0]):_(!0)}}catch(P){console.error("[Chat] Failed to fetch chat partner:",P),_(!0)}})()},[a,e==null?void 0:e.id]),v.useEffect(()=>{(async()=>{if(!(!t||!(b!=null&&b.id)||!(e!=null&&e.id))){m(!0);try{const{data:P,error:I}=await me.from("messages").select("*").or(`and(sender_id.eq.${e.id},recipient_id.eq.${b.id}),and(sender_id.eq.${b.id},recipient_id.eq.${e.id})`).order("created_at",{ascending:!0});if(I)throw I;c(P||[]);const $=(P||[]).filter(M=>M.recipient_id===e.id&&!M.is_read).map(M=>M.id);$.length>0&&await me.from("messages").update({is_read:!0}).in("id",$)}catch(P){console.error("Failed to fetch messages:",P)}finally{m(!1)}}})()},[t,b==null?void 0:b.id,e==null?void 0:e.id]),v.useEffect(()=>{if(!t||!(b!=null&&b.id)||!(e!=null&&e.id))return;const D=me.channel("chat-messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${e.id}`},P=>{const I=P.new;I.sender_id===b.id&&(c($=>[...$,I]),me.from("messages").update({is_read:!0}).eq("id",I.id))}).subscribe();return()=>{me.removeChannel(D)}},[t,b==null?void 0:b.id,e==null?void 0:e.id]),v.useEffect(()=>{t&&N.current&&N.current.scrollIntoView({behavior:"smooth"})},[l,t]);const C=async()=>{if(!d.trim()||!(b!=null&&b.id)||!(e!=null&&e.id)||!a)return;x(!0);const D=d.trim();h("");try{const P={sender_id:e.id,recipient_id:b.id,content:D,organization_id:a,is_read:!1,context_type:(n==null?void 0:n.type)||null,context_id:(n==null?void 0:n.id)||null,context_label:(n==null?void 0:n.label)||null},{data:I,error:$}=await me.from("messages").insert(P).select().single();if($)throw $;I&&c(M=>[...M,I])}catch(P){console.error("Failed to send message:",P),h(D)}finally{x(!1)}},E=D=>new Date(D).toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"}),A=D=>{const P=new Date(D),I=new Date,$=new Date(I);return $.setDate($.getDate()-1),P.toDateString()===I.toDateString()?"":P.toDateString()===$.toDateString()?"":P.toLocaleDateString("he-IL",{day:"numeric",month:"short"})},S=[];return l.forEach(D=>{const P=new Date(D.created_at).toDateString(),I=S.find($=>$.date===P);I?I.messages.push(D):S.push({date:P,messages:[D]})}),s.jsxs(s.Fragment,{children:[t&&s.jsx("div",{className:"fixed inset-0 bg-slate-900/20 backdrop-blur-sm z-40 transition-opacity",onClick:r}),s.jsxs("div",{className:`fixed inset-y-0 right-0 z-50 w-full md:w-[400px] bg-white dark:bg-slate-950 shadow-2xl border-l border-slate-200 dark:border-slate-800 transform transition-transform duration-300 ease-in-out flex flex-col ${t?"translate-x-0":"translate-x-full"}`,children:[s.jsxs("div",{className:"px-5 py-4 border-b border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[b!=null&&b.avatar_url?s.jsx("img",{src:b.avatar_url,alt:b.full_name,className:"w-10 h-10 rounded-full border border-slate-200 dark:border-slate-700"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-brand-100 flex items-center justify-center text-brand-600 font-bold text-sm",children:((T=b==null?void 0:b.full_name)==null?void 0:T.charAt(0))||"M"}),s.jsx("span",{className:"absolute bottom-0 left-0 w-2.5 h-2.5 bg-emerald-500 border-2 border-white dark:border-slate-900 rounded-full"})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-white leading-tight",children:(b==null?void 0:b.full_name)||" "}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"   "})]})]}),s.jsx("button",{onClick:r,className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50 dark:bg-slate-900/50",children:[n&&s.jsx("div",{className:"sticky top-0 z-10 -mx-4 -mt-4 mb-4 px-4 py-3 bg-brand-50/95 dark:bg-brand-900/40 backdrop-blur-sm border-b border-brand-100 dark:border-brand-800/50 flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-1.5 bg-white dark:bg-slate-800 rounded-full shadow-sm text-brand-600 dark:text-brand-400",children:s.jsx(mt,{className:"w-3.5 h-3.5"})}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs font-bold text-brand-900 dark:text-brand-100",children:[" : ",n.label]}),s.jsx("p",{className:"text-[10px] text-brand-700 dark:text-brand-300",children:n.subLabel})]})]})}),f?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(rt,{className:"w-6 h-6 animate-spin text-brand-500"})}):w?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center px-4",children:[s.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mb-4",children:s.jsx(Xn,{className:"w-8 h-8 text-amber-500"})}),s.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:"   "}),s.jsx("p",{className:"text-xs text-slate-400 max-w-[250px]",children:"  ',           ."})]}):l.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx(Xn,{className:"w-12 h-12 text-slate-300 mb-3"}),s.jsx("p",{className:"text-sm text-slate-500",children:"  "}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"   "})]}):S.map(D=>s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-center my-4",children:s.jsx("div",{className:"px-3 py-1 bg-white dark:bg-slate-800 rounded-full border border-slate-200 dark:border-slate-700 text-xs text-slate-500",children:A(D.messages[0].created_at)})}),D.messages.map(P=>{const I=P.sender_id===e.id;return s.jsx("div",{className:`flex ${I?"justify-start":"justify-end"} mb-3`,children:s.jsxs("div",{className:`max-w-[85%] flex flex-col ${I?"items-start":"items-end"}`,children:[P.context_label&&s.jsxs("div",{className:`mb-1 px-3 py-1.5 rounded-lg border text-xs flex items-center gap-2 w-fit ${I?"bg-white border-brand-100 text-brand-700":"bg-white border-slate-200 text-slate-600"}`,children:[s.jsx(Xn,{className:"w-3 h-3"}),": ",P.context_label]}),s.jsx("div",{className:`
                              px-4 py-2.5 rounded-2xl text-sm shadow-sm relative
                              ${I?"bg-brand-600 text-white rounded-tr-none":"bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 text-slate-800 dark:text-slate-200 rounded-tl-none"}
                           `,children:P.content}),s.jsxs("span",{className:"text-[10px] text-slate-400 mt-1 px-1 flex items-center gap-1",children:[E(P.created_at),I&&(P.is_read?s.jsx(v3,{className:"w-3 h-3 text-brand-500"}):s.jsx(Er,{className:"w-3 h-3"}))]})]})},P.id)})]},D.date)),s.jsx("div",{ref:N})]}),s.jsx("div",{className:"p-3 bg-white dark:bg-slate-900 border-t border-slate-100 dark:border-slate-800",children:s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-800/50 p-1.5 rounded-xl border border-slate-200 dark:border-slate-800",children:[s.jsx("button",{className:"p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:s.jsx(T3,{className:"w-4 h-4"})}),s.jsx("input",{type:"text",value:d,onChange:D=>h(D.target.value),onKeyDown:D=>D.key==="Enter"&&!g&&C(),placeholder:"  ...",disabled:g,className:"flex-1 bg-transparent border-none outline-none text-sm px-2 text-slate-900 dark:text-white placeholder-slate-400 disabled:opacity-50"}),s.jsx("button",{onClick:C,disabled:!d.trim()||g,className:"p-2 bg-brand-600 text-white rounded-lg hover:bg-brand-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm",children:g?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):s.jsx(mc,{className:"w-4 h-4 ml-0.5"})})]})})]})]})},u3=[{level:1,name:"Rookie",color:"border-slate-300",ring:"ring-slate-200",icon:bm,bg:"bg-slate-100 dark:bg-slate-800"},{level:5,name:"Pro",color:"border-emerald-400",ring:"ring-emerald-200",icon:At,bg:"bg-emerald-50 dark:bg-emerald-900/20"},{level:10,name:"Elite",color:"border-blue-500",ring:"ring-blue-300",icon:E3,bg:"bg-blue-50 dark:bg-blue-900/20"},{level:20,name:"Master",color:"border-purple-500",ring:"ring-purple-300",icon:cw,bg:"bg-purple-50 dark:bg-purple-900/20"},{level:50,name:"Legend",color:"border-amber-400",ring:"ring-amber-200",icon:xw,bg:"bg-amber-50 dark:bg-amber-900/20"}],h3=[{level:2,name:"Objection Pack: ",icon:"",locked:!0},{level:3,name:" ",icon:"",locked:!0},{level:4,name:"AI Boost",icon:"",locked:!0},{level:5,name:"Shadow Mode",icon:"",locked:!0}],f3={calls:{label:"",color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},followup:{label:"",color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"},quality:{label:"",color:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/20"}},rde=e=>Array.from({length:14},(t,r)=>Math.max(0,Math.min(100,e+(Math.random()-.5)*40))),nde=(e,t,r)=>{const n=Math.min(e*12,40),a=r>0?t/r*40:20;return Math.round(n+a+20)},sde=e=>Math.min(e*4+3,21),ade=e=>e>=70?{color:"#059669",ringColor:"text-emerald-500",bg:"bg-emerald-50 dark:bg-emerald-900/20",border:"border-emerald-100 dark:border-emerald-800/30",label:" ",plan:" !      .",cta:"  ",ctaIcon:mt,accent:"emerald",gradientFrom:"from-emerald-50 dark:from-emerald-900/30"}:e>=40?{color:"#d97706",ringColor:"text-amber-500",bg:"bg-amber-50 dark:bg-amber-900/20",border:"border-amber-100 dark:border-amber-800/30",label:" ",plan:" .    .",cta:" ",ctaIcon:Xn,accent:"amber",gradientFrom:"from-amber-50 dark:from-amber-900/30"}:{color:"#e11d48",ringColor:"text-rose-500",bg:"bg-rose-50 dark:bg-rose-900/20",border:"border-rose-100 dark:border-rose-800/30",label:" ",plan:"  .     .",cta:" ",ctaIcon:Hl,accent:"rose",gradientFrom:"from-rose-50 dark:from-rose-900/30"},ide=({data:e,color:t,height:r=32})=>{const n=Math.max(...e,100),a=Math.min(...e,0),l=n-a||1,c=100,d=e.map((h,f)=>{const m=f/(e.length-1)*c,g=r-(h-a)/l*r;return`${m},${g}`}).join(" ");return s.jsx("div",{className:"relative w-full overflow-hidden",style:{height:r},children:s.jsxs("svg",{className:"w-full h-full overflow-visible",preserveAspectRatio:"none",viewBox:`0 0 ${c} ${r}`,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:`gradient-${t}`,x1:"0",x2:"0",y1:"0",y2:"1",children:[s.jsx("stop",{offset:"0%",stopColor:t,stopOpacity:"0.1"}),s.jsx("stop",{offset:"100%",stopColor:t,stopOpacity:"0"})]})}),s.jsx("path",{d:`M0,${r} ${d} L${c},${r} Z`,fill:`url(#gradient-${t})`}),s.jsx("polyline",{fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",vectorEffect:"non-scaling-stroke",points:d})]})})},lde=({label:e,cause:t,value:r})=>{const n=a=>a>=70?"bg-emerald-500":a>=40?"bg-amber-400":"bg-rose-400";return s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsx("span",{className:"text-[11px] font-medium text-slate-600 dark:text-slate-400",children:e}),s.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500",children:t})]}),s.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full ${n(r)}`,style:{width:`${r}%`}})})]})},ode=["","","","",""],cde=({userId:e,orgId:t})=>{var S;const[r,n]=v.useState(null),[a,l]=v.useState([]),[c,d]=v.useState(!0),[h]=v.useState(()=>rde(75));if(v.useEffect(()=>{(async()=>{if(!(!e||!t))try{let{data:D}=await me.from("user_gamification").select("*").eq("user_id",e).single();if(!D){const{data:$}=await me.from("user_gamification").insert({user_id:e,organization_id:t}).select().single();D=$}n(D||{xp_total:0,level:1,current_streak:0});const P=new Date().toISOString().split("T")[0];let{data:I}=await me.from("daily_missions").select("*").eq("user_id",e).eq("date",P);if(!I||I.length===0){await me.rpc("create_daily_missions",{p_user_id:e,p_org_id:t});const{data:$}=await me.from("daily_missions").select("*").eq("user_id",e).eq("date",P);I=$}l(I||[])}catch(D){console.error("Gamification fetch error:",D)}finally{d(!1)}})()},[e,t]),c)return s.jsx("div",{className:"w-full h-full flex items-center justify-center bg-slate-50 text-slate-400",children:s.jsx(rt,{className:"w-8 h-8 animate-spin"})});const f=a.filter(T=>T.completed).length,m=nde((r==null?void 0:r.current_streak)||0,f,a.length),g=sde(f),x=ade(m),b=[0,100,300,600,1e3,2e3],j=b[((r==null?void 0:r.level)||1)-1]||0,w=b[(r==null?void 0:r.level)||1]||2e3,_=(((r==null?void 0:r.xp_total)||0)-j)/(w-j)*100,N=w-((r==null?void 0:r.xp_total)||0),C=[{label:" ",cause:((r==null?void 0:r.current_streak)||0)>2?" ":" ",value:((r==null?void 0:r.current_streak)||0)>2?85:45},{label:"",cause:f>=2?"SLA ":"  ",value:f>=2?92:35},{label:" ",cause:g>14?" ":"",value:g/21*100}],E=(r==null?void 0:r.level)||1,A=u3.reduce((T,D)=>D.level<=E?D:T,u3[0]);return s.jsx("div",{className:"w-full h-full overflow-y-auto bg-slate-50/50 dark:bg-slate-950 transition-colors",dir:"rtl",children:s.jsxs("div",{className:"max-w-[1240px] mx-auto p-5 md:p-6 space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-5",children:[s.jsxs("div",{className:"col-span-12 md:col-span-4 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm p-5 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-amber-500 opacity-80"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:`relative w-20 h-20 rounded-full border-4 ${A.color} ${A.ring} shadow-lg p-0.5 flex items-center justify-center bg-white dark:bg-slate-800 z-10 hover:scale-105 transition-transform duration-300`,children:[s.jsx("div",{className:`w-full h-full rounded-full ${A.bg} flex items-center justify-center`,children:s.jsx(A.icon,{className:`w-8 h-8 ${A.color.replace("border","text")}`})}),s.jsxs("div",{className:"absolute -bottom-1 -right-1 bg-slate-900 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-md border border-white",children:["LVL ",E]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-white tracking-tight",children:ode[E-1]}),s.jsx(cw,{className:"w-3.5 h-3.5 text-amber-500 fill-amber-500 animate-pulse"})]}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-2",children:[N," XP   ( ",(S=h3[E])==null?void 0:S.name,")"]}),s.jsxs("div",{className:"h-2 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden border border-slate-100 dark:border-slate-700/50 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 via-purple-500 to-amber-500 opacity-20 bg-[length:20px_20px] animate-[pulse_2s_ease-in-out_infinite]"}),s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-purple-500 to-amber-500 rounded-full transition-all duration-700 shadow-[0_0_10px_rgba(168,85,247,0.4)]",style:{width:`${_}%`}})]})]})]})]}),s.jsxs("div",{className:"col-span-12 md:col-span-8 flex items-center justify-between bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm px-6 py-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight mb-1",children:" , ! "}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"      .  ."})]}),s.jsx("div",{className:"hidden md:flex flex-col items-end gap-1",children:s.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 dark:bg-slate-800 px-3 py-1 rounded-lg border border-slate-100 dark:border-slate-700",children:[s.jsx(Br,{className:"w-3.5 h-3.5 text-slate-400"}),s.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:new Date().toLocaleDateString("he-IL",{weekday:"long",day:"numeric",month:"long"})})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-5",children:[s.jsxs("div",{className:"col-span-12 lg:col-span-8 bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm overflow-hidden flex flex-col relative",children:[s.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 bg-gradient-to-br ${x.gradientFrom||x.bg.replace("bg-","from-")} to-transparent opacity-30 blur-3xl rounded-full pointer-events-none -mr-20 -mt-20`}),s.jsxs("div",{className:"p-6 grid md:grid-cols-2 gap-8 items-center border-b border-slate-100 dark:border-slate-800 relative z-10",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative w-32 h-32 shrink-0 group cursor-pointer hover:scale-105 transition-transform duration-300",children:[s.jsxs("svg",{className:"w-full h-full -rotate-90 drop-shadow-xl",viewBox:"0 0 100 100",children:[s.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",className:"stroke-slate-100 dark:stroke-slate-800",strokeWidth:"8"}),s.jsx("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${m*2.64} 264`,className:`transition-all duration-1000 ${x.ringColor}`})]}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-4xl font-black text-slate-900 dark:text-white tracking-tighter drop-shadow-sm",children:m}),s.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest mt-0.5 ${x.ringColor}`,children:"Readiness"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold ${x.bg} ${x.ringColor} border ${x.border} shadow-sm`,children:[s.jsx(ti,{className:"w-3.5 h-3.5"}),x.label]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium",children:" :"}),s.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:g}),s.jsx("span",{className:"text-xs text-slate-400",children:"/ 21"})]}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500 font-medium",children:" :"}),s.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:(r==null?void 0:r.current_streak)||0}),s.jsx(su,{className:"w-3.5 h-3.5 text-orange-500 fill-orange-500 animate-pulse"})]})]})]})]}),s.jsxs("div",{className:"space-y-4 pl-4 border-r border-slate-100/50 dark:border-slate-800/50",children:[s.jsxs("p",{className:"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[s.jsx(aw,{className:"w-3.5 h-3.5"})," "]}),s.jsx("div",{className:"space-y-4",children:C.map((T,D)=>s.jsx(lde,{...T},D))})]})]}),s.jsxs("div",{className:`px-6 py-5 bg-gradient-to-b ${x.bg} relative overflow-hidden flex-1 flex flex-col justify-center`,children:[s.jsxs("div",{className:"relative z-10 flex items-center justify-between gap-6",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] font-bold text-slate-500 dark:text-slate-300 uppercase tracking-widest mb-1.5 flex items-center gap-1.5",children:[s.jsx(el,{className:"w-3.5 h-3.5"})," "]}),s.jsx("h3",{className:"text-base font-bold text-slate-800 dark:text-white leading-snug max-w-sm",children:x.plan})]}),s.jsxs("button",{className:"hidden md:flex shrink-0 items-center gap-2 px-6 py-2.5 bg-slate-900 dark:bg-slate-800 text-white text-sm font-bold rounded-xl shadow-lg hover:bg-slate-800 dark:hover:bg-slate-700 hover:shadow-xl transition-all hover:-translate-y-0.5 active:translate-y-0 duration-200 group border border-slate-700 dark:border-slate-600",children:[s.jsx(x.ctaIcon,{className:"w-4 h-4 text-emerald-400 group-hover:text-emerald-300 transition-colors"}),x.cta]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 opacity-15 pointer-events-none mix-blend-multiply",children:s.jsx(ide,{data:h,color:x.color,height:64})})]})]}),s.jsxs("div",{className:"col-span-12 lg:col-span-4 flex flex-col gap-5",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl border border-slate-200 dark:border-slate-800 shadow-sm p-5 flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-5",children:[s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 border border-indigo-100 dark:border-indigo-800/30",children:s.jsx(Ar,{className:"w-4.5 h-4.5"})}),s.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-base",children:" "})]}),s.jsxs("span",{className:"text-xs font-bold bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded text-slate-500 dark:text-slate-400",children:[f,"/",a.length]})]}),s.jsx("div",{className:"space-y-3 flex-1 overflow-y-auto pr-1 -mr-1 custom-scrollbar",children:a.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-sm text-slate-400",children:" !   "})}):a.map((T,D)=>{const P=D===0&&!T.completed,I=f3[T.mission_type]||f3.calls;return s.jsxs("div",{className:`group relative p-3 rounded-xl border transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md ${T.completed?"bg-slate-50 dark:bg-slate-900/50 border-slate-100 dark:border-slate-800 opacity-60":P?"bg-gradient-to-r from-blue-50/80 to-white dark:from-blue-900/20 dark:to-slate-800 border-blue-200 dark:border-blue-800/50 shadow-sm ring-1 ring-blue-100 dark:ring-blue-900/30":"bg-white dark:bg-slate-900 border-slate-200 dark:border-slate-800 hover:border-blue-200 dark:hover:border-blue-700"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[P&&s.jsx("span",{className:"text-[9px] font-black bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-200 px-1.5 py-0.5 rounded tracking-wide shadow-sm",children:"FOCUS"}),s.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded ${I.bg} ${I.color}`,children:I.label})]}),s.jsxs("span",{className:`text-[10px] font-black ${T.completed?"text-emerald-500":"text-slate-300 dark:text-slate-600 group-hover:text-blue-500 dark:group-hover:text-blue-400 transition-colors"}`,children:["+",T.xp_reward," XP"]})]}),s.jsx("h4",{className:`text-sm font-bold mb-2 ${T.completed?"text-slate-500 dark:text-slate-500 line-through":"text-slate-800 dark:text-slate-100"}`,children:T.title}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full ${T.completed?"bg-emerald-500":P?"bg-blue-600":"bg-slate-300 dark:bg-slate-600 group-hover:bg-blue-400 transition-colors"}`,style:{width:`${Math.min(T.progress/T.target*100,100)}%`}})}),s.jsxs("span",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500",children:[T.progress,"/",T.target]})]}),!T.completed&&s.jsx("button",{className:"absolute bottom-3 left-3 px-3 py-1 bg-slate-900 dark:bg-white dark:text-slate-900 text-white text-[10px] font-bold rounded-lg opacity-0 group-hover:opacity-100 transition-all shadow-md active:scale-95",children:""})]},T.id)})})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-900 to-slate-800 text-white rounded-2xl shadow-lg p-4 relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 p-3 opacity-10",children:s.jsx(h0,{className:"w-16 h-16"})}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-xs font-bold text-indigo-200 uppercase tracking-widest",children:" "}),s.jsx(o0,{className:"w-3.5 h-3.5 text-indigo-300"})]}),s.jsx("div",{className:"flex gap-2",children:h3.slice(0,3).map((T,D)=>s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-lg border border-white/10 bg-white/5 backdrop-blur-sm ${T.locked?"text-slate-500 grayscale":"text-white shadow-lg shadow-white/10"}`,title:T.name,children:T.icon},D))})]})]})]})]})]})})},dde=["","","","","","",""],ude=["","","","","","","","","","","",""],hde=({value:e,onChange:t,minDate:r,placeholder:n=" "})=>{const[a,l]=v.useState(!1),[c,d]=v.useState(()=>e?new Date(e):new Date),[h,f]=v.useState({top:0,right:0,width:0,maxHeight:500}),m=v.useRef(null),g=v.useRef(null);v.useEffect(()=>{if(a&&m.current){const M=m.current.getBoundingClientRect(),R=window.innerHeight-M.bottom,q=M.top,H=380,W=R<H;f({top:W?Math.max(10,M.top-H-8):M.bottom+8,right:window.innerWidth-M.right,width:Math.max(M.width,288),maxHeight:W?q-20:R-20})}},[a]),v.useEffect(()=>{const M=R=>{m.current&&!m.current.contains(R.target)&&g.current&&!g.current.contains(R.target)&&l(!1)};if(a)return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[a]),v.useEffect(()=>{const M=R=>{g.current&&g.current.contains(R.target)||a&&l(!1)};return window.addEventListener("scroll",M,!0),()=>window.removeEventListener("scroll",M,!0)},[a]);const x=(M,R)=>new Date(M,R+1,0).getDate(),b=(M,R)=>new Date(M,R,1).getDay(),j=M=>M?new Date(M).toLocaleDateString("he-IL",{day:"numeric",month:"long",year:"numeric"}):"",w=M=>{const R=c.getFullYear(),q=c.getMonth(),H=`${R}-${String(q+1).padStart(2,"0")}-${String(M).padStart(2,"0")}`;t(H),l(!1)},_=()=>{d(M=>new Date(M.getFullYear(),M.getMonth()-1,1))},N=()=>{d(M=>new Date(M.getFullYear(),M.getMonth()+1,1))},C=M=>{if(!r)return!1;const R=c.getFullYear(),q=c.getMonth(),H=new Date(R,q,M),W=new Date(r);return W.setHours(0,0,0,0),H<W},E=M=>{const R=new Date;return c.getFullYear()===R.getFullYear()&&c.getMonth()===R.getMonth()&&M===R.getDate()},A=M=>{if(!e)return!1;const R=new Date(e);return c.getFullYear()===R.getFullYear()&&c.getMonth()===R.getMonth()&&M===R.getDate()},S=c.getFullYear(),T=c.getMonth(),D=x(S,T),P=b(S,T),I=[];for(let M=0;M<P;M++)I.push(null);for(let M=1;M<=D;M++)I.push(M);const $=s.jsxs("div",{ref:g,style:{position:"fixed",top:h.top,right:h.right,width:h.width,maxHeight:h.maxHeight,zIndex:99999},className:"bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-auto",children:[s.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-indigo-600 px-4 py-3 flex items-center justify-between",children:[s.jsx("button",{type:"button",onClick:N,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors text-white",children:s.jsx(f$,{className:"w-4 h-4"})}),s.jsx("div",{className:"text-center",children:s.jsxs("span",{className:"text-white font-bold",children:[ude[T]," ",S]})}),s.jsx("button",{type:"button",onClick:_,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors text-white",children:s.jsx(os,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 px-3 py-2 bg-slate-50 border-b border-slate-100",children:dde.map((M,R)=>s.jsx("div",{className:"text-center text-xs font-bold text-slate-500",children:M},R))}),s.jsx("div",{className:"grid grid-cols-7 gap-1 p-3",children:I.map((M,R)=>s.jsx("div",{className:"aspect-square",children:M&&s.jsx("button",{type:"button",onClick:()=>!C(M)&&w(M),disabled:C(M),className:`w-full h-full rounded-lg text-sm font-medium transition-all flex items-center justify-center ${A(M)?"bg-brand-500 text-white shadow-lg shadow-brand-500/30":E(M)?"bg-brand-100 text-brand-700 font-bold":C(M)?"text-slate-300 cursor-not-allowed":"text-slate-700 hover:bg-slate-100"}`,children:M})},R))}),s.jsxs("div",{className:"px-3 pb-3 pt-1 flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>{t(new Date().toISOString().split("T")[0]),l(!1)},className:"flex-1 py-2.5 text-sm font-medium text-brand-600 bg-brand-50 hover:bg-brand-100 rounded-xl transition-colors",children:""}),s.jsx("button",{type:"button",onClick:()=>{const M=new Date;M.setDate(M.getDate()+1),t(M.toISOString().split("T")[0]),l(!1)},className:"flex-1 py-2.5 text-sm font-medium text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-xl transition-colors",children:""}),e&&s.jsx("button",{type:"button",onClick:()=>{t(""),l(!1)},className:"px-4 py-2.5 text-sm font-medium text-rose-600 bg-rose-50 hover:bg-rose-100 rounded-xl transition-colors",children:s.jsx(Rt,{className:"w-4 h-4"})})]})]});return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:m,type:"button",onClick:()=>l(!a),className:"w-full px-4 py-3 bg-gradient-to-r from-slate-50 to-white border-2 border-slate-200 rounded-xl text-right text-slate-800 font-medium cursor-pointer hover:border-brand-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-400 transition-all shadow-sm flex items-center justify-between gap-2",children:[s.jsx(On,{className:"w-4 h-4 text-brand-400"}),s.jsx("span",{className:e?"text-slate-800":"text-slate-400",children:e?j(e):n})]}),a&&vT.createPortal($,document.body)]})},fde=[{label:"",times:["08:00","09:00","10:00","11:00"]},{label:"",times:["12:00","13:00","14:00"]},{label:"",times:["15:00","16:00","17:00"]},{label:"",times:["18:00","19:00","20:00","21:00"]}],mde=({value:e,onChange:t,placeholder:r=" "})=>{const[n,a]=v.useState(!1),[l,c]=v.useState({top:0,right:0,width:0,maxHeight:500}),d=v.useRef(null),h=v.useRef(null),[f,m]=e?e.split(":").map(Number):[10,0];v.useEffect(()=>{if(n&&d.current){const N=d.current.getBoundingClientRect(),C=window.innerHeight-N.bottom,E=N.top,A=420,S=C<A;c({top:S?Math.max(10,N.top-A-8):N.bottom+8,right:window.innerWidth-N.right,width:Math.max(N.width,288),maxHeight:S?E-20:C-20})}},[n]),v.useEffect(()=>{const N=C=>{d.current&&!d.current.contains(C.target)&&h.current&&!h.current.contains(C.target)&&a(!1)};if(n)return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[n]),v.useEffect(()=>{const N=C=>{h.current&&h.current.contains(C.target)||n&&a(!1)};return window.addEventListener("scroll",N,!0),()=>window.removeEventListener("scroll",N,!0)},[n]);const g=(N,C)=>`${String(N).padStart(2,"0")}:${String(C).padStart(2,"0")}`,x=()=>{const N=(f+1)%24;t(g(N,m))},b=()=>{const N=(f-1+24)%24;t(g(N,m))},j=()=>{const N=(m+15)%60;t(g(f,N))},w=()=>{const N=(m-15+60)%60;t(g(f,N))},_=s.jsxs("div",{ref:h,style:{position:"fixed",top:l.top,right:l.right,width:l.width,maxHeight:l.maxHeight,zIndex:99999},className:"bg-white rounded-2xl shadow-2xl border border-slate-200 overflow-auto",children:[s.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-4 py-3",children:s.jsx("span",{className:"text-white font-bold",children:" "})}),s.jsxs("div",{className:"p-4 flex justify-center gap-4 border-b border-slate-100",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("button",{type:"button",onClick:x,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(Yl,{className:"w-5 h-5 text-slate-600"})}),s.jsx("div",{className:"w-16 h-14 bg-gradient-to-b from-indigo-50 to-white border-2 border-indigo-200 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-indigo-600",children:String(f).padStart(2,"0")})}),s.jsx("button",{type:"button",onClick:b,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-slate-600"})}),s.jsx("span",{className:"text-[10px] text-slate-400 mt-1",children:""})]}),s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-2xl font-bold text-slate-300",children:":"})}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("button",{type:"button",onClick:j,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(Yl,{className:"w-5 h-5 text-slate-600"})}),s.jsx("div",{className:"w-16 h-14 bg-gradient-to-b from-purple-50 to-white border-2 border-purple-200 rounded-xl flex items-center justify-center",children:s.jsx("span",{className:"text-2xl font-bold text-purple-600",children:String(m).padStart(2,"0")})}),s.jsx("button",{type:"button",onClick:w,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:s.jsx(Et,{className:"w-5 h-5 text-slate-600"})}),s.jsx("span",{className:"text-[10px] text-slate-400 mt-1",children:""})]})]}),s.jsx("div",{className:"p-3 space-y-2 max-h-40 overflow-y-auto",children:fde.map(N=>s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:N.label}),s.jsx("div",{className:"flex gap-1.5 mt-1",children:N.times.map(C=>s.jsx("button",{type:"button",onClick:()=>{t(C),a(!1)},className:`flex-1 py-1.5 rounded-lg text-xs font-medium transition-all ${e===C?"bg-indigo-500 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:C},C))})]},N.label))}),s.jsx("div",{className:"px-3 pb-3",children:s.jsxs("button",{type:"button",onClick:()=>a(!1),className:"w-full py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg shadow-indigo-500/20 flex items-center justify-center gap-2",children:[s.jsx(Er,{className:"w-4 h-4"}),""]})})]});return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{ref:d,type:"button",onClick:()=>a(!n),className:"w-full px-4 py-3 bg-gradient-to-r from-slate-50 to-white border-2 border-slate-200 rounded-xl text-right text-slate-800 font-medium cursor-pointer hover:border-indigo-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-400 transition-all shadow-sm flex items-center justify-between gap-2",children:[s.jsx(Br,{className:"w-4 h-4 text-indigo-400"}),s.jsx("span",{className:e?"text-slate-800 font-bold text-lg":"text-slate-400",children:e||r})]}),n&&vT.createPortal(_,document.body)]})},pde=({isOpen:e,onClose:t,userId:r,orgId:n,leads:a=[]})=>{const[l,c]=v.useState([]),[d,h]=v.useState(!1),[f,m]=v.useState(!1),[g,x]=v.useState(""),[b,j]=v.useState(""),[w,_]=v.useState(""),[N,C]=v.useState(""),[E,A]=v.useState("10:00"),[S,T]=v.useState("reminder"),[D,P]=v.useState(!1);v.useEffect(()=>{(async()=>{if(!(!r||!e)){h(!0);try{const{data:L,error:B}=await me.from("notifications").select(`
            id,
            title,
            message,
            lead_id,
            scheduled_at,
            is_read,
            leads(name)
          `).eq("user_id",r).eq("type","reminder").not("scheduled_at","is",null).order("scheduled_at",{ascending:!0});if(B)throw B;c((L||[]).map(G=>{var ce;return{...G,lead_name:(ce=G.leads)==null?void 0:ce.name}}))}catch(L){console.error("Failed to fetch reminders:",L)}finally{h(!1)}}})()},[r,e]);const I=()=>{x(""),j(""),_(""),C(""),A("10:00"),T("reminder"),m(!1)},$=async()=>{var W;if(!(!g||!N||!r||!n)){P(!0);try{const L=new Date(`${N}T${E}`).toISOString(),{data:B,error:G}=await me.from("notifications").insert({user_id:r,organization_id:n,type:S,title:g,message:b||null,lead_id:w||null,scheduled_at:L,is_read:!1}).select().single();if(G)throw G;const ce=(W=a.find(ge=>ge.id===w))==null?void 0:W.name;c(ge=>[...ge,{...B,lead_name:ce}].sort((U,V)=>new Date(U.scheduled_at).getTime()-new Date(V.scheduled_at).getTime())),I()}catch(L){console.error("Failed to add reminder:",L)}finally{P(!1)}}},M=async W=>{try{await me.from("notifications").delete().eq("id",W),c(L=>L.filter(B=>B.id!==W))}catch(L){console.error("Failed to delete reminder:",L)}},R=async W=>{await me.from("notifications").update({is_read:!0}).eq("id",W),c(L=>L.filter(B=>B.id!==W))},q=W=>{const L=new Date(W),B=new Date,G=L.toDateString()===B.toDateString(),ce=L.toDateString()===new Date(B.getTime()+864e5).toDateString(),ge=L.toLocaleTimeString("he-IL",{hour:"2-digit",minute:"2-digit"});return G?`  ${ge}`:ce?`  ${ge}`:`${L.toLocaleDateString("he-IL")}  ${ge}`},H=W=>new Date(W)<new Date;return e?s.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-brand-600 to-indigo-600 px-6 py-4 text-white flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:s.jsx(ri,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",children:" "}),s.jsxs("p",{className:"text-sm text-white/80",children:[l.length,"  "]})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:d?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(rt,{className:"w-6 h-6 animate-spin text-brand-500"})}):s.jsxs(s.Fragment,{children:[f?s.jsxs("div",{className:"p-5 border-b border-slate-100 bg-gradient-to-b from-slate-50 to-white space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-2",children:" "}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>T==null?void 0:T("urgent_task"),className:`p-3 rounded-xl border-2 text-center transition-all ${S==="urgent_task"?"border-rose-400 bg-rose-50 text-rose-700":"border-slate-200 hover:border-rose-200 text-slate-600"}`,children:[s.jsx("span",{className:"text-lg mb-1 block",children:""}),s.jsx("span",{className:"text-xs font-medium",children:" "})]}),s.jsxs("button",{type:"button",onClick:()=>T==null?void 0:T("followup"),className:`p-3 rounded-xl border-2 text-center transition-all ${S==="followup"?"border-emerald-400 bg-emerald-50 text-emerald-700":"border-slate-200 hover:border-emerald-200 text-slate-600"}`,children:[s.jsx("span",{className:"text-lg mb-1 block",children:""}),s.jsx("span",{className:"text-xs font-medium",children:""})]}),s.jsxs("button",{type:"button",onClick:()=>T==null?void 0:T("reminder"),className:`p-3 rounded-xl border-2 text-center transition-all ${S==="reminder"?"border-amber-400 bg-amber-50 text-amber-700":"border-slate-200 hover:border-amber-200 text-slate-600"}`,children:[s.jsx("span",{className:"text-lg mb-1 block",children:""}),s.jsx("span",{className:"text-xs font-medium",children:""})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1.5",children:""}),s.jsx("input",{type:"text",value:g,onChange:W=>x(W.target.value),placeholder:"  ?",className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-slate-800 placeholder:text-slate-400"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-1.5",children:" ()"}),s.jsx("textarea",{value:b,onChange:W=>j(W.target.value),placeholder:" ...",rows:2,className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 resize-none text-slate-800 placeholder:text-slate-400"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[s.jsx(On,{className:"w-3.5 h-3.5 text-brand-500"}),"?"]}),s.jsx(hde,{value:N,onChange:C,minDate:new Date().toISOString().split("T")[0],placeholder:" "})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-slate-700 mb-2 flex items-center gap-1.5",children:[s.jsx(Br,{className:"w-3.5 h-3.5 text-indigo-500"})," ?"]}),s.jsx(mde,{value:E,onChange:A,placeholder:" "})]})]}),a.length>0&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-bold text-slate-700 mb-1.5 flex items-center gap-1",children:[s.jsx(Mn,{className:"w-3.5 h-3.5 text-slate-400"}),"  ()"]}),s.jsxs("select",{value:w,onChange:W=>_(W.target.value),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-brand-500 focus:border-brand-500 text-slate-800 cursor-pointer hover:border-brand-300 transition-colors",children:[s.jsx("option",{value:"",children:""}),a.map(W=>s.jsx("option",{value:W.id,children:W.name},W.id))]})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{onClick:I,className:"flex-1 py-3 bg-white border border-slate-200 rounded-xl text-slate-600 font-medium hover:bg-slate-50 transition-colors",children:""}),s.jsxs("button",{onClick:$,disabled:!g||!N||D,className:"flex-1 py-3 bg-gradient-to-r from-brand-600 to-indigo-600 text-white rounded-xl font-bold hover:from-brand-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-brand-500/20 transition-all",children:[D?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):s.jsx(wn,{className:"w-4 h-4"}),""]})]})]}):s.jsx("div",{className:"p-4 border-b border-slate-100",children:s.jsxs("button",{onClick:()=>m(!0),className:"w-full py-3 border-2 border-dashed border-slate-200 rounded-xl text-slate-500 hover:border-brand-300 hover:text-brand-600 transition-colors flex items-center justify-center gap-2",children:[s.jsx(wn,{className:"w-4 h-4"}),"  "]})}),l.length===0?s.jsxs("div",{className:"py-12 text-center text-slate-400",children:[s.jsx(Br,{className:"w-10 h-10 mx-auto mb-3 opacity-30"}),s.jsx("p",{children:"  "}),s.jsx("p",{className:"text-sm mt-1",children:"  ,   "})]}):s.jsx("div",{className:"divide-y divide-slate-100",children:l.map(W=>s.jsxs("div",{className:`p-4 flex items-start gap-3 ${H(W.scheduled_at)?"bg-rose-50":""}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${H(W.scheduled_at)?"bg-rose-100":"bg-brand-100"}`,children:s.jsx(Br,{className:`w-5 h-5 ${H(W.scheduled_at)?"text-rose-600":"text-brand-600"}`})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-slate-800",children:W.title}),W.message&&s.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:W.message}),s.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-xs text-slate-400",children:[s.jsx("span",{className:H(W.scheduled_at)?"text-rose-500 font-medium":"",children:q(W.scheduled_at)}),W.lead_name&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Mn,{className:"w-3 h-3"}),W.lead_name]})]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>R(W.id),className:"p-2 text-emerald-500 hover:bg-emerald-50 rounded-lg transition-colors",title:"",children:s.jsx(At,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>M(W.id),className:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-50 rounded-lg transition-colors",title:"",children:s.jsx(ra,{className:"w-4 h-4"})})]})]},W.id))})]})}),s.jsx("div",{className:"px-6 py-4 border-t border-slate-200 bg-slate-50",children:s.jsx("button",{onClick:t,className:"w-full py-2.5 border border-slate-300 rounded-xl text-slate-600 hover:bg-white font-medium transition-colors",children:""})})]})}):null},gde="modulepreload",xde=function(e){return"/"+e},m3={},bde=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let c=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=c(r.map(f=>{if(f=xde(f),f in m3)return;m3[f]=!0;const m=f.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":gde,m||(x.as="script"),x.crossOrigin="",x.href=f,h&&x.setAttribute("nonce",h),document.head.appendChild(x),m)return new Promise((b,j)=>{x.addEventListener("load",b),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return t().catch(l)})},vde=({isOpen:e,onClose:t,organizationId:r,organizationName:n,onSuccess:a})=>{const[l,c]=v.useState(""),[d,h]=v.useState("rep"),[f,m]=v.useState(!1),[g,x]=v.useState(""),[b,j]=v.useState(""),[w,_]=v.useState(!1),N=async A=>{A.preventDefault(),m(!0),x(""),j("");try{const{data:{session:S}}=await bde(()=>Promise.resolve().then(()=>TU),[]).then(I=>I.supabase.auth.getSession()),T=S==null?void 0:S.access_token;if(!T)throw new Error("No session found");const D=await fetch("/api/admin/invitations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({email:l,organizationId:r,role:d})}),P=await D.json();if(!D.ok)throw new Error(P.error||"Failed to send invitation");j(P.invitation.inviteLink),c(""),a==null||a()}catch(S){x(S.message)}finally{m(!1)}},C=()=>{navigator.clipboard.writeText(b),_(!0),setTimeout(()=>_(!1),2e3)},E=()=>{c(""),h("rep"),x(""),j(""),t()};return e?s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:E}),s.jsxs("div",{className:"relative bg-white dark:bg-slate-900 rounded-2xl shadow-2xl w-full max-w-md mx-4 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-800",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center",children:s.jsx(bw,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"  "}),s.jsx("p",{className:"text-sm text-slate-500",children:n})]})]}),s.jsx("button",{onClick:E,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]}),s.jsx("div",{className:"p-6",children:b?s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:s.jsx(Er,{className:"w-8 h-8 text-emerald-500"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"  !"}),s.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"     "}),s.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 mb-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:b,readOnly:!0,className:"flex-1 bg-transparent text-sm text-slate-600 dark:text-slate-300 outline-none truncate"}),s.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:w?s.jsx(Er,{className:"w-4 h-4 text-emerald-500"}):s.jsx(c0,{className:"w-4 h-4 text-slate-400"})})]})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(be,{variant:"secondary",className:"flex-1",onClick:()=>j(""),children:" "}),s.jsx(be,{className:"flex-1",onClick:E,children:""})]})]}):s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx(xs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"email",value:l,onChange:A=>c(A.target.value),placeholder:"user@example.com",required:!0,className:"w-full pr-11 pl-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-900 dark:text-white outline-none focus:ring-2 focus:ring-brand-500 transition-all",dir:"ltr"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:""}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:()=>h("rep"),className:`flex-1 py-3 px-4 rounded-xl border-2 transition-all text-sm font-medium ${d==="rep"?"border-brand-500 bg-brand-50 dark:bg-brand-900/20 text-brand-600 dark:text-brand-400":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-300"}`,children:" "}),s.jsx("button",{type:"button",onClick:()=>h("manager"),className:`flex-1 py-3 px-4 rounded-xl border-2 transition-all text-sm font-medium ${d==="manager"?"border-brand-500 bg-brand-50 dark:bg-brand-900/20 text-brand-600 dark:text-brand-400":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-slate-300"}`,children:""})]})]}),g&&s.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl",children:s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:g})}),s.jsx(be,{type:"submit",className:"w-full",disabled:f||!l,children:f?s.jsxs(s.Fragment,{children:[s.jsx(rt,{className:"w-4 h-4 ml-2 animate-spin"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xs,{className:"w-4 h-4 ml-2"})," "]})})]})})]})]}):null},yde=({isOpen:e,onClose:t,orgId:r,orgName:n})=>{const[a,l]=v.useState(!0),[c,d]=v.useState(null),[h,f]=v.useState(""),[m,g]=v.useState(!1),[x,b]=v.useState(null),[j,w]=v.useState(""),[_,N]=v.useState(null);v.useEffect(()=>{e&&r&&C()},[e,r]);const C=async()=>{l(!0);const{data:{session:S}}=await me.auth.getSession();if(S)try{const D=await(await fetch(`/api/admin/organizations/${r}/phone-config`,{headers:{Authorization:`Bearer ${S.access_token}`}})).json();D.success&&(d(D.config),f(D.config.business_line||""))}catch(T){console.error("Failed to load phone config:",T)}finally{l(!1)}},E=async()=>{g(!0);const{data:{session:S}}=await me.auth.getSession();if(S)try{(await(await fetch(`/api/admin/organizations/${r}/phone-config`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.access_token}`},body:JSON.stringify({twilio_phone_number:h})})).json()).success&&alert("Business Line Saved")}catch(T){console.error("Failed to save business line:",T),alert("Error saving")}finally{g(!1)}},A=async()=>{if(!x)return;g(!0);const{data:{session:S}}=await me.auth.getSession();if(S)try{const T={twilio_phone_number:j};(await fetch(`/api/admin/users/${x.id}/phone-config`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S.access_token}`},body:JSON.stringify({config:T})})).ok&&(d(P=>P?{...P,users:P.users.map(I=>I.id===x.id?{...I,twilio_phone_number:j}:I)}:null),b(null))}catch(T){console.error("Failed to save user config:",T)}finally{g(!1)}};return e?s.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-4xl shadow-2xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-100 dark:border-slate-800",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(mt,{className:"w-5 h-5 text-indigo-500"})," "]}),s.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[" : ",s.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:n})]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg text-slate-400",children:s.jsx(Rt,{className:"w-5 h-5"})})]}),a?s.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px]",children:s.jsx(rt,{className:"w-8 h-8 animate-spin text-indigo-500"})}):s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[s.jsxs("h4",{className:"font-medium text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[s.jsx(ja,{className:"w-4 h-4 text-indigo-500"}),"  (Business Line)"]}),s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("input",{type:"text",placeholder:"+97250...",value:h,onChange:S=>f(S.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-white ltr",dir:"ltr"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:" -Caller ID       ."})]}),s.jsxs(be,{onClick:E,disabled:m,children:[m?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):s.jsx(sl,{className:"w-4 h-4 ml-2"}),""]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-slate-900 dark:text-white flex items-center gap-2 mb-4",children:[s.jsx(Mn,{className:"w-4 h-4 text-indigo-500"}),"  (",(c==null?void 0:c.users.length)||0,")"]}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm text-right",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 text-slate-500 dark:text-slate-400 font-medium",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:" "}),s.jsx("th",{className:"px-4 py-3",children:""}),s.jsx("th",{className:"px-4 py-3",children:""}),s.jsx("th",{className:"px-4 py-3",children:" "}),s.jsx("th",{className:"px-4 py-3",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:c==null?void 0:c.users.map(S=>{var T,D;return s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-800/30",children:[s.jsx("td",{className:"px-4 py-3 font-medium text-slate-900 dark:text-white",children:S.full_name}),s.jsx("td",{className:"px-4 py-3 text-slate-500",children:S.email}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${S.role==="manager"?"bg-purple-100 text-purple-700":"bg-slate-100 text-slate-700"}`,children:S.role})}),s.jsxs("td",{className:"px-4 py-3 font-mono ltr text-left",children:[S.twilio_phone_number||s.jsx("span",{className:"text-slate-400 italic",children:" "}),(D=(T=S.phone_rotator_config)==null?void 0:T.numbers)!=null&&D.length?s.jsxs("span",{className:"mr-2 text-xs bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded",children:[S.phone_rotator_config.numbers.length," "]}):null]}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("button",{onClick:()=>{b(S),w(S.twilio_phone_number||"")},className:"text-indigo-600 hover:text-indigo-700 font-medium text-xs",children:""})})]},S.id)})})]})})]})]})]}),x&&s.jsx("div",{className:"absolute inset-0 z-[70] flex items-center justify-center bg-black/20 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl p-6 w-full max-w-sm shadow-2xl border border-slate-200 dark:border-slate-700",children:[s.jsxs("h4",{className:"font-bold text-slate-900 dark:text-white mb-4",children:["   ",x.full_name]}),s.jsx("input",{type:"text",value:j,onChange:S=>w(S.target.value),placeholder:"+97250...",className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 mb-4 ltr",dir:"ltr"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(be,{variant:"secondary",className:"flex-1",onClick:()=>b(null),children:""}),s.jsx(be,{className:"flex-1",onClick:A,disabled:m,children:""})]})]})})]}):null},wde=({isOpen:e,onClose:t,onSuccess:r})=>{const[n,a]=v.useState("org"),[l,c]=v.useState(!1),[d,h]=v.useState(""),[f,m]=v.useState("free"),[g,x]=v.useState("sales"),[b,j]=v.useState(""),[w,_]=v.useState(""),[N,C]=v.useState(""),[E,A]=v.useState(!0),[S,T]=v.useState(""),[D,P]=v.useState(null);if(!e)return null;const I=()=>{if(n==="org"){if(!d.trim())return P("   ");a("admin")}else if(n==="admin"){if(!b.trim()||!w.trim())return P("   ");a("phone")}else n==="phone"&&a("review");P(null)},$=()=>{n==="admin"&&a("org"),n==="phone"&&a("admin"),n==="review"&&a("phone"),P(null)},M=async()=>{c(!0),P(null);try{const{data:{session:R}}=await me.auth.getSession();if(!R)throw new Error("Not authenticated");const q=R.access_token,H=await fetch("/api/admin/organizations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({name:d,plan:f,center_type:g})}),W=await H.json();if(!H.ok)throw new Error(W.error||"Failed to create organization");const L=W.organizationId,B=await fetch("/api/admin/invitations",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({email:b,organizationId:L,role:"manager"})});B.ok||console.error("Invite failed",await B.json()),S.trim()&&await fetch(`/api/admin/organizations/${L}/phone-config`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({twilio_phone_number:S})}),r(),t()}catch(R){P(R.message)}finally{c(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl w-full max-w-2xl shadow-2xl flex flex-col max-h-[90vh]",children:[s.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"  "}),s.jsx("div",{className:"flex gap-2 mt-2",children:["org","admin","phone","review"].map((R,q)=>s.jsx("div",{className:`h-1 w-12 rounded-full transition-colors ${["org","admin","phone","review"].indexOf(n)>=q?"bg-indigo-600":"bg-slate-200 dark:bg-slate-700"}`},R))})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]}),s.jsxs("div",{className:"p-8 overflow-y-auto flex-1",children:[D&&s.jsxs("div",{className:"mb-6 bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 p-4 rounded-xl text-sm flex items-center gap-2",children:[s.jsx(bm,{className:"w-4 h-4"}),D]}),n==="org"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-indigo-600",children:s.jsx(ja,{className:"w-8 h-8"})}),s.jsx("h3",{className:"text-lg font-bold",children:" "}),s.jsx("p",{className:"text-slate-500 text-sm",children:"  "})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),s.jsx("input",{type:"text",value:d,onChange:R=>h(R.target.value),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 outline-none focus:ring-2 focus:ring-indigo-500",placeholder:": Sales Team A",autoFocus:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),s.jsxs("select",{value:g,onChange:R=>x(R.target.value),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"sales",children:""}),s.jsx("option",{value:"support",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:""}),s.jsxs("select",{value:f,onChange:R=>m(R.target.value),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 outline-none focus:ring-2 focus:ring-indigo-500",children:[s.jsx("option",{value:"free",children:"Free"}),s.jsx("option",{value:"pro",children:"Pro"}),s.jsx("option",{value:"enterprise",children:"Enterprise"})]})]})]})]})]}),n==="admin"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-emerald-600",children:s.jsx(Mn,{className:"w-8 h-8"})}),s.jsx("h3",{className:"text-lg font-bold",children:" "}),s.jsx("p",{className:"text-slate-500 text-sm",children:"     "})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),s.jsx("input",{type:"text",value:w,onChange:R=>_(R.target.value),className:"w-full px-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 outline-none focus:ring-2 focus:ring-indigo-500",placeholder:" ",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx(xs,{className:"absolute right-3 top-3 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"email",value:b,onChange:R=>j(R.target.value),className:"w-full pr-10 pl-4 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"manager@example.com"})]})]}),s.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-800 rounded-lg text-indigo-600",children:s.jsx(xs,{className:"w-4 h-4"})}),s.jsx("p",{className:"text-xs text-indigo-800 dark:text-indigo-200 mt-1",children:"        .   -Manager  ."})]})]})]}),n==="phone"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-900/30 rounded-full flex items-center justify-center mx-auto mb-4 text-amber-600",children:s.jsx(mt,{className:"w-8 h-8"})}),s.jsx("h3",{className:"text-lg font-bold",children:" "}),s.jsx("p",{className:"text-slate-500 text-sm",children:"    ()"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"  (Business Line)"}),s.jsxs("div",{className:"relative",children:[s.jsx(D3,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",value:S,onChange:R=>T(R.target.value),className:"w-full px-4 pl-10 py-2 rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 outline-none focus:ring-2 focus:ring-indigo-500 ltr",placeholder:"+972...",dir:"ltr"})]}),s.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"             ."})]}),s.jsx("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-xl",children:s.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:"             ."})})]})]}),n==="review"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4 text-slate-600",children:s.jsx(At,{className:"w-8 h-8"})}),s.jsx("h3",{className:"text-lg font-bold",children:" "})]}),s.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-800/50 p-6 rounded-2xl",children:[s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("span",{className:"font-bold",children:[d," (",g.toUpperCase(),")"]})]}),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsx(jde,{variant:"brand",children:f.toUpperCase()})]}),s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"text-slate-500",children:""}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-bold",children:w}),s.jsx("div",{className:"text-xs text-slate-400",children:b})]})]}),s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"text-slate-500",children:" "}),s.jsx("span",{className:"font-mono ltr",children:S||"---"})]})]})]})]}),s.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 flex justify-between bg-slate-50/50 dark:bg-slate-900/50 rounded-b-2xl",children:[s.jsxs(be,{variant:"secondary",onClick:$,disabled:l||n==="org",className:n==="org"?"invisible":"",children:[s.jsx(l0,{className:"w-4 h-4 ml-2"}),""]}),n==="review"?s.jsxs(be,{onClick:M,disabled:l,className:"px-8",children:[l?s.jsx(rt,{className:"w-4 h-4 animate-spin ml-2"}):s.jsx(At,{className:"w-4 h-4 ml-2"})," "]}):s.jsxs(be,{onClick:I,disabled:l,children:["",s.jsx(b3,{className:"w-4 h-4 mr-2"})]})]})]})})},jde=({children:e,variant:t})=>s.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold bg-indigo-100 text-indigo-700",children:e}),_de=({onLogout:e,onImpersonate:t})=>{var En,Ln,jn,Ae,Ee,He;const[r,n]=v.useState([]),[a,l]=v.useState(null),[c,d]=v.useState(!0),[h,f]=v.useState(null),[m,g]=v.useState(""),[x,b]=v.useState("created_at"),[j,w]=v.useState("desc"),[_,N]=v.useState(!1),[C,E]=v.useState(null),[A,S]=v.useState(null),[T,D]=v.useState(null),[P,I]=v.useState(!1),[$,M]=v.useState(null),[R,q]=v.useState(""),[H,W]=v.useState("free"),[L,B]=v.useState("sales"),[G,ce]=v.useState(""),[ge,U]=v.useState(null),[V,te]=v.useState("free"),[he,ye]=v.useState("unassign"),[Ne,ve]=v.useState([]),[je,Q]=v.useState(!1),[_e,de]=v.useState(!1),[Y,we]=v.useState(!1),[Oe,lt]=v.useState(null),[ut,Ct]=v.useState(""),[rr,_r]=v.useState([]),It=async()=>{const{data:{session:Z}}=await me.auth.getSession();return{Authorization:`Bearer ${Z==null?void 0:Z.access_token}`,"Content-Type":"application/json"}},oe=async()=>{d(!0),f(null);try{const Z=await It(),Ue=await fetch("/api/admin/organizations",{headers:Z}),Le=await Ue.json();if(!Ue.ok)throw new Error(Le.error||"Failed to fetch organizations");n(Le.organizations||[])}catch(Z){f(Z.message),console.error("[SuperAdmin] Fetch orgs error:",Z)}finally{d(!1)}},Ce=async()=>{try{const Z=await It(),Ue=await fetch("/api/admin/verify-isolation",{headers:Z}),Le=await Ue.json();if(!Ue.ok)throw new Error(Le.error);l(Le.report)}catch(Z){console.error("[SuperAdmin] Isolation report error:",Z)}};v.useEffect(()=>{oe(),Ce()},[]);const Qe=async()=>{if(ge){de(!0);try{const Z=await It(),Ue=await fetch(`/api/admin/organizations/${ge.id}/plan`,{method:"PATCH",headers:Z,body:JSON.stringify({plan:V})}),Le=await Ue.json();if(!Ue.ok)throw new Error(Le.error);U(null),oe()}catch(Z){alert(": "+Z.message)}finally{de(!1)}}},tt=async()=>{if(!(!A||G!=="DELETE")){de(!0);try{const Z=await It(),Ue=await fetch(`/api/admin/organizations/${A.id}`,{method:"DELETE",headers:Z,body:JSON.stringify({confirmation:"DELETE"})}),Le=await Ue.json();if(!Ue.ok)throw new Error(Le.error);S(null),ce(""),oe(),Ce()}catch(Z){alert(": "+Z.message)}finally{de(!1)}}},xe=async Z=>{Q(!0);try{const Ue=await It(),Le=await fetch(`/api/admin/organizations/${Z}/users`,{headers:Ue}),bt=await Le.json();if(!Le.ok)throw new Error(bt.error);ve(bt.users||[])}catch(Ue){console.error("[SuperAdmin] Fetch users error:",Ue)}finally{Q(!1)}},Be=async()=>{if(!(!T||G!=="DELETE")){de(!0);try{const Z=await It(),Ue=await fetch(`/api/admin/users/${T.id}`,{method:"DELETE",headers:Z,body:JSON.stringify({confirmation:"DELETE",leadAction:he})}),Le=await Ue.json();if(!Ue.ok)throw new Error(Le.error);D(null),ce(""),C&&xe(C),oe(),Ce()}catch(Z){alert(": "+Z.message)}finally{de(!1)}}},pt=Z=>{E(Z),xe(Z),se(Z)},se=async Z=>{var Ue;try{const Le=await It(),bt=await fetch(`/api/admin/organizations/${Z}/invitations`,{headers:Le}),nt=await bt.json();if(!bt.ok)throw new Error(nt.error);_r(((Ue=nt.invitations)==null?void 0:Ue.filter(Dt=>!Dt.accepted_at))||[])}catch(Le){console.error("[SuperAdmin] Fetch invitations error:",Le)}},Te=(Z,Ue)=>{lt(Z),Ct(Ue),we(!0)},Ge=()=>{C&&se(C)},ht=r.filter(Z=>Z.name.toLowerCase().includes(m.toLowerCase())).sort((Z,Ue)=>{const Le=Z[x],bt=Ue[x];return typeof Le=="number"&&typeof bt=="number"?j==="asc"?Le-bt:bt-Le:j==="asc"?String(Le).localeCompare(String(bt)):String(bt).localeCompare(String(Le))}),xt=r.reduce((Z,Ue)=>Z+Ue.user_count,0),$t=r.reduce((Z,Ue)=>Z+Ue.lead_count,0),wt=(a==null?void 0:a.total_issues)||0,ft=Z=>{x===Z?w(Ue=>Ue==="asc"?"desc":"asc"):(b(Z),w("desc"))},gt=({field:Z})=>x!==Z?null:j==="asc"?s.jsx(Yl,{className:"w-3 h-3"}):s.jsx(Et,{className:"w-3 h-3"});return s.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 font-sans flex flex-col",dir:"rtl",children:[s.jsxs("header",{className:"bg-slate-900 text-white pt-6 pb-20 px-6 lg:px-8 border-b border-slate-800 relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 left-0 w-[600px] h-[600px] bg-indigo-600/10 rounded-full blur-3xl -ml-20 -mt-20 pointer-events-none"}),s.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-indigo-500/20 rounded-lg border border-indigo-500/30 backdrop-blur-sm",children:s.jsx(gm,{className:"w-6 h-6 text-indigo-400"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold tracking-tight",children:"  "}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[s.jsxs("span",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"  "]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[r.length," "]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(be,{variant:"secondary",className:"hidden sm:flex bg-white/10 border-white/20 text-white hover:bg-white/20",onClick:()=>{oe(),Ce()},children:[s.jsx(pw,{className:"w-4 h-4 ml-2"}),""]}),s.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg text-sm font-medium transition-colors border border-white/10",children:[s.jsx(fw,{className:"w-4 h-4 ml-2"}),""]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 p-5 rounded-xl",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20 text-indigo-400",children:s.jsx(ja,{className:"w-5 h-5"})})}),s.jsx("p",{className:"text-sm text-slate-400 mb-1",children:" "}),s.jsx("p",{className:"text-2xl font-mono font-bold text-white",children:r.length})]}),s.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 p-5 rounded-xl",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20 text-emerald-400",children:s.jsx(Gr,{className:"w-5 h-5"})})}),s.jsx("p",{className:"text-sm text-slate-400 mb-1",children:'" '}),s.jsx("p",{className:"text-2xl font-mono font-bold text-white",children:xt})]}),s.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm border border-slate-700/50 p-5 rounded-xl",children:[s.jsx("div",{className:"flex justify-between items-start mb-4",children:s.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20 text-amber-400",children:s.jsx(D$,{className:"w-5 h-5"})})}),s.jsx("p",{className:"text-sm text-slate-400 mb-1",children:'" '}),s.jsx("p",{className:"text-2xl font-mono font-bold text-white",children:$t})]}),s.jsxs("div",{className:`bg-slate-800/50 backdrop-blur-sm border p-5 rounded-xl cursor-pointer transition-all hover:scale-105 ${wt>0?"border-rose-500/50 bg-rose-900/20":"border-emerald-500/50 bg-emerald-900/20"}`,onClick:()=>I(!0),children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:`p-2 rounded-lg ${wt>0?"bg-rose-500/20 text-rose-400":"bg-emerald-500/20 text-emerald-400"}`,children:wt>0?s.jsx(_2,{className:"w-5 h-5"}):s.jsx(At,{className:"w-5 h-5"})}),s.jsx("span",{className:"text-xs font-bold text-slate-400",children:" "})]}),s.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"  "}),s.jsx("p",{className:`text-2xl font-mono font-bold ${wt>0?"text-rose-400":"text-emerald-400"}`,children:wt})]})]})]})]}),s.jsx("main",{className:"flex-1 -mt-10 max-w-7xl mx-auto w-full px-6 lg:px-8 pb-12 relative z-20",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-800 overflow-hidden flex flex-col min-h-[500px]",children:[s.jsxs("div",{className:"p-5 border-b border-slate-100 dark:border-slate-800 flex flex-col sm:flex-row justify-between items-center gap-4",children:[s.jsx("div",{className:"flex items-center gap-4 w-full sm:w-auto",children:s.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white flex items-center gap-2",children:" "})}),s.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[s.jsxs("div",{className:"relative flex-1 sm:flex-initial",children:[s.jsx(ta,{className:"w-4 h-4 absolute right-3 top-3 text-slate-400"}),s.jsx("input",{type:"text",placeholder:" ...",value:m,onChange:Z=>g(Z.target.value),className:"w-full sm:w-64 pr-10 pl-4 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:ring-2 focus:ring-indigo-500"})]}),s.jsxs(be,{onClick:()=>N(!0),children:[s.jsx(wn,{className:"w-4 h-4 ml-2"})," "]})]})]}),c?s.jsx("div",{className:"flex-1 flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx(rt,{className:"w-10 h-10 animate-spin text-indigo-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-500",children:" ..."})]})}):h?s.jsxs("div",{className:"flex-1 flex items-center justify-center flex-col min-h-[400px] text-rose-500",children:[s.jsx(vn,{className:"w-10 h-10 mb-4"}),s.jsx("p",{children:h}),s.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"    Plateform Admin"})]}):s.jsxs("div",{className:"flex-1 overflow-x-auto",children:[s.jsxs("table",{className:"w-full text-right border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-800/50 text-xs text-slate-500 dark:text-slate-400 uppercase font-semibold border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"px-6 py-4 cursor-pointer hover:text-indigo-600 text-right",onClick:()=>ft("name"),children:s.jsxs("div",{className:"flex items-center gap-1",children:["  ",s.jsx(gt,{field:"name"})]})}),s.jsx("th",{className:"px-6 py-4 text-center",children:""}),s.jsx("th",{className:"px-6 py-4 text-center",children:""}),s.jsx("th",{className:"px-6 py-4 cursor-pointer hover:text-indigo-600 text-center",onClick:()=>ft("user_count"),children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[" ",s.jsx(gt,{field:"user_count"})]})}),s.jsx("th",{className:"px-6 py-4 cursor-pointer hover:text-indigo-600 text-center",onClick:()=>ft("lead_count"),children:s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[" ",s.jsx(gt,{field:"lead_count"})]})}),s.jsx("th",{className:"px-6 py-4 cursor-pointer hover:text-indigo-600 text-right",onClick:()=>ft("created_at"),children:s.jsxs("div",{className:"flex items-center justify-start gap-1",children:["  ",s.jsx(gt,{field:"created_at"})]})}),s.jsx("th",{className:"px-6 py-4 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:ht.map(Z=>{var Ue;return s.jsxs("tr",{className:"group hover:bg-slate-50 dark:hover:bg-slate-800/30 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm shadow-sm",children:Z.name.charAt(0).toUpperCase()}),s.jsxs("div",{children:[s.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:Z.name}),s.jsxs("p",{className:"text-xs text-slate-500 font-mono",children:["ID: ",Z.id.slice(0,8),"..."]})]})]})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx(fr,{variant:Z.center_type==="support"?"purple":"neutral",children:Z.center_type==="support"?"":""})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx(fr,{variant:Z.plan==="enterprise"?"brand":Z.plan==="pro"?"success":"secondary",children:((Ue=Z.plan)==null?void 0:Ue.toUpperCase())||"FREE"})}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-slate-600 dark:text-slate-300",children:Z.user_count}),s.jsx("td",{className:"px-6 py-4 text-center text-sm text-slate-600 dark:text-slate-300",children:Z.lead_count}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsx("span",{className:"text-sm text-slate-500",children:new Date(Z.created_at).toLocaleDateString("he-IL")})}),s.jsx("td",{className:"px-6 py-4 text-left",children:s.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>M(Z),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors",title:" ",children:s.jsx(mt,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>pt(Z.id),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-lg transition-colors",title:" ",children:s.jsx(pm,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>t(Z.id,Z.name,Z.center_type),className:"p-2 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 rounded-lg transition-colors",title:" ",children:s.jsx(j3,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>S(Z),className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors",title:" ",children:s.jsx(ra,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{U(Z),te(Z.plan||"free")},className:"p-2 text-slate-400 hover:text-amber-600 hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-lg transition-colors",title:" ",children:s.jsx(Eu,{className:"w-4 h-4"})})]})})]},Z.id)})})]}),ht.length===0&&s.jsx("div",{className:"p-12 text-center text-slate-400",children:"   "})]}),s.jsx("div",{className:"px-6 py-4 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50 flex items-center justify-between",children:s.jsxs("p",{className:"text-xs text-slate-500",children:[" ",ht.length,"  ",r.length," "]})})]})}),$&&s.jsx(yde,{isOpen:!0,onClose:()=>M(null),orgId:$.id,orgName:$.name}),s.jsx(wde,{isOpen:_,onClose:()=>N(!1),onSuccess:()=>{N(!1),oe(),Ce()}}),A&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-3 bg-rose-100 dark:bg-rose-900/30 rounded-xl",children:s.jsx(vn,{className:"w-6 h-6 text-rose-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:" "}),s.jsx("p",{className:"text-sm text-slate-500",children:"   "})]})]}),s.jsxs("div",{className:"bg-rose-50 dark:bg-rose-900/20 border border-rose-200 dark:border-rose-800 rounded-xl p-4 mb-4",children:[s.jsxs("p",{className:"text-sm text-rose-700 dark:text-rose-300",children:[" ",s.jsx("strong",{children:A.name})," :"]}),s.jsxs("ul",{className:"text-sm text-rose-600 dark:text-rose-400 mt-2 space-y-1",children:[s.jsxs("li",{children:["  ",A.user_count," "]}),s.jsxs("li",{children:["  ",A.lead_count," "]}),s.jsx("li",{children:"     "})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[" ",s.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:"DELETE"})," :"]}),s.jsx("input",{type:"text",value:G,onChange:Z=>ce(Z.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-mono",placeholder:"DELETE"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(be,{variant:"secondary",className:"flex-1",onClick:()=>{S(null),ce("")},children:""}),s.jsx(be,{className:"flex-1 bg-rose-600 hover:bg-rose-700",onClick:tt,disabled:_e||G!=="DELETE",children:_e?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):" "})]})]})}),ge&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-sm shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:" "}),s.jsx("button",{onClick:()=>U(null),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3 block",children:["   ",s.jsx("span",{className:"font-bold",children:ge.name})]}),s.jsx("div",{className:"flex flex-col gap-2",children:["free","pro","enterprise"].map(Z=>s.jsxs("button",{onClick:()=>te(Z),className:`py-3 px-4 text-left rounded-xl border transition-all flex items-center justify-between ${V===Z?"bg-indigo-50 dark:bg-indigo-900/20 border-indigo-600 text-indigo-700 dark:text-indigo-300":"bg-white dark:bg-slate-800 border-slate-200 dark:border-slate-700 hover:border-indigo-300"}`,children:[s.jsx("span",{className:"font-medium",children:Z.toUpperCase()}),V===Z&&s.jsx(At,{className:"w-4 h-4 text-indigo-600"})]},Z))})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(be,{variant:"secondary",className:"flex-1",onClick:()=>U(null),children:""}),s.jsx(be,{className:"flex-1",onClick:Qe,disabled:_e,children:_e?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):" "})]})]})}),C&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-2xl shadow-2xl max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:[" ",s.jsxs("span",{className:"text-sm font-normal text-slate-500 ml-2",children:["(",Ne.length,")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(be,{size:"sm",onClick:()=>{const Z=r.find(Ue=>Ue.id===C);Z&&Te(Z.id,Z.name)},children:[s.jsx(wn,{className:"w-4 h-4 mr-1"})," "]}),s.jsx("button",{onClick:()=>{E(null),ve([]),_r([])},className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]})]}),je?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsx(rt,{className:"w-8 h-8 animate-spin text-indigo-500"})}):s.jsxs("div",{className:"flex-1 overflow-auto space-y-4",children:[rr.length>0&&s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300 mb-3",children:["  (",rr.length,")"]}),s.jsx("div",{className:"space-y-2",children:rr.map(Z=>s.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-slate-800 p-3 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Z.email}),s.jsxs("p",{className:"text-xs text-slate-500",children:[": ",Z.role==="manager"?"":"","   : ",new Date(Z.expires_at).toLocaleDateString("he-IL")]})]}),s.jsx(fr,{variant:"warning",children:""})]},Z.id))})]}),s.jsxs("table",{className:"w-full text-right",dir:"rtl",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-xs text-slate-500 uppercase border-b border-slate-100 dark:border-slate-800",children:[s.jsx("th",{className:"pb-3 text-right",children:""}),s.jsx("th",{className:"pb-3 text-right",children:""}),s.jsx("th",{className:"pb-3 text-center",children:""}),s.jsx("th",{className:"pb-3 text-left",children:""})]})}),s.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:Ne.map(Z=>{var Ue;return s.jsxs("tr",{className:"group",children:[s.jsx("td",{className:"py-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-slate-400 to-slate-600 flex items-center justify-center text-white text-xs font-bold",children:((Ue=Z.full_name)==null?void 0:Ue.charAt(0))||"?"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Z.full_name||" "}),s.jsx("p",{className:"text-xs text-slate-400",children:Z.email})]})]})}),s.jsx("td",{className:"py-3",children:s.jsx(fr,{variant:Z.role==="manager"?"brand":Z.role==="platform_admin"?"warning":"secondary",children:Z.role})}),s.jsx("td",{className:"py-3 text-sm text-center text-slate-600 dark:text-slate-300",children:Z.lead_count}),s.jsx("td",{className:"py-3 text-left",children:s.jsx("button",{onClick:()=>D(Z),className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:s.jsx(ra,{className:"w-4 h-4"})})})]},Z.id)})})]}),Ne.length===0&&s.jsx("div",{className:"p-8 text-center text-slate-400",children:"   "})]})]})}),T&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-md shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"p-3 bg-rose-100 dark:bg-rose-900/30 rounded-xl",children:s.jsx(vn,{className:"w-6 h-6 text-rose-500"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:" "}),s.jsx("p",{className:"text-sm text-slate-500",children:T.email})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:["   ",T.lead_count,"   ?"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-xl cursor-pointer hover:bg-slate-100",children:[s.jsx("input",{type:"radio",name:"leadAction",value:"unassign",checked:he==="unassign",onChange:()=>ye("unassign")}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:"  "}),s.jsx("p",{className:"text-xs text-slate-500",children:"    (  )"})]})]}),s.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 dark:bg-slate-800 rounded-xl cursor-pointer hover:bg-slate-100",children:[s.jsx("input",{type:"radio",name:"leadAction",value:"delete",checked:he==="delete",onChange:()=>ye("delete")}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-rose-600",children:" "}),s.jsx("p",{className:"text-xs text-slate-500",children:"   "})]})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:[" ",s.jsx("span",{className:"font-mono bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:"DELETE"})," :"]}),s.jsx("input",{type:"text",value:G,onChange:Z=>ce(Z.target.value),className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm font-mono",placeholder:"DELETE"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(be,{variant:"secondary",className:"flex-1",onClick:()=>{D(null),ce("")},children:""}),s.jsx(be,{className:"flex-1 bg-rose-600 hover:bg-rose-700",onClick:Be,disabled:_e||G!=="DELETE",children:_e?s.jsx(rt,{className:"w-4 h-4 animate-spin"}):" "})]})]})}),P&&a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-2xl p-6 w-full max-w-3xl shadow-2xl max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${wt>0?"bg-rose-100 dark:bg-rose-900/30":"bg-emerald-100 dark:bg-emerald-900/30"}`,children:wt>0?s.jsx(_2,{className:"w-5 h-5 text-rose-500"}):s.jsx(At,{className:"w-5 h-5 text-emerald-500"})}),s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"  "})]}),s.jsx("button",{onClick:()=>I(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg",children:s.jsx(Rt,{className:"w-5 h-5 text-slate-400"})})]}),s.jsxs("div",{className:"flex-1 overflow-auto space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a.total_organizations}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a.total_users}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4 text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a.total_leads}),s.jsx("p",{className:"text-xs text-slate-500",children:""})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white",children:" :"}),s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl ${a.null_org_id_leads>0?"bg-rose-50 dark:bg-rose-900/20":"bg-emerald-50 dark:bg-emerald-900/20"}`,children:[s.jsx("span",{className:"text-sm",children:"    (organization_id)"}),s.jsx("span",{className:`font-bold ${a.null_org_id_leads>0?"text-rose-600":"text-emerald-600"}`,children:a.null_org_id_leads})]}),s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl ${a.null_org_id_users>0?"bg-rose-50 dark:bg-rose-900/20":"bg-emerald-50 dark:bg-emerald-900/20"}`,children:[s.jsx("span",{className:"text-sm",children:"    (organization_id)"}),s.jsx("span",{className:`font-bold ${a.null_org_id_users>0?"text-rose-600":"text-emerald-600"}`,children:a.null_org_id_users})]}),s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl ${(((En=a.orphan_org_ids)==null?void 0:En.length)||0)>0?"bg-rose-50 dark:bg-rose-900/20":"bg-emerald-50 dark:bg-emerald-900/20"}`,children:[s.jsx("span",{className:"text-sm",children:"    "}),s.jsx("span",{className:`font-bold ${(((Ln=a.orphan_org_ids)==null?void 0:Ln.length)||0)>0?"text-rose-600":"text-emerald-600"}`,children:((jn=a.orphan_org_ids)==null?void 0:jn.length)||0})]}),s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-xl ${(((Ae=a.cross_org_assignments)==null?void 0:Ae.length)||0)>0?"bg-rose-50 dark:bg-rose-900/20":"bg-emerald-50 dark:bg-emerald-900/20"}`,children:[s.jsx("span",{className:"text-sm",children:"  (   )"}),s.jsx("span",{className:`font-bold ${(((Ee=a.cross_org_assignments)==null?void 0:Ee.length)||0)>0?"text-rose-600":"text-emerald-600"}`,children:((He=a.cross_org_assignments)==null?void 0:He.length)||0})]})]}),a.leads_per_org&&a.leads_per_org.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 dark:text-white mb-3",children:"  :"}),s.jsx("div",{className:"space-y-2",children:a.leads_per_org.map((Z,Ue)=>{var Le;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[s.jsx("span",{className:"text-sm",children:Z.org_name||((Le=Z.org_id)==null?void 0:Le.slice(0,8))}),s.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Z.count})]},Ue)})})]})]})]})}),s.jsx(vde,{isOpen:Y,onClose:()=>{we(!1),lt(null),Ct("")},organizationId:Oe||"",organizationName:ut,onSuccess:Ge})]})},rw=[{quote:"        3   .",author:" ",role:" ",company:' "',metric:"+24%",metricLabel:" ",initial:""},{quote:"'        .    .",author:" ",role:"  ",company:" ",metric:"+45%",metricLabel:" ",initial:""},{quote:"              .",author:" ",role:" ",company:" ",metric:"x2",metricLabel:" ",initial:""},{quote:"             .",author:" ",role:'" ',company:" ",metric:"+38%",metricLabel:" ",initial:""}],kde=[{icon:mt,title:"   ",desc:"AI    "},{icon:Ar,title:" ",desc:"   "},{icon:aw,title:" ",desc:"  "},{icon:Gr,title:"  ",desc:"  "}],Nde=({onLogin:e})=>{const[t,r]=v.useState(""),[n,a]=v.useState(""),[l,c]=v.useState(!1),[d,h]=v.useState(!1),[f,m]=v.useState(0),[g,x]=v.useState(!1),[b,j]=v.useState(!1),[w,_]=v.useState({name:"",email:"",company:"",phone:"",message:""}),[N,C]=v.useState(!1),[E,A]=v.useState(!1);v.useEffect(()=>{const P=setInterval(()=>{x(!0),setTimeout(()=>{m(I=>(I+1)%rw.length),x(!1)},400)},6e3);return()=>clearInterval(P)},[]);const S=async P=>{if(P.preventDefault(),!t||!n){alert("   ");return}h(!0);try{const{data:I,error:$}=await me.auth.signInWithPassword({email:t,password:n});if($){alert(" : "+$.message);return}const M=I==null?void 0:I.user;if(!M){alert(" :   .");return}let R=null,q=null;for(let W=1;W<=3;W++){const{data:L,error:B}=await me.from("profiles").select("id, full_name, avatar_url, role, organization_id").eq("id",M.id).single();if(L){R=L;break}q=B,await new Promise(G=>setTimeout(G,600))}if(!R){console.error("Profile fetch failed:",q),alert("     .    .");return}const H=R.role==="platform_admin"?"super_admin":R.role==="manager"?"manager":"rep";console.log("[Login] User logged in with org:",R.organization_id),e({id:R.id,name:R.full_name||"User",role:R.role,avatar:R.avatar_url,type:H,organization_id:R.organization_id})}catch(I){console.error("Login Error:",I),alert("   .   .")}finally{h(!1)}},T=async P=>{P.preventDefault(),C(!0),await new Promise(I=>setTimeout(I,1500)),console.log("Contact form submitted:",w),C(!1),A(!0)},D=rw[f];return b?s.jsxs("div",{className:"min-h-screen flex w-full bg-white dark:bg-slate-950 font-sans overflow-hidden animate-in fade-in duration-300",children:[s.jsxs("div",{className:"w-full lg:w-1/2 min-h-screen flex flex-col justify-center items-center p-8 lg:p-16 relative z-10 bg-white dark:bg-slate-950",children:[s.jsxs("div",{className:"w-full max-w-md animate-in fade-in slide-in-from-right-4 duration-500",children:[s.jsxs("button",{onClick:()=>{j(!1),A(!1)},className:"flex items-center gap-2 text-slate-500 hover:text-brand-600 mb-8 transition-all hover:gap-3",children:[s.jsx(l0,{className:"w-4 h-4"}),s.jsx("span",{children:" "})]}),s.jsxs("div",{className:"mb-8 text-center lg:text-right",children:[s.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-brand-600 to-brand-700 flex items-center justify-center text-white shadow-xl shadow-brand-500/20",children:s.jsx(u0,{className:"w-7 h-7"})}),s.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"SalesFlow AI"})]}),s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-3",children:"  "}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base",children:"  ?     ."})]}),E?s.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-2xl p-8 text-center animate-in fade-in zoom-in",children:[s.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-900/50 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(mc,{className:"w-8 h-8 text-emerald-600"})}),s.jsx("h3",{className:"text-xl font-bold text-emerald-800 dark:text-emerald-200 mb-2",children:"  !"}),s.jsx("p",{className:"text-emerald-600 dark:text-emerald-400",children:"     ."})]}):s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" "}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:"text",required:!0,value:w.name,onChange:P=>_({...w,name:P.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:"   "}),s.jsx(Mn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:"email",required:!0,value:w.email,onChange:P=>_({...w,email:P.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:"name@company.com",dir:"ltr"}),s.jsx(xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:"tel",value:w.phone,onChange:P=>_({...w,phone:P.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:"050-000-0000",dir:"ltr"}),s.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:"text",value:w.company,onChange:P=>_({...w,company:P.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all text-slate-900 dark:text-white placeholder-slate-400",placeholder:" "}),s.jsx(ja,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:" ()"}),s.jsx("div",{className:"relative group",children:s.jsx("textarea",{value:w.message,onChange:P=>_({...w,message:P.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all text-slate-900 dark:text-white placeholder-slate-400 resize-none",placeholder:"    ..."})})]}),s.jsx(be,{type:"submit",disabled:N,className:"w-full py-3.5 text-base font-bold justify-center shadow-lg shadow-brand-500/20 hover:shadow-brand-500/30 hover:-translate-y-0.5 transition-all duration-300",children:N?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s.jsx("span",{children:"..."})]}):s.jsxs(s.Fragment,{children:["  ",s.jsx(mc,{className:"w-4 h-4 mr-2"})]})})]})]}),s.jsx("div",{className:"mt-auto pt-10 text-xs text-slate-400 text-center lg:text-right",children:" 2024 SalesFlow AI.   ."})]}),s.jsx(p3,{testimonial:D,currentTestimonial:f,isAnimating:g,setCurrentTestimonial:m,setIsAnimating:x})]}):s.jsxs("div",{className:"min-h-screen flex w-full bg-white dark:bg-slate-950 font-sans overflow-hidden",children:[s.jsx("div",{className:"w-full lg:w-1/2 min-h-screen flex flex-col justify-center items-center p-8 lg:p-16 relative z-10 bg-white dark:bg-slate-950",children:s.jsxs("div",{className:"w-full max-w-sm animate-in fade-in slide-in-from-bottom-4 duration-500",children:[s.jsxs("div",{className:"mb-10 text-center",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[s.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-brand-600 to-brand-700 flex items-center justify-center text-white shadow-xl shadow-brand-500/20",children:s.jsx(u0,{className:"w-7 h-7"})}),s.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white tracking-tight",children:"SalesFlow AI"})]}),s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-3",children:"  "}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base",children:"      ."})]}),s.jsxs("form",{onSubmit:S,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5",children:""}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:"email",value:t,onChange:P=>r(P.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all text-slate-900 dark:text-white placeholder-slate-400 group-hover:border-slate-300 dark:group-hover:border-slate-700",placeholder:"name@company.com",dir:"ltr"}),s.jsx(xs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-brand-500 transition-colors"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:""}),s.jsx("a",{href:"#",className:"text-xs font-medium text-brand-600 hover:text-brand-700 dark:text-brand-400 transition-colors",children:" ?"})]}),s.jsxs("div",{className:"relative group",children:[s.jsx("input",{type:l?"text":"password",value:n,onChange:P=>a(P.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900/50 border border-slate-200 dark:border-slate-800 rounded-xl text-sm outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all text-slate-900 dark:text-white placeholder-slate-400 group-hover:border-slate-300 dark:group-hover:border-slate-700",placeholder:"",dir:"ltr"}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",children:l?s.jsx(_3,{className:"w-4 h-4"}):s.jsx(pm,{className:"w-4 h-4"})})]})]}),s.jsx(be,{type:"submit",disabled:d,className:"w-full py-3.5 text-base font-bold justify-center shadow-lg shadow-brand-500/20 hover:shadow-brand-500/30 hover:-translate-y-0.5 transition-all duration-300",children:d?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s.jsx("span",{children:"..."})]}):s.jsxs(s.Fragment,{children:["  ",s.jsx(l0,{className:"w-4 h-4 mr-2 rotate-180"})]})})]}),s.jsxs("div",{className:"mt-8 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-800 text-center",children:[s.jsx("p",{className:"text-base text-slate-600 dark:text-slate-400 mb-2",children:"   ?"}),s.jsx("button",{onClick:()=>j(!0),className:"text-lg font-bold text-brand-600 hover:text-brand-700 dark:text-brand-400 transition-colors underline decoration-2 underline-offset-4 hover:decoration-brand-400",children:"    "})]}),s.jsx("div",{className:"mt-10 text-xs text-slate-400 text-center",children:" 2024 SalesFlow AI.   ."})]})}),s.jsx(p3,{testimonial:D,currentTestimonial:f,isAnimating:g,setCurrentTestimonial:m,setIsAnimating:x})]})},p3=({testimonial:e,currentTestimonial:t,isAnimating:r,setCurrentTestimonial:n,setIsAnimating:a})=>s.jsxs("div",{className:"hidden lg:flex w-1/2 bg-slate-900 relative items-center justify-center overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-900 via-slate-950 to-purple-900 z-0"}),s.jsx("div",{className:"absolute top-[-10%] right-[-10%] w-[600px] h-[600px] bg-brand-600/20 rounded-full blur-[120px] mix-blend-screen animate-pulse"}),s.jsx("div",{className:"absolute bottom-[-10%] left-[-10%] w-[600px] h-[600px] bg-purple-600/20 rounded-full blur-[120px] mix-blend-screen"}),s.jsx("div",{className:"absolute top-[50%] left-[50%] -translate-x-1/2 -translate-y-1/2 w-[400px] h-[400px] bg-emerald-600/10 rounded-full blur-[100px] mix-blend-screen"}),s.jsxs("div",{className:"relative z-10 max-w-lg w-full px-12 flex flex-col gap-6",children:[s.jsxs("div",{className:`bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-6 shadow-2xl relative overflow-hidden transition-all duration-500 ${r?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-500/10 rounded-full blur-2xl"}),s.jsx(nL,{className:"w-8 h-8 text-brand-400/40 mb-3"}),s.jsxs("p",{className:"text-white text-base leading-relaxed mb-5",children:['"',e.quote,'"']}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center text-white font-bold text-sm",children:e.initial}),s.jsxs("div",{children:[s.jsx("span",{className:"block text-white font-bold text-sm",children:e.author}),s.jsx("span",{className:"block text-indigo-300/80 text-xs",children:e.role})]})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"flex items-center gap-1 bg-emerald-500/20 px-2.5 py-1 rounded-lg border border-emerald-500/30",children:[s.jsx(Pc,{className:"w-3.5 h-3.5 text-emerald-400"}),s.jsx("span",{className:"text-emerald-300 text-sm font-bold",children:e.metric})]}),s.jsx("span",{className:"text-emerald-200/50 text-[10px] mt-0.5 block",children:e.metricLabel})]})]}),s.jsx("div",{className:"flex justify-center gap-2 mt-5",children:rw.map((l,c)=>s.jsx("button",{onClick:()=>{a(!0),setTimeout(()=>{n(c),a(!1)},400)},className:`h-1.5 rounded-full transition-all duration-300 ${c===t?"bg-brand-400 w-6":"bg-white/20 hover:bg-white/40 w-1.5"}`},c))})]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:kde.map((l,c)=>s.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl p-4 hover:bg-white/10 transition-all group",children:[s.jsx(l.icon,{className:"w-5 h-5 text-brand-400 mb-2 group-hover:scale-110 transition-transform"}),s.jsx("h4",{className:"text-white font-semibold text-sm mb-0.5",children:l.title}),s.jsx("p",{className:"text-indigo-200/60 text-xs",children:l.desc})]},c))}),s.jsxs("div",{className:"flex justify-center gap-6 pt-2",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-2xl font-bold text-white",children:"500+"}),s.jsx("span",{className:"text-indigo-300/60 text-xs",children:" "})]}),s.jsxs("div",{className:"text-center border-x border-white/10 px-6",children:[s.jsx("span",{className:"block text-2xl font-bold text-white",children:"2M+"}),s.jsx("span",{className:"text-indigo-300/60 text-xs",children:" "})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"block text-2xl font-bold text-white",children:"+35%"}),s.jsx("span",{className:"text-indigo-300/60 text-xs",children:" "})]})]})]}),s.jsx("div",{className:"absolute inset-0 opacity-20 mix-blend-overlay pointer-events-none",style:{backgroundImage:"radial-gradient(#fff 1px, transparent 1px)",backgroundSize:"32px 32px"}})]}),Sde=()=>{const{token:e}=$H(),t=Lw(),[r,n]=v.useState(!0),[a,l]=v.useState(!1),[c,d]=v.useState(""),[h,f]=v.useState(!1),[m,g]=v.useState(!1),[x,b]=v.useState(null),[j,w]=v.useState({fullName:"",password:"",confirmPassword:""});v.useEffect(()=>{(async()=>{if(!e){d("   "),n(!1);return}try{const C=await fetch(`/api/invitations/${e}`),E=await C.json();if(!C.ok)throw new Error(E.error||"  ");b(E.invitation)}catch(C){d(C.message)}finally{n(!1)}})()},[e]);const _=async N=>{if(N.preventDefault(),j.password!==j.confirmPassword){d("  ");return}if(j.password.length<6){d("    6 ");return}l(!0),d("");try{const C=await fetch(`/api/invitations/${e}/accept`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:j.fullName,password:j.password})}),E=await C.json();if(!C.ok)throw new Error(E.error||"  ");f(!0),setTimeout(()=>{t("/login")},3e3)}catch(C){d(C.message)}finally{l(!1)}};return r?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx(rt,{className:"w-12 h-12 text-brand-400 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-white/70",children:" ..."})]})}):c&&!x?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 max-w-md w-full text-center border border-white/20",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:s.jsx(nu,{className:"w-8 h-8 text-red-400"})}),s.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:"  "}),s.jsx("p",{className:"text-white/70 mb-6",children:c}),s.jsx(be,{onClick:()=>t("/login"),variant:"secondary",children:"  "})]})}):h?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 max-w-md w-full text-center border border-white/20",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-500/20 flex items-center justify-center",children:s.jsx(iw,{className:"w-8 h-8 text-emerald-400"})}),s.jsx("h1",{className:"text-xl font-bold text-white mb-2",children:" !"}),s.jsx("p",{className:"text-white/70 mb-2",children:"  "}),s.jsx("p",{className:"text-white/50 text-sm",children:"   ..."})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-2xl p-8 max-w-md w-full border border-white/20",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-brand-500 to-purple-600 flex items-center justify-center",children:s.jsx(ja,{className:"w-8 h-8 text-white"})}),s.jsxs("h1",{className:"text-2xl font-bold text-white mb-2",children:[" -",x==null?void 0:x.organizationName]}),s.jsxs("p",{className:"text-white/70",children:[" -",(x==null?void 0:x.role)==="manager"?"":" "]}),s.jsx("p",{className:"text-white/50 text-sm mt-1",dir:"ltr",children:x==null?void 0:x.email})]}),s.jsxs("form",{onSubmit:_,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx(Mn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),s.jsx("input",{type:"text",value:j.fullName,onChange:N=>w({...j,fullName:N.target.value}),placeholder:"  ",required:!0,className:"w-full pr-11 pl-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:""}),s.jsxs("div",{className:"relative",children:[s.jsx(h0,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),s.jsx("input",{type:m?"text":"password",value:j.password,onChange:N=>w({...j,password:N.target.value}),placeholder:" 6 ",required:!0,minLength:6,className:"w-full pr-11 pl-11 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all",dir:"ltr"}),s.jsx("button",{type:"button",onClick:()=>g(!m),className:"absolute left-3 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/60",children:m?s.jsx(_3,{className:"w-5 h-5"}):s.jsx(pm,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:" "}),s.jsxs("div",{className:"relative",children:[s.jsx(h0,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-white/40"}),s.jsx("input",{type:m?"text":"password",value:j.confirmPassword,onChange:N=>w({...j,confirmPassword:N.target.value}),placeholder:"  ",required:!0,className:"w-full pr-11 pl-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 outline-none focus:ring-2 focus:ring-brand-500 focus:border-transparent transition-all",dir:"ltr"})]})]}),c&&s.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-xl",children:s.jsx("p",{className:"text-sm text-red-300",children:c})}),s.jsx(be,{type:"submit",className:"w-full py-3.5 bg-gradient-to-r from-brand-500 to-purple-600 hover:from-brand-600 hover:to-purple-700",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx(rt,{className:"w-4 h-4 ml-2 animate-spin"})," ..."]}):"  "})]}),s.jsxs("p",{className:"text-center text-white/50 text-sm mt-6",children:["   ?"," ",s.jsx("a",{href:"/login",className:"text-brand-400 hover:text-brand-300",children:""})]})]})})};function Cde(){const[e,t]=v.useState(()=>(document.documentElement.classList.remove("dark"),!1)),r=()=>{t(te=>{const he=!te;return localStorage.setItem("isDarkMode",JSON.stringify(he)),he?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),he})};v.useEffect(()=>{console.log("[Theme] isDarkMode changed to:",e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[e]);const[n,a]=v.useState(!1),[l,c]=v.useState("dashboard"),[d,h]=v.useState(!1),[f,m]=v.useState(!1),[g,x]=v.useState(!1),[b,j]=v.useState(null),[w,_]=v.useState(!0),[N,C]=v.useState(null),[E,A]=v.useState(null),S=(E==null?void 0:E.id)||(b==null?void 0:b.organization_id),T=v.useMemo(()=>b?{...b,organization_id:S||b.organization_id,center_type:(E==null?void 0:E.center_type)||b.center_type||"sales"}:null,[b,S,E==null?void 0:E.center_type]),{callStatus:D,startCall:P,hangup:I,callSummary:$,clearSummary:M,initDevice:R,isReady:q,activeLeadId:H,callDuration:W,transcripts:L}=Sm(),B=D==="connected"||D==="dialing",[G,ce]=v.useState(!1);v.useEffect(()=>{(async()=>{var ye,Ne;try{_(!0);const{data:{session:ve}}=await me.auth.getSession();if(ve!=null&&ve.user){const{data:je,error:Q}=await me.from("profiles").select(`
              *,
              organization:organizations!organization_id(center_type)
            `).eq("id",ve.user.id).single();if(Q){console.error("Error fetching profile:",Q),C(Q.message),await me.auth.signOut();return}if(je){const _e={id:je.id,name:je.full_name||"User",email:je.email,avatar:je.avatar_url,role:je.role,type:je.role==="platform_admin"?"super_admin":je.role,organization_id:je.organization_id,center_type:(Array.isArray(je.organization)?(ye=je.organization[0])==null?void 0:ye.center_type:(Ne=je.organization)==null?void 0:Ne.center_type)||"sales"};j(_e),a(!0)}}}catch(ve){console.error("Auth Error",ve),C(ve.message)}finally{_(!1)}})();const{data:{subscription:he}}=me.auth.onAuthStateChange((ye,Ne)=>{Ne||(a(!1),j(null))});return()=>he.unsubscribe()},[]),v.useEffect(()=>{if(n&&!q){const te=()=>{R(),document.removeEventListener("click",te),document.removeEventListener("keydown",te)};return document.addEventListener("click",te,{once:!0}),document.addEventListener("keydown",te,{once:!0}),()=>{document.removeEventListener("click",te),document.removeEventListener("keydown",te)}}},[n,q]),v.useEffect(()=>{$&&ce(!0)},[$]);const ge=te=>{j(te),a(!0),c("dashboard")},U=async()=>{await me.auth.signOut(),a(!1),j(null)},V=te=>c(te);return w?s.jsx("div",{className:"h-screen flex items-center justify-center",children:s.jsx(rt,{className:"animate-spin w-8 h-8 text-indigo-600"})}):!n||!b?s.jsx(Nde,{onLogin:ge}):b.type==="super_admin"&&!E?s.jsx(_de,{onLogout:U,onImpersonate:(te,he,ye)=>A({id:te,name:he,center_type:ye})}):s.jsx("div",{className:`min-h-screen ${e?"dark":""}`,children:s.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 font-sans transition-colors duration-200 overflow-hidden",children:[s.jsx(r7,{activePage:l,onNavigate:V,userRole:b.type,centerType:T==null?void 0:T.center_type,isOpen:g,onClose:()=>x(!1)}),s.jsxs("div",{className:"flex flex-1 flex-col min-w-0",children:[s.jsx($U,{user:b,isDarkMode:e,toggleTheme:r,onNavigate:V,onOpenChat:()=>h(!0),onOpenReminders:()=>m(!0),onToggleMobileMenu:()=>x(!g),onLogout:U}),E&&s.jsxs("div",{className:"bg-amber-500 text-white px-4 py-2 text-center text-sm font-bold flex justify-between items-center z-50 shadow-sm relative sticker top-0",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})," Viewing as Manager: ",E.name]}),s.jsx("button",{onClick:()=>A(null),className:"bg-black/20 hover:bg-black/30 px-3 py-1 rounded text-xs transition-colors",children:"Exit Shadow Mode"})]}),s.jsx("main",{className:"flex flex-1 overflow-hidden relative",children:l==="dashboard"?b.type==="manager"||E?s.jsx(xce,{isDarkMode:e,orgId:(E==null?void 0:E.id)||b.organization_id,userName:b.name,centerType:T==null?void 0:T.center_type,onNavigate:V}):s.jsx(nce,{onStartCall:()=>{c("calls")},isDarkMode:e,userName:b.name,centerType:T==null?void 0:T.center_type,onNavigate:te=>c(te)}):l==="leads"?s.jsx(Tce,{isDarkMode:e,orgId:S,user:T}):l==="pipeline"?s.jsx(Oce,{isDarkMode:e,currentUser:T}):l==="settings"?s.jsx(Gce,{isDarkMode:e,user:b,onLogout:U,toggleTheme:r}):l==="tasks"?s.jsx(Xce,{isDarkMode:e,currentUser:T}):l==="targets"?b.type==="manager"?s.jsx(Qce,{isDarkMode:e,orgId:S}):s.jsx(Zce,{isDarkMode:e,onStartCall:(te,he)=>P(te,b.id,he),currentUser:T}):l==="chat"?s.jsx(ede,{isDarkMode:e,currentUser:T}):l==="gamification"?s.jsx(cde,{userId:b.id,orgId:S}):s.jsx(zq,{onStartCall:()=>{},isCallActive:B,onEndCall:I,currentUserId:b.id,orgId:S})})]}),s.jsx(tde,{currentUser:b,isOpen:d,onClose:()=>h(!1),orgId:S,activeContext:l==="calls"&&B?{type:"call",id:"c_active",label:" ",subLabel:"Running Call..."}:null}),s.jsx(aH,{leadName:H?"":"",leadId:H||"",callDuration:W,transcripts:L}),s.jsx(pde,{isOpen:f,onClose:()=>m(!1),userId:b==null?void 0:b.id,orgId:S})]})})}function Ede(){return s.jsx(wV,{children:s.jsxs(QH,{children:[s.jsx(ry,{path:"/invite/:token",element:s.jsx(Sde,{})}),s.jsx(ry,{path:"*",element:s.jsx(Mq,{children:s.jsx(Cde,{})})})]})})}const tR=document.getElementById("root");if(!tR)throw new Error("Could not find root element to mount to");const Ade=kI.createRoot(tR);Ade.render(s.jsx(Ur.StrictMode,{children:s.jsx(Ede,{})}));
